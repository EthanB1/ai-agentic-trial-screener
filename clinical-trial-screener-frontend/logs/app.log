2024-08-04 11:45:08,158 - app - INFO - Initializing Flask app...
2024-08-04 11:45:08,160 - app - INFO - Configuring app...
2024-08-04 11:45:08,160 - app - INFO - Setting up CORS...
2024-08-04 11:45:08,372 - app - INFO - Initializing JWT manager...
2024-08-04 11:45:08,372 - app - INFO - Setting up rate limiting...
2024-08-04 11:45:08,373 - app - INFO - Setting up database...
2024-08-04 11:45:08,374 - app - INFO - Starting database setup...
2024-08-04 11:45:09,378 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 11:45:09,379 - app - INFO - Database setup completed successfully
2024-08-04 11:45:09,379 - app - INFO - Registering error handler...
2024-08-04 11:45:09,379 - app - INFO - Initializing CLI commands...
2024-08-04 11:45:09,397 - app - INFO - Registering routes...
2024-08-04 11:45:09,426 - app - INFO - Initializing services...
2024-08-04 11:45:09,440 - app - INFO - Initializing email service...
2024-08-04 11:45:09,440 - app - INFO - Setting up scheduler...
2024-08-04 11:45:09,444 - app - INFO - Initializing scheduler...
2024-08-04 11:45:09,445 - app.scheduler - INFO - Scheduler initialized
2024-08-04 11:45:09,445 - app - INFO - Application initialized successfully
2024-08-04 11:45:23,714 - app - INFO - Initializing Flask app...
2024-08-04 11:45:23,716 - app - INFO - Configuring app...
2024-08-04 11:45:23,716 - app - INFO - Setting up CORS...
2024-08-04 11:45:24,020 - app - INFO - Initializing JWT manager...
2024-08-04 11:45:24,021 - app - INFO - Setting up rate limiting...
2024-08-04 11:45:24,022 - app - INFO - Setting up database...
2024-08-04 11:45:24,023 - app - INFO - Starting database setup...
2024-08-04 11:45:24,870 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 11:45:24,871 - app - INFO - Database setup completed successfully
2024-08-04 11:45:24,871 - app - INFO - Registering error handler...
2024-08-04 11:45:24,871 - app - INFO - Initializing CLI commands...
2024-08-04 11:45:24,872 - app - INFO - Registering routes...
2024-08-04 11:45:24,879 - app - INFO - Initializing services...
2024-08-04 11:45:24,893 - app - INFO - Initializing email service...
2024-08-04 11:45:24,893 - app - INFO - Setting up scheduler...
2024-08-04 11:45:24,898 - app - INFO - Initializing scheduler...
2024-08-04 11:45:24,899 - app.scheduler - INFO - Scheduler initialized
2024-08-04 11:45:24,900 - app - INFO - Application initialized successfully
2024-08-04 11:45:27,268 - app - INFO - Initializing Flask app...
2024-08-04 11:45:27,271 - app - INFO - Configuring app...
2024-08-04 11:45:27,272 - app - INFO - Setting up CORS...
2024-08-04 11:45:27,842 - app - INFO - Initializing JWT manager...
2024-08-04 11:45:27,843 - app - INFO - Setting up rate limiting...
2024-08-04 11:45:27,850 - app - INFO - Setting up database...
2024-08-04 11:45:27,850 - app - INFO - Starting database setup...
2024-08-04 11:45:28,646 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 11:45:28,646 - app - INFO - Database setup completed successfully
2024-08-04 11:45:28,646 - app - INFO - Registering error handler...
2024-08-04 11:45:28,647 - app - INFO - Initializing CLI commands...
2024-08-04 11:45:28,647 - app - INFO - Registering routes...
2024-08-04 11:45:28,656 - app - INFO - Initializing services...
2024-08-04 11:45:28,673 - app - INFO - Initializing email service...
2024-08-04 11:45:28,673 - app - INFO - Setting up scheduler...
2024-08-04 11:45:28,680 - app - INFO - Initializing scheduler...
2024-08-04 11:45:28,681 - app.scheduler - INFO - Scheduler initialized
2024-08-04 11:45:28,682 - app - INFO - Application initialized successfully
2024-08-04 11:45:38,426 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:45:39,352 - app.database - INFO - Database connection established successfully
2024-08-04 11:45:39,901 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 11:45:39,901 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:45:40,720 - app.database - INFO - Database connection established successfully
2024-08-04 11:45:40,803 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 11:45:40,820 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:45:41,670 - app.database - INFO - Database connection established successfully
2024-08-04 11:45:41,768 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 11:45:41,770 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:45:42,636 - app.database - INFO - Database connection established successfully
2024-08-04 11:45:42,719 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 11:45:42,747 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:45:43,515 - app.database - INFO - Database connection established successfully
2024-08-04 11:45:43,624 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:45:44,459 - app.database - INFO - Database connection established successfully
2024-08-04 11:45:44,565 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:45:45,360 - app.database - INFO - Database connection established successfully
2024-08-04 11:48:56,721 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:48:57,619 - app.database - INFO - Database connection established successfully
2024-08-04 11:48:57,902 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:48:58,711 - app.database - INFO - Database connection established successfully
2024-08-04 11:48:58,990 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 11:48:58,991 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:48:59,802 - app.database - INFO - Database connection established successfully
2024-08-04 11:48:59,874 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 11:48:59,882 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:49:00,635 - app.database - INFO - Database connection established successfully
2024-08-04 11:49:01,068 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 11:49:01,068 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:49:01,854 - app.database - INFO - Database connection established successfully
2024-08-04 11:49:01,933 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 11:49:01,943 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:49:02,740 - app.database - INFO - Database connection established successfully
2024-08-04 11:49:03,248 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 11:49:03,248 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:49:04,043 - app.database - INFO - Database connection established successfully
2024-08-04 11:49:04,125 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 11:49:04,134 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:49:04,954 - app.database - INFO - Database connection established successfully
2024-08-04 11:49:05,480 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:49:06,282 - app.database - INFO - Database connection established successfully
2024-08-04 11:49:07,514 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:49:08,305 - app.database - INFO - Database connection established successfully
2024-08-04 11:55:11,489 - app - INFO - Initializing Flask app...
2024-08-04 11:55:11,507 - app - INFO - Configuring app...
2024-08-04 11:55:11,507 - app - INFO - Setting up CORS...
2024-08-04 11:55:11,826 - app - INFO - Initializing JWT manager...
2024-08-04 11:55:11,826 - app - INFO - Setting up rate limiting...
2024-08-04 11:55:11,827 - app - INFO - Setting up database...
2024-08-04 11:55:11,827 - app - INFO - Starting database setup...
2024-08-04 11:55:12,755 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 11:55:12,756 - app - INFO - Database setup completed successfully
2024-08-04 11:55:12,756 - app - INFO - Registering error handler...
2024-08-04 11:55:12,756 - app - INFO - Initializing CLI commands...
2024-08-04 11:55:12,758 - app - INFO - Registering routes...
2024-08-04 11:55:12,778 - app - INFO - Initializing services...
2024-08-04 11:55:12,791 - app - INFO - Initializing email service...
2024-08-04 11:55:12,791 - app - INFO - Setting up scheduler...
2024-08-04 11:55:12,795 - app - INFO - Initializing scheduler...
2024-08-04 11:55:12,796 - app.scheduler - INFO - Scheduler initialized
2024-08-04 11:55:12,796 - app - INFO - Application initialized successfully
2024-08-04 11:55:15,342 - app - INFO - Initializing Flask app...
2024-08-04 11:55:15,344 - app - INFO - Configuring app...
2024-08-04 11:55:15,345 - app - INFO - Setting up CORS...
2024-08-04 11:55:15,812 - app - INFO - Initializing JWT manager...
2024-08-04 11:55:15,813 - app - INFO - Setting up rate limiting...
2024-08-04 11:55:15,814 - app - INFO - Setting up database...
2024-08-04 11:55:15,815 - app - INFO - Starting database setup...
2024-08-04 11:55:16,564 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 11:55:16,564 - app - INFO - Database setup completed successfully
2024-08-04 11:55:16,564 - app - INFO - Registering error handler...
2024-08-04 11:55:16,565 - app - INFO - Initializing CLI commands...
2024-08-04 11:55:16,565 - app - INFO - Registering routes...
2024-08-04 11:55:16,574 - app - INFO - Initializing services...
2024-08-04 11:55:16,587 - app - INFO - Initializing email service...
2024-08-04 11:55:16,588 - app - INFO - Setting up scheduler...
2024-08-04 11:55:16,594 - app - INFO - Initializing scheduler...
2024-08-04 11:55:16,595 - app.scheduler - INFO - Scheduler initialized
2024-08-04 11:55:16,596 - app - INFO - Application initialized successfully
2024-08-04 11:55:25,631 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:55:26,400 - app.database - INFO - Database connection established successfully
2024-08-04 11:55:36,045 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:55:36,927 - app.database - INFO - Database connection established successfully
2024-08-04 11:55:37,442 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 11:55:37,443 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:55:38,330 - app.database - INFO - Database connection established successfully
2024-08-04 11:55:38,411 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 11:55:38,440 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 11:55:38,440 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:55:39,356 - app.database - INFO - Database connection established successfully
2024-08-04 11:55:39,438 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 11:55:39,454 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:55:40,252 - app.database - INFO - Database connection established successfully
2024-08-04 11:55:40,356 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:55:41,206 - app.database - INFO - Database connection established successfully
2024-08-04 11:55:43,282 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 11:55:43,283 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:55:44,123 - app.database - INFO - Database connection established successfully
2024-08-04 11:55:44,205 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 11:55:44,227 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 11:55:44,229 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:55:45,074 - app.database - INFO - Database connection established successfully
2024-08-04 11:55:45,155 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 11:55:46,102 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:55:46,991 - app.database - INFO - Database connection established successfully
2024-08-04 11:55:47,108 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:55:47,863 - app.database - INFO - Database connection established successfully
2024-08-04 11:56:50,287 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:56:51,303 - app.database - INFO - Database connection established successfully
2024-08-04 11:56:51,842 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 11:56:51,843 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:56:52,626 - app.database - INFO - Database connection established successfully
2024-08-04 11:56:52,687 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 11:56:52,702 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:56:53,592 - app.database - INFO - Database connection established successfully
2024-08-04 11:56:54,092 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 11:56:54,092 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:56:54,910 - app.database - INFO - Database connection established successfully
2024-08-04 11:56:54,991 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 11:56:55,020 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:56:55,790 - app.database - INFO - Database connection established successfully
2024-08-04 11:56:57,389 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:56:58,216 - app.database - INFO - Database connection established successfully
2024-08-04 11:56:59,304 - app.database - INFO - Attempting to establish database connection...
2024-08-04 11:57:00,129 - app.database - INFO - Database connection established successfully
2024-08-04 12:02:49,853 - app - INFO - Initializing Flask app...
2024-08-04 12:02:49,855 - app - INFO - Configuring app...
2024-08-04 12:02:49,855 - app - INFO - Setting up CORS...
2024-08-04 12:02:50,082 - app - INFO - Initializing JWT manager...
2024-08-04 12:02:50,082 - app - INFO - Setting up rate limiting...
2024-08-04 12:02:50,083 - app - INFO - Setting up database...
2024-08-04 12:02:50,084 - app - INFO - Starting database setup...
2024-08-04 12:02:51,030 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:02:51,031 - app - INFO - Database setup completed successfully
2024-08-04 12:02:51,031 - app - INFO - Registering error handler...
2024-08-04 12:02:51,031 - app - INFO - Initializing CLI commands...
2024-08-04 12:02:51,032 - app - INFO - Registering routes...
2024-08-04 12:02:51,077 - app - INFO - Initializing services...
2024-08-04 12:02:51,088 - app - INFO - Initializing email service...
2024-08-04 12:02:51,088 - app - INFO - Setting up scheduler...
2024-08-04 12:02:51,091 - app - INFO - Initializing scheduler...
2024-08-04 12:02:51,093 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:02:51,093 - app - INFO - Application initialized successfully
2024-08-04 12:03:03,579 - app - INFO - Initializing Flask app...
2024-08-04 12:03:03,580 - app - INFO - Configuring app...
2024-08-04 12:03:03,580 - app - INFO - Setting up CORS...
2024-08-04 12:03:03,859 - app - INFO - Initializing JWT manager...
2024-08-04 12:03:03,861 - app - INFO - Setting up rate limiting...
2024-08-04 12:03:03,867 - app - INFO - Setting up database...
2024-08-04 12:03:03,868 - app - INFO - Starting database setup...
2024-08-04 12:03:04,655 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:03:04,656 - app - INFO - Database setup completed successfully
2024-08-04 12:03:04,656 - app - INFO - Registering error handler...
2024-08-04 12:03:04,656 - app - INFO - Initializing CLI commands...
2024-08-04 12:03:04,657 - app - INFO - Registering routes...
2024-08-04 12:03:04,662 - app - INFO - Initializing services...
2024-08-04 12:03:04,672 - app - INFO - Initializing email service...
2024-08-04 12:03:04,672 - app - INFO - Setting up scheduler...
2024-08-04 12:03:04,690 - app - INFO - Initializing scheduler...
2024-08-04 12:03:04,690 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:03:04,690 - app - INFO - Application initialized successfully
2024-08-04 12:03:06,948 - app - INFO - Initializing Flask app...
2024-08-04 12:03:06,950 - app - INFO - Configuring app...
2024-08-04 12:03:06,950 - app - INFO - Setting up CORS...
2024-08-04 12:03:07,453 - app - INFO - Initializing JWT manager...
2024-08-04 12:03:07,454 - app - INFO - Setting up rate limiting...
2024-08-04 12:03:07,455 - app - INFO - Setting up database...
2024-08-04 12:03:07,456 - app - INFO - Starting database setup...
2024-08-04 12:03:08,309 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:03:08,310 - app - INFO - Database setup completed successfully
2024-08-04 12:03:08,310 - app - INFO - Registering error handler...
2024-08-04 12:03:08,311 - app - INFO - Initializing CLI commands...
2024-08-04 12:03:08,311 - app - INFO - Registering routes...
2024-08-04 12:03:08,319 - app - INFO - Initializing services...
2024-08-04 12:03:08,348 - app - INFO - Initializing email service...
2024-08-04 12:03:08,349 - app - INFO - Setting up scheduler...
2024-08-04 12:03:08,354 - app - INFO - Initializing scheduler...
2024-08-04 12:03:08,355 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:03:08,356 - app - INFO - Application initialized successfully
2024-08-04 12:03:18,640 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:03:19,507 - app.database - INFO - Database connection established successfully
2024-08-04 12:03:20,025 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:03:20,026 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:03:20,852 - app.database - INFO - Database connection established successfully
2024-08-04 12:03:20,934 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:03:20,950 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:03:21,723 - app.database - INFO - Database connection established successfully
2024-08-04 12:03:22,157 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:03:22,157 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:03:22,929 - app.database - INFO - Database connection established successfully
2024-08-04 12:03:23,001 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:03:23,016 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:03:23,786 - app.database - INFO - Database connection established successfully
2024-08-04 12:03:24,317 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:03:25,156 - app.database - INFO - Database connection established successfully
2024-08-04 12:03:26,390 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:03:27,193 - app.database - INFO - Database connection established successfully
2024-08-04 12:04:09,168 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:04:10,101 - app.database - INFO - Database connection established successfully
2024-08-04 12:04:10,386 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 12:04:10,386 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:04:11,166 - app.database - INFO - Database connection established successfully
2024-08-04 12:04:11,239 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 12:04:11,249 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:04:12,063 - app.database - INFO - Database connection established successfully
2024-08-04 12:04:12,159 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 12:04:12,160 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:04:12,959 - app.database - INFO - Database connection established successfully
2024-08-04 12:04:13,030 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 12:04:13,039 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:04:13,803 - app.database - INFO - Database connection established successfully
2024-08-04 12:04:16,368 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:04:17,171 - app.database - INFO - Database connection established successfully
2024-08-04 12:04:17,257 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:04:18,050 - app.database - INFO - Database connection established successfully
2024-08-04 12:19:20,629 - app - INFO - Initializing Flask app...
2024-08-04 12:19:20,631 - app - INFO - Configuring app...
2024-08-04 12:19:20,632 - app - INFO - Setting up CORS...
2024-08-04 12:19:21,121 - app - INFO - Initializing JWT manager...
2024-08-04 12:19:21,122 - app - INFO - Setting up rate limiting...
2024-08-04 12:19:21,125 - app - INFO - Setting up database...
2024-08-04 12:19:21,126 - app - INFO - Starting database setup...
2024-08-04 12:19:22,076 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:19:22,076 - app - INFO - Database setup completed successfully
2024-08-04 12:19:22,077 - app - INFO - Registering error handler...
2024-08-04 12:19:22,077 - app - INFO - Initializing CLI commands...
2024-08-04 12:19:22,078 - app - INFO - Registering routes...
2024-08-04 12:19:22,116 - app - INFO - Initializing services...
2024-08-04 12:19:22,131 - app - INFO - Initializing email service...
2024-08-04 12:19:22,131 - app - INFO - Setting up scheduler...
2024-08-04 12:19:22,139 - app - INFO - Initializing scheduler...
2024-08-04 12:19:22,139 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:19:22,140 - app - INFO - Application initialized successfully
2024-08-04 12:19:34,129 - app - INFO - Initializing Flask app...
2024-08-04 12:19:34,131 - app - INFO - Configuring app...
2024-08-04 12:19:34,132 - app - INFO - Setting up CORS...
2024-08-04 12:19:34,481 - app - INFO - Initializing JWT manager...
2024-08-04 12:19:34,481 - app - INFO - Setting up rate limiting...
2024-08-04 12:19:34,483 - app - INFO - Setting up database...
2024-08-04 12:19:34,483 - app - INFO - Starting database setup...
2024-08-04 12:19:35,327 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:19:35,328 - app - INFO - Database setup completed successfully
2024-08-04 12:19:35,328 - app - INFO - Registering error handler...
2024-08-04 12:19:35,329 - app - INFO - Initializing CLI commands...
2024-08-04 12:19:35,329 - app - INFO - Registering routes...
2024-08-04 12:19:35,338 - app - INFO - Initializing services...
2024-08-04 12:19:35,356 - app - INFO - Initializing email service...
2024-08-04 12:19:35,356 - app - INFO - Setting up scheduler...
2024-08-04 12:19:35,362 - app - INFO - Initializing scheduler...
2024-08-04 12:19:35,363 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:19:35,364 - app - INFO - Application initialized successfully
2024-08-04 12:19:38,206 - app - INFO - Initializing Flask app...
2024-08-04 12:19:38,208 - app - INFO - Configuring app...
2024-08-04 12:19:38,208 - app - INFO - Setting up CORS...
2024-08-04 12:19:38,865 - app - INFO - Initializing JWT manager...
2024-08-04 12:19:38,865 - app - INFO - Setting up rate limiting...
2024-08-04 12:19:38,867 - app - INFO - Setting up database...
2024-08-04 12:19:38,868 - app - INFO - Starting database setup...
2024-08-04 12:19:39,677 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:19:39,677 - app - INFO - Database setup completed successfully
2024-08-04 12:19:39,678 - app - INFO - Registering error handler...
2024-08-04 12:19:39,678 - app - INFO - Initializing CLI commands...
2024-08-04 12:19:39,679 - app - INFO - Registering routes...
2024-08-04 12:19:39,692 - app - INFO - Initializing services...
2024-08-04 12:19:39,711 - app - INFO - Initializing email service...
2024-08-04 12:19:39,712 - app - INFO - Setting up scheduler...
2024-08-04 12:19:39,721 - app - INFO - Initializing scheduler...
2024-08-04 12:19:39,722 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:19:39,723 - app - INFO - Application initialized successfully
2024-08-04 12:19:48,157 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:19:49,041 - app.database - INFO - Database connection established successfully
2024-08-04 12:19:49,582 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 12:19:49,583 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:19:50,355 - app.database - INFO - Database connection established successfully
2024-08-04 12:19:50,428 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 12:19:50,450 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:19:51,263 - app.database - INFO - Database connection established successfully
2024-08-04 12:19:51,349 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 12:19:51,352 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:19:52,171 - app.database - INFO - Database connection established successfully
2024-08-04 12:19:52,253 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 12:19:52,273 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:19:53,039 - app.database - INFO - Database connection established successfully
2024-08-04 12:20:40,037 - app - INFO - Initializing Flask app...
2024-08-04 12:20:40,040 - app - INFO - Configuring app...
2024-08-04 12:20:40,041 - app - INFO - Setting up CORS...
2024-08-04 12:20:40,320 - app - INFO - Initializing JWT manager...
2024-08-04 12:20:40,320 - app - INFO - Setting up rate limiting...
2024-08-04 12:20:40,324 - app - INFO - Setting up database...
2024-08-04 12:20:40,324 - app - INFO - Starting database setup...
2024-08-04 12:20:41,208 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:20:41,212 - app - INFO - Database setup completed successfully
2024-08-04 12:20:41,212 - app - INFO - Registering error handler...
2024-08-04 12:20:41,212 - app - INFO - Initializing CLI commands...
2024-08-04 12:20:41,214 - app - INFO - Registering routes...
2024-08-04 12:20:41,222 - app - INFO - Initializing services...
2024-08-04 12:20:41,240 - app - INFO - Initializing email service...
2024-08-04 12:20:41,240 - app - INFO - Setting up scheduler...
2024-08-04 12:20:41,249 - app - INFO - Initializing scheduler...
2024-08-04 12:20:41,250 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:20:41,250 - app - INFO - Application initialized successfully
2024-08-04 12:20:43,927 - app - INFO - Initializing Flask app...
2024-08-04 12:20:43,929 - app - INFO - Configuring app...
2024-08-04 12:20:43,929 - app - INFO - Setting up CORS...
2024-08-04 12:20:44,484 - app - INFO - Initializing JWT manager...
2024-08-04 12:20:44,485 - app - INFO - Setting up rate limiting...
2024-08-04 12:20:44,486 - app - INFO - Setting up database...
2024-08-04 12:20:44,488 - app - INFO - Starting database setup...
2024-08-04 12:20:45,318 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:20:45,318 - app - INFO - Database setup completed successfully
2024-08-04 12:20:45,319 - app - INFO - Registering error handler...
2024-08-04 12:20:45,319 - app - INFO - Initializing CLI commands...
2024-08-04 12:20:45,320 - app - INFO - Registering routes...
2024-08-04 12:20:45,330 - app - INFO - Initializing services...
2024-08-04 12:20:45,345 - app - INFO - Initializing email service...
2024-08-04 12:20:45,347 - app - INFO - Setting up scheduler...
2024-08-04 12:20:45,355 - app - INFO - Initializing scheduler...
2024-08-04 12:20:45,356 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:20:45,356 - app - INFO - Application initialized successfully
2024-08-04 12:20:58,932 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:20:59,779 - app.database - INFO - Database connection established successfully
2024-08-04 12:21:00,332 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:21:00,333 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:21:01,166 - app.database - INFO - Database connection established successfully
2024-08-04 12:21:01,248 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:21:01,268 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:21:02,051 - app.database - INFO - Database connection established successfully
2024-08-04 12:21:02,501 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:21:02,502 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:21:03,384 - app.database - INFO - Database connection established successfully
2024-08-04 12:21:03,466 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:21:03,481 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:21:04,329 - app.database - INFO - Database connection established successfully
2024-08-04 12:31:21,883 - app - INFO - Initializing Flask app...
2024-08-04 12:31:21,885 - app - INFO - Configuring app...
2024-08-04 12:31:21,886 - app - INFO - Setting up CORS...
2024-08-04 12:31:22,335 - app - INFO - Initializing JWT manager...
2024-08-04 12:31:22,336 - app - INFO - Setting up rate limiting...
2024-08-04 12:31:22,338 - app - INFO - Setting up database...
2024-08-04 12:31:22,339 - app - INFO - Starting database setup...
2024-08-04 12:31:23,316 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:31:23,316 - app - INFO - Database setup completed successfully
2024-08-04 12:31:23,317 - app - INFO - Registering error handler...
2024-08-04 12:31:23,318 - app - INFO - Initializing CLI commands...
2024-08-04 12:31:23,318 - app - INFO - Registering routes...
2024-08-04 12:31:23,367 - app - INFO - Initializing services...
2024-08-04 12:31:23,384 - app - INFO - Initializing email service...
2024-08-04 12:31:23,385 - app - INFO - Setting up scheduler...
2024-08-04 12:31:23,391 - app - INFO - Initializing scheduler...
2024-08-04 12:31:23,392 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:31:23,393 - app - INFO - Application initialized successfully
2024-08-04 12:31:35,833 - app - INFO - Initializing Flask app...
2024-08-04 12:31:35,836 - app - INFO - Configuring app...
2024-08-04 12:31:35,836 - app - INFO - Setting up CORS...
2024-08-04 12:31:36,141 - app - INFO - Initializing JWT manager...
2024-08-04 12:31:36,142 - app - INFO - Setting up rate limiting...
2024-08-04 12:31:36,143 - app - INFO - Setting up database...
2024-08-04 12:31:36,144 - app - INFO - Starting database setup...
2024-08-04 12:31:36,959 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:31:36,959 - app - INFO - Database setup completed successfully
2024-08-04 12:31:36,960 - app - INFO - Registering error handler...
2024-08-04 12:31:36,960 - app - INFO - Initializing CLI commands...
2024-08-04 12:31:36,960 - app - INFO - Registering routes...
2024-08-04 12:31:36,969 - app - INFO - Initializing services...
2024-08-04 12:31:36,988 - app - INFO - Initializing email service...
2024-08-04 12:31:36,990 - app - INFO - Setting up scheduler...
2024-08-04 12:31:36,994 - app - INFO - Initializing scheduler...
2024-08-04 12:31:36,995 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:31:36,996 - app - INFO - Application initialized successfully
2024-08-04 12:31:39,344 - app - INFO - Initializing Flask app...
2024-08-04 12:31:39,348 - app - INFO - Configuring app...
2024-08-04 12:31:39,349 - app - INFO - Setting up CORS...
2024-08-04 12:31:40,033 - app - INFO - Initializing JWT manager...
2024-08-04 12:31:40,034 - app - INFO - Setting up rate limiting...
2024-08-04 12:31:40,036 - app - INFO - Setting up database...
2024-08-04 12:31:40,037 - app - INFO - Starting database setup...
2024-08-04 12:31:40,926 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:31:40,926 - app - INFO - Database setup completed successfully
2024-08-04 12:31:40,927 - app - INFO - Registering error handler...
2024-08-04 12:31:40,927 - app - INFO - Initializing CLI commands...
2024-08-04 12:31:40,928 - app - INFO - Registering routes...
2024-08-04 12:31:40,941 - app - INFO - Initializing services...
2024-08-04 12:31:40,965 - app - INFO - Initializing email service...
2024-08-04 12:31:40,966 - app - INFO - Setting up scheduler...
2024-08-04 12:31:40,974 - app - INFO - Initializing scheduler...
2024-08-04 12:31:40,979 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:31:40,980 - app - INFO - Application initialized successfully
2024-08-04 12:31:50,856 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:31:51,701 - app.database - INFO - Database connection established successfully
2024-08-04 12:31:52,273 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 12:31:52,274 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:31:53,082 - app.database - INFO - Database connection established successfully
2024-08-04 12:31:53,155 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 12:31:53,178 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:31:54,065 - app.database - INFO - Database connection established successfully
2024-08-04 12:31:54,173 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 12:31:54,174 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:31:54,986 - app.database - INFO - Database connection established successfully
2024-08-04 12:31:55,059 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 12:31:55,075 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:31:55,942 - app.database - INFO - Database connection established successfully
2024-08-04 12:31:56,079 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:31:56,865 - app.database - INFO - Database connection established successfully
2024-08-04 12:31:56,964 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:31:57,847 - app.database - INFO - Database connection established successfully
2024-08-04 12:35:01,744 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:35:02,832 - app.database - INFO - Database connection established successfully
2024-08-04 12:35:03,212 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:35:03,213 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:35:04,027 - app.database - INFO - Database connection established successfully
2024-08-04 12:35:04,109 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:35:04,134 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:35:05,022 - app.database - INFO - Database connection established successfully
2024-08-04 12:35:05,549 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:35:05,553 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:35:06,425 - app.database - INFO - Database connection established successfully
2024-08-04 12:35:06,507 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:35:06,525 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:35:07,342 - app.database - INFO - Database connection established successfully
2024-08-04 12:35:07,868 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:35:08,707 - app.database - INFO - Database connection established successfully
2024-08-04 12:35:08,801 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:35:09,636 - app.database - INFO - Database connection established successfully
2024-08-04 12:35:14,096 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:35:15,024 - app.database - INFO - Database connection established successfully
2024-08-04 12:43:11,713 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:43:12,686 - app.database - INFO - Database connection established successfully
2024-08-04 12:43:13,259 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 12:43:13,259 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:43:14,088 - app.database - INFO - Database connection established successfully
2024-08-04 12:43:14,171 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 12:43:14,194 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:43:14,968 - app.database - INFO - Database connection established successfully
2024-08-04 12:43:15,080 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 12:43:15,080 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:43:15,863 - app.database - INFO - Database connection established successfully
2024-08-04 12:43:15,935 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 12:43:15,950 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:43:16,758 - app.database - INFO - Database connection established successfully
2024-08-04 12:43:46,078 - app - INFO - Initializing Flask app...
2024-08-04 12:43:46,080 - app - INFO - Configuring app...
2024-08-04 12:43:46,081 - app - INFO - Setting up CORS...
2024-08-04 12:43:46,358 - app - INFO - Initializing JWT manager...
2024-08-04 12:43:46,358 - app - INFO - Setting up rate limiting...
2024-08-04 12:43:46,359 - app - INFO - Setting up database...
2024-08-04 12:43:46,360 - app - INFO - Starting database setup...
2024-08-04 12:43:47,219 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:43:47,220 - app - INFO - Database setup completed successfully
2024-08-04 12:43:47,220 - app - INFO - Registering error handler...
2024-08-04 12:43:47,221 - app - INFO - Initializing CLI commands...
2024-08-04 12:43:47,221 - app - INFO - Registering routes...
2024-08-04 12:43:47,234 - app - INFO - Initializing services...
2024-08-04 12:43:47,250 - app - INFO - Initializing email service...
2024-08-04 12:43:47,251 - app - INFO - Setting up scheduler...
2024-08-04 12:43:47,257 - app - INFO - Initializing scheduler...
2024-08-04 12:43:47,258 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:43:47,259 - app - INFO - Application initialized successfully
2024-08-04 12:43:50,166 - app - INFO - Initializing Flask app...
2024-08-04 12:43:50,169 - app - INFO - Configuring app...
2024-08-04 12:43:50,170 - app - INFO - Setting up CORS...
2024-08-04 12:43:50,574 - app - INFO - Initializing JWT manager...
2024-08-04 12:43:50,576 - app - INFO - Setting up rate limiting...
2024-08-04 12:43:50,577 - app - INFO - Setting up database...
2024-08-04 12:43:50,578 - app - INFO - Starting database setup...
2024-08-04 12:43:51,419 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:43:51,420 - app - INFO - Database setup completed successfully
2024-08-04 12:43:51,420 - app - INFO - Registering error handler...
2024-08-04 12:43:51,421 - app - INFO - Initializing CLI commands...
2024-08-04 12:43:51,421 - app - INFO - Registering routes...
2024-08-04 12:43:51,431 - app - INFO - Initializing services...
2024-08-04 12:43:51,450 - app - INFO - Initializing email service...
2024-08-04 12:43:51,450 - app - INFO - Setting up scheduler...
2024-08-04 12:43:51,456 - app - INFO - Initializing scheduler...
2024-08-04 12:43:51,457 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:43:51,457 - app - INFO - Application initialized successfully
2024-08-04 12:44:07,895 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:44:08,693 - app.database - INFO - Database connection established successfully
2024-08-04 12:44:09,245 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:44:09,245 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:44:10,125 - app.database - INFO - Database connection established successfully
2024-08-04 12:44:10,207 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:44:10,234 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:44:11,075 - app.database - INFO - Database connection established successfully
2024-08-04 12:44:11,591 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:44:11,595 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:44:12,460 - app.database - INFO - Database connection established successfully
2024-08-04 12:44:12,532 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:44:12,548 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:44:13,544 - app.database - INFO - Database connection established successfully
2024-08-04 12:44:49,347 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:44:49,348 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:44:50,257 - app.database - INFO - Database connection established successfully
2024-08-04 12:44:50,339 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:44:50,364 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:44:51,168 - app.database - INFO - Database connection established successfully
2024-08-04 12:44:51,620 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:44:51,622 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:44:52,438 - app.database - INFO - Database connection established successfully
2024-08-04 12:44:52,519 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-04 12:44:52,540 - app.database - INFO - Attempting to establish database connection...
2024-08-04 12:44:53,417 - app.database - INFO - Database connection established successfully
2024-08-04 12:52:42,242 - app - INFO - Initializing Flask app...
2024-08-04 12:52:42,244 - app - INFO - Configuring app...
2024-08-04 12:52:42,244 - app - INFO - Setting up CORS...
2024-08-04 12:52:42,524 - app - INFO - Initializing JWT manager...
2024-08-04 12:52:42,525 - app - INFO - Setting up rate limiting...
2024-08-04 12:52:42,526 - app - INFO - Setting up database...
2024-08-04 12:52:42,526 - app - INFO - Starting database setup...
2024-08-04 12:52:43,476 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:52:43,476 - app - INFO - Database setup completed successfully
2024-08-04 12:52:43,477 - app - INFO - Registering error handler...
2024-08-04 12:52:43,477 - app - INFO - Initializing CLI commands...
2024-08-04 12:52:43,477 - app - INFO - Registering routes...
2024-08-04 12:52:43,485 - app - INFO - Initializing services...
2024-08-04 12:52:43,497 - app - INFO - Initializing email service...
2024-08-04 12:52:43,497 - app - INFO - Setting up scheduler...
2024-08-04 12:52:43,502 - app - INFO - Initializing scheduler...
2024-08-04 12:52:43,502 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:52:43,502 - app - INFO - Application initialized successfully
2024-08-04 12:54:05,663 - app - INFO - Initializing Flask app...
2024-08-04 12:54:05,664 - app - INFO - Configuring app...
2024-08-04 12:54:05,665 - app - INFO - Setting up CORS...
2024-08-04 12:54:05,860 - app - INFO - Initializing JWT manager...
2024-08-04 12:54:05,860 - app - INFO - Setting up rate limiting...
2024-08-04 12:54:05,861 - app - INFO - Setting up database...
2024-08-04 12:54:05,861 - app - INFO - Starting database setup...
2024-08-04 12:54:06,717 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:54:06,718 - app - INFO - Database setup completed successfully
2024-08-04 12:54:06,718 - app - INFO - Registering error handler...
2024-08-04 12:54:06,718 - app - INFO - Initializing CLI commands...
2024-08-04 12:54:06,718 - app - INFO - Registering routes...
2024-08-04 12:54:06,724 - app - INFO - Initializing services...
2024-08-04 12:54:06,734 - app - INFO - Initializing email service...
2024-08-04 12:54:06,734 - app - INFO - Setting up scheduler...
2024-08-04 12:54:06,739 - app - INFO - Initializing scheduler...
2024-08-04 12:54:06,739 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:54:06,739 - app - INFO - Application initialized successfully
2024-08-04 12:54:08,367 - app - INFO - Initializing Flask app...
2024-08-04 12:54:08,368 - app - INFO - Configuring app...
2024-08-04 12:54:08,369 - app - INFO - Setting up CORS...
2024-08-04 12:54:08,602 - app - INFO - Initializing JWT manager...
2024-08-04 12:54:08,602 - app - INFO - Setting up rate limiting...
2024-08-04 12:54:08,603 - app - INFO - Setting up database...
2024-08-04 12:54:08,603 - app - INFO - Starting database setup...
2024-08-04 12:54:09,370 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:54:09,371 - app - INFO - Database setup completed successfully
2024-08-04 12:54:09,371 - app - INFO - Registering error handler...
2024-08-04 12:54:09,371 - app - INFO - Initializing CLI commands...
2024-08-04 12:54:09,371 - app - INFO - Registering routes...
2024-08-04 12:54:09,379 - app - INFO - Initializing services...
2024-08-04 12:54:09,387 - app - INFO - Initializing email service...
2024-08-04 12:54:09,387 - app - INFO - Setting up scheduler...
2024-08-04 12:54:09,392 - app - INFO - Initializing scheduler...
2024-08-04 12:54:09,392 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:54:09,392 - app - INFO - Application initialized successfully
2024-08-04 12:55:13,343 - app - INFO - Initializing Flask app...
2024-08-04 12:55:13,344 - app - INFO - Configuring app...
2024-08-04 12:55:13,345 - app - INFO - Setting up CORS...
2024-08-04 12:55:13,542 - app - INFO - Initializing JWT manager...
2024-08-04 12:55:13,542 - app - INFO - Setting up rate limiting...
2024-08-04 12:55:13,544 - app - INFO - Setting up database...
2024-08-04 12:55:13,544 - app - INFO - Starting database setup...
2024-08-04 12:55:14,593 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:55:14,593 - app - INFO - Database setup completed successfully
2024-08-04 12:55:14,594 - app - INFO - Registering error handler...
2024-08-04 12:55:14,594 - app - INFO - Initializing CLI commands...
2024-08-04 12:55:14,594 - app - INFO - Registering routes...
2024-08-04 12:55:14,600 - app - INFO - Initializing services...
2024-08-04 12:55:14,610 - app - INFO - Initializing email service...
2024-08-04 12:55:14,610 - app - INFO - Setting up scheduler...
2024-08-04 12:55:14,614 - app - INFO - Initializing scheduler...
2024-08-04 12:55:14,614 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:55:14,615 - app - INFO - Application initialized successfully
2024-08-04 12:55:16,182 - app - INFO - Initializing Flask app...
2024-08-04 12:55:16,182 - app - INFO - Configuring app...
2024-08-04 12:55:16,182 - app - INFO - Setting up CORS...
2024-08-04 12:55:16,378 - app - INFO - Initializing JWT manager...
2024-08-04 12:55:16,378 - app - INFO - Setting up rate limiting...
2024-08-04 12:55:16,379 - app - INFO - Setting up database...
2024-08-04 12:55:16,380 - app - INFO - Starting database setup...
2024-08-04 12:55:17,195 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 12:55:17,195 - app - INFO - Database setup completed successfully
2024-08-04 12:55:17,196 - app - INFO - Registering error handler...
2024-08-04 12:55:17,196 - app - INFO - Initializing CLI commands...
2024-08-04 12:55:17,196 - app - INFO - Registering routes...
2024-08-04 12:55:17,203 - app - INFO - Initializing services...
2024-08-04 12:55:17,214 - app - INFO - Initializing email service...
2024-08-04 12:55:17,214 - app - INFO - Setting up scheduler...
2024-08-04 12:55:17,218 - app - INFO - Initializing scheduler...
2024-08-04 12:55:17,219 - app.scheduler - INFO - Scheduler initialized
2024-08-04 12:55:17,219 - app - INFO - Application initialized successfully
2024-08-04 13:00:49,434 - app - INFO - Initializing Flask app...
2024-08-04 13:00:49,435 - app - INFO - Configuring app...
2024-08-04 13:00:49,436 - app - INFO - Setting up CORS...
2024-08-04 13:00:49,680 - app - INFO - Initializing JWT manager...
2024-08-04 13:00:49,681 - app - INFO - Setting up rate limiting...
2024-08-04 13:00:49,681 - app - INFO - Setting up database...
2024-08-04 13:00:49,681 - app - INFO - Starting database setup...
2024-08-04 13:00:50,565 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 13:00:50,566 - app - INFO - Database setup completed successfully
2024-08-04 13:00:50,566 - app - INFO - Registering error handler...
2024-08-04 13:00:50,567 - app - INFO - Initializing CLI commands...
2024-08-04 13:00:50,567 - app - INFO - Registering routes...
2024-08-04 13:00:50,575 - app - INFO - Initializing services...
2024-08-04 13:00:50,586 - app - INFO - Initializing email service...
2024-08-04 13:00:50,586 - app - INFO - Setting up scheduler...
2024-08-04 13:00:50,591 - app - INFO - Initializing scheduler...
2024-08-04 13:00:50,591 - app.scheduler - INFO - Scheduler initialized
2024-08-04 13:00:50,592 - app - INFO - Application initialized successfully
2024-08-04 13:02:46,621 - app - INFO - Initializing Flask app...
2024-08-04 13:02:46,622 - app - INFO - Configuring app...
2024-08-04 13:02:46,623 - app - INFO - Setting up CORS...
2024-08-04 13:02:46,816 - app - INFO - Initializing JWT manager...
2024-08-04 13:02:46,817 - app - INFO - Setting up rate limiting...
2024-08-04 13:02:46,818 - app - INFO - Setting up database...
2024-08-04 13:02:46,818 - app - INFO - Starting database setup...
2024-08-04 13:02:47,779 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 13:02:47,779 - app - INFO - Database setup completed successfully
2024-08-04 13:02:47,779 - app - INFO - Registering error handler...
2024-08-04 13:02:47,780 - app - INFO - Initializing CLI commands...
2024-08-04 13:02:47,780 - app - INFO - Registering routes...
2024-08-04 13:02:47,785 - app - INFO - Initializing services...
2024-08-04 13:02:47,795 - app - INFO - Initializing email service...
2024-08-04 13:02:47,796 - app - INFO - Setting up scheduler...
2024-08-04 13:02:47,799 - app - INFO - Initializing scheduler...
2024-08-04 13:02:47,800 - app.scheduler - INFO - Scheduler initialized
2024-08-04 13:02:47,800 - app - INFO - Application initialized successfully
2024-08-04 13:02:49,409 - app - INFO - Initializing Flask app...
2024-08-04 13:02:49,410 - app - INFO - Configuring app...
2024-08-04 13:02:49,410 - app - INFO - Setting up CORS...
2024-08-04 13:02:49,631 - app - INFO - Initializing JWT manager...
2024-08-04 13:02:49,631 - app - INFO - Setting up rate limiting...
2024-08-04 13:02:49,632 - app - INFO - Setting up database...
2024-08-04 13:02:49,633 - app - INFO - Starting database setup...
2024-08-04 13:02:50,438 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-04 13:02:50,438 - app - INFO - Database setup completed successfully
2024-08-04 13:02:50,439 - app - INFO - Registering error handler...
2024-08-04 13:02:50,439 - app - INFO - Initializing CLI commands...
2024-08-04 13:02:50,439 - app - INFO - Registering routes...
2024-08-04 13:02:50,446 - app - INFO - Initializing services...
2024-08-04 13:02:50,456 - app - INFO - Initializing email service...
2024-08-04 13:02:50,457 - app - INFO - Setting up scheduler...
2024-08-04 13:02:50,460 - app - INFO - Initializing scheduler...
2024-08-04 13:02:50,461 - app.scheduler - INFO - Scheduler initialized
2024-08-04 13:02:50,461 - app - INFO - Application initialized successfully
2024-08-04 13:03:00,576 - app.database - INFO - Attempting to establish database connection...
2024-08-04 13:03:01,350 - app.database - INFO - Database connection established successfully
2024-08-04 13:03:07,624 - app.database - INFO - Attempting to establish database connection...
2024-08-04 13:03:08,441 - app.database - INFO - Database connection established successfully
2024-08-04 13:03:08,721 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 13:03:08,721 - app.database - INFO - Attempting to establish database connection...
2024-08-04 13:03:09,467 - app.database - INFO - Database connection established successfully
2024-08-04 13:03:09,540 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 13:03:09,549 - app.database - INFO - Attempting to establish database connection...
2024-08-04 13:03:10,308 - app.database - INFO - Database connection established successfully
2024-08-04 13:03:10,386 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-04 13:03:10,386 - app.database - INFO - Attempting to establish database connection...
2024-08-04 13:03:11,202 - app.database - INFO - Database connection established successfully
2024-08-04 13:03:11,282 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-04 13:03:11,288 - app.database - INFO - Attempting to establish database connection...
2024-08-04 13:03:12,068 - app.database - INFO - Database connection established successfully
2024-08-05 21:12:05,845 - app - INFO - Initializing Flask app...
2024-08-05 21:12:05,847 - app - INFO - Configuring app...
2024-08-05 21:12:05,847 - app - INFO - Setting up CORS...
2024-08-05 21:12:06,425 - app - INFO - Initializing JWT manager...
2024-08-05 21:12:06,426 - app - INFO - Setting up rate limiting...
2024-08-05 21:12:06,427 - app - INFO - Setting up database...
2024-08-05 21:12:06,427 - app - INFO - Starting database setup...
2024-08-05 21:12:07,248 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 21:12:07,249 - app - INFO - Database setup completed successfully
2024-08-05 21:12:07,249 - app - INFO - Registering error handler...
2024-08-05 21:12:07,250 - app - INFO - Initializing CLI commands...
2024-08-05 21:12:07,250 - app - INFO - Registering routes...
2024-08-05 21:12:07,260 - app - INFO - Initializing services...
2024-08-05 21:12:07,285 - app - INFO - Initializing email service...
2024-08-05 21:12:07,285 - app - INFO - Setting up scheduler...
2024-08-05 21:12:07,300 - app - INFO - Initializing scheduler...
2024-08-05 21:12:07,301 - app.scheduler - INFO - Scheduler initialized
2024-08-05 21:12:07,302 - app - INFO - Application initialized successfully
2024-08-05 21:12:30,112 - app - INFO - Initializing Flask app...
2024-08-05 21:12:30,113 - app - INFO - Configuring app...
2024-08-05 21:12:30,115 - app - INFO - Setting up CORS...
2024-08-05 21:12:30,389 - app - INFO - Initializing JWT manager...
2024-08-05 21:12:30,391 - app - INFO - Setting up rate limiting...
2024-08-05 21:12:30,392 - app - INFO - Setting up database...
2024-08-05 21:12:30,393 - app - INFO - Starting database setup...
2024-08-05 21:12:31,493 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 21:12:31,493 - app - INFO - Database setup completed successfully
2024-08-05 21:12:31,494 - app - INFO - Registering error handler...
2024-08-05 21:12:31,495 - app - INFO - Initializing CLI commands...
2024-08-05 21:12:31,495 - app - INFO - Registering routes...
2024-08-05 21:12:31,501 - app - INFO - Initializing services...
2024-08-05 21:12:31,513 - app - INFO - Initializing email service...
2024-08-05 21:12:31,514 - app - INFO - Setting up scheduler...
2024-08-05 21:12:31,517 - app - INFO - Initializing scheduler...
2024-08-05 21:12:31,518 - app.scheduler - INFO - Scheduler initialized
2024-08-05 21:12:31,518 - app - INFO - Application initialized successfully
2024-08-05 21:12:33,203 - app - INFO - Initializing Flask app...
2024-08-05 21:12:33,205 - app - INFO - Configuring app...
2024-08-05 21:12:33,205 - app - INFO - Setting up CORS...
2024-08-05 21:12:33,580 - app - INFO - Initializing JWT manager...
2024-08-05 21:12:33,581 - app - INFO - Setting up rate limiting...
2024-08-05 21:12:33,582 - app - INFO - Setting up database...
2024-08-05 21:12:33,582 - app - INFO - Starting database setup...
2024-08-05 21:12:34,368 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 21:12:34,368 - app - INFO - Database setup completed successfully
2024-08-05 21:12:34,368 - app - INFO - Registering error handler...
2024-08-05 21:12:34,369 - app - INFO - Initializing CLI commands...
2024-08-05 21:12:34,369 - app - INFO - Registering routes...
2024-08-05 21:12:34,377 - app - INFO - Initializing services...
2024-08-05 21:12:34,391 - app - INFO - Initializing email service...
2024-08-05 21:12:34,391 - app - INFO - Setting up scheduler...
2024-08-05 21:12:34,396 - app - INFO - Initializing scheduler...
2024-08-05 21:12:34,397 - app.scheduler - INFO - Scheduler initialized
2024-08-05 21:12:34,397 - app - INFO - Application initialized successfully
2024-08-05 21:13:21,497 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:22,179 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:28,400 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:29,035 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:29,352 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-05 21:13:29,352 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:29,993 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:30,048 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-05 21:13:30,059 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:30,656 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:30,711 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-05 21:13:30,713 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:31,307 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:31,352 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-05 21:13:31,380 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:31,946 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:38,657 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-05 21:13:38,657 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:39,219 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:39,299 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-05 21:13:39,313 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:39,938 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:39,993 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-05 21:13:39,994 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:40,546 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:40,608 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-05 21:13:40,621 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:41,262 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:41,903 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-05 21:13:41,904 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:42,550 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:42,589 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-05 21:13:42,614 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-05 21:13:42,614 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:13:43,291 - app.database - INFO - Database connection established successfully
2024-08-05 21:13:43,343 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-05 21:17:18,592 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:17:19,243 - app.database - INFO - Database connection established successfully
2024-08-05 21:17:19,560 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-05 21:17:19,560 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:17:22,207 - app.database - INFO - Database connection established successfully
2024-08-05 21:17:22,281 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-05 21:17:22,290 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:17:22,888 - app.database - INFO - Database connection established successfully
2024-08-05 21:17:23,207 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-05 21:17:23,207 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:17:23,728 - app.database - INFO - Database connection established successfully
2024-08-05 21:17:23,772 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-05 21:17:23,786 - app.database - INFO - Attempting to establish database connection...
2024-08-05 21:17:24,361 - app.database - INFO - Database connection established successfully
2024-08-05 21:21:12,042 - app - INFO - Initializing Flask app...
2024-08-05 21:21:12,043 - app - INFO - Configuring app...
2024-08-05 21:21:12,044 - app - INFO - Setting up CORS...
2024-08-05 21:21:12,322 - app - INFO - Initializing JWT manager...
2024-08-05 21:21:12,322 - app - INFO - Setting up rate limiting...
2024-08-05 21:21:12,323 - app - INFO - Setting up database...
2024-08-05 21:21:12,324 - app - INFO - Starting database setup...
2024-08-05 21:21:13,070 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 21:21:13,071 - app - INFO - Database setup completed successfully
2024-08-05 21:21:13,071 - app - INFO - Registering error handler...
2024-08-05 21:21:13,071 - app - INFO - Initializing CLI commands...
2024-08-05 21:21:13,073 - app - INFO - Registering routes...
2024-08-05 21:21:22,880 - app - INFO - Initializing Flask app...
2024-08-05 21:21:22,882 - app - INFO - Configuring app...
2024-08-05 21:21:22,883 - app - INFO - Setting up CORS...
2024-08-05 21:21:23,131 - app - INFO - Initializing JWT manager...
2024-08-05 21:21:23,132 - app - INFO - Setting up rate limiting...
2024-08-05 21:21:23,133 - app - INFO - Setting up database...
2024-08-05 21:21:23,133 - app - INFO - Starting database setup...
2024-08-05 21:21:23,815 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 21:21:23,815 - app - INFO - Database setup completed successfully
2024-08-05 21:21:23,816 - app - INFO - Registering error handler...
2024-08-05 21:21:23,816 - app - INFO - Initializing CLI commands...
2024-08-05 21:21:23,817 - app - INFO - Registering routes...
2024-08-05 21:23:07,451 - app - INFO - Initializing Flask app...
2024-08-05 21:23:07,453 - app - INFO - Configuring app...
2024-08-05 21:23:07,453 - app - INFO - Setting up CORS...
2024-08-05 21:23:07,805 - app - INFO - Initializing JWT manager...
2024-08-05 21:23:07,806 - app - INFO - Setting up rate limiting...
2024-08-05 21:23:07,806 - app - INFO - Setting up database...
2024-08-05 21:23:07,807 - app - INFO - Starting database setup...
2024-08-05 21:23:08,547 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 21:23:08,548 - app - INFO - Database setup completed successfully
2024-08-05 21:23:08,548 - app - INFO - Registering error handler...
2024-08-05 21:23:08,548 - app - INFO - Initializing CLI commands...
2024-08-05 21:23:08,549 - app - INFO - Registering routes...
2024-08-05 21:23:08,572 - app - INFO - Initializing services...
2024-08-05 21:23:08,586 - app - INFO - Initializing email service...
2024-08-05 21:23:08,587 - app - INFO - Setting up scheduler...
2024-08-05 21:23:08,610 - app - INFO - Initializing scheduler...
2024-08-05 21:23:08,610 - app.scheduler - INFO - Scheduler initialized
2024-08-05 21:23:08,610 - app - INFO - Application initialized successfully
2024-08-05 21:23:11,110 - app - INFO - Initializing Flask app...
2024-08-05 21:23:11,112 - app - INFO - Configuring app...
2024-08-05 21:23:11,113 - app - INFO - Setting up CORS...
2024-08-05 21:23:11,455 - app - INFO - Initializing JWT manager...
2024-08-05 21:23:11,456 - app - INFO - Setting up rate limiting...
2024-08-05 21:23:11,458 - app - INFO - Setting up database...
2024-08-05 21:23:11,459 - app - INFO - Starting database setup...
2024-08-05 21:23:12,194 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 21:23:12,194 - app - INFO - Database setup completed successfully
2024-08-05 21:23:12,195 - app - INFO - Registering error handler...
2024-08-05 21:23:12,196 - app - INFO - Initializing CLI commands...
2024-08-05 21:23:12,197 - app - INFO - Registering routes...
2024-08-05 21:23:12,217 - app - INFO - Initializing services...
2024-08-05 21:23:12,246 - app - INFO - Initializing email service...
2024-08-05 21:23:12,247 - app - INFO - Setting up scheduler...
2024-08-05 21:23:12,254 - app - INFO - Initializing scheduler...
2024-08-05 21:23:12,256 - app.scheduler - INFO - Scheduler initialized
2024-08-05 21:23:12,256 - app - INFO - Application initialized successfully
2024-08-05 21:49:43,341 - app - INFO - Initializing Flask app...
2024-08-05 21:49:43,343 - app - INFO - Configuring app...
2024-08-05 21:49:43,343 - app - INFO - Setting up CORS...
2024-08-05 21:49:43,666 - app - INFO - Initializing JWT manager...
2024-08-05 21:49:43,666 - app - INFO - Setting up rate limiting...
2024-08-05 21:49:43,674 - app - INFO - Setting up database...
2024-08-05 21:49:43,675 - app - INFO - Starting database setup...
2024-08-05 21:49:44,344 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 21:49:44,344 - app - INFO - Database setup completed successfully
2024-08-05 21:49:44,344 - app - INFO - Registering error handler...
2024-08-05 21:49:44,344 - app - INFO - Initializing CLI commands...
2024-08-05 21:49:44,345 - app - INFO - Registering routes...
2024-08-05 21:49:44,351 - app - INFO - Initializing services...
2024-08-05 21:49:44,364 - app - INFO - Initializing email service...
2024-08-05 21:49:44,364 - app - INFO - Setting up scheduler...
2024-08-05 21:49:44,369 - app - INFO - Initializing scheduler...
2024-08-05 21:49:44,370 - app.scheduler - INFO - Scheduler initialized
2024-08-05 21:49:44,371 - app - INFO - Application initialized successfully
2024-08-05 21:49:47,309 - app - INFO - Initializing Flask app...
2024-08-05 21:49:47,312 - app - INFO - Configuring app...
2024-08-05 21:49:47,315 - app - INFO - Setting up CORS...
2024-08-05 21:49:47,898 - app - INFO - Initializing JWT manager...
2024-08-05 21:49:47,899 - app - INFO - Setting up rate limiting...
2024-08-05 21:49:47,901 - app - INFO - Setting up database...
2024-08-05 21:49:47,903 - app - INFO - Starting database setup...
2024-08-05 21:49:48,549 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 21:49:48,549 - app - INFO - Database setup completed successfully
2024-08-05 21:49:48,550 - app - INFO - Registering error handler...
2024-08-05 21:49:48,550 - app - INFO - Initializing CLI commands...
2024-08-05 21:49:48,551 - app - INFO - Registering routes...
2024-08-05 21:49:48,564 - app - INFO - Initializing services...
2024-08-05 21:49:48,582 - app - INFO - Initializing email service...
2024-08-05 21:49:48,582 - app - INFO - Setting up scheduler...
2024-08-05 21:49:48,588 - app - INFO - Initializing scheduler...
2024-08-05 21:49:48,589 - app.scheduler - INFO - Scheduler initialized
2024-08-05 21:49:48,591 - app - INFO - Application initialized successfully
2024-08-05 21:52:06,970 - app - INFO - Initializing Flask app...
2024-08-05 21:52:06,972 - app - INFO - Configuring app...
2024-08-05 21:52:06,972 - app - INFO - Setting up CORS...
2024-08-05 21:52:07,265 - app - INFO - Initializing JWT manager...
2024-08-05 21:52:07,265 - app - INFO - Setting up rate limiting...
2024-08-05 21:52:07,266 - app - INFO - Setting up database...
2024-08-05 21:52:07,267 - app - INFO - Starting database setup...
2024-08-05 21:52:08,169 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 21:52:08,170 - app - INFO - Database setup completed successfully
2024-08-05 21:52:08,170 - app - INFO - Registering error handler...
2024-08-05 21:52:08,170 - app - INFO - Initializing CLI commands...
2024-08-05 21:52:08,171 - app - INFO - Registering routes...
2024-08-05 21:52:08,178 - app - INFO - Initializing services...
2024-08-05 21:52:08,193 - app - INFO - Initializing email service...
2024-08-05 21:52:08,194 - app - INFO - Setting up scheduler...
2024-08-05 21:52:08,198 - app - INFO - Initializing scheduler...
2024-08-05 21:52:08,199 - app.scheduler - INFO - Scheduler initialized
2024-08-05 21:52:08,199 - app - INFO - Application initialized successfully
2024-08-05 21:52:11,165 - app - INFO - Initializing Flask app...
2024-08-05 21:52:11,167 - app - INFO - Configuring app...
2024-08-05 21:52:11,167 - app - INFO - Setting up CORS...
2024-08-05 21:52:11,616 - app - INFO - Initializing JWT manager...
2024-08-05 21:52:11,617 - app - INFO - Setting up rate limiting...
2024-08-05 21:52:11,618 - app - INFO - Setting up database...
2024-08-05 21:52:11,620 - app - INFO - Starting database setup...
2024-08-05 21:52:12,227 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 21:52:12,227 - app - INFO - Database setup completed successfully
2024-08-05 21:52:12,228 - app - INFO - Registering error handler...
2024-08-05 21:52:12,228 - app - INFO - Initializing CLI commands...
2024-08-05 21:52:12,229 - app - INFO - Registering routes...
2024-08-05 21:52:12,238 - app - INFO - Initializing services...
2024-08-05 21:52:12,260 - app - INFO - Initializing email service...
2024-08-05 21:52:12,260 - app - INFO - Setting up scheduler...
2024-08-05 21:52:12,266 - app - INFO - Initializing scheduler...
2024-08-05 21:52:12,267 - app.scheduler - INFO - Scheduler initialized
2024-08-05 21:52:12,268 - app - INFO - Application initialized successfully
2024-08-05 21:52:47,343 - app - INFO - Initializing Flask app...
2024-08-05 21:52:47,345 - app - INFO - Configuring app...
2024-08-05 21:52:47,345 - app - INFO - Setting up CORS...
2024-08-05 21:53:01,138 - app - INFO - Initializing Flask app...
2024-08-05 21:53:01,139 - app - INFO - Configuring app...
2024-08-05 21:53:01,140 - app - INFO - Setting up CORS...
2024-08-05 21:55:40,145 - app - INFO - Initializing Flask app...
2024-08-05 21:55:40,147 - app - INFO - Configuring app...
2024-08-05 21:55:40,147 - app - INFO - Setting up CORS...
2024-08-05 21:56:26,646 - app - INFO - Initializing Flask app...
2024-08-05 21:56:26,648 - app - INFO - Configuring app...
2024-08-05 21:56:26,649 - app - INFO - Setting up CORS...
2024-08-05 22:00:19,634 - app - INFO - Initializing Flask app...
2024-08-05 22:00:19,636 - app - INFO - Configuring app...
2024-08-05 22:00:19,637 - app - INFO - Setting up CORS...
2024-08-05 22:00:19,637 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-05 22:00:20,018 - app - INFO - Initializing JWT manager...
2024-08-05 22:00:20,018 - app - INFO - Setting up rate limiting...
2024-08-05 22:00:20,020 - app - INFO - Setting up database...
2024-08-05 22:00:20,020 - app - INFO - Starting database setup...
2024-08-05 22:00:20,718 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 22:00:20,719 - app - INFO - Database setup completed successfully
2024-08-05 22:00:20,720 - app - INFO - Registering error handler...
2024-08-05 22:00:20,720 - app - INFO - Initializing CLI commands...
2024-08-05 22:00:20,720 - app - INFO - Registering routes...
2024-08-05 22:00:20,762 - app - INFO - Initializing services...
2024-08-05 22:00:20,780 - app - INFO - Initializing email service...
2024-08-05 22:00:20,780 - app - INFO - Setting up scheduler...
2024-08-05 22:00:20,786 - app - INFO - Initializing scheduler...
2024-08-05 22:00:20,787 - app.scheduler - INFO - Scheduler initialized
2024-08-05 22:00:20,787 - app - INFO - Application initialized successfully
2024-08-05 22:00:23,802 - app - INFO - Initializing Flask app...
2024-08-05 22:00:23,804 - app - INFO - Configuring app...
2024-08-05 22:00:23,805 - app - INFO - Setting up CORS...
2024-08-05 22:00:23,806 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-05 22:00:24,268 - app - INFO - Initializing JWT manager...
2024-08-05 22:00:24,268 - app - INFO - Setting up rate limiting...
2024-08-05 22:00:24,270 - app - INFO - Setting up database...
2024-08-05 22:00:24,271 - app - INFO - Starting database setup...
2024-08-05 22:00:25,058 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 22:00:25,058 - app - INFO - Database setup completed successfully
2024-08-05 22:00:25,059 - app - INFO - Registering error handler...
2024-08-05 22:00:25,059 - app - INFO - Initializing CLI commands...
2024-08-05 22:00:25,059 - app - INFO - Registering routes...
2024-08-05 22:00:25,072 - app - INFO - Initializing services...
2024-08-05 22:00:25,093 - app - INFO - Initializing email service...
2024-08-05 22:00:25,093 - app - INFO - Setting up scheduler...
2024-08-05 22:00:25,105 - app - INFO - Initializing scheduler...
2024-08-05 22:00:25,107 - app.scheduler - INFO - Scheduler initialized
2024-08-05 22:00:25,107 - app - INFO - Application initialized successfully
2024-08-05 22:03:26,059 - app - INFO - Initializing Flask app...
2024-08-05 22:03:26,062 - app - INFO - Configuring app...
2024-08-05 22:03:26,063 - app - INFO - Setting up CORS...
2024-08-05 22:03:26,064 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-05 22:03:26,474 - app - INFO - Initializing JWT manager...
2024-08-05 22:03:26,474 - app - INFO - Setting up rate limiting...
2024-08-05 22:03:26,475 - app - INFO - Setting up database...
2024-08-05 22:03:26,476 - app - INFO - Starting database setup...
2024-08-05 22:03:27,941 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 22:03:27,942 - app - INFO - Database setup completed successfully
2024-08-05 22:03:27,942 - app - INFO - Registering error handler...
2024-08-05 22:03:27,944 - app - INFO - Initializing CLI commands...
2024-08-05 22:03:27,944 - app - INFO - Registering routes...
2024-08-05 22:03:27,955 - app - INFO - Initializing services...
2024-08-05 22:03:27,972 - app - INFO - Initializing email service...
2024-08-05 22:03:27,973 - app - INFO - Setting up scheduler...
2024-08-05 22:03:27,979 - app - INFO - Initializing scheduler...
2024-08-05 22:03:27,980 - app.scheduler - INFO - Scheduler initialized
2024-08-05 22:03:27,980 - app - INFO - Application initialized successfully
2024-08-05 22:03:37,748 - app - INFO - Initializing Flask app...
2024-08-05 22:03:37,750 - app - INFO - Configuring app...
2024-08-05 22:03:37,750 - app - INFO - Setting up CORS...
2024-08-05 22:03:37,751 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-05 22:03:38,026 - app - INFO - Initializing JWT manager...
2024-08-05 22:03:38,027 - app - INFO - Setting up rate limiting...
2024-08-05 22:03:38,028 - app - INFO - Setting up database...
2024-08-05 22:03:38,028 - app - INFO - Starting database setup...
2024-08-05 22:03:38,589 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 22:03:38,590 - app - INFO - Database setup completed successfully
2024-08-05 22:03:38,590 - app - INFO - Registering error handler...
2024-08-05 22:03:38,591 - app - INFO - Initializing CLI commands...
2024-08-05 22:03:38,591 - app - INFO - Registering routes...
2024-08-05 22:03:38,600 - app - INFO - Initializing services...
2024-08-05 22:03:38,616 - app - INFO - Initializing email service...
2024-08-05 22:03:38,616 - app - INFO - Setting up scheduler...
2024-08-05 22:03:38,622 - app - INFO - Initializing scheduler...
2024-08-05 22:03:38,623 - app.scheduler - INFO - Scheduler initialized
2024-08-05 22:03:38,624 - app - INFO - Application initialized successfully
2024-08-05 22:03:41,296 - app - INFO - Initializing Flask app...
2024-08-05 22:03:41,298 - app - INFO - Configuring app...
2024-08-05 22:03:41,298 - app - INFO - Setting up CORS...
2024-08-05 22:03:41,299 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-05 22:03:41,665 - app - INFO - Initializing JWT manager...
2024-08-05 22:03:41,666 - app - INFO - Setting up rate limiting...
2024-08-05 22:03:41,668 - app - INFO - Setting up database...
2024-08-05 22:03:41,669 - app - INFO - Starting database setup...
2024-08-05 22:03:42,222 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 22:03:42,222 - app - INFO - Database setup completed successfully
2024-08-05 22:03:42,223 - app - INFO - Registering error handler...
2024-08-05 22:03:42,224 - app - INFO - Initializing CLI commands...
2024-08-05 22:03:42,224 - app - INFO - Registering routes...
2024-08-05 22:03:42,235 - app - INFO - Initializing services...
2024-08-05 22:03:42,254 - app - INFO - Initializing email service...
2024-08-05 22:03:42,254 - app - INFO - Setting up scheduler...
2024-08-05 22:03:42,260 - app - INFO - Initializing scheduler...
2024-08-05 22:03:42,261 - app.scheduler - INFO - Scheduler initialized
2024-08-05 22:03:42,262 - app - INFO - Application initialized successfully
2024-08-05 22:09:37,813 - app - INFO - Initializing Flask app...
2024-08-05 22:09:37,815 - app - INFO - Configuring app...
2024-08-05 22:09:37,815 - app - INFO - Setting up CORS...
2024-08-05 22:09:37,815 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-05 22:09:38,077 - app - INFO - Initializing JWT manager...
2024-08-05 22:09:38,077 - app - INFO - Setting up rate limiting...
2024-08-05 22:09:38,078 - app - INFO - Setting up database...
2024-08-05 22:09:38,078 - app - INFO - Starting database setup...
2024-08-05 22:09:39,177 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 22:09:39,177 - app - INFO - Database setup completed successfully
2024-08-05 22:09:39,178 - app - INFO - Registering error handler...
2024-08-05 22:09:39,178 - app - INFO - Initializing CLI commands...
2024-08-05 22:09:39,178 - app - INFO - Registering routes...
2024-08-05 22:09:39,189 - app - INFO - Initializing services...
2024-08-05 22:09:39,203 - app - INFO - Initializing email service...
2024-08-05 22:09:39,203 - app - INFO - Setting up scheduler...
2024-08-05 22:09:39,208 - app - INFO - Initializing scheduler...
2024-08-05 22:09:39,208 - app.scheduler - INFO - Scheduler initialized
2024-08-05 22:09:39,209 - app - INFO - Application initialized successfully
2024-08-05 22:09:40,980 - app - INFO - Initializing Flask app...
2024-08-05 22:09:40,982 - app - INFO - Configuring app...
2024-08-05 22:09:40,982 - app - INFO - Setting up CORS...
2024-08-05 22:09:40,982 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-05 22:09:41,207 - app - INFO - Initializing JWT manager...
2024-08-05 22:09:41,207 - app - INFO - Setting up rate limiting...
2024-08-05 22:09:41,208 - app - INFO - Setting up database...
2024-08-05 22:09:41,209 - app - INFO - Starting database setup...
2024-08-05 22:09:42,577 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 22:09:42,578 - app - INFO - Database setup completed successfully
2024-08-05 22:09:42,578 - app - INFO - Registering error handler...
2024-08-05 22:09:42,578 - app - INFO - Initializing CLI commands...
2024-08-05 22:09:42,578 - app - INFO - Registering routes...
2024-08-05 22:09:42,585 - app - INFO - Initializing services...
2024-08-05 22:09:42,595 - app - INFO - Initializing email service...
2024-08-05 22:09:42,596 - app - INFO - Setting up scheduler...
2024-08-05 22:09:42,600 - app - INFO - Initializing scheduler...
2024-08-05 22:09:42,600 - app.scheduler - INFO - Scheduler initialized
2024-08-05 22:09:42,601 - app - INFO - Application initialized successfully
2024-08-05 22:11:59,379 - app - INFO - Initializing Flask app...
2024-08-05 22:11:59,381 - app - INFO - Configuring app...
2024-08-05 22:11:59,381 - app - INFO - Setting up CORS...
2024-08-05 22:11:59,381 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-05 22:11:59,572 - app - INFO - Initializing JWT manager...
2024-08-05 22:11:59,572 - app - INFO - Setting up rate limiting...
2024-08-05 22:11:59,573 - app - INFO - Setting up database...
2024-08-05 22:11:59,574 - app - INFO - Starting database setup...
2024-08-05 22:12:00,190 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 22:12:00,190 - app - INFO - Database setup completed successfully
2024-08-05 22:12:00,191 - app - INFO - Registering error handler...
2024-08-05 22:12:00,191 - app - INFO - Initializing CLI commands...
2024-08-05 22:12:00,191 - app - INFO - Registering routes...
2024-08-05 22:12:00,197 - app - INFO - Initializing services...
2024-08-05 22:12:00,207 - app - INFO - Initializing email service...
2024-08-05 22:12:00,208 - app - INFO - Setting up scheduler...
2024-08-05 22:12:00,212 - app - INFO - Initializing scheduler...
2024-08-05 22:12:00,212 - app.scheduler - INFO - Scheduler initialized
2024-08-05 22:12:00,213 - app - INFO - Application initialized successfully
2024-08-05 22:12:02,001 - app - INFO - Initializing Flask app...
2024-08-05 22:12:02,004 - app - INFO - Configuring app...
2024-08-05 22:12:02,004 - app - INFO - Setting up CORS...
2024-08-05 22:12:02,004 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-05 22:12:02,283 - app - INFO - Initializing JWT manager...
2024-08-05 22:12:02,284 - app - INFO - Setting up rate limiting...
2024-08-05 22:12:02,285 - app - INFO - Setting up database...
2024-08-05 22:12:02,286 - app - INFO - Starting database setup...
2024-08-05 22:12:02,874 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 22:12:02,875 - app - INFO - Database setup completed successfully
2024-08-05 22:12:02,875 - app - INFO - Registering error handler...
2024-08-05 22:12:02,875 - app - INFO - Initializing CLI commands...
2024-08-05 22:12:02,876 - app - INFO - Registering routes...
2024-08-05 22:12:02,883 - app - INFO - Initializing services...
2024-08-05 22:12:02,894 - app - INFO - Initializing email service...
2024-08-05 22:12:02,895 - app - INFO - Setting up scheduler...
2024-08-05 22:12:02,900 - app - INFO - Initializing scheduler...
2024-08-05 22:12:02,901 - app.scheduler - INFO - Scheduler initialized
2024-08-05 22:12:02,901 - app - INFO - Application initialized successfully
2024-08-05 22:24:38,028 - app - INFO - Initializing Flask app...
2024-08-05 22:24:38,030 - app - INFO - Configuring app...
2024-08-05 22:24:38,030 - app - INFO - Setting up CORS...
2024-08-05 22:24:38,031 - app - INFO - CORS configured for all routes
2024-08-05 22:24:38,297 - app - INFO - Initializing JWT manager...
2024-08-05 22:24:38,297 - app - INFO - Setting up rate limiting...
2024-08-05 22:24:38,298 - app - INFO - Setting up database...
2024-08-05 22:24:38,299 - app - INFO - Starting database setup...
2024-08-05 22:24:38,974 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 22:24:38,975 - app - INFO - Database setup completed successfully
2024-08-05 22:24:38,975 - app - INFO - Registering error handler...
2024-08-05 22:24:38,975 - app - INFO - Initializing CLI commands...
2024-08-05 22:24:38,976 - app - INFO - Registering routes...
2024-08-05 23:11:47,979 - app - INFO - Initializing Flask app...
2024-08-05 23:11:47,980 - app - INFO - Configuring app...
2024-08-05 23:11:47,980 - app - INFO - Setting up CORS...
2024-08-05 23:11:47,981 - app - INFO - CORS configured for all routes
2024-08-05 23:11:48,174 - app - INFO - Initializing JWT manager...
2024-08-05 23:11:48,174 - app - INFO - Setting up rate limiting...
2024-08-05 23:11:48,175 - app - INFO - Setting up database...
2024-08-05 23:11:48,176 - app - INFO - Starting database setup...
2024-08-05 23:11:48,849 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:11:48,849 - app - INFO - Database setup completed successfully
2024-08-05 23:11:48,849 - app - INFO - Registering error handler...
2024-08-05 23:11:48,850 - app - INFO - Initializing CLI commands...
2024-08-05 23:11:48,850 - app - INFO - Registering routes...
2024-08-05 23:12:25,460 - app - INFO - Initializing Flask app...
2024-08-05 23:12:25,461 - app - INFO - Configuring app...
2024-08-05 23:12:25,462 - app - INFO - Setting up CORS...
2024-08-05 23:12:25,462 - app - INFO - CORS configured for all routes
2024-08-05 23:12:25,650 - app - INFO - Initializing JWT manager...
2024-08-05 23:12:25,651 - app - INFO - Setting up rate limiting...
2024-08-05 23:12:25,651 - app - INFO - Setting up database...
2024-08-05 23:12:25,652 - app - INFO - Starting database setup...
2024-08-05 23:12:26,293 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:12:26,294 - app - INFO - Database setup completed successfully
2024-08-05 23:12:26,294 - app - INFO - Registering error handler...
2024-08-05 23:12:26,294 - app - INFO - Initializing CLI commands...
2024-08-05 23:12:26,295 - app - INFO - Registering routes...
2024-08-05 23:12:49,204 - app - INFO - Initializing Flask app...
2024-08-05 23:12:49,206 - app - INFO - Configuring app...
2024-08-05 23:12:49,206 - app - INFO - Setting up CORS...
2024-08-05 23:12:49,206 - app - INFO - CORS configured for all routes
2024-08-05 23:12:49,416 - app - INFO - Initializing JWT manager...
2024-08-05 23:12:49,416 - app - INFO - Setting up rate limiting...
2024-08-05 23:12:49,417 - app - INFO - Setting up database...
2024-08-05 23:12:49,417 - app - INFO - Starting database setup...
2024-08-05 23:12:50,078 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:12:50,079 - app - INFO - Database setup completed successfully
2024-08-05 23:12:50,079 - app - INFO - Registering error handler...
2024-08-05 23:12:50,080 - app - INFO - Initializing CLI commands...
2024-08-05 23:12:50,080 - app - INFO - Registering routes...
2024-08-05 23:12:50,102 - app - INFO - Initializing services...
2024-08-05 23:12:50,110 - app - INFO - Initializing email service...
2024-08-05 23:12:50,111 - app - INFO - Setting up scheduler...
2024-08-05 23:12:50,114 - app - INFO - Initializing scheduler...
2024-08-05 23:12:50,115 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:12:50,115 - app - INFO - Application initialized successfully
2024-08-05 23:12:51,781 - app - INFO - Initializing Flask app...
2024-08-05 23:12:51,783 - app - INFO - Configuring app...
2024-08-05 23:12:51,783 - app - INFO - Setting up CORS...
2024-08-05 23:12:51,783 - app - INFO - CORS configured for all routes
2024-08-05 23:12:52,028 - app - INFO - Initializing JWT manager...
2024-08-05 23:12:52,029 - app - INFO - Setting up rate limiting...
2024-08-05 23:12:52,029 - app - INFO - Setting up database...
2024-08-05 23:12:52,030 - app - INFO - Starting database setup...
2024-08-05 23:12:52,644 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:12:52,645 - app - INFO - Database setup completed successfully
2024-08-05 23:12:52,645 - app - INFO - Registering error handler...
2024-08-05 23:12:52,645 - app - INFO - Initializing CLI commands...
2024-08-05 23:12:52,646 - app - INFO - Registering routes...
2024-08-05 23:12:52,653 - app - INFO - Initializing services...
2024-08-05 23:12:52,663 - app - INFO - Initializing email service...
2024-08-05 23:12:52,663 - app - INFO - Setting up scheduler...
2024-08-05 23:12:52,667 - app - INFO - Initializing scheduler...
2024-08-05 23:12:52,667 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:12:52,667 - app - INFO - Application initialized successfully
2024-08-05 23:27:35,973 - app - INFO - Initializing Flask app...
2024-08-05 23:27:35,974 - app - INFO - Configuring app...
2024-08-05 23:27:35,975 - app - INFO - Setting up CORS...
2024-08-05 23:27:35,975 - app - INFO - CORS configured for allowed origins
2024-08-05 23:27:36,177 - app - INFO - Initializing JWT manager...
2024-08-05 23:27:36,177 - app - INFO - Setting up rate limiting...
2024-08-05 23:27:36,178 - app - INFO - Setting up database...
2024-08-05 23:27:36,179 - app - INFO - Starting database setup...
2024-08-05 23:27:36,836 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:27:36,836 - app - INFO - Database setup completed successfully
2024-08-05 23:27:36,836 - app - INFO - Registering error handler...
2024-08-05 23:27:36,838 - app - INFO - Initializing CLI commands...
2024-08-05 23:27:36,838 - app - INFO - Registering routes...
2024-08-05 23:27:36,861 - app - INFO - Initializing services...
2024-08-05 23:27:36,878 - app - INFO - Initializing email service...
2024-08-05 23:27:36,878 - app - INFO - Setting up scheduler...
2024-08-05 23:27:36,882 - app - INFO - Initializing scheduler...
2024-08-05 23:27:36,883 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:27:36,883 - app - INFO - Application initialized successfully
2024-08-05 23:27:48,234 - app - INFO - Initializing Flask app...
2024-08-05 23:27:48,235 - app - INFO - Configuring app...
2024-08-05 23:27:48,235 - app - INFO - Setting up CORS...
2024-08-05 23:27:48,236 - app - INFO - CORS configured for allowed origins
2024-08-05 23:27:48,416 - app - INFO - Initializing JWT manager...
2024-08-05 23:27:48,416 - app - INFO - Setting up rate limiting...
2024-08-05 23:27:48,417 - app - INFO - Setting up database...
2024-08-05 23:27:48,418 - app - INFO - Starting database setup...
2024-08-05 23:27:48,962 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:27:48,962 - app - INFO - Database setup completed successfully
2024-08-05 23:27:48,962 - app - INFO - Registering error handler...
2024-08-05 23:27:48,962 - app - INFO - Initializing CLI commands...
2024-08-05 23:27:48,963 - app - INFO - Registering routes...
2024-08-05 23:27:48,970 - app - INFO - Initializing services...
2024-08-05 23:27:48,978 - app - INFO - Initializing email service...
2024-08-05 23:27:48,979 - app - INFO - Setting up scheduler...
2024-08-05 23:27:48,984 - app - INFO - Initializing scheduler...
2024-08-05 23:27:48,985 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:27:48,986 - app - INFO - Application initialized successfully
2024-08-05 23:27:50,469 - app - INFO - Initializing Flask app...
2024-08-05 23:27:50,471 - app - INFO - Configuring app...
2024-08-05 23:27:50,472 - app - INFO - Setting up CORS...
2024-08-05 23:27:50,473 - app - INFO - CORS configured for allowed origins
2024-08-05 23:27:50,787 - app - INFO - Initializing JWT manager...
2024-08-05 23:27:50,787 - app - INFO - Setting up rate limiting...
2024-08-05 23:27:50,789 - app - INFO - Setting up database...
2024-08-05 23:27:50,789 - app - INFO - Starting database setup...
2024-08-05 23:27:51,364 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:27:51,364 - app - INFO - Database setup completed successfully
2024-08-05 23:27:51,364 - app - INFO - Registering error handler...
2024-08-05 23:27:51,365 - app - INFO - Initializing CLI commands...
2024-08-05 23:27:51,365 - app - INFO - Registering routes...
2024-08-05 23:27:51,371 - app - INFO - Initializing services...
2024-08-05 23:27:51,384 - app - INFO - Initializing email service...
2024-08-05 23:27:51,384 - app - INFO - Setting up scheduler...
2024-08-05 23:27:51,388 - app - INFO - Initializing scheduler...
2024-08-05 23:27:51,389 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:27:51,389 - app - INFO - Application initialized successfully
2024-08-05 23:30:10,283 - app - INFO - Initializing Flask app...
2024-08-05 23:30:10,286 - app - INFO - Configuring app...
2024-08-05 23:30:10,286 - app - INFO - Setting up CORS...
2024-08-05 23:30:10,287 - app - INFO - CORS configured for allowed origins
2024-08-05 23:30:10,485 - app - INFO - Initializing JWT manager...
2024-08-05 23:30:10,486 - app - INFO - Setting up rate limiting...
2024-08-05 23:30:10,486 - app - INFO - Setting up database...
2024-08-05 23:30:10,487 - app - INFO - Starting database setup...
2024-08-05 23:30:11,234 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:30:11,234 - app - INFO - Database setup completed successfully
2024-08-05 23:30:11,235 - app - INFO - Registering error handler...
2024-08-05 23:30:11,235 - app - INFO - Initializing CLI commands...
2024-08-05 23:30:11,236 - app - INFO - Registering routes...
2024-08-05 23:30:11,244 - app - INFO - Initializing services...
2024-08-05 23:30:11,255 - app - INFO - Initializing email service...
2024-08-05 23:30:11,255 - app - INFO - Setting up scheduler...
2024-08-05 23:30:11,259 - app - INFO - Initializing scheduler...
2024-08-05 23:30:11,259 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:30:11,259 - app - INFO - Application initialized successfully
2024-08-05 23:33:18,379 - app - INFO - Initializing Flask app...
2024-08-05 23:33:18,380 - app - INFO - Configuring app...
2024-08-05 23:33:18,380 - app - INFO - Setting up CORS...
2024-08-05 23:33:18,381 - app - INFO - CORS configured for allowed origins
2024-08-05 23:33:18,610 - app - INFO - Initializing JWT manager...
2024-08-05 23:33:18,610 - app - INFO - Setting up rate limiting...
2024-08-05 23:33:18,611 - app - INFO - Setting up database...
2024-08-05 23:33:18,612 - app - INFO - Starting database setup...
2024-08-05 23:33:19,239 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:33:19,239 - app - INFO - Database setup completed successfully
2024-08-05 23:33:19,239 - app - INFO - Registering error handler...
2024-08-05 23:33:19,239 - app - INFO - Initializing CLI commands...
2024-08-05 23:33:19,239 - app - INFO - Registering routes...
2024-08-05 23:33:19,246 - app - INFO - Initializing services...
2024-08-05 23:33:19,255 - app - INFO - Initializing email service...
2024-08-05 23:33:19,256 - app - INFO - Setting up scheduler...
2024-08-05 23:33:19,264 - app - INFO - Initializing scheduler...
2024-08-05 23:33:19,265 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:33:19,265 - app - INFO - Application initialized successfully
2024-08-05 23:33:20,987 - app - INFO - Initializing Flask app...
2024-08-05 23:33:20,989 - app - INFO - Configuring app...
2024-08-05 23:33:20,989 - app - INFO - Setting up CORS...
2024-08-05 23:33:20,990 - app - INFO - CORS configured for allowed origins
2024-08-05 23:33:21,244 - app - INFO - Initializing JWT manager...
2024-08-05 23:33:21,244 - app - INFO - Setting up rate limiting...
2024-08-05 23:33:21,245 - app - INFO - Setting up database...
2024-08-05 23:33:21,247 - app - INFO - Starting database setup...
2024-08-05 23:33:22,008 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:33:22,009 - app - INFO - Database setup completed successfully
2024-08-05 23:33:22,009 - app - INFO - Registering error handler...
2024-08-05 23:33:22,009 - app - INFO - Initializing CLI commands...
2024-08-05 23:33:22,009 - app - INFO - Registering routes...
2024-08-05 23:33:22,017 - app - INFO - Initializing services...
2024-08-05 23:33:22,029 - app - INFO - Initializing email service...
2024-08-05 23:33:22,030 - app - INFO - Setting up scheduler...
2024-08-05 23:33:22,034 - app - INFO - Initializing scheduler...
2024-08-05 23:33:22,034 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:33:22,035 - app - INFO - Application initialized successfully
2024-08-05 23:42:30,818 - app - INFO - Initializing Flask app...
2024-08-05 23:42:30,820 - app - INFO - Configuring app...
2024-08-05 23:42:30,821 - app - INFO - Setting up CORS...
2024-08-05 23:42:31,082 - app - INFO - Initializing JWT manager...
2024-08-05 23:42:31,082 - app - INFO - Setting up rate limiting...
2024-08-05 23:42:31,083 - app - INFO - Setting up database...
2024-08-05 23:42:31,084 - app - INFO - Starting database setup...
2024-08-05 23:42:31,926 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:42:31,926 - app - INFO - Database setup completed successfully
2024-08-05 23:42:31,927 - app - INFO - Registering error handler...
2024-08-05 23:42:31,927 - app - INFO - Initializing CLI commands...
2024-08-05 23:42:31,927 - app - INFO - Registering routes...
2024-08-05 23:42:31,933 - app - INFO - Initializing services...
2024-08-05 23:42:31,943 - app - INFO - Initializing email service...
2024-08-05 23:42:31,943 - app - INFO - Setting up scheduler...
2024-08-05 23:42:31,947 - app - INFO - Initializing scheduler...
2024-08-05 23:42:31,948 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:42:31,948 - app - INFO - Application initialized successfully
2024-08-05 23:42:33,855 - app - INFO - Initializing Flask app...
2024-08-05 23:42:33,856 - app - INFO - Configuring app...
2024-08-05 23:42:33,857 - app - INFO - Setting up CORS...
2024-08-05 23:42:34,091 - app - INFO - Initializing JWT manager...
2024-08-05 23:42:34,092 - app - INFO - Setting up rate limiting...
2024-08-05 23:42:34,093 - app - INFO - Setting up database...
2024-08-05 23:42:34,093 - app - INFO - Starting database setup...
2024-08-05 23:42:34,874 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:42:34,874 - app - INFO - Database setup completed successfully
2024-08-05 23:42:34,874 - app - INFO - Registering error handler...
2024-08-05 23:42:34,875 - app - INFO - Initializing CLI commands...
2024-08-05 23:42:34,875 - app - INFO - Registering routes...
2024-08-05 23:42:34,881 - app - INFO - Initializing services...
2024-08-05 23:42:34,892 - app - INFO - Initializing email service...
2024-08-05 23:42:34,893 - app - INFO - Setting up scheduler...
2024-08-05 23:42:34,898 - app - INFO - Initializing scheduler...
2024-08-05 23:42:34,899 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:42:34,899 - app - INFO - Application initialized successfully
2024-08-05 23:42:55,999 - app.utils.error_handlers - ERROR - General error: The view function did not return a valid response. The return type must be a string, dict, list, tuple with headers or status, Response instance, or WSGI callable, but it was a coroutine.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 865, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)  # type: ignore[no-any-return]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask_cors\decorator.py", line 130, in wrapped_function
    resp = make_response(f(*args, **kwargs))
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\helpers.py", line 173, in make_response
    return current_app.make_response(args)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1211, in make_response
    raise TypeError(
TypeError: The view function did not return a valid response. The return type must be a string, dict, list, tuple with headers or status, Response instance, or WSGI callable, but it was a coroutine.

2024-08-05 23:45:55,439 - app - INFO - Initializing Flask app...
2024-08-05 23:45:55,440 - app - INFO - Configuring app...
2024-08-05 23:45:55,441 - app - INFO - Setting up CORS...
2024-08-05 23:45:55,617 - app - INFO - Initializing JWT manager...
2024-08-05 23:45:55,618 - app - INFO - Setting up rate limiting...
2024-08-05 23:45:55,619 - app - INFO - Setting up database...
2024-08-05 23:45:55,619 - app - INFO - Starting database setup...
2024-08-05 23:45:56,462 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:45:56,462 - app - INFO - Database setup completed successfully
2024-08-05 23:45:56,463 - app - INFO - Registering error handler...
2024-08-05 23:45:56,463 - app - INFO - Initializing CLI commands...
2024-08-05 23:45:56,464 - app - INFO - Registering routes...
2024-08-05 23:45:56,473 - app - INFO - Initializing services...
2024-08-05 23:45:56,482 - app - INFO - Initializing email service...
2024-08-05 23:45:56,483 - app - INFO - Setting up scheduler...
2024-08-05 23:45:56,486 - app - INFO - Initializing scheduler...
2024-08-05 23:45:56,487 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:45:56,487 - app - INFO - Application initialized successfully
2024-08-05 23:46:05,936 - app - INFO - Initializing Flask app...
2024-08-05 23:46:05,937 - app - INFO - Configuring app...
2024-08-05 23:46:05,938 - app - INFO - Setting up CORS...
2024-08-05 23:46:06,148 - app - INFO - Initializing JWT manager...
2024-08-05 23:46:06,149 - app - INFO - Setting up rate limiting...
2024-08-05 23:46:06,150 - app - INFO - Setting up database...
2024-08-05 23:46:06,151 - app - INFO - Starting database setup...
2024-08-05 23:46:06,825 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:46:06,825 - app - INFO - Database setup completed successfully
2024-08-05 23:46:06,825 - app - INFO - Registering error handler...
2024-08-05 23:46:06,826 - app - INFO - Initializing CLI commands...
2024-08-05 23:46:06,826 - app - INFO - Registering routes...
2024-08-05 23:46:06,832 - app - INFO - Initializing services...
2024-08-05 23:46:06,842 - app - INFO - Initializing email service...
2024-08-05 23:46:06,842 - app - INFO - Setting up scheduler...
2024-08-05 23:46:06,846 - app - INFO - Initializing scheduler...
2024-08-05 23:46:06,847 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:46:06,847 - app - INFO - Application initialized successfully
2024-08-05 23:46:08,705 - app - INFO - Initializing Flask app...
2024-08-05 23:46:08,707 - app - INFO - Configuring app...
2024-08-05 23:46:08,707 - app - INFO - Setting up CORS...
2024-08-05 23:46:09,092 - app - INFO - Initializing JWT manager...
2024-08-05 23:46:09,092 - app - INFO - Setting up rate limiting...
2024-08-05 23:46:09,094 - app - INFO - Setting up database...
2024-08-05 23:46:09,095 - app - INFO - Starting database setup...
2024-08-05 23:46:09,736 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-05 23:46:09,736 - app - INFO - Database setup completed successfully
2024-08-05 23:46:09,737 - app - INFO - Registering error handler...
2024-08-05 23:46:09,737 - app - INFO - Initializing CLI commands...
2024-08-05 23:46:09,737 - app - INFO - Registering routes...
2024-08-05 23:46:09,746 - app - INFO - Initializing services...
2024-08-05 23:46:09,757 - app - INFO - Initializing email service...
2024-08-05 23:46:09,757 - app - INFO - Setting up scheduler...
2024-08-05 23:46:09,761 - app - INFO - Initializing scheduler...
2024-08-05 23:46:09,762 - app.scheduler - INFO - Scheduler initialized
2024-08-05 23:46:09,763 - app - INFO - Application initialized successfully
2024-08-06 00:16:45,184 - app - INFO - Initializing Flask app...
2024-08-06 00:16:45,186 - app - INFO - Configuring app...
2024-08-06 00:16:45,186 - app - INFO - Setting up CORS...
2024-08-06 00:16:45,440 - app - INFO - Initializing JWT manager...
2024-08-06 00:16:45,440 - app - INFO - Setting up rate limiting...
2024-08-06 00:16:45,442 - app - INFO - Setting up database...
2024-08-06 00:16:45,442 - app - INFO - Starting database setup...
2024-08-06 00:16:46,069 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:16:46,069 - app - INFO - Database setup completed successfully
2024-08-06 00:16:46,070 - app - INFO - Registering error handler...
2024-08-06 00:16:46,070 - app - INFO - Initializing CLI commands...
2024-08-06 00:16:46,070 - app - INFO - Registering routes...
2024-08-06 00:16:46,076 - app - INFO - Initializing services...
2024-08-06 00:16:46,093 - app - INFO - Initializing email service...
2024-08-06 00:16:46,093 - app - INFO - Setting up scheduler...
2024-08-06 00:16:46,099 - app - INFO - Initializing scheduler...
2024-08-06 00:16:46,100 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:16:46,101 - app - INFO - Application initialized successfully
2024-08-06 00:16:48,292 - app - INFO - Initializing Flask app...
2024-08-06 00:16:48,294 - app - INFO - Configuring app...
2024-08-06 00:16:48,296 - app - INFO - Setting up CORS...
2024-08-06 00:16:48,732 - app - INFO - Initializing JWT manager...
2024-08-06 00:16:48,732 - app - INFO - Setting up rate limiting...
2024-08-06 00:16:48,733 - app - INFO - Setting up database...
2024-08-06 00:16:48,734 - app - INFO - Starting database setup...
2024-08-06 00:16:49,423 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:16:49,423 - app - INFO - Database setup completed successfully
2024-08-06 00:16:49,424 - app - INFO - Registering error handler...
2024-08-06 00:16:49,424 - app - INFO - Initializing CLI commands...
2024-08-06 00:16:49,424 - app - INFO - Registering routes...
2024-08-06 00:16:49,432 - app - INFO - Initializing services...
2024-08-06 00:16:49,447 - app - INFO - Initializing email service...
2024-08-06 00:16:49,448 - app - INFO - Setting up scheduler...
2024-08-06 00:16:49,452 - app - INFO - Initializing scheduler...
2024-08-06 00:16:49,454 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:16:49,454 - app - INFO - Application initialized successfully
2024-08-06 00:31:03,411 - app - INFO - Initializing Flask app...
2024-08-06 00:31:03,413 - app - INFO - Configuring app...
2024-08-06 00:31:03,414 - app - INFO - Setting up CORS...
2024-08-06 00:31:03,668 - app - INFO - Initializing JWT manager...
2024-08-06 00:31:03,668 - app - INFO - Setting up rate limiting...
2024-08-06 00:31:03,671 - app - INFO - Setting up database...
2024-08-06 00:31:03,672 - app - INFO - Starting database setup...
2024-08-06 00:31:04,333 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:31:04,333 - app - INFO - Database setup completed successfully
2024-08-06 00:31:04,334 - app - INFO - Registering error handler...
2024-08-06 00:31:04,334 - app - INFO - Initializing CLI commands...
2024-08-06 00:31:04,334 - app - INFO - Registering routes...
2024-08-06 00:31:04,342 - app - INFO - Initializing services...
2024-08-06 00:31:04,354 - app - INFO - Initializing email service...
2024-08-06 00:31:04,355 - app - INFO - Setting up scheduler...
2024-08-06 00:31:04,360 - app - INFO - Initializing scheduler...
2024-08-06 00:31:04,360 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:31:04,360 - app - INFO - Application initialized successfully
2024-08-06 00:31:06,790 - app - INFO - Initializing Flask app...
2024-08-06 00:31:06,791 - app - INFO - Configuring app...
2024-08-06 00:31:06,792 - app - INFO - Setting up CORS...
2024-08-06 00:31:07,170 - app - INFO - Initializing JWT manager...
2024-08-06 00:31:07,170 - app - INFO - Setting up rate limiting...
2024-08-06 00:31:07,172 - app - INFO - Setting up database...
2024-08-06 00:31:07,173 - app - INFO - Starting database setup...
2024-08-06 00:31:07,717 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:31:07,717 - app - INFO - Database setup completed successfully
2024-08-06 00:31:07,717 - app - INFO - Registering error handler...
2024-08-06 00:31:07,718 - app - INFO - Initializing CLI commands...
2024-08-06 00:31:07,718 - app - INFO - Registering routes...
2024-08-06 00:31:07,747 - app - INFO - Initializing services...
2024-08-06 00:31:07,762 - app - INFO - Initializing email service...
2024-08-06 00:31:07,763 - app - INFO - Setting up scheduler...
2024-08-06 00:31:07,769 - app - INFO - Initializing scheduler...
2024-08-06 00:31:07,770 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:31:07,771 - app - INFO - Application initialized successfully
2024-08-06 00:34:49,183 - app - INFO - Initializing Flask app...
2024-08-06 00:34:49,184 - app - INFO - Configuring app...
2024-08-06 00:34:49,184 - app - INFO - Setting up CORS...
2024-08-06 00:34:49,185 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-06 00:34:49,376 - app - INFO - Initializing JWT manager...
2024-08-06 00:34:49,377 - app - INFO - Setting up rate limiting...
2024-08-06 00:34:49,377 - app - INFO - Setting up database...
2024-08-06 00:34:49,379 - app - INFO - Starting database setup...
2024-08-06 00:34:50,002 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:34:50,003 - app - INFO - Database setup completed successfully
2024-08-06 00:34:50,003 - app - INFO - Registering error handler...
2024-08-06 00:34:50,003 - app - INFO - Initializing CLI commands...
2024-08-06 00:34:50,003 - app - INFO - Registering routes...
2024-08-06 00:34:50,009 - app - INFO - Initializing services...
2024-08-06 00:34:50,022 - app - INFO - Initializing email service...
2024-08-06 00:34:50,023 - app - INFO - Setting up scheduler...
2024-08-06 00:34:50,028 - app - INFO - Initializing scheduler...
2024-08-06 00:34:50,029 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:34:50,029 - app - INFO - Application initialized successfully
2024-08-06 00:34:58,750 - app - INFO - Initializing Flask app...
2024-08-06 00:34:58,752 - app - INFO - Configuring app...
2024-08-06 00:34:58,753 - app - INFO - Setting up CORS...
2024-08-06 00:34:58,753 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-06 00:34:59,041 - app - INFO - Initializing JWT manager...
2024-08-06 00:34:59,042 - app - INFO - Setting up rate limiting...
2024-08-06 00:34:59,044 - app - INFO - Setting up database...
2024-08-06 00:34:59,045 - app - INFO - Starting database setup...
2024-08-06 00:34:59,819 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:34:59,820 - app - INFO - Database setup completed successfully
2024-08-06 00:34:59,820 - app - INFO - Registering error handler...
2024-08-06 00:34:59,820 - app - INFO - Initializing CLI commands...
2024-08-06 00:34:59,820 - app - INFO - Registering routes...
2024-08-06 00:34:59,827 - app - INFO - Initializing services...
2024-08-06 00:34:59,842 - app - INFO - Initializing email service...
2024-08-06 00:34:59,842 - app - INFO - Setting up scheduler...
2024-08-06 00:34:59,847 - app - INFO - Initializing scheduler...
2024-08-06 00:34:59,847 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:34:59,848 - app - INFO - Application initialized successfully
2024-08-06 00:35:02,283 - app - INFO - Initializing Flask app...
2024-08-06 00:35:02,285 - app - INFO - Configuring app...
2024-08-06 00:35:02,285 - app - INFO - Setting up CORS...
2024-08-06 00:35:02,286 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-06 00:35:02,629 - app - INFO - Initializing JWT manager...
2024-08-06 00:35:02,630 - app - INFO - Setting up rate limiting...
2024-08-06 00:35:02,631 - app - INFO - Setting up database...
2024-08-06 00:35:02,631 - app - INFO - Starting database setup...
2024-08-06 00:35:03,438 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:35:03,439 - app - INFO - Database setup completed successfully
2024-08-06 00:35:03,439 - app - INFO - Registering error handler...
2024-08-06 00:35:03,440 - app - INFO - Initializing CLI commands...
2024-08-06 00:35:03,441 - app - INFO - Registering routes...
2024-08-06 00:35:03,456 - app - INFO - Initializing services...
2024-08-06 00:35:03,477 - app - INFO - Initializing email service...
2024-08-06 00:35:03,478 - app - INFO - Setting up scheduler...
2024-08-06 00:35:03,487 - app - INFO - Initializing scheduler...
2024-08-06 00:35:03,491 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:35:03,491 - app - INFO - Application initialized successfully
2024-08-06 00:35:55,383 - app - INFO - Initializing Flask app...
2024-08-06 00:35:55,385 - app - INFO - Configuring app...
2024-08-06 00:35:55,385 - app - INFO - Setting up CORS...
2024-08-06 00:35:55,385 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-06 00:35:55,689 - app - INFO - Initializing JWT manager...
2024-08-06 00:35:55,689 - app - INFO - Setting up rate limiting...
2024-08-06 00:35:55,690 - app - INFO - Setting up database...
2024-08-06 00:35:55,691 - app - INFO - Starting database setup...
2024-08-06 00:35:56,520 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:35:56,520 - app - INFO - Database setup completed successfully
2024-08-06 00:35:56,521 - app - INFO - Registering error handler...
2024-08-06 00:35:56,521 - app - INFO - Initializing CLI commands...
2024-08-06 00:35:56,522 - app - INFO - Registering routes...
2024-08-06 00:35:56,529 - app - INFO - Initializing services...
2024-08-06 00:35:56,541 - app - INFO - Initializing email service...
2024-08-06 00:35:56,541 - app - INFO - Setting up scheduler...
2024-08-06 00:35:56,555 - app - INFO - Initializing scheduler...
2024-08-06 00:35:56,556 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:35:56,556 - app - INFO - Application initialized successfully
2024-08-06 00:35:59,070 - app - INFO - Initializing Flask app...
2024-08-06 00:35:59,072 - app - INFO - Configuring app...
2024-08-06 00:35:59,072 - app - INFO - Setting up CORS...
2024-08-06 00:35:59,073 - app - INFO - CORS configured with allowed origins: ['http://localhost:3000']
2024-08-06 00:35:59,439 - app - INFO - Initializing JWT manager...
2024-08-06 00:35:59,439 - app - INFO - Setting up rate limiting...
2024-08-06 00:35:59,440 - app - INFO - Setting up database...
2024-08-06 00:35:59,441 - app - INFO - Starting database setup...
2024-08-06 00:36:00,122 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:36:00,122 - app - INFO - Database setup completed successfully
2024-08-06 00:36:00,124 - app - INFO - Registering error handler...
2024-08-06 00:36:00,124 - app - INFO - Initializing CLI commands...
2024-08-06 00:36:00,125 - app - INFO - Registering routes...
2024-08-06 00:36:00,133 - app - INFO - Initializing services...
2024-08-06 00:36:00,151 - app - INFO - Initializing email service...
2024-08-06 00:36:00,151 - app - INFO - Setting up scheduler...
2024-08-06 00:36:00,159 - app - INFO - Initializing scheduler...
2024-08-06 00:36:00,160 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:36:00,161 - app - INFO - Application initialized successfully
2024-08-06 00:37:19,557 - app - INFO - Initializing Flask app...
2024-08-06 00:37:19,559 - app - INFO - Configuring app...
2024-08-06 00:37:19,559 - app - INFO - Setting up CORS...
2024-08-06 00:37:19,802 - app - INFO - Initializing JWT manager...
2024-08-06 00:37:19,802 - app - INFO - Setting up rate limiting...
2024-08-06 00:37:19,803 - app - INFO - Setting up database...
2024-08-06 00:37:19,804 - app - INFO - Starting database setup...
2024-08-06 00:37:20,585 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:37:20,586 - app - INFO - Database setup completed successfully
2024-08-06 00:37:20,586 - app - INFO - Registering error handler...
2024-08-06 00:37:20,587 - app - INFO - Initializing CLI commands...
2024-08-06 00:37:20,587 - app - INFO - Registering routes...
2024-08-06 00:37:20,598 - app - INFO - Initializing services...
2024-08-06 00:37:20,627 - app - INFO - Initializing email service...
2024-08-06 00:37:20,627 - app - INFO - Setting up scheduler...
2024-08-06 00:37:20,633 - app - INFO - Initializing scheduler...
2024-08-06 00:37:20,634 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:37:20,634 - app - INFO - Application initialized successfully
2024-08-06 00:37:35,314 - app - INFO - Initializing Flask app...
2024-08-06 00:37:35,317 - app - INFO - Configuring app...
2024-08-06 00:37:35,317 - app - INFO - Setting up CORS...
2024-08-06 00:37:35,632 - app - INFO - Initializing JWT manager...
2024-08-06 00:37:35,633 - app - INFO - Setting up rate limiting...
2024-08-06 00:37:35,639 - app - INFO - Setting up database...
2024-08-06 00:37:35,640 - app - INFO - Starting database setup...
2024-08-06 00:37:36,216 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:37:36,216 - app - INFO - Database setup completed successfully
2024-08-06 00:37:36,217 - app - INFO - Registering error handler...
2024-08-06 00:37:36,217 - app - INFO - Initializing CLI commands...
2024-08-06 00:37:36,217 - app - INFO - Registering routes...
2024-08-06 00:37:36,225 - app - INFO - Initializing services...
2024-08-06 00:37:36,239 - app - INFO - Initializing email service...
2024-08-06 00:37:36,239 - app - INFO - Setting up scheduler...
2024-08-06 00:37:36,246 - app - INFO - Initializing scheduler...
2024-08-06 00:37:36,246 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:37:36,247 - app - INFO - Application initialized successfully
2024-08-06 00:37:38,504 - app - INFO - Initializing Flask app...
2024-08-06 00:37:38,506 - app - INFO - Configuring app...
2024-08-06 00:37:38,507 - app - INFO - Setting up CORS...
2024-08-06 00:37:38,828 - app - INFO - Initializing JWT manager...
2024-08-06 00:37:38,828 - app - INFO - Setting up rate limiting...
2024-08-06 00:37:38,829 - app - INFO - Setting up database...
2024-08-06 00:37:38,830 - app - INFO - Starting database setup...
2024-08-06 00:37:39,412 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:37:39,413 - app - INFO - Database setup completed successfully
2024-08-06 00:37:39,415 - app - INFO - Registering error handler...
2024-08-06 00:37:39,416 - app - INFO - Initializing CLI commands...
2024-08-06 00:37:39,417 - app - INFO - Registering routes...
2024-08-06 00:37:39,425 - app - INFO - Initializing services...
2024-08-06 00:37:39,443 - app - INFO - Initializing email service...
2024-08-06 00:37:39,444 - app - INFO - Setting up scheduler...
2024-08-06 00:37:39,450 - app - INFO - Initializing scheduler...
2024-08-06 00:37:39,451 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:37:39,452 - app - INFO - Application initialized successfully
2024-08-06 00:38:16,897 - app - INFO - Initializing Flask app...
2024-08-06 00:38:16,898 - app - INFO - Configuring app...
2024-08-06 00:38:16,898 - app - INFO - Setting up CORS...
2024-08-06 00:38:16,899 - app - INFO - CORS configured for allowed origins
2024-08-06 00:38:17,090 - app - INFO - Initializing JWT manager...
2024-08-06 00:38:17,090 - app - INFO - Setting up rate limiting...
2024-08-06 00:38:17,091 - app - INFO - Setting up database...
2024-08-06 00:38:17,092 - app - INFO - Starting database setup...
2024-08-06 00:38:17,871 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:38:17,871 - app - INFO - Database setup completed successfully
2024-08-06 00:38:17,871 - app - INFO - Registering error handler...
2024-08-06 00:38:17,872 - app - INFO - Initializing CLI commands...
2024-08-06 00:38:17,872 - app - INFO - Registering routes...
2024-08-06 00:38:17,879 - app - INFO - Initializing services...
2024-08-06 00:38:17,890 - app - INFO - Initializing email service...
2024-08-06 00:38:17,891 - app - INFO - Setting up scheduler...
2024-08-06 00:38:17,895 - app - INFO - Initializing scheduler...
2024-08-06 00:38:17,896 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:38:17,896 - app - INFO - Application initialized successfully
2024-08-06 00:38:20,707 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:38:21,324 - app.database - INFO - Database connection established successfully
2024-08-06 00:38:21,635 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 00:38:21,635 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:38:22,256 - app.database - INFO - Database connection established successfully
2024-08-06 00:38:22,304 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 00:38:22,320 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:38:23,079 - app.database - INFO - Database connection established successfully
2024-08-06 00:38:23,140 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 00:38:23,141 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:38:24,213 - app.database - INFO - Database connection established successfully
2024-08-06 00:38:24,255 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 00:38:24,270 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:38:24,994 - app.database - INFO - Database connection established successfully
2024-08-06 00:38:38,890 - app - INFO - Initializing Flask app...
2024-08-06 00:38:38,892 - app - INFO - Configuring app...
2024-08-06 00:38:38,894 - app - INFO - Setting up CORS...
2024-08-06 00:38:38,894 - app - INFO - CORS configured for allowed origins
2024-08-06 00:38:39,300 - app - INFO - Initializing JWT manager...
2024-08-06 00:38:39,300 - app - INFO - Setting up rate limiting...
2024-08-06 00:38:39,301 - app - INFO - Setting up database...
2024-08-06 00:38:39,301 - app - INFO - Starting database setup...
2024-08-06 00:38:40,644 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 00:38:40,645 - app - INFO - Database setup completed successfully
2024-08-06 00:38:40,646 - app - INFO - Registering error handler...
2024-08-06 00:38:40,646 - app - INFO - Initializing CLI commands...
2024-08-06 00:38:40,646 - app - INFO - Registering routes...
2024-08-06 00:38:40,654 - app - INFO - Initializing services...
2024-08-06 00:38:40,666 - app - INFO - Initializing email service...
2024-08-06 00:38:40,667 - app - INFO - Setting up scheduler...
2024-08-06 00:38:40,672 - app - INFO - Initializing scheduler...
2024-08-06 00:38:40,673 - app.scheduler - INFO - Scheduler initialized
2024-08-06 00:38:40,673 - app - INFO - Application initialized successfully
2024-08-06 00:45:41,653 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 00:45:41,653 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:45:42,276 - app.database - INFO - Database connection established successfully
2024-08-06 00:45:42,323 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 00:45:42,339 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:45:42,933 - app.database - INFO - Database connection established successfully
2024-08-06 00:45:43,018 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 00:45:43,019 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:45:43,577 - app.database - INFO - Database connection established successfully
2024-08-06 00:45:43,615 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 00:45:43,650 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:45:44,258 - app.database - INFO - Database connection established successfully
2024-08-06 00:45:44,692 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 00:45:44,693 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:45:45,260 - app.database - INFO - Database connection established successfully
2024-08-06 00:45:45,318 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 00:45:45,334 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 00:45:45,335 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:45:45,978 - app.database - INFO - Database connection established successfully
2024-08-06 00:45:46,015 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 00:46:02,116 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:46:02,660 - app.database - INFO - Database connection established successfully
2024-08-06 00:46:05,118 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:46:05,743 - app.database - INFO - Database connection established successfully
2024-08-06 00:46:14,096 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:46:14,571 - app.database - INFO - Database connection established successfully
2024-08-06 00:46:14,866 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 00:46:14,877 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:46:15,605 - app.database - INFO - Database connection established successfully
2024-08-06 00:46:15,647 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 00:46:15,666 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:46:16,237 - app.database - INFO - Database connection established successfully
2024-08-06 00:46:16,588 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 00:46:16,589 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:46:17,097 - app.database - INFO - Database connection established successfully
2024-08-06 00:46:17,135 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 00:46:17,154 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:46:17,754 - app.database - INFO - Database connection established successfully
2024-08-06 00:46:23,606 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 00:46:23,606 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:46:24,383 - app.database - INFO - Database connection established successfully
2024-08-06 00:46:24,427 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 00:46:24,444 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:46:25,015 - app.database - INFO - Database connection established successfully
2024-08-06 00:46:25,305 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 00:46:25,307 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:46:25,835 - app.database - INFO - Database connection established successfully
2024-08-06 00:46:25,876 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 00:46:25,925 - app.database - INFO - Attempting to establish database connection...
2024-08-06 00:46:26,623 - app.database - INFO - Database connection established successfully
2024-08-06 01:00:42,815 - app - INFO - Initializing Flask app...
2024-08-06 01:00:42,817 - app - INFO - Configuring app...
2024-08-06 01:00:42,817 - app - INFO - Setting up CORS...
2024-08-06 01:00:42,818 - app - INFO - CORS configured for allowed origins
2024-08-06 01:00:43,048 - app - INFO - Initializing JWT manager...
2024-08-06 01:00:43,049 - app - INFO - Setting up rate limiting...
2024-08-06 01:00:43,051 - app - INFO - Setting up database...
2024-08-06 01:00:43,051 - app - INFO - Starting database setup...
2024-08-06 01:00:43,613 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 01:00:43,614 - app - INFO - Database setup completed successfully
2024-08-06 01:00:43,615 - app - INFO - Registering error handler...
2024-08-06 01:00:43,616 - app - INFO - Initializing CLI commands...
2024-08-06 01:00:43,617 - app - INFO - Registering routes...
2024-08-06 01:00:43,630 - app - INFO - Initializing services...
2024-08-06 01:00:43,645 - app - INFO - Initializing email service...
2024-08-06 01:00:43,646 - app - INFO - Setting up scheduler...
2024-08-06 01:00:43,652 - app - INFO - Initializing scheduler...
2024-08-06 01:00:43,653 - app.scheduler - INFO - Scheduler initialized
2024-08-06 01:00:43,654 - app - INFO - Application initialized successfully
2024-08-06 01:01:38,209 - app.database - INFO - Attempting to establish database connection...
2024-08-06 01:01:38,752 - app.database - INFO - Database connection established successfully
2024-08-06 01:01:39,155 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 01:01:39,156 - app.database - INFO - Attempting to establish database connection...
2024-08-06 01:01:39,748 - app.database - INFO - Database connection established successfully
2024-08-06 01:01:39,793 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 01:01:39,809 - app.database - INFO - Attempting to establish database connection...
2024-08-06 01:01:40,382 - app.database - INFO - Database connection established successfully
2024-08-06 01:01:40,472 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 01:01:40,473 - app.database - INFO - Attempting to establish database connection...
2024-08-06 01:01:41,039 - app.database - INFO - Database connection established successfully
2024-08-06 01:01:41,090 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 01:01:41,100 - app.database - INFO - Attempting to establish database connection...
2024-08-06 01:01:41,651 - app.database - INFO - Database connection established successfully
2024-08-06 01:03:08,564 - app - INFO - Initializing Flask app...
2024-08-06 01:03:08,566 - app - INFO - Configuring app...
2024-08-06 01:03:08,566 - app - INFO - Setting up CORS...
2024-08-06 01:03:08,567 - app - INFO - CORS configured for allowed origins
2024-08-06 01:03:08,846 - app - INFO - Initializing JWT manager...
2024-08-06 01:03:08,846 - app - INFO - Setting up rate limiting...
2024-08-06 01:03:08,848 - app - INFO - Setting up database...
2024-08-06 01:03:08,848 - app - INFO - Starting database setup...
2024-08-06 01:03:09,395 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 01:03:09,396 - app - INFO - Database setup completed successfully
2024-08-06 01:03:09,396 - app - INFO - Registering error handler...
2024-08-06 01:03:09,397 - app - INFO - Initializing CLI commands...
2024-08-06 01:03:09,397 - app - INFO - Registering routes...
2024-08-06 01:03:09,405 - app - INFO - Initializing services...
2024-08-06 01:03:09,422 - app - INFO - Initializing email service...
2024-08-06 01:03:09,422 - app - INFO - Setting up scheduler...
2024-08-06 01:03:09,427 - app - INFO - Initializing scheduler...
2024-08-06 01:03:09,427 - app.scheduler - INFO - Scheduler initialized
2024-08-06 01:03:09,428 - app - INFO - Application initialized successfully
2024-08-06 01:03:12,073 - app - INFO - Initializing Flask app...
2024-08-06 01:03:12,075 - app - INFO - Configuring app...
2024-08-06 01:03:12,075 - app - INFO - Setting up CORS...
2024-08-06 01:03:12,076 - app - INFO - CORS configured for allowed origins
2024-08-06 01:03:12,519 - app - INFO - Initializing JWT manager...
2024-08-06 01:03:12,520 - app - INFO - Setting up rate limiting...
2024-08-06 01:03:12,521 - app - INFO - Setting up database...
2024-08-06 01:03:12,522 - app - INFO - Starting database setup...
2024-08-06 01:03:13,127 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 01:03:13,127 - app - INFO - Database setup completed successfully
2024-08-06 01:03:13,128 - app - INFO - Registering error handler...
2024-08-06 01:03:13,128 - app - INFO - Initializing CLI commands...
2024-08-06 01:03:13,129 - app - INFO - Registering routes...
2024-08-06 01:03:13,142 - app - INFO - Initializing services...
2024-08-06 01:03:13,166 - app - INFO - Initializing email service...
2024-08-06 01:03:13,166 - app - INFO - Setting up scheduler...
2024-08-06 01:03:13,173 - app - INFO - Initializing scheduler...
2024-08-06 01:03:13,174 - app.scheduler - INFO - Scheduler initialized
2024-08-06 01:03:13,175 - app - INFO - Application initialized successfully
2024-08-06 01:03:27,482 - app.database - INFO - Attempting to establish database connection...
2024-08-06 01:03:28,061 - app.database - INFO - Database connection established successfully
2024-08-06 01:03:28,875 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 01:03:28,876 - app.database - INFO - Attempting to establish database connection...
2024-08-06 01:03:29,446 - app.database - INFO - Database connection established successfully
2024-08-06 01:03:29,494 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 01:03:29,513 - app.database - INFO - Attempting to establish database connection...
2024-08-06 01:03:30,541 - app.database - INFO - Database connection established successfully
2024-08-06 01:03:30,603 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 01:03:30,604 - app.database - INFO - Attempting to establish database connection...
2024-08-06 01:03:31,207 - app.database - INFO - Database connection established successfully
2024-08-06 01:03:31,253 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 01:03:31,268 - app.database - INFO - Attempting to establish database connection...
2024-08-06 01:03:31,834 - app.database - INFO - Database connection established successfully
2024-08-06 03:01:59,130 - app - INFO - Initializing Flask app...
2024-08-06 03:01:59,133 - app - INFO - Configuring app...
2024-08-06 03:01:59,133 - app - INFO - Setting up CORS...
2024-08-06 03:01:59,134 - app - INFO - CORS configured for allowed origins
2024-08-06 03:01:59,707 - app - INFO - Initializing JWT manager...
2024-08-06 03:01:59,708 - app - INFO - Setting up rate limiting...
2024-08-06 03:01:59,709 - app - INFO - Setting up database...
2024-08-06 03:01:59,710 - app - INFO - Starting database setup...
2024-08-06 03:02:00,441 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:02:00,442 - app - INFO - Database setup completed successfully
2024-08-06 03:02:00,443 - app - INFO - Registering error handler...
2024-08-06 03:02:00,443 - app - INFO - Initializing CLI commands...
2024-08-06 03:02:00,444 - app - INFO - Registering routes...
2024-08-06 03:02:00,457 - app - INFO - Initializing services...
2024-08-06 03:02:00,477 - app - INFO - Initializing email service...
2024-08-06 03:02:00,477 - app - INFO - Setting up scheduler...
2024-08-06 03:02:00,500 - app - INFO - Initializing scheduler...
2024-08-06 03:02:00,501 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:02:00,502 - app - INFO - Application initialized successfully
2024-08-06 03:02:02,557 - app - INFO - Initializing Flask app...
2024-08-06 03:02:02,559 - app - INFO - Configuring app...
2024-08-06 03:02:02,559 - app - INFO - Setting up CORS...
2024-08-06 03:02:02,561 - app - INFO - CORS configured for allowed origins
2024-08-06 03:02:02,830 - app - INFO - Initializing JWT manager...
2024-08-06 03:02:02,830 - app - INFO - Setting up rate limiting...
2024-08-06 03:02:02,831 - app - INFO - Setting up database...
2024-08-06 03:02:02,832 - app - INFO - Starting database setup...
2024-08-06 03:02:03,372 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:02:03,372 - app - INFO - Database setup completed successfully
2024-08-06 03:02:03,373 - app - INFO - Registering error handler...
2024-08-06 03:02:03,373 - app - INFO - Initializing CLI commands...
2024-08-06 03:02:03,374 - app - INFO - Registering routes...
2024-08-06 03:02:03,388 - app - INFO - Initializing services...
2024-08-06 03:02:03,417 - app - INFO - Initializing email service...
2024-08-06 03:02:03,417 - app - INFO - Setting up scheduler...
2024-08-06 03:02:03,426 - app - INFO - Initializing scheduler...
2024-08-06 03:02:03,427 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:02:03,428 - app - INFO - Application initialized successfully
2024-08-06 03:02:26,673 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:02:27,282 - app.database - INFO - Database connection established successfully
2024-08-06 03:02:27,931 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 03:02:27,932 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:02:28,504 - app.database - INFO - Database connection established successfully
2024-08-06 03:02:28,546 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 03:02:28,568 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:02:29,586 - app.database - INFO - Database connection established successfully
2024-08-06 03:02:29,652 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:02:30,211 - app.database - INFO - Database connection established successfully
2024-08-06 03:02:30,267 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 03:02:30,268 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:02:30,818 - app.database - INFO - Database connection established successfully
2024-08-06 03:02:30,856 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 03:10:21,875 - app - INFO - Initializing Flask app...
2024-08-06 03:10:21,877 - app - INFO - Configuring app...
2024-08-06 03:10:21,878 - app - INFO - Setting up CORS...
2024-08-06 03:10:21,879 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 03:10:22,344 - app - INFO - Initializing JWT manager...
2024-08-06 03:10:22,344 - app - INFO - Setting up rate limiting...
2024-08-06 03:10:22,346 - app - INFO - Setting up database...
2024-08-06 03:10:22,347 - app - INFO - Starting database setup...
2024-08-06 03:10:22,991 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:10:22,992 - app - INFO - Database setup completed successfully
2024-08-06 03:10:22,993 - app - INFO - Registering error handler...
2024-08-06 03:10:22,993 - app - INFO - Initializing CLI commands...
2024-08-06 03:10:22,994 - app - INFO - Registering routes...
2024-08-06 03:10:23,007 - app - INFO - Initializing services...
2024-08-06 03:10:23,023 - app - INFO - Initializing email service...
2024-08-06 03:10:23,023 - app - INFO - Setting up scheduler...
2024-08-06 03:10:23,029 - app - INFO - Initializing scheduler...
2024-08-06 03:10:23,030 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:10:23,031 - app - INFO - Application initialized successfully
2024-08-06 03:11:15,913 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:11:16,503 - app.database - INFO - Database connection established successfully
2024-08-06 03:11:17,126 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 03:11:17,127 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:11:17,711 - app.database - INFO - Database connection established successfully
2024-08-06 03:11:17,764 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 03:11:17,784 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:11:18,373 - app.database - INFO - Database connection established successfully
2024-08-06 03:11:18,426 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 03:11:18,428 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:11:18,956 - app.database - INFO - Database connection established successfully
2024-08-06 03:11:18,997 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 03:11:19,017 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:11:19,712 - app.database - INFO - Database connection established successfully
2024-08-06 03:12:10,919 - app - INFO - Initializing Flask app...
2024-08-06 03:12:10,921 - app - INFO - Configuring app...
2024-08-06 03:12:10,922 - app - INFO - Setting up CORS...
2024-08-06 03:12:10,923 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 03:12:11,454 - app - INFO - Initializing JWT manager...
2024-08-06 03:12:11,455 - app - INFO - Setting up rate limiting...
2024-08-06 03:12:11,458 - app - INFO - Setting up database...
2024-08-06 03:12:11,460 - app - INFO - Starting database setup...
2024-08-06 03:12:12,142 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:12:12,143 - app - INFO - Database setup completed successfully
2024-08-06 03:12:12,143 - app - INFO - Registering error handler...
2024-08-06 03:12:12,144 - app - INFO - Initializing CLI commands...
2024-08-06 03:12:12,144 - app - INFO - Registering routes...
2024-08-06 03:12:12,160 - app - INFO - Initializing services...
2024-08-06 03:12:12,188 - app - INFO - Initializing email service...
2024-08-06 03:12:12,189 - app - INFO - Setting up scheduler...
2024-08-06 03:12:12,204 - app - INFO - Initializing scheduler...
2024-08-06 03:12:12,208 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:12:12,208 - app - INFO - Application initialized successfully
2024-08-06 03:12:16,511 - app - INFO - Initializing Flask app...
2024-08-06 03:12:16,515 - app - INFO - Configuring app...
2024-08-06 03:12:16,517 - app - INFO - Setting up CORS...
2024-08-06 03:12:16,518 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 03:12:17,224 - app - INFO - Initializing JWT manager...
2024-08-06 03:12:17,225 - app - INFO - Setting up rate limiting...
2024-08-06 03:12:17,227 - app - INFO - Setting up database...
2024-08-06 03:12:17,228 - app - INFO - Starting database setup...
2024-08-06 03:12:17,939 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:12:17,939 - app - INFO - Database setup completed successfully
2024-08-06 03:12:17,940 - app - INFO - Registering error handler...
2024-08-06 03:12:17,940 - app - INFO - Initializing CLI commands...
2024-08-06 03:12:17,941 - app - INFO - Registering routes...
2024-08-06 03:12:17,954 - app - INFO - Initializing services...
2024-08-06 03:12:17,977 - app - INFO - Initializing email service...
2024-08-06 03:12:17,979 - app - INFO - Setting up scheduler...
2024-08-06 03:12:17,990 - app - INFO - Initializing scheduler...
2024-08-06 03:12:17,992 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:12:17,993 - app - INFO - Application initialized successfully
2024-08-06 03:19:18,923 - app - INFO - Initializing Flask app...
2024-08-06 03:19:18,925 - app - INFO - Configuring app...
2024-08-06 03:19:18,925 - app - INFO - Setting up CORS...
2024-08-06 03:19:18,926 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 03:19:19,336 - app - INFO - Initializing JWT manager...
2024-08-06 03:19:19,337 - app - INFO - Setting up rate limiting...
2024-08-06 03:19:19,338 - app - INFO - Setting up database...
2024-08-06 03:19:19,339 - app - INFO - Starting database setup...
2024-08-06 03:19:19,897 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:19:19,897 - app - INFO - Database setup completed successfully
2024-08-06 03:19:19,898 - app - INFO - Registering error handler...
2024-08-06 03:19:19,898 - app - INFO - Initializing CLI commands...
2024-08-06 03:19:19,898 - app - INFO - Registering routes...
2024-08-06 03:19:19,906 - app - INFO - Initializing services...
2024-08-06 03:19:19,933 - app - INFO - Initializing email service...
2024-08-06 03:19:19,934 - app - INFO - Setting up scheduler...
2024-08-06 03:19:19,941 - app - INFO - Initializing scheduler...
2024-08-06 03:19:19,942 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:19:19,942 - app - INFO - Application initialized successfully
2024-08-06 03:19:22,828 - app - INFO - Initializing Flask app...
2024-08-06 03:19:22,831 - app - INFO - Configuring app...
2024-08-06 03:19:22,832 - app - INFO - Setting up CORS...
2024-08-06 03:19:22,833 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 03:19:23,347 - app - INFO - Initializing JWT manager...
2024-08-06 03:19:23,348 - app - INFO - Setting up rate limiting...
2024-08-06 03:19:23,349 - app - INFO - Setting up database...
2024-08-06 03:19:23,350 - app - INFO - Starting database setup...
2024-08-06 03:19:23,857 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:19:23,858 - app - INFO - Database setup completed successfully
2024-08-06 03:19:23,858 - app - INFO - Registering error handler...
2024-08-06 03:19:23,859 - app - INFO - Initializing CLI commands...
2024-08-06 03:19:23,859 - app - INFO - Registering routes...
2024-08-06 03:19:23,870 - app - INFO - Initializing services...
2024-08-06 03:19:23,888 - app - INFO - Initializing email service...
2024-08-06 03:19:23,889 - app - INFO - Setting up scheduler...
2024-08-06 03:19:23,895 - app - INFO - Initializing scheduler...
2024-08-06 03:19:23,897 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:19:23,897 - app - INFO - Application initialized successfully
2024-08-06 03:19:59,036 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:19:59,583 - app.database - INFO - Database connection established successfully
2024-08-06 03:20:00,109 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 03:20:00,110 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:20:00,688 - app.database - INFO - Database connection established successfully
2024-08-06 03:20:00,734 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 03:20:00,773 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:20:01,294 - app.database - INFO - Database connection established successfully
2024-08-06 03:20:01,574 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 03:20:01,582 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:20:02,181 - app.database - INFO - Database connection established successfully
2024-08-06 03:20:02,219 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 03:20:02,246 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:20:02,846 - app.database - INFO - Database connection established successfully
2024-08-06 03:25:42,284 - app - INFO - Initializing Flask app...
2024-08-06 03:25:42,286 - app - INFO - Configuring app...
2024-08-06 03:25:42,287 - app - INFO - Setting up CORS...
2024-08-06 03:25:42,287 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 03:25:42,584 - app - INFO - Initializing JWT manager...
2024-08-06 03:25:42,585 - app - INFO - Setting up rate limiting...
2024-08-06 03:25:42,588 - app - INFO - Setting up database...
2024-08-06 03:25:42,589 - app - INFO - Starting database setup...
2024-08-06 03:25:43,174 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:25:43,174 - app - INFO - Database setup completed successfully
2024-08-06 03:25:43,175 - app - INFO - Registering error handler...
2024-08-06 03:25:43,175 - app - INFO - Initializing CLI commands...
2024-08-06 03:25:43,176 - app - INFO - Registering routes...
2024-08-06 03:25:43,186 - app - INFO - Initializing services...
2024-08-06 03:25:43,206 - app - INFO - Initializing email service...
2024-08-06 03:25:43,207 - app - INFO - Setting up scheduler...
2024-08-06 03:25:43,211 - app - INFO - Initializing scheduler...
2024-08-06 03:25:43,214 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:25:43,215 - app - INFO - Application initialized successfully
2024-08-06 03:25:43,814 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:25:44,347 - app.database - INFO - Database connection established successfully
2024-08-06 03:26:01,113 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:26:01,673 - app.database - INFO - Database connection established successfully
2024-08-06 03:26:46,683 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 03:26:46,683 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:26:47,254 - app.database - INFO - Database connection established successfully
2024-08-06 03:26:47,293 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 03:26:47,314 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:26:47,963 - app.database - INFO - Database connection established successfully
2024-08-06 03:26:48,237 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 03:26:48,241 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:26:48,810 - app.database - INFO - Database connection established successfully
2024-08-06 03:26:48,855 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 03:26:48,878 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:26:49,442 - app.database - INFO - Database connection established successfully
2024-08-06 03:27:00,300 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:27:01,278 - app.database - INFO - Database connection established successfully
2024-08-06 03:27:01,342 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:27:01,943 - app.database - INFO - Database connection established successfully
2024-08-06 03:27:26,684 - app - INFO - Initializing Flask app...
2024-08-06 03:27:26,686 - app - INFO - Configuring app...
2024-08-06 03:27:26,686 - app - INFO - Setting up CORS...
2024-08-06 03:27:26,687 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 03:27:27,020 - app - INFO - Initializing JWT manager...
2024-08-06 03:27:27,021 - app - INFO - Setting up rate limiting...
2024-08-06 03:27:27,022 - app - INFO - Setting up database...
2024-08-06 03:27:27,023 - app - INFO - Starting database setup...
2024-08-06 03:27:27,558 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:27:27,559 - app - INFO - Database setup completed successfully
2024-08-06 03:27:27,559 - app - INFO - Registering error handler...
2024-08-06 03:27:27,560 - app - INFO - Initializing CLI commands...
2024-08-06 03:27:27,560 - app - INFO - Registering routes...
2024-08-06 03:27:27,569 - app - INFO - Initializing services...
2024-08-06 03:27:27,588 - app - INFO - Initializing email service...
2024-08-06 03:27:27,589 - app - INFO - Setting up scheduler...
2024-08-06 03:27:27,596 - app - INFO - Initializing scheduler...
2024-08-06 03:27:27,597 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:27:27,597 - app - INFO - Application initialized successfully
2024-08-06 03:27:30,595 - app - INFO - Initializing Flask app...
2024-08-06 03:27:30,598 - app - INFO - Configuring app...
2024-08-06 03:27:30,598 - app - INFO - Setting up CORS...
2024-08-06 03:27:30,599 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 03:27:31,101 - app - INFO - Initializing JWT manager...
2024-08-06 03:27:31,102 - app - INFO - Setting up rate limiting...
2024-08-06 03:27:31,103 - app - INFO - Setting up database...
2024-08-06 03:27:31,104 - app - INFO - Starting database setup...
2024-08-06 03:27:31,623 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:27:31,623 - app - INFO - Database setup completed successfully
2024-08-06 03:27:31,624 - app - INFO - Registering error handler...
2024-08-06 03:27:31,625 - app - INFO - Initializing CLI commands...
2024-08-06 03:27:31,625 - app - INFO - Registering routes...
2024-08-06 03:27:31,635 - app - INFO - Initializing services...
2024-08-06 03:27:31,659 - app - INFO - Initializing email service...
2024-08-06 03:27:31,660 - app - INFO - Setting up scheduler...
2024-08-06 03:27:31,669 - app - INFO - Initializing scheduler...
2024-08-06 03:27:31,670 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:27:31,671 - app - INFO - Application initialized successfully
2024-08-06 03:27:43,847 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:27:44,484 - app.database - INFO - Database connection established successfully
2024-08-06 03:27:44,554 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:27:45,091 - app.database - INFO - Database connection established successfully
2024-08-06 03:35:45,504 - app - INFO - Initializing Flask app...
2024-08-06 03:35:45,505 - app - INFO - Configuring app...
2024-08-06 03:35:45,506 - app - INFO - Setting up CORS...
2024-08-06 03:35:45,506 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 03:35:45,691 - app - INFO - Initializing JWT manager...
2024-08-06 03:35:45,691 - app - INFO - Setting up rate limiting...
2024-08-06 03:35:45,692 - app - INFO - Setting up database...
2024-08-06 03:35:45,693 - app - INFO - Starting database setup...
2024-08-06 03:35:46,261 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:35:46,261 - app - INFO - Database setup completed successfully
2024-08-06 03:35:46,262 - app - INFO - Registering error handler...
2024-08-06 03:35:46,262 - app - INFO - Initializing CLI commands...
2024-08-06 03:35:46,262 - app - INFO - Registering routes...
2024-08-06 03:37:30,404 - app - INFO - Initializing Flask app...
2024-08-06 03:37:30,405 - app - INFO - Configuring app...
2024-08-06 03:37:30,405 - app - INFO - Setting up CORS...
2024-08-06 03:37:30,406 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 03:37:30,583 - app - INFO - Initializing JWT manager...
2024-08-06 03:37:30,583 - app - INFO - Setting up rate limiting...
2024-08-06 03:37:30,584 - app - INFO - Setting up database...
2024-08-06 03:37:30,584 - app - INFO - Starting database setup...
2024-08-06 03:37:31,138 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:37:31,139 - app - INFO - Database setup completed successfully
2024-08-06 03:37:31,139 - app - INFO - Registering error handler...
2024-08-06 03:37:31,139 - app - INFO - Initializing CLI commands...
2024-08-06 03:37:31,139 - app - INFO - Registering routes...
2024-08-06 03:37:31,163 - app - INFO - Initializing services...
2024-08-06 03:37:31,174 - app - INFO - Initializing email service...
2024-08-06 03:37:31,174 - app - INFO - Setting up scheduler...
2024-08-06 03:37:31,177 - app - INFO - Initializing scheduler...
2024-08-06 03:37:31,178 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:37:31,178 - app - INFO - Application initialized successfully
2024-08-06 03:37:32,712 - app - INFO - Initializing Flask app...
2024-08-06 03:37:32,714 - app - INFO - Configuring app...
2024-08-06 03:37:32,714 - app - INFO - Setting up CORS...
2024-08-06 03:37:32,714 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 03:37:32,963 - app - INFO - Initializing JWT manager...
2024-08-06 03:37:32,964 - app - INFO - Setting up rate limiting...
2024-08-06 03:37:32,964 - app - INFO - Setting up database...
2024-08-06 03:37:32,965 - app - INFO - Starting database setup...
2024-08-06 03:37:33,486 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 03:37:33,486 - app - INFO - Database setup completed successfully
2024-08-06 03:37:33,486 - app - INFO - Registering error handler...
2024-08-06 03:37:33,486 - app - INFO - Initializing CLI commands...
2024-08-06 03:37:33,487 - app - INFO - Registering routes...
2024-08-06 03:37:33,494 - app - INFO - Initializing services...
2024-08-06 03:37:33,503 - app - INFO - Initializing email service...
2024-08-06 03:37:33,503 - app - INFO - Setting up scheduler...
2024-08-06 03:37:33,507 - app - INFO - Initializing scheduler...
2024-08-06 03:37:33,508 - app.scheduler - INFO - Scheduler initialized
2024-08-06 03:37:33,508 - app - INFO - Application initialized successfully
2024-08-06 03:37:37,463 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:37:37,939 - app.database - INFO - Database connection established successfully
2024-08-06 03:37:37,992 - app.database - INFO - Attempting to establish database connection...
2024-08-06 03:37:38,567 - app.database - INFO - Database connection established successfully
2024-08-06 03:37:39,039 - app.database - INFO - Attempting to establish database connection...
2024-08-06 04:17:38,641 - app - INFO - Initializing Flask app...
2024-08-06 04:17:38,642 - app - INFO - Configuring app...
2024-08-06 04:17:38,643 - app - INFO - Setting up CORS...
2024-08-06 04:17:38,643 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 04:23:42,848 - app - INFO - Initializing Flask app...
2024-08-06 04:23:42,850 - app - INFO - Configuring app...
2024-08-06 04:23:42,850 - app - INFO - Setting up CORS...
2024-08-06 04:23:42,851 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 04:27:07,938 - app - INFO - Initializing Flask app...
2024-08-06 04:27:07,941 - app - INFO - Configuring app...
2024-08-06 04:27:07,941 - app - INFO - Setting up CORS...
2024-08-06 04:27:07,942 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 04:30:28,082 - app - INFO - Initializing Flask app...
2024-08-06 04:30:28,084 - app - INFO - Configuring app...
2024-08-06 04:30:28,084 - app - INFO - Setting up CORS...
2024-08-06 04:30:28,086 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 04:30:28,520 - app - INFO - Initializing JWT manager...
2024-08-06 04:30:28,521 - app - INFO - Setting up rate limiting...
2024-08-06 04:30:28,522 - app - INFO - Setting up database...
2024-08-06 04:30:28,523 - app - INFO - Starting database setup...
2024-08-06 04:30:29,277 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 04:30:29,278 - app - INFO - Database setup completed successfully
2024-08-06 04:30:29,278 - app - INFO - Registering error handler...
2024-08-06 04:30:29,279 - app - INFO - Initializing CLI commands...
2024-08-06 04:30:29,279 - app - INFO - Registering routes...
2024-08-06 04:31:23,977 - app - INFO - Initializing Flask app...
2024-08-06 04:31:23,979 - app - INFO - Configuring app...
2024-08-06 04:31:23,980 - app - INFO - Setting up CORS...
2024-08-06 04:31:23,980 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 04:31:24,341 - app - INFO - Initializing JWT manager...
2024-08-06 04:31:24,342 - app - INFO - Setting up rate limiting...
2024-08-06 04:31:24,344 - app - INFO - Setting up database...
2024-08-06 04:31:24,345 - app - INFO - Starting database setup...
2024-08-06 04:31:25,014 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 04:31:25,015 - app - INFO - Database setup completed successfully
2024-08-06 04:31:25,015 - app - INFO - Registering error handler...
2024-08-06 04:31:25,015 - app - INFO - Initializing CLI commands...
2024-08-06 04:31:25,016 - app - INFO - Registering routes...
2024-08-06 04:36:03,151 - app - INFO - Initializing Flask app...
2024-08-06 04:36:03,153 - app - INFO - Configuring app...
2024-08-06 04:36:03,153 - app - INFO - Setting up CORS...
2024-08-06 04:36:03,154 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 04:36:03,526 - app - INFO - Initializing JWT manager...
2024-08-06 04:36:03,527 - app - INFO - Setting up rate limiting...
2024-08-06 04:36:03,528 - app - INFO - Setting up database...
2024-08-06 11:10:59,613 - app - INFO - Initializing Flask app...
2024-08-06 11:10:59,616 - app - INFO - Configuring app...
2024-08-06 11:10:59,616 - app - INFO - Setting up CORS...
2024-08-06 11:10:59,616 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:10:59,835 - app - INFO - Initializing JWT manager...
2024-08-06 11:12:42,231 - app - INFO - Initializing Flask app...
2024-08-06 11:12:42,232 - app - INFO - Configuring app...
2024-08-06 11:12:42,232 - app - INFO - Setting up CORS...
2024-08-06 11:12:42,233 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:12:42,411 - app - INFO - Initializing JWT manager...
2024-08-06 11:12:42,411 - app - INFO - Setting up rate limiting...
2024-08-06 11:12:42,412 - app - INFO - Setting up database...
2024-08-06 11:12:42,412 - app - INFO - Starting database setup...
2024-08-06 11:12:43,050 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 11:12:43,050 - app - INFO - Database setup completed successfully
2024-08-06 11:12:43,050 - app - INFO - Registering error handler...
2024-08-06 11:12:43,051 - app - INFO - Initializing CLI commands...
2024-08-06 11:12:43,051 - app - INFO - Registering routes...
2024-08-06 11:16:35,721 - app - INFO - Initializing Flask app...
2024-08-06 11:16:35,723 - app - INFO - Configuring app...
2024-08-06 11:16:35,723 - app - INFO - Setting up CORS...
2024-08-06 11:16:35,724 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:16:36,023 - app - INFO - Initializing JWT manager...
2024-08-06 11:16:36,024 - app - INFO - Setting up rate limiting...
2024-08-06 11:16:36,026 - app - INFO - Setting up database...
2024-08-06 11:16:36,027 - app - INFO - Starting database setup...
2024-08-06 11:16:36,678 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 11:16:36,678 - app - INFO - Database setup completed successfully
2024-08-06 11:16:36,679 - app - INFO - Registering error handler...
2024-08-06 11:16:36,680 - app - INFO - Initializing CLI commands...
2024-08-06 11:16:36,680 - app - INFO - Registering routes...
2024-08-06 11:16:36,718 - app - INFO - Initializing services...
2024-08-06 11:16:36,731 - app - INFO - Initializing email service...
2024-08-06 11:16:36,732 - app - INFO - Setting up scheduler...
2024-08-06 11:16:36,760 - app - INFO - Initializing scheduler...
2024-08-06 11:16:36,760 - app.scheduler - INFO - Scheduler initialized
2024-08-06 11:16:36,761 - app - INFO - Application initialized successfully
2024-08-06 11:16:39,610 - app - INFO - Initializing Flask app...
2024-08-06 11:16:39,612 - app - INFO - Configuring app...
2024-08-06 11:16:39,612 - app - INFO - Setting up CORS...
2024-08-06 11:16:39,613 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:16:40,096 - app - INFO - Initializing JWT manager...
2024-08-06 11:16:40,097 - app - INFO - Setting up rate limiting...
2024-08-06 11:16:40,098 - app - INFO - Setting up database...
2024-08-06 11:16:40,099 - app - INFO - Starting database setup...
2024-08-06 11:16:40,704 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 11:16:40,705 - app - INFO - Database setup completed successfully
2024-08-06 11:16:40,705 - app - INFO - Registering error handler...
2024-08-06 11:16:40,706 - app - INFO - Initializing CLI commands...
2024-08-06 11:16:40,706 - app - INFO - Registering routes...
2024-08-06 11:16:40,739 - app - INFO - Initializing services...
2024-08-06 11:16:40,763 - app - INFO - Initializing email service...
2024-08-06 11:16:40,765 - app - INFO - Setting up scheduler...
2024-08-06 11:16:40,858 - app - INFO - Initializing scheduler...
2024-08-06 11:16:40,859 - app.scheduler - INFO - Scheduler initialized
2024-08-06 11:16:40,860 - app - INFO - Application initialized successfully
2024-08-06 11:39:13,270 - app - INFO - Initializing Flask app...
2024-08-06 11:39:13,271 - app - INFO - Configuring app...
2024-08-06 11:39:13,272 - app - INFO - Setting up CORS...
2024-08-06 11:39:13,272 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:39:13,592 - app - INFO - Initializing JWT manager...
2024-08-06 11:39:13,593 - app - INFO - Setting up rate limiting...
2024-08-06 11:39:13,594 - app - INFO - Setting up database...
2024-08-06 11:39:13,594 - app - INFO - Starting database setup...
2024-08-06 11:39:14,353 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 11:39:14,354 - app - INFO - Database setup completed successfully
2024-08-06 11:39:14,354 - app - INFO - Registering error handler...
2024-08-06 11:39:14,355 - app - INFO - Initializing CLI commands...
2024-08-06 11:39:14,355 - app - INFO - Registering routes...
2024-08-06 11:39:14,414 - app - INFO - Initializing services...
2024-08-06 11:39:14,423 - app - INFO - Initializing email service...
2024-08-06 11:39:14,423 - app - INFO - Setting up scheduler...
2024-08-06 11:39:14,437 - app - INFO - Initializing scheduler...
2024-08-06 11:39:14,438 - app.scheduler - INFO - Scheduler initialized
2024-08-06 11:39:14,438 - app - INFO - Application initialized successfully
2024-08-06 11:40:27,400 - app - INFO - Initializing Flask app...
2024-08-06 11:40:27,401 - app - INFO - Configuring app...
2024-08-06 11:40:27,401 - app - INFO - Setting up CORS...
2024-08-06 11:40:27,403 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:40:27,581 - app - INFO - Initializing JWT manager...
2024-08-06 11:40:27,581 - app - INFO - Setting up rate limiting...
2024-08-06 11:40:27,583 - app - INFO - Setting up database...
2024-08-06 11:40:27,583 - app - INFO - Starting database setup...
2024-08-06 11:40:28,432 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 11:40:28,432 - app - INFO - Database setup completed successfully
2024-08-06 11:40:28,432 - app - INFO - Registering error handler...
2024-08-06 11:40:28,433 - app - INFO - Initializing CLI commands...
2024-08-06 11:40:28,433 - app - INFO - Registering routes...
2024-08-06 11:40:28,449 - app - INFO - Initializing services...
2024-08-06 11:40:28,458 - app - INFO - Initializing email service...
2024-08-06 11:40:28,458 - app - INFO - Setting up scheduler...
2024-08-06 11:40:28,462 - app - INFO - Initializing scheduler...
2024-08-06 11:40:28,463 - app.scheduler - INFO - Scheduler initialized
2024-08-06 11:40:28,463 - app - INFO - Application initialized successfully
2024-08-06 11:40:29,957 - app - INFO - Initializing Flask app...
2024-08-06 11:40:29,958 - app - INFO - Configuring app...
2024-08-06 11:40:29,958 - app - INFO - Setting up CORS...
2024-08-06 11:40:29,959 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:40:30,259 - app - INFO - Initializing JWT manager...
2024-08-06 11:40:30,259 - app - INFO - Setting up rate limiting...
2024-08-06 11:40:30,261 - app - INFO - Setting up database...
2024-08-06 11:40:30,261 - app - INFO - Starting database setup...
2024-08-06 11:40:30,807 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 11:40:30,807 - app - INFO - Database setup completed successfully
2024-08-06 11:40:30,807 - app - INFO - Registering error handler...
2024-08-06 11:40:30,808 - app - INFO - Initializing CLI commands...
2024-08-06 11:40:30,808 - app - INFO - Registering routes...
2024-08-06 11:40:30,831 - app - INFO - Initializing services...
2024-08-06 11:40:30,841 - app - INFO - Initializing email service...
2024-08-06 11:40:30,842 - app - INFO - Setting up scheduler...
2024-08-06 11:40:30,846 - app - INFO - Initializing scheduler...
2024-08-06 11:40:30,847 - app.scheduler - INFO - Scheduler initialized
2024-08-06 11:40:30,847 - app - INFO - Application initialized successfully
2024-08-06 11:54:53,941 - app - INFO - Initializing Flask app...
2024-08-06 11:54:53,942 - app - INFO - Configuring app...
2024-08-06 11:54:53,943 - app - INFO - Setting up CORS...
2024-08-06 11:54:53,944 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:54:54,257 - app - INFO - Initializing JWT manager...
2024-08-06 11:54:54,258 - app - INFO - Setting up rate limiting...
2024-08-06 11:54:54,259 - app - INFO - Setting up database...
2024-08-06 11:54:54,260 - app - INFO - Starting database setup...
2024-08-06 11:54:54,830 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 11:54:54,831 - app - INFO - Database setup completed successfully
2024-08-06 11:54:54,831 - app - INFO - Registering error handler...
2024-08-06 11:54:54,832 - app - INFO - Initializing CLI commands...
2024-08-06 11:54:54,832 - app - INFO - Registering routes...
2024-08-06 11:54:54,859 - app - INFO - Initializing services...
2024-08-06 11:54:54,876 - app - INFO - Initializing email service...
2024-08-06 11:54:54,877 - app - INFO - Setting up scheduler...
2024-08-06 11:54:54,882 - app - INFO - Initializing scheduler...
2024-08-06 11:54:54,883 - app.scheduler - INFO - Scheduler initialized
2024-08-06 11:54:54,886 - app - INFO - Application initialized successfully
2024-08-06 11:54:57,658 - app - INFO - Initializing Flask app...
2024-08-06 11:54:57,660 - app - INFO - Configuring app...
2024-08-06 11:54:57,661 - app - INFO - Setting up CORS...
2024-08-06 11:54:57,662 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:54:58,057 - app - INFO - Initializing JWT manager...
2024-08-06 11:54:58,058 - app - INFO - Setting up rate limiting...
2024-08-06 11:54:58,060 - app - INFO - Setting up database...
2024-08-06 11:54:58,061 - app - INFO - Starting database setup...
2024-08-06 11:54:58,703 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 11:54:58,703 - app - INFO - Database setup completed successfully
2024-08-06 11:54:58,704 - app - INFO - Registering error handler...
2024-08-06 11:54:58,704 - app - INFO - Initializing CLI commands...
2024-08-06 11:54:58,705 - app - INFO - Registering routes...
2024-08-06 11:54:58,736 - app - INFO - Initializing services...
2024-08-06 11:54:58,753 - app - INFO - Initializing email service...
2024-08-06 11:54:58,755 - app - INFO - Setting up scheduler...
2024-08-06 11:54:58,761 - app - INFO - Initializing scheduler...
2024-08-06 11:54:58,762 - app.scheduler - INFO - Scheduler initialized
2024-08-06 11:54:58,762 - app - INFO - Application initialized successfully
2024-08-06 11:57:20,890 - app - INFO - Initializing Flask app...
2024-08-06 11:57:20,892 - app - INFO - Configuring app...
2024-08-06 11:57:20,893 - app - INFO - Setting up CORS...
2024-08-06 11:57:20,894 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:57:21,232 - app - INFO - Initializing JWT manager...
2024-08-06 11:57:21,232 - app - INFO - Setting up rate limiting...
2024-08-06 11:57:21,234 - app - INFO - Setting up database...
2024-08-06 11:57:21,234 - app - INFO - Starting database setup...
2024-08-06 11:57:21,913 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 11:57:21,913 - app - INFO - Database setup completed successfully
2024-08-06 11:57:21,914 - app - INFO - Registering error handler...
2024-08-06 11:57:21,914 - app - INFO - Initializing CLI commands...
2024-08-06 11:57:21,917 - app - INFO - Registering routes...
2024-08-06 11:57:21,965 - app - INFO - Initializing services...
2024-08-06 11:57:21,982 - app - INFO - Initializing email service...
2024-08-06 11:57:21,983 - app - INFO - Setting up scheduler...
2024-08-06 11:57:21,990 - app - INFO - Initializing scheduler...
2024-08-06 11:57:21,991 - app.scheduler - INFO - Scheduler initialized
2024-08-06 11:57:21,991 - app - INFO - Application initialized successfully
2024-08-06 11:57:51,087 - app - INFO - Initializing Flask app...
2024-08-06 11:57:51,089 - app - INFO - Configuring app...
2024-08-06 11:57:51,090 - app - INFO - Setting up CORS...
2024-08-06 11:57:51,090 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:57:51,423 - app - INFO - Initializing JWT manager...
2024-08-06 11:57:51,423 - app - INFO - Setting up rate limiting...
2024-08-06 11:57:51,424 - app - INFO - Setting up database...
2024-08-06 11:57:51,425 - app - INFO - Starting database setup...
2024-08-06 11:57:51,926 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 11:57:51,927 - app - INFO - Database setup completed successfully
2024-08-06 11:57:51,927 - app - INFO - Registering error handler...
2024-08-06 11:57:51,927 - app - INFO - Initializing CLI commands...
2024-08-06 11:57:51,928 - app - INFO - Registering routes...
2024-08-06 11:57:51,987 - app - INFO - Initializing services...
2024-08-06 11:57:52,004 - app - INFO - Initializing email service...
2024-08-06 11:57:52,007 - app - INFO - Setting up scheduler...
2024-08-06 11:57:52,017 - app - INFO - Initializing scheduler...
2024-08-06 11:57:52,018 - app.scheduler - INFO - Scheduler initialized
2024-08-06 11:57:52,019 - app - INFO - Application initialized successfully
2024-08-06 11:57:54,864 - app - INFO - Initializing Flask app...
2024-08-06 11:57:54,867 - app - INFO - Configuring app...
2024-08-06 11:57:54,868 - app - INFO - Setting up CORS...
2024-08-06 11:57:54,869 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 11:57:55,237 - app - INFO - Initializing JWT manager...
2024-08-06 11:57:55,237 - app - INFO - Setting up rate limiting...
2024-08-06 11:57:55,238 - app - INFO - Setting up database...
2024-08-06 11:57:55,239 - app - INFO - Starting database setup...
2024-08-06 11:57:55,801 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 11:57:55,801 - app - INFO - Database setup completed successfully
2024-08-06 11:57:55,802 - app - INFO - Registering error handler...
2024-08-06 11:57:55,802 - app - INFO - Initializing CLI commands...
2024-08-06 11:57:55,803 - app - INFO - Registering routes...
2024-08-06 11:57:55,830 - app - INFO - Initializing services...
2024-08-06 11:57:55,845 - app - INFO - Initializing email service...
2024-08-06 11:57:55,846 - app - INFO - Setting up scheduler...
2024-08-06 11:57:55,853 - app - INFO - Initializing scheduler...
2024-08-06 11:57:55,854 - app.scheduler - INFO - Scheduler initialized
2024-08-06 11:57:55,854 - app - INFO - Application initialized successfully
2024-08-06 12:06:09,074 - app - INFO - Initializing Flask app...
2024-08-06 12:06:09,077 - app - INFO - Configuring app...
2024-08-06 12:06:09,077 - app - INFO - Setting up CORS...
2024-08-06 12:06:09,078 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:06:09,466 - app - INFO - Initializing JWT manager...
2024-08-06 12:06:09,467 - app - INFO - Setting up rate limiting...
2024-08-06 12:06:09,468 - app - INFO - Setting up database...
2024-08-06 12:06:09,470 - app - INFO - Starting database setup...
2024-08-06 12:06:10,251 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:06:10,252 - app - INFO - Database setup completed successfully
2024-08-06 12:06:10,252 - app - INFO - Registering error handler...
2024-08-06 12:06:10,253 - app - INFO - Initializing CLI commands...
2024-08-06 12:06:10,253 - app - INFO - Registering routes...
2024-08-06 12:06:10,284 - app - INFO - Initializing services...
2024-08-06 12:06:10,300 - app - INFO - Initializing email service...
2024-08-06 12:06:10,301 - app - INFO - Setting up scheduler...
2024-08-06 12:06:10,308 - app - INFO - Initializing scheduler...
2024-08-06 12:06:10,308 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:06:10,309 - app - INFO - Application initialized successfully
2024-08-06 12:06:34,144 - app - INFO - Initializing Flask app...
2024-08-06 12:06:34,146 - app - INFO - Configuring app...
2024-08-06 12:06:34,147 - app - INFO - Setting up CORS...
2024-08-06 12:06:34,147 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:06:34,483 - app - INFO - Initializing JWT manager...
2024-08-06 12:06:34,484 - app - INFO - Setting up rate limiting...
2024-08-06 12:06:34,485 - app - INFO - Setting up database...
2024-08-06 12:06:34,486 - app - INFO - Starting database setup...
2024-08-06 12:06:35,123 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:06:35,124 - app - INFO - Database setup completed successfully
2024-08-06 12:06:35,124 - app - INFO - Registering error handler...
2024-08-06 12:06:35,127 - app - INFO - Initializing CLI commands...
2024-08-06 12:06:35,127 - app - INFO - Registering routes...
2024-08-06 12:06:35,159 - app - INFO - Initializing services...
2024-08-06 12:06:35,177 - app - INFO - Initializing email service...
2024-08-06 12:06:35,179 - app - INFO - Setting up scheduler...
2024-08-06 12:06:35,184 - app - INFO - Initializing scheduler...
2024-08-06 12:06:35,186 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:06:35,186 - app - INFO - Application initialized successfully
2024-08-06 12:06:38,090 - app - INFO - Initializing Flask app...
2024-08-06 12:06:38,092 - app - INFO - Configuring app...
2024-08-06 12:06:38,093 - app - INFO - Setting up CORS...
2024-08-06 12:06:38,093 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:06:38,612 - app - INFO - Initializing JWT manager...
2024-08-06 12:06:38,612 - app - INFO - Setting up rate limiting...
2024-08-06 12:06:38,614 - app - INFO - Setting up database...
2024-08-06 12:06:38,615 - app - INFO - Starting database setup...
2024-08-06 12:06:39,211 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:06:39,212 - app - INFO - Database setup completed successfully
2024-08-06 12:06:39,212 - app - INFO - Registering error handler...
2024-08-06 12:06:39,213 - app - INFO - Initializing CLI commands...
2024-08-06 12:06:39,213 - app - INFO - Registering routes...
2024-08-06 12:06:39,243 - app - INFO - Initializing services...
2024-08-06 12:06:39,261 - app - INFO - Initializing email service...
2024-08-06 12:06:39,264 - app - INFO - Setting up scheduler...
2024-08-06 12:06:39,269 - app - INFO - Initializing scheduler...
2024-08-06 12:06:39,270 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:06:39,272 - app - INFO - Application initialized successfully
2024-08-06 12:22:41,520 - app - INFO - Initializing Flask app...
2024-08-06 12:22:41,522 - app - INFO - Configuring app...
2024-08-06 12:22:41,522 - app - INFO - Setting up CORS...
2024-08-06 12:22:41,522 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:22:41,710 - app - INFO - Initializing JWT manager...
2024-08-06 12:22:41,710 - app - INFO - Setting up rate limiting...
2024-08-06 12:22:41,711 - app - INFO - Setting up database...
2024-08-06 12:22:41,711 - app - INFO - Starting database setup...
2024-08-06 12:22:44,404 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:22:44,404 - app - INFO - Database setup completed successfully
2024-08-06 12:22:44,404 - app - INFO - Registering error handler...
2024-08-06 12:22:44,405 - app - INFO - Initializing CLI commands...
2024-08-06 12:22:44,405 - app - INFO - Registering routes...
2024-08-06 12:22:44,424 - app - INFO - Initializing services...
2024-08-06 12:22:44,433 - app - INFO - Initializing email service...
2024-08-06 12:22:44,434 - app - INFO - Setting up scheduler...
2024-08-06 12:22:44,437 - app - INFO - Initializing scheduler...
2024-08-06 12:22:44,438 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:22:44,438 - app - INFO - Application initialized successfully
2024-08-06 12:22:46,178 - app - INFO - Initializing Flask app...
2024-08-06 12:22:46,180 - app - INFO - Configuring app...
2024-08-06 12:22:46,180 - app - INFO - Setting up CORS...
2024-08-06 12:22:46,181 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:22:46,480 - app - INFO - Initializing JWT manager...
2024-08-06 12:22:46,480 - app - INFO - Setting up rate limiting...
2024-08-06 12:22:46,481 - app - INFO - Setting up database...
2024-08-06 12:22:46,481 - app - INFO - Starting database setup...
2024-08-06 12:22:48,549 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:22:48,549 - app - INFO - Database setup completed successfully
2024-08-06 12:22:48,549 - app - INFO - Registering error handler...
2024-08-06 12:22:48,549 - app - INFO - Initializing CLI commands...
2024-08-06 12:22:48,550 - app - INFO - Registering routes...
2024-08-06 12:22:48,567 - app - INFO - Initializing services...
2024-08-06 12:22:48,575 - app - INFO - Initializing email service...
2024-08-06 12:22:48,576 - app - INFO - Setting up scheduler...
2024-08-06 12:22:48,580 - app - INFO - Initializing scheduler...
2024-08-06 12:22:48,580 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:22:48,580 - app - INFO - Application initialized successfully
2024-08-06 12:23:26,678 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:23:27,232 - app.database - INFO - Database connection established successfully
2024-08-06 12:23:27,463 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:23:27,464 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:23:28,075 - app.database - INFO - Database connection established successfully
2024-08-06 12:23:28,128 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:23:28,136 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:23:28,715 - app.database - INFO - Database connection established successfully
2024-08-06 12:23:28,993 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:23:28,993 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:23:29,560 - app.database - INFO - Database connection established successfully
2024-08-06 12:23:29,634 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:23:29,642 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:23:30,201 - app.database - INFO - Database connection established successfully
2024-08-06 12:23:31,618 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:23:32,117 - app.database - INFO - Database connection established successfully
2024-08-06 12:23:32,175 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:23:32,697 - app.database - INFO - Database connection established successfully
2024-08-06 12:23:33,587 - app.utils.resource_moniter - INFO - CPU Usage: 0.0%
2024-08-06 12:23:33,587 - app.utils.resource_moniter - INFO - Memory Usage: 82.1%
2024-08-06 12:23:33,587 - app.utils.resource_moniter - INFO - Available Memory: 2868.14 MB
2024-08-06 12:23:33,588 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:35:20,143 - app - INFO - Initializing Flask app...
2024-08-06 12:35:20,145 - app - INFO - Configuring app...
2024-08-06 12:35:20,146 - app - INFO - Setting up CORS...
2024-08-06 12:35:20,146 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:35:20,409 - app - INFO - Initializing JWT manager...
2024-08-06 12:35:20,411 - app - INFO - Setting up rate limiting...
2024-08-06 12:35:20,412 - app - INFO - Setting up database...
2024-08-06 12:35:20,413 - app - INFO - Starting database setup...
2024-08-06 12:35:21,040 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:35:21,040 - app - INFO - Database setup completed successfully
2024-08-06 12:35:21,041 - app - INFO - Registering error handler...
2024-08-06 12:35:21,041 - app - INFO - Initializing CLI commands...
2024-08-06 12:35:21,042 - app - INFO - Registering routes...
2024-08-06 12:35:21,116 - app - INFO - Initializing services...
2024-08-06 12:35:21,134 - app - INFO - Initializing email service...
2024-08-06 12:35:21,137 - app - INFO - Setting up scheduler...
2024-08-06 12:35:21,145 - app - INFO - Initializing scheduler...
2024-08-06 12:35:21,146 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:35:21,146 - app - INFO - Application initialized successfully
2024-08-06 12:35:56,948 - app - INFO - Initializing Flask app...
2024-08-06 12:35:56,950 - app - INFO - Configuring app...
2024-08-06 12:35:56,950 - app - INFO - Setting up CORS...
2024-08-06 12:35:56,951 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:35:57,225 - app - INFO - Initializing JWT manager...
2024-08-06 12:35:57,225 - app - INFO - Setting up rate limiting...
2024-08-06 12:35:57,226 - app - INFO - Setting up database...
2024-08-06 12:35:57,227 - app - INFO - Starting database setup...
2024-08-06 12:35:57,804 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:35:57,804 - app - INFO - Database setup completed successfully
2024-08-06 12:35:57,805 - app - INFO - Registering error handler...
2024-08-06 12:35:57,805 - app - INFO - Initializing CLI commands...
2024-08-06 12:35:57,805 - app - INFO - Registering routes...
2024-08-06 12:35:57,834 - app - INFO - Initializing services...
2024-08-06 12:35:57,852 - app - INFO - Initializing email service...
2024-08-06 12:35:57,853 - app - INFO - Setting up scheduler...
2024-08-06 12:35:57,860 - app - INFO - Initializing scheduler...
2024-08-06 12:35:57,861 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:35:57,862 - app - INFO - Application initialized successfully
2024-08-06 12:36:00,664 - app - INFO - Initializing Flask app...
2024-08-06 12:36:00,666 - app - INFO - Configuring app...
2024-08-06 12:36:00,667 - app - INFO - Setting up CORS...
2024-08-06 12:36:00,667 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:36:01,020 - app - INFO - Initializing JWT manager...
2024-08-06 12:36:01,021 - app - INFO - Setting up rate limiting...
2024-08-06 12:36:01,023 - app - INFO - Setting up database...
2024-08-06 12:36:01,024 - app - INFO - Starting database setup...
2024-08-06 12:36:01,630 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:36:01,631 - app - INFO - Database setup completed successfully
2024-08-06 12:36:01,631 - app - INFO - Registering error handler...
2024-08-06 12:36:01,632 - app - INFO - Initializing CLI commands...
2024-08-06 12:36:01,632 - app - INFO - Registering routes...
2024-08-06 12:36:01,668 - app - INFO - Initializing services...
2024-08-06 12:36:01,687 - app - INFO - Initializing email service...
2024-08-06 12:36:01,690 - app - INFO - Setting up scheduler...
2024-08-06 12:36:01,697 - app - INFO - Initializing scheduler...
2024-08-06 12:36:01,699 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:36:01,700 - app - INFO - Application initialized successfully
2024-08-06 12:37:00,294 - app - INFO - Initializing Flask app...
2024-08-06 12:37:00,296 - app - INFO - Configuring app...
2024-08-06 12:37:00,297 - app - INFO - Setting up CORS...
2024-08-06 12:37:00,297 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:37:00,601 - app - INFO - Initializing JWT manager...
2024-08-06 12:37:00,601 - app - INFO - Setting up rate limiting...
2024-08-06 12:37:00,603 - app - INFO - Setting up database...
2024-08-06 12:37:00,604 - app - INFO - Starting database setup...
2024-08-06 12:37:01,569 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:37:01,570 - app - INFO - Database setup completed successfully
2024-08-06 12:37:01,571 - app - INFO - Registering error handler...
2024-08-06 12:37:01,572 - app - INFO - Initializing CLI commands...
2024-08-06 12:37:01,572 - app - INFO - Registering routes...
2024-08-06 12:37:01,609 - app - INFO - Initializing services...
2024-08-06 12:37:01,622 - app - INFO - Initializing email service...
2024-08-06 12:37:01,623 - app - INFO - Setting up scheduler...
2024-08-06 12:37:01,630 - app - INFO - Initializing scheduler...
2024-08-06 12:37:01,631 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:37:01,632 - app - INFO - Application initialized successfully
2024-08-06 12:37:16,609 - app - INFO - Initializing Flask app...
2024-08-06 12:37:16,611 - app - INFO - Configuring app...
2024-08-06 12:37:16,611 - app - INFO - Setting up CORS...
2024-08-06 12:37:16,612 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:37:16,824 - app - INFO - Initializing JWT manager...
2024-08-06 12:37:16,824 - app - INFO - Setting up rate limiting...
2024-08-06 12:37:16,826 - app - INFO - Setting up database...
2024-08-06 12:37:16,826 - app - INFO - Starting database setup...
2024-08-06 12:37:17,358 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:37:17,359 - app - INFO - Database setup completed successfully
2024-08-06 12:37:17,360 - app - INFO - Registering error handler...
2024-08-06 12:37:17,361 - app - INFO - Initializing CLI commands...
2024-08-06 12:37:17,362 - app - INFO - Registering routes...
2024-08-06 12:37:17,387 - app - INFO - Initializing services...
2024-08-06 12:37:17,398 - app - INFO - Initializing email service...
2024-08-06 12:37:17,399 - app - INFO - Setting up scheduler...
2024-08-06 12:37:17,402 - app - INFO - Initializing scheduler...
2024-08-06 12:37:17,403 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:37:17,403 - app - INFO - Application initialized successfully
2024-08-06 12:37:23,586 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:37:24,177 - app.database - INFO - Database connection established successfully
2024-08-06 12:37:24,650 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:37:24,650 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:37:25,407 - app.database - INFO - Database connection established successfully
2024-08-06 12:37:25,449 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:37:25,467 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:37:26,003 - app.database - INFO - Database connection established successfully
2024-08-06 12:37:26,281 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:37:26,282 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:37:26,842 - app.database - INFO - Database connection established successfully
2024-08-06 12:37:26,883 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:37:26,899 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:37:27,431 - app.database - INFO - Database connection established successfully
2024-08-06 12:37:42,976 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:37:43,514 - app.database - INFO - Database connection established successfully
2024-08-06 12:37:43,578 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:37:44,210 - app.database - INFO - Database connection established successfully
2024-08-06 12:37:45,580 - app.utils.resource_moniter - INFO - CPU Usage: 0.0%
2024-08-06 12:37:45,581 - app.utils.resource_moniter - INFO - Memory Usage: 84.9%
2024-08-06 12:37:45,582 - app.utils.resource_moniter - INFO - Available Memory: 2424.60 MB
2024-08-06 12:37:45,583 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:37:58,361 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:37:58,893 - app.database - INFO - Database connection established successfully
2024-08-06 12:38:02,721 - app.utils.resource_moniter - INFO - CPU Usage: 0.0%
2024-08-06 12:38:02,723 - app.utils.resource_moniter - INFO - Memory Usage: 84.7%
2024-08-06 12:38:02,723 - app.utils.resource_moniter - INFO - Available Memory: 2450.66 MB
2024-08-06 12:38:02,737 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:38:27,155 - app - INFO - Initializing Flask app...
2024-08-06 12:38:27,157 - app - INFO - Configuring app...
2024-08-06 12:38:27,157 - app - INFO - Setting up CORS...
2024-08-06 12:38:27,159 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:38:27,500 - app - INFO - Initializing JWT manager...
2024-08-06 12:38:27,501 - app - INFO - Setting up rate limiting...
2024-08-06 12:38:27,503 - app - INFO - Setting up database...
2024-08-06 12:38:27,504 - app - INFO - Starting database setup...
2024-08-06 12:38:28,032 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:38:28,033 - app - INFO - Database setup completed successfully
2024-08-06 12:38:28,033 - app - INFO - Registering error handler...
2024-08-06 12:38:28,033 - app - INFO - Initializing CLI commands...
2024-08-06 12:38:28,034 - app - INFO - Registering routes...
2024-08-06 12:38:28,054 - app - INFO - Initializing services...
2024-08-06 12:38:28,064 - app - INFO - Initializing email service...
2024-08-06 12:38:28,065 - app - INFO - Setting up scheduler...
2024-08-06 12:38:28,070 - app - INFO - Initializing scheduler...
2024-08-06 12:38:28,071 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:38:28,071 - app - INFO - Application initialized successfully
2024-08-06 12:38:51,074 - app - INFO - Initializing Flask app...
2024-08-06 12:38:51,075 - app - INFO - Configuring app...
2024-08-06 12:38:51,076 - app - INFO - Setting up CORS...
2024-08-06 12:38:51,076 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:38:51,399 - app - INFO - Initializing JWT manager...
2024-08-06 12:38:51,399 - app - INFO - Setting up rate limiting...
2024-08-06 12:38:51,401 - app - INFO - Setting up database...
2024-08-06 12:38:51,402 - app - INFO - Starting database setup...
2024-08-06 12:38:52,086 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:38:52,087 - app - INFO - Database setup completed successfully
2024-08-06 12:38:52,087 - app - INFO - Registering error handler...
2024-08-06 12:38:52,087 - app - INFO - Initializing CLI commands...
2024-08-06 12:38:52,088 - app - INFO - Registering routes...
2024-08-06 12:38:52,112 - app - INFO - Initializing services...
2024-08-06 12:38:52,128 - app - INFO - Initializing email service...
2024-08-06 12:38:52,129 - app - INFO - Setting up scheduler...
2024-08-06 12:38:52,135 - app - INFO - Initializing scheduler...
2024-08-06 12:38:52,138 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:38:52,139 - app - INFO - Application initialized successfully
2024-08-06 12:38:55,086 - app - INFO - Initializing Flask app...
2024-08-06 12:38:55,089 - app - INFO - Configuring app...
2024-08-06 12:38:55,089 - app - INFO - Setting up CORS...
2024-08-06 12:38:55,090 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 12:38:55,539 - app - INFO - Initializing JWT manager...
2024-08-06 12:38:55,540 - app - INFO - Setting up rate limiting...
2024-08-06 12:38:55,542 - app - INFO - Setting up database...
2024-08-06 12:38:55,543 - app - INFO - Starting database setup...
2024-08-06 12:38:56,202 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 12:38:56,203 - app - INFO - Database setup completed successfully
2024-08-06 12:38:56,204 - app - INFO - Registering error handler...
2024-08-06 12:38:56,204 - app - INFO - Initializing CLI commands...
2024-08-06 12:38:56,205 - app - INFO - Registering routes...
2024-08-06 12:38:56,239 - app - INFO - Initializing services...
2024-08-06 12:38:56,269 - app - INFO - Initializing email service...
2024-08-06 12:38:56,270 - app - INFO - Setting up scheduler...
2024-08-06 12:38:56,276 - app - INFO - Initializing scheduler...
2024-08-06 12:38:56,278 - app.scheduler - INFO - Scheduler initialized
2024-08-06 12:38:56,278 - app - INFO - Application initialized successfully
2024-08-06 12:39:18,821 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:39:19,459 - app.database - INFO - Database connection established successfully
2024-08-06 12:39:20,040 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:39:20,040 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:39:20,555 - app.database - INFO - Database connection established successfully
2024-08-06 12:39:20,603 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:39:20,614 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:39:21,167 - app.database - INFO - Database connection established successfully
2024-08-06 12:39:21,468 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:39:21,470 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:39:22,002 - app.database - INFO - Database connection established successfully
2024-08-06 12:39:22,040 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 12:39:22,058 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:39:22,630 - app.database - INFO - Database connection established successfully
2024-08-06 12:39:23,960 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:39:24,490 - app.database - INFO - Database connection established successfully
2024-08-06 12:39:24,565 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:39:25,970 - app.database - INFO - Database connection established successfully
2024-08-06 12:39:26,043 - app.utils.resource_moniter - INFO - CPU Usage: 0.0%
2024-08-06 12:39:26,044 - app.utils.resource_moniter - INFO - Memory Usage: 88.8%
2024-08-06 12:39:26,045 - app.utils.resource_moniter - INFO - Available Memory: 1800.40 MB
2024-08-06 12:39:26,045 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:39:30,820 - app.database - INFO - Attempting to establish database connection...
2024-08-06 12:39:31,358 - app.database - INFO - Database connection established successfully
2024-08-06 12:42:11,935 - app.utils.resource_moniter - INFO - CPU Usage: 100.0%
2024-08-06 12:42:11,935 - app.utils.resource_moniter - INFO - Memory Usage: 86.1%
2024-08-06 12:42:11,935 - app.utils.resource_moniter - INFO - Available Memory: 2228.80 MB
2024-08-06 12:42:11,937 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:00:03,994 - app.utils.resource_moniter - INFO - CPU Usage: 0.0%
2024-08-06 13:00:03,995 - app.utils.resource_moniter - INFO - Memory Usage: 80.5%
2024-08-06 13:00:03,996 - app.utils.resource_moniter - INFO - Available Memory: 3128.24 MB
2024-08-06 13:00:03,997 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:26:07,604 - app - INFO - Initializing Flask app...
2024-08-06 13:26:07,618 - app - INFO - Configuring app...
2024-08-06 13:26:07,619 - app - INFO - Setting up CORS...
2024-08-06 13:26:07,619 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 13:26:07,619 - app - INFO - Initializing JWT manager...
2024-08-06 13:26:07,620 - app - INFO - Setting up rate limiting...
2024-08-06 13:26:07,620 - app - INFO - Setting up database...
2024-08-06 13:26:07,621 - app - INFO - Starting database setup...
2024-08-06 13:26:08,339 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 13:26:08,339 - app - INFO - Database setup completed successfully
2024-08-06 13:26:08,339 - app - INFO - Registering error handler...
2024-08-06 13:26:08,339 - app - INFO - Initializing CLI commands...
2024-08-06 13:26:08,340 - app - INFO - Registering routes...
2024-08-06 13:26:08,374 - app - INFO - Initializing services...
2024-08-06 13:26:08,383 - app - INFO - Initializing email service...
2024-08-06 13:26:08,383 - app - INFO - Setting up scheduler...
2024-08-06 13:26:08,388 - app - INFO - Initializing scheduler...
2024-08-06 13:26:08,389 - app.scheduler - INFO - Scheduler initialized
2024-08-06 13:26:08,389 - app - INFO - Application initialized successfully
2024-08-06 13:26:09,753 - app - INFO - Initializing Flask app...
2024-08-06 13:26:09,755 - app - INFO - Configuring app...
2024-08-06 13:26:09,755 - app - INFO - Setting up CORS...
2024-08-06 13:26:09,755 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 13:26:09,756 - app - INFO - Initializing JWT manager...
2024-08-06 13:26:09,756 - app - INFO - Setting up rate limiting...
2024-08-06 13:26:09,757 - app - INFO - Setting up database...
2024-08-06 13:26:09,758 - app - INFO - Starting database setup...
2024-08-06 13:26:10,369 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 13:26:10,370 - app - INFO - Database setup completed successfully
2024-08-06 13:26:10,370 - app - INFO - Registering error handler...
2024-08-06 13:26:10,370 - app - INFO - Initializing CLI commands...
2024-08-06 13:26:10,370 - app - INFO - Registering routes...
2024-08-06 13:26:10,388 - app - INFO - Initializing services...
2024-08-06 13:26:10,403 - app - INFO - Initializing email service...
2024-08-06 13:26:10,404 - app - INFO - Setting up scheduler...
2024-08-06 13:26:10,407 - app - INFO - Initializing scheduler...
2024-08-06 13:26:10,407 - app.scheduler - INFO - Scheduler initialized
2024-08-06 13:26:10,407 - app - INFO - Application initialized successfully
2024-08-06 13:27:12,480 - app - INFO - Initializing Flask app...
2024-08-06 13:27:12,482 - app - INFO - Configuring app...
2024-08-06 13:27:12,482 - app - INFO - Setting up CORS...
2024-08-06 13:27:12,482 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 13:27:12,482 - app - INFO - Initializing JWT manager...
2024-08-06 13:27:12,483 - app - INFO - Setting up rate limiting...
2024-08-06 13:27:12,484 - app - INFO - Setting up database...
2024-08-06 13:27:12,484 - app - INFO - Starting database setup...
2024-08-06 13:27:13,148 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 13:27:13,148 - app - INFO - Database setup completed successfully
2024-08-06 13:27:13,148 - app - INFO - Registering error handler...
2024-08-06 13:27:13,149 - app - INFO - Initializing CLI commands...
2024-08-06 13:27:13,149 - app - INFO - Registering routes...
2024-08-06 13:27:13,164 - app - INFO - Initializing services...
2024-08-06 13:27:13,173 - app - INFO - Initializing email service...
2024-08-06 13:27:13,174 - app - INFO - Setting up scheduler...
2024-08-06 13:27:13,177 - app - INFO - Initializing scheduler...
2024-08-06 13:27:13,177 - app.scheduler - INFO - Scheduler initialized
2024-08-06 13:27:13,178 - app - INFO - Application initialized successfully
2024-08-06 13:27:14,557 - app - INFO - Initializing Flask app...
2024-08-06 13:27:14,558 - app - INFO - Configuring app...
2024-08-06 13:27:14,559 - app - INFO - Setting up CORS...
2024-08-06 13:27:14,560 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 13:27:14,560 - app - INFO - Initializing JWT manager...
2024-08-06 13:27:14,560 - app - INFO - Setting up rate limiting...
2024-08-06 13:27:14,561 - app - INFO - Setting up database...
2024-08-06 13:27:14,562 - app - INFO - Starting database setup...
2024-08-06 13:27:15,226 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 13:27:15,226 - app - INFO - Database setup completed successfully
2024-08-06 13:27:15,226 - app - INFO - Registering error handler...
2024-08-06 13:27:15,226 - app - INFO - Initializing CLI commands...
2024-08-06 13:27:15,227 - app - INFO - Registering routes...
2024-08-06 13:27:15,245 - app - INFO - Initializing services...
2024-08-06 13:27:15,254 - app - INFO - Initializing email service...
2024-08-06 13:27:15,255 - app - INFO - Setting up scheduler...
2024-08-06 13:27:15,258 - app - INFO - Initializing scheduler...
2024-08-06 13:27:15,258 - app.scheduler - INFO - Scheduler initialized
2024-08-06 13:27:15,258 - app - INFO - Application initialized successfully
2024-08-06 13:27:53,472 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:27:54,006 - app.database - INFO - Database connection established successfully
2024-08-06 13:27:54,301 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 13:27:54,302 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:27:54,614 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:27:55,253 - app.database - INFO - Database connection established successfully
2024-08-06 13:27:55,286 - app.database - INFO - Database connection established successfully
2024-08-06 13:27:55,294 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 13:27:55,614 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 13:27:55,614 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:27:55,863 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:27:56,169 - app.database - INFO - Database connection established successfully
2024-08-06 13:27:56,213 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 13:27:56,642 - app.database - INFO - Database connection established successfully
2024-08-06 13:27:58,437 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:27:58,937 - app.database - INFO - Database connection established successfully
2024-08-06 13:27:59,606 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:28:00,181 - app.database - INFO - Database connection established successfully
2024-08-06 13:28:08,691 - app.utils.resource_moniter - INFO - CPU Usage: 0.0%
2024-08-06 13:28:08,691 - app.utils.resource_moniter - INFO - Memory Usage: 90.5%
2024-08-06 13:28:08,692 - app.utils.resource_moniter - INFO - Available Memory: 1528.09 MB
2024-08-06 13:28:08,692 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:28:08,945 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:28:09,464 - app.database - INFO - Database connection established successfully
2024-08-06 13:29:42,216 - app - INFO - Initializing Flask app...
2024-08-06 13:29:42,218 - app - INFO - Configuring app...
2024-08-06 13:29:42,219 - app - INFO - Setting up CORS...
2024-08-06 13:29:42,219 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 13:29:42,220 - app - INFO - Initializing JWT manager...
2024-08-06 13:29:42,220 - app - INFO - Setting up rate limiting...
2024-08-06 13:29:42,221 - app - INFO - Setting up database...
2024-08-06 13:29:42,222 - app - INFO - Starting database setup...
2024-08-06 13:29:43,614 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 13:29:43,614 - app - INFO - Database setup completed successfully
2024-08-06 13:29:43,615 - app - INFO - Registering error handler...
2024-08-06 13:29:43,616 - app - INFO - Initializing CLI commands...
2024-08-06 13:29:43,616 - app - INFO - Registering routes...
2024-08-06 13:29:43,661 - app - INFO - Initializing services...
2024-08-06 13:29:43,685 - app - INFO - Initializing email service...
2024-08-06 13:29:43,686 - app - INFO - Setting up scheduler...
2024-08-06 13:29:43,695 - app - INFO - Initializing scheduler...
2024-08-06 13:29:43,697 - app.scheduler - INFO - Scheduler initialized
2024-08-06 13:29:43,698 - app - INFO - Application initialized successfully
2024-08-06 13:29:47,065 - app - INFO - Initializing Flask app...
2024-08-06 13:29:47,067 - app - INFO - Configuring app...
2024-08-06 13:29:47,068 - app - INFO - Setting up CORS...
2024-08-06 13:29:47,068 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 13:29:47,069 - app - INFO - Initializing JWT manager...
2024-08-06 13:29:47,069 - app - INFO - Setting up rate limiting...
2024-08-06 13:29:47,070 - app - INFO - Setting up database...
2024-08-06 13:29:47,071 - app - INFO - Starting database setup...
2024-08-06 13:29:47,853 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 13:29:47,853 - app - INFO - Database setup completed successfully
2024-08-06 13:29:47,854 - app - INFO - Registering error handler...
2024-08-06 13:29:47,856 - app - INFO - Initializing CLI commands...
2024-08-06 13:29:47,856 - app - INFO - Registering routes...
2024-08-06 13:29:47,896 - app - INFO - Initializing services...
2024-08-06 13:29:47,918 - app - INFO - Initializing email service...
2024-08-06 13:29:47,920 - app - INFO - Setting up scheduler...
2024-08-06 13:29:47,925 - app - INFO - Initializing scheduler...
2024-08-06 13:29:47,927 - app.scheduler - INFO - Scheduler initialized
2024-08-06 13:29:47,927 - app - INFO - Application initialized successfully
2024-08-06 13:29:59,563 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:30:00,153 - app.database - INFO - Database connection established successfully
2024-08-06 13:30:00,968 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:30:01,500 - app.database - INFO - Database connection established successfully
2024-08-06 13:30:03,324 - app.utils.resource_moniter - INFO - CPU Usage: 0.0%
2024-08-06 13:30:03,325 - app.utils.resource_moniter - INFO - Memory Usage: 92.2%
2024-08-06 13:30:03,326 - app.utils.resource_moniter - INFO - Available Memory: 1258.38 MB
2024-08-06 13:30:03,328 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:30:05,414 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:30:06,064 - app.database - INFO - Database connection established successfully
2024-08-06 13:32:45,111 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:32:45,820 - app.database - INFO - Database connection established successfully
2024-08-06 13:45:55,194 - app - INFO - Initializing Flask app...
2024-08-06 13:45:55,197 - app - INFO - Configuring app...
2024-08-06 13:45:55,198 - app - INFO - Setting up CORS...
2024-08-06 13:45:55,198 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 13:45:55,198 - app - INFO - Initializing JWT manager...
2024-08-06 13:45:55,199 - app - INFO - Setting up rate limiting...
2024-08-06 13:45:55,203 - app - INFO - Setting up database...
2024-08-06 13:45:55,204 - app - INFO - Starting database setup...
2024-08-06 13:45:56,143 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 13:45:56,144 - app - INFO - Database setup completed successfully
2024-08-06 13:45:56,144 - app - INFO - Registering error handler...
2024-08-06 13:45:56,146 - app - INFO - Initializing CLI commands...
2024-08-06 13:45:56,147 - app - INFO - Registering routes...
2024-08-06 13:45:56,191 - app - INFO - Initializing services...
2024-08-06 13:45:56,210 - app - INFO - Initializing email service...
2024-08-06 13:45:56,213 - app - INFO - Setting up scheduler...
2024-08-06 13:45:56,231 - app - INFO - Initializing scheduler...
2024-08-06 13:45:56,233 - app.scheduler - INFO - Scheduler initialized
2024-08-06 13:45:56,233 - app - INFO - Application initialized successfully
2024-08-06 13:46:14,335 - app - INFO - Initializing Flask app...
2024-08-06 13:46:14,337 - app - INFO - Configuring app...
2024-08-06 13:46:14,338 - app - INFO - Setting up CORS...
2024-08-06 13:46:14,338 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 13:46:14,338 - app - INFO - Initializing JWT manager...
2024-08-06 13:46:14,339 - app - INFO - Setting up rate limiting...
2024-08-06 13:46:14,343 - app - INFO - Setting up database...
2024-08-06 13:46:14,345 - app - INFO - Starting database setup...
2024-08-06 13:46:14,986 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 13:46:14,987 - app - INFO - Database setup completed successfully
2024-08-06 13:46:14,988 - app - INFO - Registering error handler...
2024-08-06 13:46:14,989 - app - INFO - Initializing CLI commands...
2024-08-06 13:46:14,989 - app - INFO - Registering routes...
2024-08-06 13:46:15,031 - app - INFO - Initializing services...
2024-08-06 13:46:15,046 - app - INFO - Initializing email service...
2024-08-06 13:46:15,048 - app - INFO - Setting up scheduler...
2024-08-06 13:46:15,055 - app - INFO - Initializing scheduler...
2024-08-06 13:46:15,057 - app.scheduler - INFO - Scheduler initialized
2024-08-06 13:46:15,058 - app - INFO - Application initialized successfully
2024-08-06 13:46:39,059 - app - INFO - Initializing Flask app...
2024-08-06 13:46:39,062 - app - INFO - Configuring app...
2024-08-06 13:46:39,062 - app - INFO - Setting up CORS...
2024-08-06 13:46:39,063 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 13:46:39,064 - app - INFO - Initializing JWT manager...
2024-08-06 13:46:39,064 - app - INFO - Setting up rate limiting...
2024-08-06 13:46:39,065 - app - INFO - Setting up database...
2024-08-06 13:46:39,066 - app - INFO - Starting database setup...
2024-08-06 13:46:40,038 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 13:46:40,038 - app - INFO - Database setup completed successfully
2024-08-06 13:46:40,039 - app - INFO - Registering error handler...
2024-08-06 13:46:40,039 - app - INFO - Initializing CLI commands...
2024-08-06 13:46:40,040 - app - INFO - Registering routes...
2024-08-06 13:46:40,050 - app - INFO - Initializing services...
2024-08-06 13:46:40,067 - app - INFO - Initializing email service...
2024-08-06 13:46:40,068 - app - INFO - Setting up scheduler...
2024-08-06 13:46:40,073 - app - INFO - Initializing scheduler...
2024-08-06 13:46:40,074 - app.scheduler - INFO - Scheduler initialized
2024-08-06 13:46:40,074 - app - INFO - Application initialized successfully
2024-08-06 13:46:42,873 - app - INFO - Initializing Flask app...
2024-08-06 13:46:42,877 - app - INFO - Configuring app...
2024-08-06 13:46:42,878 - app - INFO - Setting up CORS...
2024-08-06 13:46:42,879 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 13:46:42,880 - app - INFO - Initializing JWT manager...
2024-08-06 13:46:42,881 - app - INFO - Setting up rate limiting...
2024-08-06 13:46:42,883 - app - INFO - Setting up database...
2024-08-06 13:46:42,884 - app - INFO - Starting database setup...
2024-08-06 13:46:43,554 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 13:46:43,555 - app - INFO - Database setup completed successfully
2024-08-06 13:46:43,555 - app - INFO - Registering error handler...
2024-08-06 13:46:43,556 - app - INFO - Initializing CLI commands...
2024-08-06 13:46:43,556 - app - INFO - Registering routes...
2024-08-06 13:46:43,568 - app - INFO - Initializing services...
2024-08-06 13:46:43,590 - app - INFO - Initializing email service...
2024-08-06 13:46:43,592 - app - INFO - Setting up scheduler...
2024-08-06 13:46:43,599 - app - INFO - Initializing scheduler...
2024-08-06 13:46:43,600 - app.scheduler - INFO - Scheduler initialized
2024-08-06 13:46:43,600 - app - INFO - Application initialized successfully
2024-08-06 13:46:57,354 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:46:57,949 - app.database - INFO - Database connection established successfully
2024-08-06 13:46:58,013 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:46:58,524 - app.database - INFO - Database connection established successfully
2024-08-06 13:47:01,675 - app.database - INFO - Attempting to establish database connection...
2024-08-06 13:47:02,768 - app.database - INFO - Database connection established successfully
2024-08-06 13:50:47,045 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1558, in _request
    response = await self._client.send(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1661, in send
    response = await self._send_handling_auth(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1689, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1726, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1763, in _send_single_request
    response = await transport.handle_async_request(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_transports\default.py", line 373, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection_pool.py", line 216, in handle_async_request
    raise exc from None
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection_pool.py", line 196, in handle_async_request
    response = await connection.handle_async_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 99, in handle_async_request
    raise exc
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 76, in handle_async_request
    stream = await self._connect(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 122, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_backends\auto.py", line 30, in connect_tcp
    return await self._backend.connect_tcp(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_backends\anyio.py", line 116, in connect_tcp
    stream: anyio.abc.ByteStream = await anyio.connect_tcp(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_core\_sockets.py", line 190, in connect_tcp
    gai_res = await getaddrinfo(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_core\_sockets.py", line 568, in getaddrinfo
    gai_res = await get_async_backend().getaddrinfo(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 2403, in getaddrinfo
    return await get_running_loop().getaddrinfo(
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 863, in getaddrinfo
    return await self.run_in_executor(
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 169, in submit
    raise RuntimeError('cannot schedule new futures after '
RuntimeError: cannot schedule new futures after interpreter shutdown

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 40, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1582, in _request
    return await self._retry_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1651, in _retry_request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1582, in _request
    return await self._retry_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1651, in _retry_request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1592, in _request
    raise APIConnectionError(request=request) from err
anthropic.APIConnectionError: Connection error.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 13:50:54,020 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1558, in _request
    response = await self._client.send(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1661, in send
    response = await self._send_handling_auth(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1689, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1726, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1763, in _send_single_request
    response = await transport.handle_async_request(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_transports\default.py", line 373, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection_pool.py", line 216, in handle_async_request
    raise exc from None
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection_pool.py", line 196, in handle_async_request
    response = await connection.handle_async_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 99, in handle_async_request
    raise exc
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 76, in handle_async_request
    stream = await self._connect(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 122, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_backends\auto.py", line 30, in connect_tcp
    return await self._backend.connect_tcp(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_backends\anyio.py", line 116, in connect_tcp
    stream: anyio.abc.ByteStream = await anyio.connect_tcp(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_core\_sockets.py", line 190, in connect_tcp
    gai_res = await getaddrinfo(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_core\_sockets.py", line 568, in getaddrinfo
    gai_res = await get_async_backend().getaddrinfo(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 2403, in getaddrinfo
    return await get_running_loop().getaddrinfo(
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 863, in getaddrinfo
    return await self.run_in_executor(
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 169, in submit
    raise RuntimeError('cannot schedule new futures after '
RuntimeError: cannot schedule new futures after interpreter shutdown

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 40, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1582, in _request
    return await self._retry_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1651, in _retry_request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1582, in _request
    return await self._retry_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1651, in _retry_request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1592, in _request
    raise APIConnectionError(request=request) from err
anthropic.APIConnectionError: Connection error.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 13:51:00,382 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1558, in _request
    response = await self._client.send(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1661, in send
    response = await self._send_handling_auth(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1689, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1726, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1763, in _send_single_request
    response = await transport.handle_async_request(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_transports\default.py", line 373, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection_pool.py", line 216, in handle_async_request
    raise exc from None
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection_pool.py", line 196, in handle_async_request
    response = await connection.handle_async_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 99, in handle_async_request
    raise exc
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 76, in handle_async_request
    stream = await self._connect(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 122, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_backends\auto.py", line 30, in connect_tcp
    return await self._backend.connect_tcp(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_backends\anyio.py", line 116, in connect_tcp
    stream: anyio.abc.ByteStream = await anyio.connect_tcp(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_core\_sockets.py", line 190, in connect_tcp
    gai_res = await getaddrinfo(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_core\_sockets.py", line 568, in getaddrinfo
    gai_res = await get_async_backend().getaddrinfo(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 2403, in getaddrinfo
    return await get_running_loop().getaddrinfo(
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 863, in getaddrinfo
    return await self.run_in_executor(
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 169, in submit
    raise RuntimeError('cannot schedule new futures after '
RuntimeError: cannot schedule new futures after interpreter shutdown

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 40, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1582, in _request
    return await self._retry_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1651, in _retry_request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1582, in _request
    return await self._retry_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1651, in _retry_request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1592, in _request
    raise APIConnectionError(request=request) from err
anthropic.APIConnectionError: Connection error.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 13:51:00,550 - app.utils.error_handlers - ERROR - General error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1558, in _request
    response = await self._client.send(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1661, in send
    response = await self._send_handling_auth(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1689, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1726, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_client.py", line 1763, in _send_single_request
    response = await transport.handle_async_request(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpx\_transports\default.py", line 373, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection_pool.py", line 216, in handle_async_request
    raise exc from None
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection_pool.py", line 196, in handle_async_request
    response = await connection.handle_async_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 99, in handle_async_request
    raise exc
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 76, in handle_async_request
    stream = await self._connect(request)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_async\connection.py", line 122, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_backends\auto.py", line 30, in connect_tcp
    return await self._backend.connect_tcp(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\httpcore\_backends\anyio.py", line 116, in connect_tcp
    stream: anyio.abc.ByteStream = await anyio.connect_tcp(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_core\_sockets.py", line 190, in connect_tcp
    gai_res = await getaddrinfo(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_core\_sockets.py", line 568, in getaddrinfo
    gai_res = await get_async_backend().getaddrinfo(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anyio\_backends\_asyncio.py", line 2403, in getaddrinfo
    return await get_running_loop().getaddrinfo(
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 863, in getaddrinfo
    return await self.run_in_executor(
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 169, in submit
    raise RuntimeError('cannot schedule new futures after '
RuntimeError: cannot schedule new futures after interpreter shutdown

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 40, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1582, in _request
    return await self._retry_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1651, in _retry_request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1582, in _request
    return await self._retry_request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1651, in _retry_request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1592, in _request
    raise APIConnectionError(request=request) from err
anthropic.APIConnectionError: Connection error.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x212af256800 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 41, in match_patient_to_trials
    logger.info(f"Patient profile found: {patient.__dict__}")
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x212af256800 state=finished raised RuntimeError>]

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 22, in start_matching_process
    return current_app.trial_matching_service
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 54, in match_patient_to_trials
    timeout=60.0  # 60 seconds timeout
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 64, in _update_matching_status
    await self._update_matching_status(user_id, 'completed')
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 13:51:03,523 - app - INFO - Initializing Flask app...
2024-08-06 13:51:03,525 - app - INFO - Configuring app...
2024-08-06 13:51:03,525 - app - INFO - Setting up CORS...
2024-08-06 13:51:03,526 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 13:51:03,526 - app - INFO - Initializing JWT manager...
2024-08-06 13:51:03,527 - app - INFO - Setting up rate limiting...
2024-08-06 13:51:03,529 - app - INFO - Setting up database...
2024-08-06 13:51:03,530 - app - INFO - Starting database setup...
2024-08-06 13:51:04,340 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 13:51:04,340 - app - INFO - Database setup completed successfully
2024-08-06 13:51:04,341 - app - INFO - Registering error handler...
2024-08-06 13:51:04,342 - app - INFO - Initializing CLI commands...
2024-08-06 13:51:04,343 - app - INFO - Registering routes...
2024-08-06 13:51:04,386 - app - INFO - Initializing services...
2024-08-06 13:51:04,414 - app - INFO - Initializing email service...
2024-08-06 13:51:04,417 - app - INFO - Setting up scheduler...
2024-08-06 13:51:04,425 - app - INFO - Initializing scheduler...
2024-08-06 13:51:04,426 - app.scheduler - INFO - Scheduler initialized
2024-08-06 13:51:04,427 - app - INFO - Application initialized successfully
2024-08-06 15:06:51,490 - app - INFO - Initializing Flask app...
2024-08-06 15:06:51,492 - app - INFO - Configuring app...
2024-08-06 15:06:51,492 - app - INFO - Setting up CORS...
2024-08-06 15:06:51,493 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:06:51,493 - app - INFO - Initializing JWT manager...
2024-08-06 15:06:51,493 - app - INFO - Setting up rate limiting...
2024-08-06 15:06:51,494 - app - INFO - Setting up database...
2024-08-06 15:06:51,495 - app - INFO - Starting database setup...
2024-08-06 15:06:52,168 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:06:52,168 - app - INFO - Database setup completed successfully
2024-08-06 15:06:52,168 - app - INFO - Registering error handler...
2024-08-06 15:06:52,168 - app - INFO - Initializing CLI commands...
2024-08-06 15:06:52,170 - app - INFO - Registering routes...
2024-08-06 15:06:52,199 - app - INFO - Initializing services...
2024-08-06 15:06:52,215 - app - INFO - Initializing email service...
2024-08-06 15:06:52,216 - app - INFO - Setting up scheduler...
2024-08-06 15:06:52,227 - app - INFO - Initializing scheduler...
2024-08-06 15:06:52,228 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:06:52,228 - app - INFO - Application initialized successfully
2024-08-06 15:06:53,964 - app - INFO - Initializing Flask app...
2024-08-06 15:06:53,966 - app - INFO - Configuring app...
2024-08-06 15:06:53,966 - app - INFO - Setting up CORS...
2024-08-06 15:06:53,966 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:06:53,966 - app - INFO - Initializing JWT manager...
2024-08-06 15:06:53,967 - app - INFO - Setting up rate limiting...
2024-08-06 15:06:53,970 - app - INFO - Setting up database...
2024-08-06 15:06:53,970 - app - INFO - Starting database setup...
2024-08-06 15:06:54,568 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:06:54,569 - app - INFO - Database setup completed successfully
2024-08-06 15:06:54,569 - app - INFO - Registering error handler...
2024-08-06 15:06:54,570 - app - INFO - Initializing CLI commands...
2024-08-06 15:06:54,570 - app - INFO - Registering routes...
2024-08-06 15:06:54,603 - app - INFO - Initializing services...
2024-08-06 15:06:54,632 - app - INFO - Initializing email service...
2024-08-06 15:06:54,634 - app - INFO - Setting up scheduler...
2024-08-06 15:06:54,642 - app - INFO - Initializing scheduler...
2024-08-06 15:06:54,644 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:06:54,645 - app - INFO - Application initialized successfully
2024-08-06 15:07:12,729 - app - INFO - Initializing Flask app...
2024-08-06 15:07:12,730 - app - INFO - Configuring app...
2024-08-06 15:07:12,731 - app - INFO - Setting up CORS...
2024-08-06 15:07:12,731 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:07:12,732 - app - INFO - Initializing JWT manager...
2024-08-06 15:07:12,733 - app - INFO - Setting up rate limiting...
2024-08-06 15:07:12,734 - app - INFO - Setting up database...
2024-08-06 15:07:12,734 - app - INFO - Starting database setup...
2024-08-06 15:07:13,355 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:07:13,355 - app - INFO - Database setup completed successfully
2024-08-06 15:07:13,356 - app - INFO - Registering error handler...
2024-08-06 15:07:13,356 - app - INFO - Initializing CLI commands...
2024-08-06 15:07:13,357 - app - INFO - Registering routes...
2024-08-06 15:07:13,388 - app - INFO - Initializing services...
2024-08-06 15:07:57,074 - app - INFO - Initializing Flask app...
2024-08-06 15:07:57,076 - app - INFO - Configuring app...
2024-08-06 15:07:57,076 - app - INFO - Setting up CORS...
2024-08-06 15:07:57,076 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:07:57,454 - app - INFO - Initializing JWT manager...
2024-08-06 15:09:23,013 - app - INFO - Initializing Flask app...
2024-08-06 15:09:23,015 - app - INFO - Configuring app...
2024-08-06 15:09:23,015 - app - INFO - Setting up CORS...
2024-08-06 15:09:23,016 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:09:23,333 - app - INFO - Initializing JWT manager...
2024-08-06 15:09:23,334 - app - INFO - Setting up rate limiting...
2024-08-06 15:09:23,335 - app - INFO - Setting up database...
2024-08-06 15:09:23,335 - app - INFO - Starting database setup...
2024-08-06 15:09:23,939 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:09:23,939 - app - INFO - Database setup completed successfully
2024-08-06 15:09:23,939 - app - INFO - Registering error handler...
2024-08-06 15:09:23,939 - app - INFO - Initializing CLI commands...
2024-08-06 15:09:23,940 - app - INFO - Registering routes...
2024-08-06 15:09:23,946 - app - INFO - Initializing services...
2024-08-06 15:09:23,959 - app - INFO - Initializing email service...
2024-08-06 15:09:23,959 - app - INFO - Setting up scheduler...
2024-08-06 15:09:23,965 - app - INFO - Initializing scheduler...
2024-08-06 15:09:23,965 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:09:23,966 - app - INFO - Application initialized successfully
2024-08-06 15:09:26,328 - app - INFO - Initializing Flask app...
2024-08-06 15:09:26,329 - app - INFO - Configuring app...
2024-08-06 15:09:26,330 - app - INFO - Setting up CORS...
2024-08-06 15:09:26,330 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:09:26,650 - app - INFO - Initializing JWT manager...
2024-08-06 15:09:26,651 - app - INFO - Setting up rate limiting...
2024-08-06 15:09:26,652 - app - INFO - Setting up database...
2024-08-06 15:09:26,653 - app - INFO - Starting database setup...
2024-08-06 15:09:27,201 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:09:27,201 - app - INFO - Database setup completed successfully
2024-08-06 15:09:27,201 - app - INFO - Registering error handler...
2024-08-06 15:09:27,202 - app - INFO - Initializing CLI commands...
2024-08-06 15:09:27,202 - app - INFO - Registering routes...
2024-08-06 15:09:27,211 - app - INFO - Initializing services...
2024-08-06 15:09:27,229 - app - INFO - Initializing email service...
2024-08-06 15:09:27,230 - app - INFO - Setting up scheduler...
2024-08-06 15:09:27,234 - app - INFO - Initializing scheduler...
2024-08-06 15:09:27,235 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:09:27,235 - app - INFO - Application initialized successfully
2024-08-06 15:19:37,167 - app - INFO - Initializing Flask app...
2024-08-06 15:19:37,168 - app - INFO - Configuring app...
2024-08-06 15:19:37,168 - app - INFO - Setting up CORS...
2024-08-06 15:19:37,169 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:19:37,467 - app - INFO - Initializing JWT manager...
2024-08-06 15:19:37,467 - app - INFO - Setting up rate limiting...
2024-08-06 15:19:37,468 - app - INFO - Setting up database...
2024-08-06 15:19:37,469 - app - INFO - Starting database setup...
2024-08-06 15:19:38,046 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:19:38,046 - app - INFO - Database setup completed successfully
2024-08-06 15:19:38,047 - app - INFO - Registering error handler...
2024-08-06 15:19:38,048 - app - INFO - Initializing CLI commands...
2024-08-06 15:19:38,049 - app - INFO - Registering routes...
2024-08-06 15:19:38,082 - app - INFO - Initializing services...
2024-08-06 15:19:38,094 - app - INFO - Initializing email service...
2024-08-06 15:19:38,094 - app - INFO - Setting up scheduler...
2024-08-06 15:19:38,098 - app - INFO - Initializing scheduler...
2024-08-06 15:19:38,099 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:19:38,099 - app - INFO - Application initialized successfully
2024-08-06 15:20:10,799 - app - INFO - Initializing Flask app...
2024-08-06 15:20:10,801 - app - INFO - Configuring app...
2024-08-06 15:20:10,801 - app - INFO - Setting up CORS...
2024-08-06 15:20:10,802 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:20:11,126 - app - INFO - Initializing JWT manager...
2024-08-06 15:20:11,127 - app - INFO - Setting up rate limiting...
2024-08-06 15:20:11,128 - app - INFO - Setting up database...
2024-08-06 15:20:11,129 - app - INFO - Starting database setup...
2024-08-06 15:20:12,588 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:20:12,588 - app - INFO - Database setup completed successfully
2024-08-06 15:20:12,590 - app - INFO - Registering error handler...
2024-08-06 15:20:12,590 - app - INFO - Initializing CLI commands...
2024-08-06 15:20:12,590 - app - INFO - Registering routes...
2024-08-06 15:20:12,600 - app - INFO - Initializing services...
2024-08-06 15:20:12,616 - app - INFO - Initializing email service...
2024-08-06 15:20:12,617 - app - INFO - Setting up scheduler...
2024-08-06 15:20:12,624 - app - INFO - Initializing scheduler...
2024-08-06 15:20:12,625 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:20:12,625 - app - INFO - Application initialized successfully
2024-08-06 15:20:15,279 - app - INFO - Initializing Flask app...
2024-08-06 15:20:15,281 - app - INFO - Configuring app...
2024-08-06 15:20:15,281 - app - INFO - Setting up CORS...
2024-08-06 15:20:15,282 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:20:15,577 - app - INFO - Initializing JWT manager...
2024-08-06 15:20:15,577 - app - INFO - Setting up rate limiting...
2024-08-06 15:20:15,578 - app - INFO - Setting up database...
2024-08-06 15:20:15,579 - app - INFO - Starting database setup...
2024-08-06 15:20:16,159 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:20:16,160 - app - INFO - Database setup completed successfully
2024-08-06 15:20:16,160 - app - INFO - Registering error handler...
2024-08-06 15:20:16,161 - app - INFO - Initializing CLI commands...
2024-08-06 15:20:16,161 - app - INFO - Registering routes...
2024-08-06 15:20:16,174 - app - INFO - Initializing services...
2024-08-06 15:20:16,189 - app - INFO - Initializing email service...
2024-08-06 15:20:16,189 - app - INFO - Setting up scheduler...
2024-08-06 15:20:16,194 - app - INFO - Initializing scheduler...
2024-08-06 15:20:16,195 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:20:16,195 - app - INFO - Application initialized successfully
2024-08-06 15:22:41,142 - app - INFO - Initializing Flask app...
2024-08-06 15:22:41,143 - app - INFO - Configuring app...
2024-08-06 15:22:41,144 - app - INFO - Setting up CORS...
2024-08-06 15:22:41,144 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:22:41,398 - app - INFO - Initializing JWT manager...
2024-08-06 15:22:41,399 - app - INFO - Setting up rate limiting...
2024-08-06 15:22:41,400 - app - INFO - Setting up database...
2024-08-06 15:22:41,401 - app - INFO - Starting database setup...
2024-08-06 15:22:42,113 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:22:42,114 - app - INFO - Database setup completed successfully
2024-08-06 15:22:42,114 - app - INFO - Registering error handler...
2024-08-06 15:22:42,114 - app - INFO - Initializing CLI commands...
2024-08-06 15:22:42,114 - app - INFO - Registering routes...
2024-08-06 15:22:42,140 - app - INFO - Initializing services...
2024-08-06 15:22:42,152 - app - INFO - Initializing email service...
2024-08-06 15:22:42,153 - app - INFO - Setting up scheduler...
2024-08-06 15:22:42,157 - app - INFO - Initializing scheduler...
2024-08-06 15:22:42,158 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:22:42,159 - app - INFO - Application initialized successfully
2024-08-06 15:23:55,441 - app - INFO - Initializing Flask app...
2024-08-06 15:23:55,442 - app - INFO - Configuring app...
2024-08-06 15:23:55,443 - app - INFO - Setting up CORS...
2024-08-06 15:23:55,443 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:23:55,822 - app - INFO - Initializing JWT manager...
2024-08-06 15:23:55,823 - app - INFO - Setting up rate limiting...
2024-08-06 15:23:55,824 - app - INFO - Setting up database...
2024-08-06 15:23:55,825 - app - INFO - Starting database setup...
2024-08-06 15:23:56,791 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:23:56,792 - app - INFO - Database setup completed successfully
2024-08-06 15:23:56,792 - app - INFO - Registering error handler...
2024-08-06 15:23:56,793 - app - INFO - Initializing CLI commands...
2024-08-06 15:23:56,793 - app - INFO - Registering routes...
2024-08-06 15:23:56,800 - app - INFO - Initializing services...
2024-08-06 15:23:56,813 - app - INFO - Initializing email service...
2024-08-06 15:23:56,813 - app - INFO - Setting up scheduler...
2024-08-06 15:23:56,820 - app - INFO - Initializing scheduler...
2024-08-06 15:23:56,821 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:23:56,822 - app - INFO - Application initialized successfully
2024-08-06 15:23:59,753 - app - INFO - Initializing Flask app...
2024-08-06 15:23:59,756 - app - INFO - Configuring app...
2024-08-06 15:23:59,757 - app - INFO - Setting up CORS...
2024-08-06 15:23:59,757 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:24:00,222 - app - INFO - Initializing JWT manager...
2024-08-06 15:24:00,223 - app - INFO - Setting up rate limiting...
2024-08-06 15:24:00,224 - app - INFO - Setting up database...
2024-08-06 15:24:00,225 - app - INFO - Starting database setup...
2024-08-06 15:24:00,941 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:24:00,942 - app - INFO - Database setup completed successfully
2024-08-06 15:24:00,942 - app - INFO - Registering error handler...
2024-08-06 15:24:00,942 - app - INFO - Initializing CLI commands...
2024-08-06 15:24:00,943 - app - INFO - Registering routes...
2024-08-06 15:24:00,951 - app - INFO - Initializing services...
2024-08-06 15:24:00,966 - app - INFO - Initializing email service...
2024-08-06 15:24:00,967 - app - INFO - Setting up scheduler...
2024-08-06 15:24:00,976 - app - INFO - Initializing scheduler...
2024-08-06 15:24:00,978 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:24:00,978 - app - INFO - Application initialized successfully
2024-08-06 15:35:25,597 - app - INFO - Initializing Flask app...
2024-08-06 15:35:25,598 - app - INFO - Configuring app...
2024-08-06 15:35:25,599 - app - INFO - Setting up CORS...
2024-08-06 15:35:25,599 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:35:25,884 - app - INFO - Initializing JWT manager...
2024-08-06 15:35:25,885 - app - INFO - Setting up rate limiting...
2024-08-06 15:35:25,886 - app - INFO - Setting up database...
2024-08-06 15:35:25,886 - app - INFO - Starting database setup...
2024-08-06 15:35:27,123 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:35:27,123 - app - INFO - Database setup completed successfully
2024-08-06 15:35:27,124 - app - INFO - Registering error handler...
2024-08-06 15:35:27,124 - app - INFO - Initializing CLI commands...
2024-08-06 15:35:27,124 - app - INFO - Registering routes...
2024-08-06 15:35:27,132 - app - INFO - Initializing services...
2024-08-06 15:35:27,148 - app - INFO - Initializing email service...
2024-08-06 15:35:27,149 - app - INFO - Setting up scheduler...
2024-08-06 15:35:27,154 - app - INFO - Initializing scheduler...
2024-08-06 15:35:27,155 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:35:27,156 - app - INFO - Application initialized successfully
2024-08-06 15:35:30,011 - app - INFO - Initializing Flask app...
2024-08-06 15:35:30,013 - app - INFO - Configuring app...
2024-08-06 15:35:30,014 - app - INFO - Setting up CORS...
2024-08-06 15:35:30,014 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:35:30,406 - app - INFO - Initializing JWT manager...
2024-08-06 15:35:30,407 - app - INFO - Setting up rate limiting...
2024-08-06 15:35:30,409 - app - INFO - Setting up database...
2024-08-06 15:35:30,411 - app - INFO - Starting database setup...
2024-08-06 15:35:31,288 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:35:31,289 - app - INFO - Database setup completed successfully
2024-08-06 15:35:31,289 - app - INFO - Registering error handler...
2024-08-06 15:35:31,290 - app - INFO - Initializing CLI commands...
2024-08-06 15:35:31,290 - app - INFO - Registering routes...
2024-08-06 15:35:31,301 - app - INFO - Initializing services...
2024-08-06 15:35:31,319 - app - INFO - Initializing email service...
2024-08-06 15:35:31,320 - app - INFO - Setting up scheduler...
2024-08-06 15:35:31,326 - app - INFO - Initializing scheduler...
2024-08-06 15:35:31,328 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:35:31,329 - app - INFO - Application initialized successfully
2024-08-06 15:42:56,758 - app - INFO - Initializing Flask app...
2024-08-06 15:42:56,760 - app - INFO - Configuring app...
2024-08-06 15:42:56,760 - app - INFO - Setting up CORS...
2024-08-06 15:42:56,761 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:42:57,101 - app - INFO - Initializing JWT manager...
2024-08-06 15:42:57,102 - app - INFO - Setting up rate limiting...
2024-08-06 15:42:57,103 - app - INFO - Setting up database...
2024-08-06 15:42:57,104 - app - INFO - Starting database setup...
2024-08-06 15:42:57,715 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:42:57,716 - app - INFO - Database setup completed successfully
2024-08-06 15:42:57,716 - app - INFO - Registering error handler...
2024-08-06 15:42:57,717 - app - INFO - Initializing CLI commands...
2024-08-06 15:42:57,717 - app - INFO - Registering routes...
2024-08-06 15:42:57,724 - app - INFO - Initializing services...
2024-08-06 15:42:57,738 - app - INFO - Initializing email service...
2024-08-06 15:42:57,738 - app - INFO - Setting up scheduler...
2024-08-06 15:42:57,749 - app - INFO - Initializing scheduler...
2024-08-06 15:42:57,750 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:42:57,750 - app - INFO - Application initialized successfully
2024-08-06 15:43:00,306 - app - INFO - Initializing Flask app...
2024-08-06 15:43:00,308 - app - INFO - Configuring app...
2024-08-06 15:43:00,309 - app - INFO - Setting up CORS...
2024-08-06 15:43:00,309 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:43:00,629 - app - INFO - Initializing JWT manager...
2024-08-06 15:43:00,629 - app - INFO - Setting up rate limiting...
2024-08-06 15:43:00,630 - app - INFO - Setting up database...
2024-08-06 15:43:00,631 - app - INFO - Starting database setup...
2024-08-06 15:43:01,183 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:43:01,184 - app - INFO - Database setup completed successfully
2024-08-06 15:43:01,184 - app - INFO - Registering error handler...
2024-08-06 15:43:01,185 - app - INFO - Initializing CLI commands...
2024-08-06 15:43:01,185 - app - INFO - Registering routes...
2024-08-06 15:43:01,202 - app - INFO - Initializing services...
2024-08-06 15:43:01,232 - app - INFO - Initializing email service...
2024-08-06 15:43:01,232 - app - INFO - Setting up scheduler...
2024-08-06 15:43:01,237 - app - INFO - Initializing scheduler...
2024-08-06 15:43:01,253 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:43:01,254 - app - INFO - Application initialized successfully
2024-08-06 15:45:34,584 - app - INFO - Initializing Flask app...
2024-08-06 15:45:34,585 - app - INFO - Configuring app...
2024-08-06 15:45:34,586 - app - INFO - Setting up CORS...
2024-08-06 15:45:34,586 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:45:34,837 - app - INFO - Initializing JWT manager...
2024-08-06 15:45:34,838 - app - INFO - Setting up rate limiting...
2024-08-06 15:45:34,838 - app - INFO - Setting up database...
2024-08-06 15:45:34,839 - app - INFO - Starting database setup...
2024-08-06 15:45:35,511 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:45:35,512 - app - INFO - Database setup completed successfully
2024-08-06 15:45:35,514 - app - INFO - Registering error handler...
2024-08-06 15:45:35,515 - app - INFO - Initializing CLI commands...
2024-08-06 15:45:35,516 - app - INFO - Registering routes...
2024-08-06 15:45:35,523 - app - INFO - Initializing services...
2024-08-06 15:45:35,537 - app - INFO - Initializing email service...
2024-08-06 15:45:35,538 - app - INFO - Setting up scheduler...
2024-08-06 15:45:35,541 - app - INFO - Initializing scheduler...
2024-08-06 15:45:35,541 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:45:35,542 - app - INFO - Application initialized successfully
2024-08-06 15:48:36,873 - app - INFO - Initializing Flask app...
2024-08-06 15:48:36,876 - app - INFO - Configuring app...
2024-08-06 15:48:36,876 - app - INFO - Setting up CORS...
2024-08-06 15:48:36,876 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:48:37,159 - app - INFO - Initializing JWT manager...
2024-08-06 15:48:37,159 - app - INFO - Setting up rate limiting...
2024-08-06 15:48:37,161 - app - INFO - Setting up database...
2024-08-06 15:48:37,161 - app - INFO - Starting database setup...
2024-08-06 15:48:37,776 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:48:37,777 - app - INFO - Database setup completed successfully
2024-08-06 15:48:37,778 - app - INFO - Registering error handler...
2024-08-06 15:48:37,779 - app - INFO - Initializing CLI commands...
2024-08-06 15:48:37,781 - app - INFO - Registering routes...
2024-08-06 15:48:37,803 - app - INFO - Initializing services...
2024-08-06 15:48:37,830 - app - INFO - Initializing email service...
2024-08-06 15:48:37,831 - app - INFO - Setting up scheduler...
2024-08-06 15:48:37,843 - app - INFO - Initializing scheduler...
2024-08-06 15:48:37,845 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:48:37,846 - app - INFO - Application initialized successfully
2024-08-06 15:48:40,408 - app - INFO - Initializing Flask app...
2024-08-06 15:48:40,412 - app - INFO - Configuring app...
2024-08-06 15:48:40,413 - app - INFO - Setting up CORS...
2024-08-06 15:48:40,413 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:48:40,897 - app - INFO - Initializing JWT manager...
2024-08-06 15:48:40,897 - app - INFO - Setting up rate limiting...
2024-08-06 15:48:40,899 - app - INFO - Setting up database...
2024-08-06 15:48:40,900 - app - INFO - Starting database setup...
2024-08-06 15:48:41,594 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:48:41,594 - app - INFO - Database setup completed successfully
2024-08-06 15:48:41,595 - app - INFO - Registering error handler...
2024-08-06 15:48:41,595 - app - INFO - Initializing CLI commands...
2024-08-06 15:48:41,596 - app - INFO - Registering routes...
2024-08-06 15:48:41,606 - app - INFO - Initializing services...
2024-08-06 15:48:41,626 - app - INFO - Initializing email service...
2024-08-06 15:48:41,626 - app - INFO - Setting up scheduler...
2024-08-06 15:48:41,633 - app - INFO - Initializing scheduler...
2024-08-06 15:48:41,635 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:48:41,636 - app - INFO - Application initialized successfully
2024-08-06 15:56:00,838 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:56:01,568 - app.database - INFO - Database connection established successfully
2024-08-06 15:56:01,869 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:56:01,870 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:56:02,481 - app.database - INFO - Database connection established successfully
2024-08-06 15:56:02,525 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:56:02,548 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:56:02,549 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:56:03,166 - app.database - INFO - Database connection established successfully
2024-08-06 15:56:03,235 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:57:27,981 - app - INFO - Initializing Flask app...
2024-08-06 15:57:27,983 - app - INFO - Configuring app...
2024-08-06 15:57:27,984 - app - INFO - Setting up CORS...
2024-08-06 15:57:27,984 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 15:57:28,347 - app - INFO - Initializing JWT manager...
2024-08-06 15:57:28,348 - app - INFO - Setting up rate limiting...
2024-08-06 15:57:28,350 - app - INFO - Setting up database...
2024-08-06 15:57:28,350 - app - INFO - Starting database setup...
2024-08-06 15:57:29,109 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 15:57:29,110 - app - INFO - Database setup completed successfully
2024-08-06 15:57:29,113 - app - INFO - Registering error handler...
2024-08-06 15:57:29,114 - app - INFO - Initializing CLI commands...
2024-08-06 15:57:29,115 - app - INFO - Registering routes...
2024-08-06 15:57:29,160 - app - INFO - Initializing services...
2024-08-06 15:57:29,177 - app - INFO - Initializing email service...
2024-08-06 15:57:29,178 - app - INFO - Setting up scheduler...
2024-08-06 15:57:29,184 - app - INFO - Initializing scheduler...
2024-08-06 15:57:29,185 - app.scheduler - INFO - Scheduler initialized
2024-08-06 15:57:29,185 - app - INFO - Application initialized successfully
2024-08-06 15:57:29,553 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:57:29,554 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:57:30,264 - app.database - INFO - Database connection established successfully
2024-08-06 15:57:30,331 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:57:30,355 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:57:30,357 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:57:30,954 - app.database - INFO - Database connection established successfully
2024-08-06 15:57:31,006 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:58:42,517 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:58:42,518 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:58:43,110 - app.database - INFO - Database connection established successfully
2024-08-06 15:58:43,154 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:58:43,177 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:58:43,178 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:58:43,834 - app.database - INFO - Database connection established successfully
2024-08-06 15:58:43,876 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:58:53,324 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:58:54,016 - app.database - INFO - Database connection established successfully
2024-08-06 15:58:54,339 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:58:54,340 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:58:54,930 - app.database - INFO - Database connection established successfully
2024-08-06 15:58:54,985 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:58:55,021 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:58:55,023 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:58:55,626 - app.database - INFO - Database connection established successfully
2024-08-06 15:58:55,666 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:59:00,383 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:59:00,384 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:59:00,923 - app.database - INFO - Database connection established successfully
2024-08-06 15:59:00,974 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:59:01,128 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 15:59:01,130 - app.database - INFO - Attempting to establish database connection...
2024-08-06 15:59:01,735 - app.database - INFO - Database connection established successfully
2024-08-06 15:59:01,778 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:01:20,816 - app - INFO - Initializing Flask app...
2024-08-06 16:01:20,817 - app - INFO - Configuring app...
2024-08-06 16:01:20,817 - app - INFO - Setting up CORS...
2024-08-06 16:01:20,817 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:01:20,994 - app - INFO - Initializing JWT manager...
2024-08-06 16:01:20,994 - app - INFO - Setting up rate limiting...
2024-08-06 16:01:20,995 - app - INFO - Setting up database...
2024-08-06 16:01:20,995 - app - INFO - Starting database setup...
2024-08-06 16:01:22,007 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:01:22,007 - app - INFO - Database setup completed successfully
2024-08-06 16:01:22,008 - app - INFO - Registering error handler...
2024-08-06 16:01:22,008 - app - INFO - Initializing CLI commands...
2024-08-06 16:01:22,008 - app - INFO - Registering routes...
2024-08-06 16:01:22,013 - app - INFO - Initializing services...
2024-08-06 16:01:22,022 - app - INFO - Initializing email service...
2024-08-06 16:01:22,022 - app - INFO - Setting up scheduler...
2024-08-06 16:01:22,025 - app - INFO - Initializing scheduler...
2024-08-06 16:01:22,026 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:01:22,026 - app - INFO - Application initialized successfully
2024-08-06 16:01:23,470 - app - INFO - Initializing Flask app...
2024-08-06 16:01:23,472 - app - INFO - Configuring app...
2024-08-06 16:01:23,472 - app - INFO - Setting up CORS...
2024-08-06 16:01:23,473 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:01:23,737 - app - INFO - Initializing JWT manager...
2024-08-06 16:01:23,737 - app - INFO - Setting up rate limiting...
2024-08-06 16:01:23,738 - app - INFO - Setting up database...
2024-08-06 16:01:23,739 - app - INFO - Starting database setup...
2024-08-06 16:01:24,843 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:01:24,843 - app - INFO - Database setup completed successfully
2024-08-06 16:01:24,844 - app - INFO - Registering error handler...
2024-08-06 16:01:24,844 - app - INFO - Initializing CLI commands...
2024-08-06 16:01:24,844 - app - INFO - Registering routes...
2024-08-06 16:01:24,850 - app - INFO - Initializing services...
2024-08-06 16:01:24,859 - app - INFO - Initializing email service...
2024-08-06 16:01:24,859 - app - INFO - Setting up scheduler...
2024-08-06 16:01:24,863 - app - INFO - Initializing scheduler...
2024-08-06 16:01:24,864 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:01:24,864 - app - INFO - Application initialized successfully
2024-08-06 16:01:34,517 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:01:35,182 - app.database - INFO - Database connection established successfully
2024-08-06 16:01:35,364 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:01:35,365 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:01:35,908 - app.database - INFO - Database connection established successfully
2024-08-06 16:01:35,956 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:01:35,963 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:01:35,963 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:01:36,522 - app.database - INFO - Database connection established successfully
2024-08-06 16:01:36,571 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:08:39,378 - app - INFO - Initializing Flask app...
2024-08-06 16:08:39,379 - app - INFO - Configuring app...
2024-08-06 16:08:39,380 - app - INFO - Setting up CORS...
2024-08-06 16:08:39,380 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:08:39,633 - app - INFO - Initializing JWT manager...
2024-08-06 16:08:39,634 - app - INFO - Setting up rate limiting...
2024-08-06 16:08:39,635 - app - INFO - Setting up database...
2024-08-06 16:08:39,635 - app - INFO - Starting database setup...
2024-08-06 16:08:40,464 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:08:40,464 - app - INFO - Database setup completed successfully
2024-08-06 16:08:40,464 - app - INFO - Registering error handler...
2024-08-06 16:08:40,464 - app - INFO - Initializing CLI commands...
2024-08-06 16:08:40,465 - app - INFO - Registering routes...
2024-08-06 16:08:40,501 - app - INFO - Initializing services...
2024-08-06 16:08:40,511 - app - INFO - Initializing email service...
2024-08-06 16:08:40,511 - app - INFO - Setting up scheduler...
2024-08-06 16:08:40,516 - app - INFO - Initializing scheduler...
2024-08-06 16:08:40,516 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:08:40,516 - app - INFO - Application initialized successfully
2024-08-06 16:11:53,754 - app - INFO - Initializing Flask app...
2024-08-06 16:11:53,755 - app - INFO - Configuring app...
2024-08-06 16:11:53,756 - app - INFO - Setting up CORS...
2024-08-06 16:11:53,756 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:11:53,941 - app - INFO - Initializing JWT manager...
2024-08-06 16:11:53,941 - app - INFO - Setting up rate limiting...
2024-08-06 16:11:53,942 - app - INFO - Setting up database...
2024-08-06 16:11:53,942 - app - INFO - Starting database setup...
2024-08-06 16:11:54,629 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:11:54,629 - app - INFO - Database setup completed successfully
2024-08-06 16:11:54,630 - app - INFO - Registering error handler...
2024-08-06 16:11:54,631 - app - INFO - Initializing CLI commands...
2024-08-06 16:11:54,631 - app - INFO - Registering routes...
2024-08-06 16:11:54,637 - app - INFO - Initializing services...
2024-08-06 16:11:54,646 - app - INFO - Initializing email service...
2024-08-06 16:11:54,646 - app - INFO - Setting up scheduler...
2024-08-06 16:11:54,649 - app - INFO - Initializing scheduler...
2024-08-06 16:11:54,649 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:11:54,650 - app - INFO - Application initialized successfully
2024-08-06 16:11:54,790 - app.utils.error_handlers - ERROR - General error: 'Flask' object has no attribute 'socketio'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 54, in get_matches
    trial_matching_service = TrialMatchingService(current_app.anthropic_service, current_app.clinical_trials_service, current_app.socketio)
AttributeError: 'Flask' object has no attribute 'socketio'

2024-08-06 16:12:09,219 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:12:09,888 - app.database - INFO - Database connection established successfully
2024-08-06 16:12:10,135 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:12:10,135 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:12:10,732 - app.database - INFO - Database connection established successfully
2024-08-06 16:12:10,772 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:12:10,782 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:12:10,783 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:12:11,575 - app.database - INFO - Database connection established successfully
2024-08-06 16:12:11,627 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:12:12,737 - app.utils.error_handlers - ERROR - General error: 'Flask' object has no attribute 'socketio'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 54, in get_matches
    trial_matching_service = TrialMatchingService(current_app.anthropic_service, current_app.clinical_trials_service, current_app.socketio)
AttributeError: 'Flask' object has no attribute 'socketio'

2024-08-06 16:12:12,748 - app.utils.error_handlers - ERROR - General error: 'Flask' object has no attribute 'socketio'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 54, in get_matches
    trial_matching_service = TrialMatchingService(current_app.anthropic_service, current_app.clinical_trials_service, current_app.socketio)
AttributeError: 'Flask' object has no attribute 'socketio'

2024-08-06 16:12:16,630 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:12:16,630 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:12:17,223 - app.database - INFO - Database connection established successfully
2024-08-06 16:12:17,264 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:12:17,272 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:12:17,272 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:12:17,915 - app.database - INFO - Database connection established successfully
2024-08-06 16:12:17,975 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:12:18,260 - app.utils.error_handlers - ERROR - General error: 'Flask' object has no attribute 'socketio'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 54, in get_matches
    trial_matching_service = TrialMatchingService(current_app.anthropic_service, current_app.clinical_trials_service, current_app.socketio)
AttributeError: 'Flask' object has no attribute 'socketio'

2024-08-06 16:12:18,267 - app.utils.error_handlers - ERROR - General error: 'Flask' object has no attribute 'socketio'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 54, in get_matches
    trial_matching_service = TrialMatchingService(current_app.anthropic_service, current_app.clinical_trials_service, current_app.socketio)
AttributeError: 'Flask' object has no attribute 'socketio'

2024-08-06 16:14:07,125 - app - INFO - Initializing Flask app...
2024-08-06 16:14:07,126 - app - INFO - Configuring app...
2024-08-06 16:14:07,126 - app - INFO - Setting up CORS...
2024-08-06 16:14:07,127 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:14:07,292 - app - INFO - Initializing JWT manager...
2024-08-06 16:14:07,292 - app - INFO - Setting up rate limiting...
2024-08-06 16:14:07,293 - app - INFO - Setting up database...
2024-08-06 16:14:07,294 - app - INFO - Starting database setup...
2024-08-06 16:14:07,912 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:14:07,912 - app - INFO - Database setup completed successfully
2024-08-06 16:14:07,913 - app - INFO - Registering error handler...
2024-08-06 16:14:07,914 - app - INFO - Initializing CLI commands...
2024-08-06 16:14:07,914 - app - INFO - Registering routes...
2024-08-06 16:14:07,919 - app - INFO - Initializing services...
2024-08-06 16:14:07,929 - app - INFO - Initializing email service...
2024-08-06 16:14:07,929 - app - INFO - Setting up scheduler...
2024-08-06 16:14:07,932 - app - INFO - Initializing scheduler...
2024-08-06 16:14:07,932 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:14:07,932 - app - INFO - Application initialized successfully
2024-08-06 16:14:23,510 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:14:24,094 - app.database - INFO - Database connection established successfully
2024-08-06 16:14:24,365 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:14:24,365 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:14:25,066 - app.database - INFO - Database connection established successfully
2024-08-06 16:14:25,117 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:14:25,125 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:14:25,126 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:14:25,738 - app.database - INFO - Database connection established successfully
2024-08-06 16:14:25,798 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:14:27,209 - app.utils.error_handlers - ERROR - General error: 'Flask' object has no attribute 'socketio'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 54, in get_matches
    trial_matching_service = TrialMatchingService(current_app.anthropic_service, current_app.clinical_trials_service, current_app.socketio)
AttributeError: 'Flask' object has no attribute 'socketio'

2024-08-06 16:14:27,220 - app.utils.error_handlers - ERROR - General error: 'Flask' object has no attribute 'socketio'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 54, in get_matches
    trial_matching_service = TrialMatchingService(current_app.anthropic_service, current_app.clinical_trials_service, current_app.socketio)
AttributeError: 'Flask' object has no attribute 'socketio'

2024-08-06 16:19:24,255 - app - INFO - Initializing Flask app...
2024-08-06 16:19:24,256 - app - INFO - Configuring app...
2024-08-06 16:19:24,256 - app - INFO - Setting up CORS...
2024-08-06 16:19:24,257 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:19:24,430 - app - INFO - Initializing JWT manager...
2024-08-06 16:19:24,431 - app - INFO - Setting up rate limiting...
2024-08-06 16:19:24,431 - app - INFO - Setting up database...
2024-08-06 16:19:24,432 - app - INFO - Starting database setup...
2024-08-06 16:19:25,195 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:19:25,195 - app - INFO - Database setup completed successfully
2024-08-06 16:19:25,196 - app - INFO - Registering error handler...
2024-08-06 16:19:25,196 - app - INFO - Initializing CLI commands...
2024-08-06 16:19:25,196 - app - INFO - Registering routes...
2024-08-06 16:19:25,202 - app - INFO - Initializing services...
2024-08-06 16:19:25,211 - app - INFO - Initializing email service...
2024-08-06 16:19:25,211 - app - INFO - Setting up scheduler...
2024-08-06 16:19:25,214 - app - INFO - Initializing scheduler...
2024-08-06 16:19:25,215 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:19:25,215 - app - INFO - Application initialized successfully
2024-08-06 16:19:26,423 - app - INFO - Initializing Flask app...
2024-08-06 16:19:26,424 - app - INFO - Configuring app...
2024-08-06 16:19:26,425 - app - INFO - Setting up CORS...
2024-08-06 16:19:26,425 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:19:26,641 - app - INFO - Initializing JWT manager...
2024-08-06 16:19:26,641 - app - INFO - Setting up rate limiting...
2024-08-06 16:19:26,642 - app - INFO - Setting up database...
2024-08-06 16:19:26,643 - app - INFO - Starting database setup...
2024-08-06 16:19:27,295 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:19:27,295 - app - INFO - Database setup completed successfully
2024-08-06 16:19:27,295 - app - INFO - Registering error handler...
2024-08-06 16:19:27,296 - app - INFO - Initializing CLI commands...
2024-08-06 16:19:27,297 - app - INFO - Registering routes...
2024-08-06 16:19:27,305 - app - INFO - Initializing services...
2024-08-06 16:19:27,318 - app - INFO - Initializing email service...
2024-08-06 16:19:27,318 - app - INFO - Setting up scheduler...
2024-08-06 16:19:27,322 - app - INFO - Initializing scheduler...
2024-08-06 16:19:27,323 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:19:27,323 - app - INFO - Application initialized successfully
2024-08-06 16:19:45,304 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:19:45,305 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:19:45,936 - app.database - INFO - Database connection established successfully
2024-08-06 16:19:45,993 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:19:46,005 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:19:46,005 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:19:46,675 - app.database - INFO - Database connection established successfully
2024-08-06 16:19:46,720 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:20:09,531 - app.services.trial_matching_service - INFO - Retrieving recent matches for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:20:09,531 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:20:10,148 - app.database - INFO - Database connection established successfully
2024-08-06 16:20:10,149 - app.services.trial_matching_service - ERROR - Error in get_recent_matches: limit must be an integer
2024-08-06 16:20:10,165 - app.services.trial_matching_service - ERROR - Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:20:10,166 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:20:10,175 - app.services.trial_matching_service - INFO - Retrieving recent matches for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:20:10,175 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:20:10,813 - app.database - INFO - Database connection established successfully
2024-08-06 16:20:10,814 - app.services.trial_matching_service - ERROR - Error in get_recent_matches: limit must be an integer
2024-08-06 16:20:10,814 - app.services.trial_matching_service - ERROR - Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:20:10,814 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:20:11,983 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:20:11,983 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:20:12,633 - app.database - INFO - Database connection established successfully
2024-08-06 16:20:12,822 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:20:20,949 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:20:53,326 - app - INFO - Initializing Flask app...
2024-08-06 16:20:53,327 - app - INFO - Configuring app...
2024-08-06 16:20:53,328 - app - INFO - Setting up CORS...
2024-08-06 16:20:53,328 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:20:53,508 - app - INFO - Initializing JWT manager...
2024-08-06 16:20:53,509 - app - INFO - Setting up rate limiting...
2024-08-06 16:20:53,509 - app - INFO - Setting up database...
2024-08-06 16:20:53,510 - app - INFO - Starting database setup...
2024-08-06 16:20:54,139 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:20:54,139 - app - INFO - Database setup completed successfully
2024-08-06 16:20:54,140 - app - INFO - Registering error handler...
2024-08-06 16:20:54,140 - app - INFO - Initializing CLI commands...
2024-08-06 16:20:54,140 - app - INFO - Registering routes...
2024-08-06 16:20:54,147 - app - INFO - Initializing services...
2024-08-06 16:20:54,155 - app - INFO - Initializing email service...
2024-08-06 16:20:54,156 - app - INFO - Setting up scheduler...
2024-08-06 16:20:54,158 - app - INFO - Initializing scheduler...
2024-08-06 16:20:54,158 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:20:54,159 - app - INFO - Application initialized successfully
2024-08-06 16:20:55,766 - app - INFO - Initializing Flask app...
2024-08-06 16:20:55,768 - app - INFO - Configuring app...
2024-08-06 16:20:55,768 - app - INFO - Setting up CORS...
2024-08-06 16:20:55,768 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:20:56,048 - app - INFO - Initializing JWT manager...
2024-08-06 16:20:56,048 - app - INFO - Setting up rate limiting...
2024-08-06 16:20:56,049 - app - INFO - Setting up database...
2024-08-06 16:20:56,050 - app - INFO - Starting database setup...
2024-08-06 16:20:56,618 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:20:56,619 - app - INFO - Database setup completed successfully
2024-08-06 16:20:56,619 - app - INFO - Registering error handler...
2024-08-06 16:20:56,619 - app - INFO - Initializing CLI commands...
2024-08-06 16:20:56,619 - app - INFO - Registering routes...
2024-08-06 16:20:56,626 - app - INFO - Initializing services...
2024-08-06 16:20:56,639 - app - INFO - Initializing email service...
2024-08-06 16:20:56,639 - app - INFO - Setting up scheduler...
2024-08-06 16:20:56,643 - app - INFO - Initializing scheduler...
2024-08-06 16:20:56,643 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:20:56,643 - app - INFO - Application initialized successfully
2024-08-06 16:21:02,866 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:21:03,402 - app.database - INFO - Database connection established successfully
2024-08-06 16:21:03,604 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:21:03,604 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:21:04,118 - app.database - INFO - Database connection established successfully
2024-08-06 16:21:04,163 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:21:04,173 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:21:04,173 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:21:04,741 - app.database - INFO - Database connection established successfully
2024-08-06 16:21:04,780 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:21:05,875 - app.services.trial_matching_service - INFO - Retrieving recent matches for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:21:05,876 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:21:06,470 - app.database - INFO - Database connection established successfully
2024-08-06 16:21:06,470 - app.services.trial_matching_service - ERROR - Error in get_recent_matches: limit must be an integer
2024-08-06 16:21:06,471 - app.services.trial_matching_service - ERROR - Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:21:06,471 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:21:06,478 - app.services.trial_matching_service - INFO - Retrieving recent matches for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:21:06,479 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:21:07,005 - app.database - INFO - Database connection established successfully
2024-08-06 16:21:07,005 - app.services.trial_matching_service - ERROR - Error in get_recent_matches: limit must be an integer
2024-08-06 16:21:07,005 - app.services.trial_matching_service - ERROR - Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:21:07,006 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:21:07,703 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:21:07,704 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:21:08,251 - app.database - INFO - Database connection established successfully
2024-08-06 16:21:08,385 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:21:17,158 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:21:29,927 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:21:40,913 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:21:40,929 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x219a097cdc0 state=finished raised RuntimeError>]
2024-08-06 16:21:40,930 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x219a097cdc0 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x219a097cdc0 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x219a097cdc0 state=finished raised RuntimeError>]

2024-08-06 16:21:42,062 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:24:05,319 - app - INFO - Initializing Flask app...
2024-08-06 16:24:05,320 - app - INFO - Configuring app...
2024-08-06 16:24:05,320 - app - INFO - Setting up CORS...
2024-08-06 16:24:05,320 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:24:05,515 - app - INFO - Initializing JWT manager...
2024-08-06 16:24:05,515 - app - INFO - Setting up rate limiting...
2024-08-06 16:24:05,516 - app - INFO - Setting up database...
2024-08-06 16:24:05,516 - app - INFO - Starting database setup...
2024-08-06 16:24:06,580 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:24:06,580 - app - INFO - Database setup completed successfully
2024-08-06 16:24:06,580 - app - INFO - Registering error handler...
2024-08-06 16:24:06,581 - app - INFO - Initializing CLI commands...
2024-08-06 16:24:06,581 - app - INFO - Registering routes...
2024-08-06 16:24:06,586 - app - INFO - Initializing services...
2024-08-06 16:24:06,594 - app - INFO - Initializing email service...
2024-08-06 16:24:06,595 - app - INFO - Setting up scheduler...
2024-08-06 16:24:06,597 - app - INFO - Initializing scheduler...
2024-08-06 16:24:06,598 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:24:06,598 - app - INFO - Application initialized successfully
2024-08-06 16:24:08,539 - app - INFO - Initializing Flask app...
2024-08-06 16:24:08,540 - app - INFO - Configuring app...
2024-08-06 16:24:08,541 - app - INFO - Setting up CORS...
2024-08-06 16:24:08,541 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:24:08,799 - app - INFO - Initializing JWT manager...
2024-08-06 16:24:08,799 - app - INFO - Setting up rate limiting...
2024-08-06 16:24:08,800 - app - INFO - Setting up database...
2024-08-06 16:24:08,801 - app - INFO - Starting database setup...
2024-08-06 16:24:09,508 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:24:09,509 - app - INFO - Database setup completed successfully
2024-08-06 16:24:09,517 - app - INFO - Registering error handler...
2024-08-06 16:24:09,517 - app - INFO - Initializing CLI commands...
2024-08-06 16:24:09,517 - app - INFO - Registering routes...
2024-08-06 16:24:09,532 - app - INFO - Initializing services...
2024-08-06 16:24:09,550 - app - INFO - Initializing email service...
2024-08-06 16:24:09,552 - app - INFO - Setting up scheduler...
2024-08-06 16:24:09,559 - app - INFO - Initializing scheduler...
2024-08-06 16:24:09,560 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:24:09,561 - app - INFO - Application initialized successfully
2024-08-06 16:24:18,742 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:24:19,324 - app.database - INFO - Database connection established successfully
2024-08-06 16:24:19,515 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:24:19,515 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:24:20,044 - app.database - INFO - Database connection established successfully
2024-08-06 16:24:20,091 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:24:20,100 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:24:20,101 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:24:20,631 - app.database - INFO - Database connection established successfully
2024-08-06 16:24:20,670 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:24:21,702 - app.services.trial_matching_service - INFO - Retrieving recent matches for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:24:21,702 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:24:22,257 - app.database - INFO - Database connection established successfully
2024-08-06 16:24:22,258 - app.services.trial_matching_service - ERROR - Error in get_recent_matches: limit must be an integer
2024-08-06 16:24:22,259 - app.services.trial_matching_service - ERROR - Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:24:22,260 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:24:22,266 - app.services.trial_matching_service - INFO - Retrieving recent matches for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:24:22,266 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:24:22,856 - app.database - INFO - Database connection established successfully
2024-08-06 16:24:22,857 - app.services.trial_matching_service - ERROR - Error in get_recent_matches: limit must be an integer
2024-08-06 16:24:22,857 - app.services.trial_matching_service - ERROR - Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:24:22,858 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 213, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:24:24,213 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:24:24,213 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:24:24,888 - app.database - INFO - Database connection established successfully
2024-08-06 16:24:25,072 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:24:32,112 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:24:44,812 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:24:55,814 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:24:55,817 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367f2f50 state=finished raised RuntimeError>]
2024-08-06 16:24:55,818 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367f2f50 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3367f2f50 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367f2f50 state=finished raised RuntimeError>]

2024-08-06 16:24:57,017 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:25:02,060 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:25:11,682 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:25:20,203 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:25:20,205 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336a29f00 state=finished raised RuntimeError>]
2024-08-06 16:25:20,207 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336a29f00 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c336a29f00 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336a29f00 state=finished raised RuntimeError>]

2024-08-06 16:25:21,344 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:25:26,954 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:25:33,550 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:25:42,858 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:25:42,859 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3365a2f50 state=finished raised RuntimeError>]
2024-08-06 16:25:42,860 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3365a2f50 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3365a2f50 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3365a2f50 state=finished raised RuntimeError>]

2024-08-06 16:25:44,150 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:25:47,415 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:25:56,177 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:26:05,079 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:26:05,080 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367f1e10 state=finished raised RuntimeError>]
2024-08-06 16:26:05,081 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367f1e10 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3367f1e10 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367f1e10 state=finished raised RuntimeError>]

2024-08-06 16:26:06,261 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:26:11,507 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:26:20,672 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:26:32,461 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:26:32,462 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336840c10 state=finished raised RuntimeError>]
2024-08-06 16:26:32,464 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336840c10 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c336840c10 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336840c10 state=finished raised RuntimeError>]

2024-08-06 16:26:33,608 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:26:39,684 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:26:46,941 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:26:53,372 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:26:53,372 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3365a2c20 state=finished raised RuntimeError>]
2024-08-06 16:26:53,374 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3365a2c20 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3365a2c20 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3365a2c20 state=finished raised RuntimeError>]

2024-08-06 16:26:54,595 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:26:58,422 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:27:08,949 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:27:19,880 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:27:19,881 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3369cf7f0 state=finished raised RuntimeError>]
2024-08-06 16:27:19,881 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3369cf7f0 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3369cf7f0 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3369cf7f0 state=finished raised RuntimeError>]

2024-08-06 16:27:20,997 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:27:26,761 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:27:34,640 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:27:42,760 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:27:42,761 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336841150 state=finished raised RuntimeError>]
2024-08-06 16:27:42,762 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336841150 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c336841150 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336841150 state=finished raised RuntimeError>]

2024-08-06 16:27:43,861 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:27:49,389 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:27:59,449 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:28:08,877 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:28:08,881 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3369cf010 state=finished raised RuntimeError>]
2024-08-06 16:28:08,883 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3369cf010 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3369cf010 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3369cf010 state=finished raised RuntimeError>]

2024-08-06 16:28:09,985 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:28:15,685 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:28:22,363 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:28:30,937 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:28:30,938 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367703d0 state=finished raised RuntimeError>]
2024-08-06 16:28:30,939 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367703d0 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3367703d0 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367703d0 state=finished raised RuntimeError>]

2024-08-06 16:28:32,068 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:28:37,448 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:28:46,845 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:28:53,977 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:28:53,980 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336770f10 state=finished raised RuntimeError>]
2024-08-06 16:28:53,981 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336770f10 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c336770f10 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336770f10 state=finished raised RuntimeError>]

2024-08-06 16:28:55,108 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:29:01,607 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:29:08,308 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:29:15,507 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:29:15,508 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336a28c70 state=finished raised RuntimeError>]
2024-08-06 16:29:15,509 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336a28c70 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c336a28c70 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336a28c70 state=finished raised RuntimeError>]

2024-08-06 16:29:16,621 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:29:20,565 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:29:28,546 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:29:35,105 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:29:35,106 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f2d10 state=finished raised RuntimeError>]
2024-08-06 16:29:35,106 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f2d10 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3366f2d10 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f2d10 state=finished raised RuntimeError>]

2024-08-06 16:29:36,200 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:29:43,837 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:29:59,325 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:30:10,509 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:30:10,510 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a5e560 state=finished raised RuntimeError>]
2024-08-06 16:30:10,512 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a5e560 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c337a5e560 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a5e560 state=finished raised RuntimeError>]

2024-08-06 16:30:11,596 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:30:19,447 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:30:28,253 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:30:37,642 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:30:37,643 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f31f0 state=finished raised RuntimeError>]
2024-08-06 16:30:37,644 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f31f0 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3366f31f0 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f31f0 state=finished raised RuntimeError>]

2024-08-06 16:30:38,751 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:30:41,253 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:30:47,720 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:30:54,510 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:30:54,511 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a5d750 state=finished raised RuntimeError>]
2024-08-06 16:30:54,512 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a5d750 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c337a5d750 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a5d750 state=finished raised RuntimeError>]

2024-08-06 16:30:55,660 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:31:00,198 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:31:10,104 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:31:18,168 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:31:18,169 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336773070 state=finished raised RuntimeError>]
2024-08-06 16:31:18,172 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336773070 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c336773070 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c336773070 state=finished raised RuntimeError>]

2024-08-06 16:31:19,332 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:31:26,883 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:31:35,701 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:31:44,406 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:31:44,410 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f3c10 state=finished raised RuntimeError>]
2024-08-06 16:31:44,412 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f3c10 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3366f3c10 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f3c10 state=finished raised RuntimeError>]

2024-08-06 16:31:45,537 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:31:50,017 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:32:00,381 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:32:09,282 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:32:09,283 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6c400 state=finished raised RuntimeError>]
2024-08-06 16:32:09,284 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6c400 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c337a6c400 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6c400 state=finished raised RuntimeError>]

2024-08-06 16:32:10,412 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:32:13,279 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:32:23,129 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:32:30,648 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:32:30,649 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a60f70 state=finished raised RuntimeError>]
2024-08-06 16:32:30,649 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a60f70 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c337a60f70 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a60f70 state=finished raised RuntimeError>]

2024-08-06 16:32:31,896 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:32:35,620 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:32:42,368 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:32:49,726 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:32:49,730 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c33697d9f0 state=finished raised RuntimeError>]
2024-08-06 16:32:49,731 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c33697d9f0 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c33697d9f0 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c33697d9f0 state=finished raised RuntimeError>]

2024-08-06 16:32:50,955 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:32:55,409 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:33:05,690 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:33:14,886 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:33:14,889 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6f850 state=finished raised RuntimeError>]
2024-08-06 16:33:14,890 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6f850 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c337a6f850 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6f850 state=finished raised RuntimeError>]

2024-08-06 16:33:16,090 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:33:20,586 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:33:32,457 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:33:40,337 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:33:40,338 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a60af0 state=finished raised RuntimeError>]
2024-08-06 16:33:40,339 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a60af0 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c337a60af0 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a60af0 state=finished raised RuntimeError>]

2024-08-06 16:33:41,530 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:33:46,129 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:33:56,016 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:34:03,636 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:34:03,637 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c33697dbd0 state=finished raised RuntimeError>]
2024-08-06 16:34:03,637 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c33697dbd0 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c33697dbd0 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c33697dbd0 state=finished raised RuntimeError>]

2024-08-06 16:34:04,744 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:34:08,169 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:34:17,772 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:34:24,830 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:34:24,831 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f2d40 state=finished raised RuntimeError>]
2024-08-06 16:34:24,832 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f2d40 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3366f2d40 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3366f2d40 state=finished raised RuntimeError>]

2024-08-06 16:34:25,938 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:34:31,794 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:34:38,622 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:34:48,555 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:34:48,556 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367717b0 state=finished raised RuntimeError>]
2024-08-06 16:34:48,556 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367717b0 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3367717b0 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367717b0 state=finished raised RuntimeError>]

2024-08-06 16:34:49,732 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:34:55,171 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:35:03,375 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:35:11,847 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:35:11,848 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6f880 state=finished raised RuntimeError>]
2024-08-06 16:35:11,849 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6f880 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c337a6f880 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6f880 state=finished raised RuntimeError>]

2024-08-06 16:35:13,013 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:35:16,292 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:35:23,297 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:35:30,230 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:35:30,231 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6f700 state=finished raised RuntimeError>]
2024-08-06 16:35:30,231 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6f700 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c337a6f700 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6f700 state=finished raised RuntimeError>]

2024-08-06 16:35:31,344 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:35:34,431 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:35:43,185 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:35:49,773 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:35:49,775 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a62d40 state=finished raised RuntimeError>]
2024-08-06 16:35:49,775 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a62d40 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c337a62d40 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a62d40 state=finished raised RuntimeError>]

2024-08-06 16:35:50,870 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:35:54,750 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:36:01,858 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:36:11,077 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:36:11,078 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367f09a0 state=finished raised RuntimeError>]
2024-08-06 16:36:11,078 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367f09a0 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c3367f09a0 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c3367f09a0 state=finished raised RuntimeError>]

2024-08-06 16:36:12,180 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:36:17,206 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:36:27,313 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:36:36,383 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:36:36,384 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6d990 state=finished raised RuntimeError>]
2024-08-06 16:36:36,385 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6d990 state=finished raised RuntimeError>]
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 55, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 101, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\tenacity\__init__.py", line 419, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x1c337a6d990 state=finished raised RuntimeError>]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 108, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: RetryError[<Future at 0x1c337a6d990 state=finished raised RuntimeError>]

2024-08-06 16:36:37,508 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:36:40,970 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    with self.app.app_context():
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 284, in __exit__
    self.pop(exc_value)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 262, in pop
    self.app.do_teardown_appcontext(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 1344, in do_teardown_appcontext
    self.ensure_sync(func)(exc)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\asgiref\sync.py", line 187, in __call__
    raise RuntimeError(
RuntimeError: You cannot use AsyncToSync in the same thread as an async event loop - just await the async function directly.
2024-08-06 16:39:02,974 - app - INFO - Initializing Flask app...
2024-08-06 16:39:02,975 - app - INFO - Configuring app...
2024-08-06 16:39:02,976 - app - INFO - Setting up CORS...
2024-08-06 16:39:02,976 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:41:17,179 - app - INFO - Initializing Flask app...
2024-08-06 16:41:17,181 - app - INFO - Configuring app...
2024-08-06 16:41:17,181 - app - INFO - Setting up CORS...
2024-08-06 16:41:17,181 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:41:17,378 - app - INFO - Initializing JWT manager...
2024-08-06 16:41:17,378 - app - INFO - Setting up rate limiting...
2024-08-06 16:41:17,379 - app - INFO - Setting up database...
2024-08-06 16:41:17,379 - app - INFO - Starting database setup...
2024-08-06 16:41:18,131 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:41:18,132 - app - INFO - Database setup completed successfully
2024-08-06 16:41:18,132 - app - INFO - Registering error handler...
2024-08-06 16:41:18,132 - app - INFO - Initializing CLI commands...
2024-08-06 16:41:18,132 - app - INFO - Registering routes...
2024-08-06 16:41:18,155 - app - INFO - Initializing services...
2024-08-06 16:41:18,164 - app - INFO - Initializing email service...
2024-08-06 16:41:18,164 - app - INFO - Setting up scheduler...
2024-08-06 16:41:18,168 - app - INFO - Initializing scheduler...
2024-08-06 16:41:18,168 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:41:18,168 - app - INFO - Application initialized successfully
2024-08-06 16:41:19,865 - app - INFO - Initializing Flask app...
2024-08-06 16:41:19,866 - app - INFO - Configuring app...
2024-08-06 16:41:19,867 - app - INFO - Setting up CORS...
2024-08-06 16:41:19,867 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 16:41:20,109 - app - INFO - Initializing JWT manager...
2024-08-06 16:41:20,109 - app - INFO - Setting up rate limiting...
2024-08-06 16:41:20,110 - app - INFO - Setting up database...
2024-08-06 16:41:20,111 - app - INFO - Starting database setup...
2024-08-06 16:41:20,902 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 16:41:20,902 - app - INFO - Database setup completed successfully
2024-08-06 16:41:20,902 - app - INFO - Registering error handler...
2024-08-06 16:41:20,902 - app - INFO - Initializing CLI commands...
2024-08-06 16:41:20,902 - app - INFO - Registering routes...
2024-08-06 16:41:20,910 - app - INFO - Initializing services...
2024-08-06 16:41:20,925 - app - INFO - Initializing email service...
2024-08-06 16:41:20,925 - app - INFO - Setting up scheduler...
2024-08-06 16:41:20,931 - app - INFO - Initializing scheduler...
2024-08-06 16:41:20,932 - app.scheduler - INFO - Scheduler initialized
2024-08-06 16:41:20,933 - app - INFO - Application initialized successfully
2024-08-06 16:41:52,993 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:41:53,575 - app.database - INFO - Database connection established successfully
2024-08-06 16:41:53,837 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:41:53,838 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:41:54,448 - app.database - INFO - Database connection established successfully
2024-08-06 16:41:54,537 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:41:54,542 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:41:55,196 - app.database - INFO - Database connection established successfully
2024-08-06 16:41:55,237 - app.services.trial_matching_service - ERROR - Error fetching recent matches: 'title'
2024-08-06 16:41:55,238 - app - ERROR - Error fetching recent matches: 'title'
2024-08-06 16:41:55,244 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:41:55,244 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:41:55,854 - app.database - INFO - Database connection established successfully
2024-08-06 16:41:55,910 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:41:55,915 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:41:56,541 - app.database - INFO - Database connection established successfully
2024-08-06 16:41:56,593 - app.services.trial_matching_service - ERROR - Error fetching recent matches: 'title'
2024-08-06 16:41:56,594 - app - ERROR - Error fetching recent matches: 'title'
2024-08-06 16:41:59,678 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:42:00,240 - app.database - INFO - Database connection established successfully
2024-08-06 16:42:00,240 - app.services.trial_matching_service - ERROR - Error fetching recent matches: limit must be an integer
2024-08-06 16:42:00,242 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 212, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:42:00,251 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:42:00,809 - app.database - INFO - Database connection established successfully
2024-08-06 16:42:00,809 - app.services.trial_matching_service - ERROR - Error fetching recent matches: limit must be an integer
2024-08-06 16:42:00,809 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 212, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 16:42:02,649 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 16:42:02,650 - app.database - INFO - Attempting to establish database connection...
2024-08-06 16:42:03,481 - app.database - INFO - Database connection established successfully
2024-08-06 16:42:03,612 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:03,843 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:03,848 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:03,849 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:04,973 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:05,059 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:05,059 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:05,060 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:06,201 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:06,289 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:06,291 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:06,291 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:07,399 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:07,490 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:07,490 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:07,491 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:08,610 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:08,710 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:08,711 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:08,712 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:09,896 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:09,980 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:09,982 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:09,984 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:11,202 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:11,291 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:11,291 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:11,292 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:12,416 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:12,499 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:12,499 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:12,500 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:13,609 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:13,723 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:13,724 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:13,724 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:14,846 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:14,948 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:14,949 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:14,951 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:16,106 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:16,233 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:16,234 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:16,235 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:17,332 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:17,419 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:17,420 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:17,421 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:18,562 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:18,670 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:18,672 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:18,673 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:19,821 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:19,932 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:19,934 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:19,935 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:21,063 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:21,150 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:21,151 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:21,151 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:22,407 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:22,554 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:22,556 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:22,557 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:23,727 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:23,813 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:23,814 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:23,815 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:24,941 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:25,028 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:25,030 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:25,031 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:26,133 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:26,233 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:26,235 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:26,236 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:27,354 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:27,449 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:27,451 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:27,451 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:28,588 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:28,696 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:28,697 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:28,698 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:29,859 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:29,957 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:29,957 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:29,958 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:31,085 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:31,198 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:31,201 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:31,201 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:32,370 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:32,477 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:32,479 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:32,480 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:33,597 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:33,716 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:33,717 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:33,718 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:34,939 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:35,028 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:35,029 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:35,030 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:36,191 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:36,275 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:36,276 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:36,276 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:37,386 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:37,547 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:37,548 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:37,548 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:38,653 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:38,755 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:38,758 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:38,760 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:39,853 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:39,936 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:39,939 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:39,940 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:41,037 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:41,108 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:41,110 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:41,111 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:42,233 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:42,318 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:42,319 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:42,319 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:43,435 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:43,546 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:43,547 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:43,548 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:44,654 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:44,736 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:44,737 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:44,737 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:45,848 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:45,938 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:45,939 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:45,940 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:47,050 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:47,131 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:47,132 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:47,133 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:48,219 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:48,332 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:48,333 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:48,334 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:49,439 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:49,517 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:49,517 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:49,518 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:50,648 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:50,745 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:50,746 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:50,747 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:51,834 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:51,941 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:51,941 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:51,942 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:53,070 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:53,215 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:53,216 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:53,216 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:54,311 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:54,386 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:54,387 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:54,387 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:55,483 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 16:42:55,570 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:55,571 - app.services.trial_matching_service - ERROR - Error processing batch: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-06 16:42:55,571 - app.utils.error_handlers - ERROR - Anthropic API error: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 35, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 95, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 49, in invoke_model
    raise RuntimeError(f"Failed to invoke Anthropic model: {str(e)}") from e
RuntimeError: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 52, in match_patient_to_trials
    matches = await self.anthropic_service.match_patient_to_trials(patient.__dict__, trials)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 102, in match_patient_to_trials
    raise RuntimeError(f"Unexpected error in match_patient_to_trials: {str(e)}") from e
RuntimeError: Unexpected error in match_patient_to_trials: Failed to invoke Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}

2024-08-06 16:42:56,581 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 16:42:56,583 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:09:18,699 - app - INFO - Initializing Flask app...
2024-08-06 17:09:18,700 - app - INFO - Configuring app...
2024-08-06 17:09:18,700 - app - INFO - Setting up CORS...
2024-08-06 17:09:18,701 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:09:18,939 - app - INFO - Initializing JWT manager...
2024-08-06 17:09:18,940 - app - INFO - Setting up rate limiting...
2024-08-06 17:09:18,941 - app - INFO - Setting up database...
2024-08-06 17:09:18,941 - app - INFO - Starting database setup...
2024-08-06 17:09:19,699 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:09:19,700 - app - INFO - Database setup completed successfully
2024-08-06 17:09:19,700 - app - INFO - Registering error handler...
2024-08-06 17:09:19,700 - app - INFO - Initializing CLI commands...
2024-08-06 17:09:19,700 - app - INFO - Registering routes...
2024-08-06 17:09:19,707 - app - INFO - Initializing services...
2024-08-06 17:09:19,717 - app - INFO - Initializing email service...
2024-08-06 17:09:19,717 - app - INFO - Setting up scheduler...
2024-08-06 17:09:19,720 - app - INFO - Initializing scheduler...
2024-08-06 17:09:19,720 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:09:19,720 - app - INFO - Application initialized successfully
2024-08-06 17:09:21,587 - app - INFO - Initializing Flask app...
2024-08-06 17:09:21,589 - app - INFO - Configuring app...
2024-08-06 17:09:21,590 - app - INFO - Setting up CORS...
2024-08-06 17:09:21,590 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:09:21,881 - app - INFO - Initializing JWT manager...
2024-08-06 17:09:21,881 - app - INFO - Setting up rate limiting...
2024-08-06 17:09:21,882 - app - INFO - Setting up database...
2024-08-06 17:09:21,882 - app - INFO - Starting database setup...
2024-08-06 17:09:22,769 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:09:22,769 - app - INFO - Database setup completed successfully
2024-08-06 17:09:22,769 - app - INFO - Registering error handler...
2024-08-06 17:09:22,769 - app - INFO - Initializing CLI commands...
2024-08-06 17:09:22,770 - app - INFO - Registering routes...
2024-08-06 17:09:22,775 - app - INFO - Initializing services...
2024-08-06 17:09:22,787 - app - INFO - Initializing email service...
2024-08-06 17:09:22,788 - app - INFO - Setting up scheduler...
2024-08-06 17:09:22,792 - app - INFO - Initializing scheduler...
2024-08-06 17:09:22,792 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:09:22,793 - app - INFO - Application initialized successfully
2024-08-06 17:09:34,043 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:09:34,758 - app.database - INFO - Database connection established successfully
2024-08-06 17:09:35,083 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:09:35,083 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:09:35,669 - app.database - INFO - Database connection established successfully
2024-08-06 17:09:35,713 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:09:35,720 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:09:36,367 - app.database - INFO - Database connection established successfully
2024-08-06 17:09:36,430 - app.services.trial_matching_service - ERROR - Error fetching recent matches: 'title'
2024-08-06 17:09:36,430 - app - ERROR - Error fetching recent matches: 'title'
2024-08-06 17:09:36,435 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:09:36,435 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:09:37,045 - app.database - INFO - Database connection established successfully
2024-08-06 17:09:37,085 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:09:37,092 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:09:37,673 - app.database - INFO - Database connection established successfully
2024-08-06 17:09:37,723 - app.services.trial_matching_service - ERROR - Error fetching recent matches: 'title'
2024-08-06 17:09:37,723 - app - ERROR - Error fetching recent matches: 'title'
2024-08-06 17:09:40,934 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:09:41,479 - app.database - INFO - Database connection established successfully
2024-08-06 17:09:41,480 - app.services.trial_matching_service - ERROR - Error fetching recent matches: limit must be an integer
2024-08-06 17:09:41,482 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 212, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 17:09:41,492 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:09:42,049 - app.database - INFO - Database connection established successfully
2024-08-06 17:09:42,050 - app.services.trial_matching_service - ERROR - Error fetching recent matches: limit must be an integer
2024-08-06 17:09:42,050 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 212, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=None)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-06 17:15:58,277 - app - INFO - Initializing Flask app...
2024-08-06 17:15:58,279 - app - INFO - Configuring app...
2024-08-06 17:15:58,280 - app - INFO - Setting up CORS...
2024-08-06 17:15:58,280 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:15:58,576 - app - INFO - Initializing JWT manager...
2024-08-06 17:15:58,577 - app - INFO - Setting up rate limiting...
2024-08-06 17:15:58,578 - app - INFO - Setting up database...
2024-08-06 17:15:58,579 - app - INFO - Starting database setup...
2024-08-06 17:15:59,208 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:15:59,208 - app - INFO - Database setup completed successfully
2024-08-06 17:15:59,209 - app - INFO - Registering error handler...
2024-08-06 17:15:59,209 - app - INFO - Initializing CLI commands...
2024-08-06 17:15:59,209 - app - INFO - Registering routes...
2024-08-06 17:15:59,219 - app - INFO - Initializing services...
2024-08-06 17:15:59,237 - app - INFO - Initializing email service...
2024-08-06 17:15:59,239 - app - INFO - Setting up scheduler...
2024-08-06 17:15:59,290 - app - INFO - Initializing scheduler...
2024-08-06 17:15:59,297 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:15:59,299 - app - INFO - Application initialized successfully
2024-08-06 17:17:40,933 - app - INFO - Initializing Flask app...
2024-08-06 17:17:40,934 - app - INFO - Configuring app...
2024-08-06 17:17:40,935 - app - INFO - Setting up CORS...
2024-08-06 17:17:40,935 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:17:41,199 - app - INFO - Initializing JWT manager...
2024-08-06 17:17:41,200 - app - INFO - Setting up rate limiting...
2024-08-06 17:17:41,201 - app - INFO - Setting up database...
2024-08-06 17:17:41,201 - app - INFO - Starting database setup...
2024-08-06 17:17:42,659 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:17:42,659 - app - INFO - Database setup completed successfully
2024-08-06 17:17:42,659 - app - INFO - Registering error handler...
2024-08-06 17:17:42,660 - app - INFO - Initializing CLI commands...
2024-08-06 17:17:42,661 - app - INFO - Registering routes...
2024-08-06 17:17:42,683 - app - INFO - Initializing services...
2024-08-06 17:17:42,698 - app - INFO - Initializing email service...
2024-08-06 17:17:42,698 - app - INFO - Setting up scheduler...
2024-08-06 17:17:42,702 - app - INFO - Initializing scheduler...
2024-08-06 17:17:42,703 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:17:42,703 - app - INFO - Application initialized successfully
2024-08-06 17:17:58,539 - app - INFO - Initializing Flask app...
2024-08-06 17:17:58,541 - app - INFO - Configuring app...
2024-08-06 17:17:58,542 - app - INFO - Setting up CORS...
2024-08-06 17:17:58,542 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:17:58,880 - app - INFO - Initializing JWT manager...
2024-08-06 17:17:58,881 - app - INFO - Setting up rate limiting...
2024-08-06 17:17:58,882 - app - INFO - Setting up database...
2024-08-06 17:17:58,882 - app - INFO - Starting database setup...
2024-08-06 17:17:59,859 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:17:59,859 - app - INFO - Database setup completed successfully
2024-08-06 17:17:59,859 - app - INFO - Registering error handler...
2024-08-06 17:17:59,860 - app - INFO - Initializing CLI commands...
2024-08-06 17:17:59,860 - app - INFO - Registering routes...
2024-08-06 17:17:59,888 - app - INFO - Initializing services...
2024-08-06 17:17:59,900 - app - INFO - Initializing email service...
2024-08-06 17:17:59,901 - app - INFO - Setting up scheduler...
2024-08-06 17:17:59,906 - app - INFO - Initializing scheduler...
2024-08-06 17:17:59,907 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:17:59,907 - app - INFO - Application initialized successfully
2024-08-06 17:18:02,599 - app - INFO - Initializing Flask app...
2024-08-06 17:18:02,601 - app - INFO - Configuring app...
2024-08-06 17:18:02,601 - app - INFO - Setting up CORS...
2024-08-06 17:18:02,602 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:18:03,001 - app - INFO - Initializing JWT manager...
2024-08-06 17:18:03,001 - app - INFO - Setting up rate limiting...
2024-08-06 17:18:03,002 - app - INFO - Setting up database...
2024-08-06 17:18:03,003 - app - INFO - Starting database setup...
2024-08-06 17:18:04,006 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:18:04,007 - app - INFO - Database setup completed successfully
2024-08-06 17:18:04,008 - app - INFO - Registering error handler...
2024-08-06 17:18:04,008 - app - INFO - Initializing CLI commands...
2024-08-06 17:18:04,009 - app - INFO - Registering routes...
2024-08-06 17:18:04,024 - app - INFO - Initializing services...
2024-08-06 17:18:04,059 - app - INFO - Initializing email service...
2024-08-06 17:18:04,060 - app - INFO - Setting up scheduler...
2024-08-06 17:18:04,067 - app - INFO - Initializing scheduler...
2024-08-06 17:18:04,069 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:18:04,069 - app - INFO - Application initialized successfully
2024-08-06 17:18:10,730 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:18:11,533 - app.database - INFO - Database connection established successfully
2024-08-06 17:18:11,906 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:18:11,907 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:18:12,618 - app.database - INFO - Database connection established successfully
2024-08-06 17:18:12,714 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:18:12,724 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:18:13,543 - app.database - INFO - Database connection established successfully
2024-08-06 17:18:13,592 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:18:13,594 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:18:14,422 - app.database - INFO - Database connection established successfully
2024-08-06 17:18:14,482 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:18:14,492 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:18:17,201 - app.database - INFO - Database connection established successfully
2024-08-06 17:18:17,294 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:18:18,511 - app.database - INFO - Database connection established successfully
2024-08-06 17:18:18,564 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:18:19,165 - app.database - INFO - Database connection established successfully
2024-08-06 17:18:23,436 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:18:23,438 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:18:24,332 - app.database - INFO - Database connection established successfully
2024-08-06 17:18:24,670 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:18:30,435 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 85,\n        "reasons": [\n            "Patient has leukemia, which matches the trial\'s condition",\n            "Trial is specifically for chronic myelogenous leukemia, a type of leukemia",\n            "Patient\'s age (24 years old) is suitable for adult trials",\n            "Trial is in Phase 2, which is often suitable for patients who have already undergone initial treatment",\n            "Patient is currently on multiple medications, suggesting they may have undergone initial treatment",\n            "Trial aims to improve cytogenetic remission, which could be beneficial for a leukemia patient"\n        ]\n    }\n]\n\nNote: While this trial shows a good compatibility, it\'s important to note that the exact type of leukemia (chronic myelogenous leukemia) is not specified in the patient profile. A healthcare professional would need to confirm the specific type of leukemia before proceeding with enrollment consideration.', type='text')]
2024-08-06 17:18:30,435 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 85,\n        "reasons": [\n            "Patient has leukemia, which matches the trial\'s condition",\n            "Trial is specifically for chronic myelogenous leukemia, a type of leukemia",\n            "Patient\'s age (24 years old) is suitable for adult trials",\n            "Trial is in Phase 2, which is often suitable for patients who have already undergone initial treatment",\n            "Patient is currently on multiple medications, suggesting they may have undergone initial treatment",\n            "Trial aims to improve cytogenetic remission, which could be beneficial for a leukemia patient"\n        ]\n    }\n]\n\nNote: While this trial shows a good compatibility, it\'s important to note that the exact type of leukemia (chronic myelogenous leukemia) is not specified in the patient profile. A healthcare professional would need to confirm the specific type of leukemia before proceeding with enrollment consideration.', type='text')]
2024-08-06 17:18:30,437 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT00072579",
        "compatibility_score": 85,
        "reasons": [
            "Patient has leukemia, which matches the trial's condition",
            "Trial is specifically for chronic myelogenous leukemia, a type of leukemia",
            "Patient's age (24 years old) is suitable for adult trials",
            "Trial is in Phase 2, which is often suitable for patients who have already undergone initial treatment",
            "Patient is currently on multiple medications, suggesting they may have undergone initial treatment",
            "Trial aims to improve cytogenetic remission, which could be beneficial for a leukemia patient"
        ]
    }
]

Note: While this trial shows a good compatibility, it's important to note that the exact type of leukemia (chronic myelogenous leukemia) is not specified in the patient profile. A healthcare professional would need to confirm the specific type of leukemia before proceeding with enrollment consideration.
2024-08-06 17:18:30,437 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-06 17:18:30,485 - app.services.trial_matching_service - INFO - Trial NCT00072579 already matched for user 66aad4b4c5463e9d7e8724d8
2024-08-06 17:18:30,486 - app.services.trial_matching_service - INFO - Emitted 0 trial matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 17:18:31,633 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:18:38,059 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not a condition targeted by either of the provided clinical trials.\n\n2. The first trial (NCT01353079) is for allergic rhinoconjunctivitis caused by ragweed pollen, which is unrelated to the patient's condition.\n\n3. The second trial (NCT03793179) is for non-small cell lung cancer, which is also unrelated to the patient's condition.\n\n4. The patient's age (24 years old) and specific medications are not directly relevant to the eligibility criteria of either trial.\n\nGiven these factors, the compatibility score for both trials would be well below 70. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-06 17:18:38,060 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not a condition targeted by either of the provided clinical trials.\n\n2. The first trial (NCT01353079) is for allergic rhinoconjunctivitis caused by ragweed pollen, which is unrelated to the patient's condition.\n\n3. The second trial (NCT03793179) is for non-small cell lung cancer, which is also unrelated to the patient's condition.\n\n4. The patient's age (24 years old) and specific medications are not directly relevant to the eligibility criteria of either trial.\n\nGiven these factors, the compatibility score for both trials would be well below 70. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-06 17:18:38,060 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:

1. The patient has leukemia, which is not a condition targeted by either of the provided clinical trials.

2. The first trial (NCT01353079) is for allergic rhinoconjunctivitis caused by ragweed pollen, which is unrelated to the patient's condition.

3. The second trial (NCT03793179) is for non-small cell lung cancer, which is also unrelated to the patient's condition.

4. The patient's age (24 years old) and specific medications are not directly relevant to the eligibility criteria of either trial.

Given these factors, the compatibility score for both trials would be well below 70. Therefore, the output in the requested JSON format is:

[]

This empty array indicates that no trials match with a score of 70 or higher for this patient.
2024-08-06 17:18:38,061 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:18:39,232 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:18:44,655 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, I have evaluated the compatibility. Here's the result:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, does not match well with the provided clinical trial (NCT00717379) for the following reasons:\n\n1. The trial is for kidney transplantation, while the patient has leukemia as their primary medical condition.\n2. The patient's medications (daunorubicin, cytarabine, vincristine, prednisone, filgrastim, acyclovir, fluconazole, ciprofloxacin) are typical for leukemia treatment and not related to kidney transplantation.\n3. The trial's inclusion criteria specify end-stage kidney disease, which is not mentioned in the patient's profile.\n4. The patient's age (born in 1999, making them around 24 years old) doesn't exclude them, but the trial seems more focused on adult kidney transplant recipients.\n\nGiven these significant mismatches, the compatibility score would be well below 70, hence the empty array as the result. No trials in the provided data match this patient's profile with a score of 70 or higher.", type='text')]
2024-08-06 17:18:44,656 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, I have evaluated the compatibility. Here's the result:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, does not match well with the provided clinical trial (NCT00717379) for the following reasons:\n\n1. The trial is for kidney transplantation, while the patient has leukemia as their primary medical condition.\n2. The patient's medications (daunorubicin, cytarabine, vincristine, prednisone, filgrastim, acyclovir, fluconazole, ciprofloxacin) are typical for leukemia treatment and not related to kidney transplantation.\n3. The trial's inclusion criteria specify end-stage kidney disease, which is not mentioned in the patient's profile.\n4. The patient's age (born in 1999, making them around 24 years old) doesn't exclude them, but the trial seems more focused on adult kidney transplant recipients.\n\nGiven these significant mismatches, the compatibility score would be well below 70, hence the empty array as the result. No trials in the provided data match this patient's profile with a score of 70 or higher.", type='text')]
2024-08-06 17:18:44,656 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trial, I have evaluated the compatibility. Here's the result:

[]

Explanation:
The patient, Jimmy Oldman, does not match well with the provided clinical trial (NCT00717379) for the following reasons:

1. The trial is for kidney transplantation, while the patient has leukemia as their primary medical condition.
2. The patient's medications (daunorubicin, cytarabine, vincristine, prednisone, filgrastim, acyclovir, fluconazole, ciprofloxacin) are typical for leukemia treatment and not related to kidney transplantation.
3. The trial's inclusion criteria specify end-stage kidney disease, which is not mentioned in the patient's profile.
4. The patient's age (born in 1999, making them around 24 years old) doesn't exclude them, but the trial seems more focused on adult kidney transplant recipients.

Given these significant mismatches, the compatibility score would be well below 70, hence the empty array as the result. No trials in the provided data match this patient's profile with a score of 70 or higher.
2024-08-06 17:18:44,656 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:18:45,856 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:18:48,705 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not addressed in any of the provided clinical trials. The trials focus on conditions such as acromegaly, diabetes, post-intensive care syndrome, and esophageal cancer, which are not relevant to the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:18:48,705 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not addressed in any of the provided clinical trials. The trials focus on conditions such as acromegaly, diabetes, post-intensive care syndrome, and esophageal cancer, which are not relevant to the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:18:48,706 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not addressed in any of the provided clinical trials. The trials focus on conditions such as acromegaly, diabetes, post-intensive care syndrome, and esophageal cancer, which are not relevant to the patient's profile.

Therefore, the output is an empty array:

[]
2024-08-06 17:18:48,706 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:18:49,904 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:18:56,594 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The first trial (NCT04801979) is focused on adults without disabilities and specifically excludes individuals with acute or chronic conditions. The patient has leukemia, which is a significant medical condition, making them ineligible for this trial.\n\n2. The second trial (NCT01312779) is for patients with mitral heart valve disease requiring surgical replacement. The patient's profile does not indicate any heart valve issues, and their primary medical condition is leukemia, which is unrelated to the focus of this trial.\n\nBoth trials have very specific inclusion and exclusion criteria that do not align with the patient's profile. The patient's primary condition (leukemia) and current medications are not relevant to either of the provided clinical trials, resulting in low compatibility scores (below 70) for both.", type='text')]
2024-08-06 17:18:56,595 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The first trial (NCT04801979) is focused on adults without disabilities and specifically excludes individuals with acute or chronic conditions. The patient has leukemia, which is a significant medical condition, making them ineligible for this trial.\n\n2. The second trial (NCT01312779) is for patients with mitral heart valve disease requiring surgical replacement. The patient's profile does not indicate any heart valve issues, and their primary medical condition is leukemia, which is unrelated to the focus of this trial.\n\nBoth trials have very specific inclusion and exclusion criteria that do not align with the patient's profile. The patient's primary condition (leukemia) and current medications are not relevant to either of the provided clinical trials, resulting in low compatibility scores (below 70) for both.", type='text')]
2024-08-06 17:18:56,596 - app.services.anthropic_service - INFO - Parsing response: After carefully analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. The first trial (NCT04801979) is focused on adults without disabilities and specifically excludes individuals with acute or chronic conditions. The patient has leukemia, which is a significant medical condition, making them ineligible for this trial.

2. The second trial (NCT01312779) is for patients with mitral heart valve disease requiring surgical replacement. The patient's profile does not indicate any heart valve issues, and their primary medical condition is leukemia, which is unrelated to the focus of this trial.

Both trials have very specific inclusion and exclusion criteria that do not align with the patient's profile. The patient's primary condition (leukemia) and current medications are not relevant to either of the provided clinical trials, resulting in low compatibility scores (below 70) for both.
2024-08-06 17:18:56,597 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:18:57,726 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:19:02,214 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile indicates a 24-year-old male with leukemia, while the clinical trial focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery. These conditions and focus areas do not align with the patient's medical condition or demographics.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:19:02,215 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile indicates a 24-year-old male with leukemia, while the clinical trial focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery. These conditions and focus areas do not align with the patient's medical condition or demographics.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:19:02,215 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile indicates a 24-year-old male with leukemia, while the clinical trial focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery. These conditions and focus areas do not align with the patient's medical condition or demographics.

Therefore, the output is an empty array:

[]
2024-08-06 17:19:02,216 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:19:03,453 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:19:08,370 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient is a 24-year-old male with leukemia, which doesn't match the conditions or eligibility criteria of any of the provided clinical trials.\n\n2. The first trial (NCT03499379) is focused on women using intrauterine devices for contraception, which is not applicable to this male patient with leukemia.\n\n3. The second trial (NCT04669379) is for patients undergoing surgery, which is not mentioned in the patient's profile.\n\n4. The third trial (NCT05360979) is specifically for Non-small Cell Lung Cancer (NSCLC) patients, which doesn't match the patient's condition of leukemia.\n\nNone of these trials are suitable for the patient's specific medical condition and characteristics, resulting in compatibility scores below 70 for all trials.", type='text')]
2024-08-06 17:19:08,370 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient is a 24-year-old male with leukemia, which doesn't match the conditions or eligibility criteria of any of the provided clinical trials.\n\n2. The first trial (NCT03499379) is focused on women using intrauterine devices for contraception, which is not applicable to this male patient with leukemia.\n\n3. The second trial (NCT04669379) is for patients undergoing surgery, which is not mentioned in the patient's profile.\n\n4. The third trial (NCT05360979) is specifically for Non-small Cell Lung Cancer (NSCLC) patients, which doesn't match the patient's condition of leukemia.\n\nNone of these trials are suitable for the patient's specific medical condition and characteristics, resulting in compatibility scores below 70 for all trials.", type='text')]
2024-08-06 17:19:08,371 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient is a 24-year-old male with leukemia, which doesn't match the conditions or eligibility criteria of any of the provided clinical trials.

2. The first trial (NCT03499379) is focused on women using intrauterine devices for contraception, which is not applicable to this male patient with leukemia.

3. The second trial (NCT04669379) is for patients undergoing surgery, which is not mentioned in the patient's profile.

4. The third trial (NCT05360979) is specifically for Non-small Cell Lung Cancer (NSCLC) patients, which doesn't match the patient's condition of leukemia.

None of these trials are suitable for the patient's specific medical condition and characteristics, resulting in compatibility scores below 70 for all trials.
2024-08-06 17:19:08,371 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:19:09,542 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:19:15,023 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient has leukemia, which is not addressed in any of the provided clinical trials.\n2. The first trial (NCT05800379) is for children with bronchial asthma, which doesn't match the patient's condition or age.\n3. The second trial (NCT01609179) is for basal cell carcinoma and chondrosarcoma, which are different from the patient's leukemia diagnosis.\n4. The third trial (NCT02625779) is for bipolar depression, which is unrelated to the patient's condition.\n\nGiven these mismatches, none of the trials reach the minimum compatibility score of 70 required for inclusion in the output.", type='text')]
2024-08-06 17:19:15,024 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient has leukemia, which is not addressed in any of the provided clinical trials.\n2. The first trial (NCT05800379) is for children with bronchial asthma, which doesn't match the patient's condition or age.\n3. The second trial (NCT01609179) is for basal cell carcinoma and chondrosarcoma, which are different from the patient's leukemia diagnosis.\n4. The third trial (NCT02625779) is for bipolar depression, which is unrelated to the patient's condition.\n\nGiven these mismatches, none of the trials reach the minimum compatibility score of 70 required for inclusion in the output.", type='text')]
2024-08-06 17:19:15,024 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient has leukemia, which is not addressed in any of the provided clinical trials.
2. The first trial (NCT05800379) is for children with bronchial asthma, which doesn't match the patient's condition or age.
3. The second trial (NCT01609179) is for basal cell carcinoma and chondrosarcoma, which are different [SQL REDACTED] the patient's leukemia diagnosis.
4. The third trial (NCT02625779) is for bipolar depression, which is unrelated to the patient's condition.

Given these mismatches, none of the trials reach the minimum compatibility score of 70 required for inclusion in the output.
2024-08-06 17:19:15,024 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 3 column 1 (char 4)
2024-08-06 17:19:15,024 - app.services.anthropic_service - ERROR - Response content: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient has leukemia, which is not addressed in any of the provided clinical trials.
2. The first trial (NCT05800379) is for children with bronchial asthma, which doesn't match the patient's condition or age.
3. The second trial (NCT01609179) is for basal cell carcinoma and chondrosarcoma, which are different [SQL REDACTED] the patient's leukemia diagnosis.
4. The third trial (NCT02625779) is for bipolar depression, which is unrelated to the patient's condition.

Given these mismatches, none of the trials reach the minimum compatibility score of 70 required for inclusion in the output.
2024-08-06 17:19:16,212 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:19:23,311 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT05799079",\n        "compatibility_score": 85,\n        "reasons": [\n            "The patient has leukemia, which matches the trial\'s focus on acute myeloid leukemia (AML)",\n            "The trial is specifically for relapsed AML, which could be relevant to the patient\'s condition",\n            "The patient\'s age (24 years old) meets the inclusion criteria of being over 18 years",\n            "The trial is in the recruiting phase, making it potentially available for the patient",\n            "Some of the patient\'s current medications (daunorubicin, cytarabine) are commonly used in AML treatment, suggesting alignment with the trial\'s focus"\n        ]\n    }\n]\n\nNote: While this trial shows a high compatibility score, it\'s important to note that the patient\'s specific type of leukemia (whether it\'s AML or another type) and whether they\'ve had a stem cell transplant are not specified in the profile. These factors would need to be confirmed before proceeding with enrollment. The other two trials do not match the patient\'s condition closely enough to warrant inclusion with a score of 70 or higher.', type='text')]
2024-08-06 17:19:23,312 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT05799079",\n        "compatibility_score": 85,\n        "reasons": [\n            "The patient has leukemia, which matches the trial\'s focus on acute myeloid leukemia (AML)",\n            "The trial is specifically for relapsed AML, which could be relevant to the patient\'s condition",\n            "The patient\'s age (24 years old) meets the inclusion criteria of being over 18 years",\n            "The trial is in the recruiting phase, making it potentially available for the patient",\n            "Some of the patient\'s current medications (daunorubicin, cytarabine) are commonly used in AML treatment, suggesting alignment with the trial\'s focus"\n        ]\n    }\n]\n\nNote: While this trial shows a high compatibility score, it\'s important to note that the patient\'s specific type of leukemia (whether it\'s AML or another type) and whether they\'ve had a stem cell transplant are not specified in the profile. These factors would need to be confirmed before proceeding with enrollment. The other two trials do not match the patient\'s condition closely enough to warrant inclusion with a score of 70 or higher.', type='text')]
2024-08-06 17:19:23,314 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT05799079",
        "compatibility_score": 85,
        "reasons": [
            "The patient has leukemia, which matches the trial's focus on acute myeloid leukemia (AML)",
            "The trial is specifically for relapsed AML, which could be relevant to the patient's condition",
            "The patient's age (24 years old) meets the inclusion criteria of being over 18 years",
            "The trial is in the recruiting phase, making it potentially available for the patient",
            "Some of the patient's current medications (daunorubicin, cytarabine) are commonly used in AML treatment, suggesting alignment with the trial's focus"
        ]
    }
]

Note: While this trial shows a high compatibility score, it's important to note that the patient's specific type of leukemia (whether it's AML or another type) and whether they've had a stem cell transplant are not specified in the profile. These factors would need to be confirmed before proceeding with enrollment. The other two trials do not match the patient's condition closely enough to warrant inclusion with a score of 70 or higher.
2024-08-06 17:19:23,314 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-06 17:19:23,417 - app.services.trial_matching_service - INFO - Trial NCT05799079 already matched for user 66aad4b4c5463e9d7e8724d8
2024-08-06 17:19:23,418 - app.services.trial_matching_service - INFO - Emitted 0 trial matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 17:19:24,597 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:19:29,276 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. The provided clinical trials are focused on:\n\n1. NCT01042379: Breast cancer\n2. NCT01895179: Prediabetes, insulin resistance, and vascular diseases\n3. NCT04859179: Spinal muscular atrophy screening\n4. NCT05714579: Aortic stenosis\n\nNone of these trials are related to leukemia or match the patient's age, gender, or medical condition. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:19:29,276 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. The provided clinical trials are focused on:\n\n1. NCT01042379: Breast cancer\n2. NCT01895179: Prediabetes, insulin resistance, and vascular diseases\n3. NCT04859179: Spinal muscular atrophy screening\n4. NCT05714579: Aortic stenosis\n\nNone of these trials are related to leukemia or match the patient's age, gender, or medical condition. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:19:29,277 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Jimmy Oldman, is a 24-year-old male with leukemia. The provided clinical trials are focused on:

1. NCT01042379: Breast cancer
2. NCT01895179: Prediabetes, insulin resistance, and vascular diseases
3. NCT04859179: Spinal muscular atrophy screening
4. NCT05714579: Aortic stenosis

None of these trials are related to leukemia or match the patient's age, gender, or medical condition. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 17:19:29,277 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:19:30,506 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:19:37,379 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical condition is leukemia, which is not directly addressed by any of the provided clinical trials.\n\n2. The first trial (NCT00626379) focuses on heart disease and cardiovascular risk factors, which are not mentioned in the patient's profile.\n\n3. The second trial (NCT03530579) is about diabetes prevention in Korean and South Asian Americans, which doesn't match the patient's profile or condition.\n\n4. The third trial (NCT05900479) is for veterans with PTSD, which doesn't apply to this patient.\n\n5. The fourth trial (NCT04679779) is for children with cerebral palsy, which doesn't match the patient's age (24 years old) or medical condition.\n\nNone of these trials are sufficiently relevant to the patient's leukemia diagnosis or other characteristics to warrant a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:19:37,380 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical condition is leukemia, which is not directly addressed by any of the provided clinical trials.\n\n2. The first trial (NCT00626379) focuses on heart disease and cardiovascular risk factors, which are not mentioned in the patient's profile.\n\n3. The second trial (NCT03530579) is about diabetes prevention in Korean and South Asian Americans, which doesn't match the patient's profile or condition.\n\n4. The third trial (NCT05900479) is for veterans with PTSD, which doesn't apply to this patient.\n\n5. The fourth trial (NCT04679779) is for children with cerebral palsy, which doesn't match the patient's age (24 years old) or medical condition.\n\nNone of these trials are sufficiently relevant to the patient's leukemia diagnosis or other characteristics to warrant a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:19:37,381 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. The patient's primary medical condition is leukemia, which is not directly addressed by any of the provided clinical trials.

2. The first trial (NCT00626379) focuses on heart disease and cardiovascular risk factors, which are not mentioned in the patient's profile.

3. The second trial (NCT03530579) is about diabetes prevention in Korean and South Asian Americans, which doesn't match the patient's profile or condition.

4. The third trial (NCT05900479) is for veterans with PTSD, which doesn't apply to this patient.

5. The fourth trial (NCT04679779) is for children with cerebral palsy, which doesn't match the patient's age (24 years old) or medical condition.

None of these trials are sufficiently relevant to the patient's leukemia diagnosis or other characteristics to warrant a compatibility score of 70 or higher.
2024-08-06 17:19:37,382 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:19:38,531 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:19:43,478 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which doesn't match any of the conditions targeted by the given clinical trials. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT00589979) is for Osteoarthritis of the Knee, which doesn't match the patient's condition.\n2. The second trial (NCT02214979) is for healthy volunteers, which doesn't apply to this patient with leukemia.\n3. The third trial (NCT05029479) is for Non-carious Cervical Lesions in Geriatric Patients, which also doesn't match the patient's profile or condition.\n\nNone of these trials are suitable for a patient with leukemia, resulting in very low compatibility scores (well below 70) for all trials.", type='text')]
2024-08-06 17:19:43,478 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which doesn't match any of the conditions targeted by the given clinical trials. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT00589979) is for Osteoarthritis of the Knee, which doesn't match the patient's condition.\n2. The second trial (NCT02214979) is for healthy volunteers, which doesn't apply to this patient with leukemia.\n3. The third trial (NCT05029479) is for Non-carious Cervical Lesions in Geriatric Patients, which also doesn't match the patient's profile or condition.\n\nNone of these trials are suitable for a patient with leukemia, resulting in very low compatibility scores (well below 70) for all trials.", type='text')]
2024-08-06 17:19:43,478 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which doesn't match any of the conditions targeted by the given clinical trials. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT00589979) is for Osteoarthritis of the Knee, which doesn't match the patient's condition.
2. The second trial (NCT02214979) is for healthy volunteers, which doesn't apply to this patient with leukemia.
3. The third trial (NCT05029479) is for Non-carious Cervical Lesions in Geriatric Patients, which also doesn't match the patient's profile or condition.

None of these trials are suitable for a patient with leukemia, resulting in very low compatibility scores (well below 70) for all trials.
2024-08-06 17:19:43,478 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:19:46,624 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:19:51,880 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a 24-year-old male with leukemia.\n2. The first trial (NCT05684679) is for post-coronary artery bypass grafting patients, which doesn't match the patient's condition.\n3. The second trial (NCT04086979) is for children with ADHD aged 6-11, which doesn't match the patient's age or condition.\n4. The third trial (NCT03583879) is for Parkinson's disease patients, which also doesn't match the patient's condition.\n\nNone of these trials are related to leukemia or the patient's specific situation. Therefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:19:51,881 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a 24-year-old male with leukemia.\n2. The first trial (NCT05684679) is for post-coronary artery bypass grafting patients, which doesn't match the patient's condition.\n3. The second trial (NCT04086979) is for children with ADHD aged 6-11, which doesn't match the patient's age or condition.\n4. The third trial (NCT03583879) is for Parkinson's disease patients, which also doesn't match the patient's condition.\n\nNone of these trials are related to leukemia or the patient's specific situation. Therefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:19:51,881 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. The patient is a 24-year-old male with leukemia.
2. The first trial (NCT05684679) is for post-coronary artery bypass grafting patients, which doesn't match the patient's condition.
3. The second trial (NCT04086979) is for children with ADHD aged 6-11, which doesn't match the patient's age or condition.
4. The third trial (NCT03583879) is for Parkinson's disease patients, which also doesn't match the patient's condition.

None of these trials are related to leukemia or the patient's specific situation. Therefore, the output in the requested JSON format would be an empty array:

[]

This indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.
2024-08-06 17:19:51,882 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:19:53,165 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:20:00,415 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT05652179 (SGB Reduces the Incidence and Severity of CSA-AKI):\n   This trial is focused on patients undergoing cardiopulmonary bypass cardiac surgery, which does not match the patient's condition (leukemia). The age range (18-80) fits, but the main focus and conditions do not align with the patient's profile.\n\n2. NCT00075179 (Natrecor in Pulmonary Hypertension):\n   This trial is for patients with pulmonary hypertension, cancer, lung disease, or those undergoing cardiothoracic surgery. While the patient has cancer (leukemia), the trial is specifically focused on pulmonary hypertension, which is not mentioned in the patient's profile. Additionally, the trial requires evidence of underlying lung disease, which is not present in the patient's information.\n\nNeither trial specifically addresses leukemia or the medications the patient is taking, resulting in low compatibility scores (below 70) for both trials.", type='text')]
2024-08-06 17:20:00,415 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT05652179 (SGB Reduces the Incidence and Severity of CSA-AKI):\n   This trial is focused on patients undergoing cardiopulmonary bypass cardiac surgery, which does not match the patient's condition (leukemia). The age range (18-80) fits, but the main focus and conditions do not align with the patient's profile.\n\n2. NCT00075179 (Natrecor in Pulmonary Hypertension):\n   This trial is for patients with pulmonary hypertension, cancer, lung disease, or those undergoing cardiothoracic surgery. While the patient has cancer (leukemia), the trial is specifically focused on pulmonary hypertension, which is not mentioned in the patient's profile. Additionally, the trial requires evidence of underlying lung disease, which is not present in the patient's information.\n\nNeither trial specifically addresses leukemia or the medications the patient is taking, resulting in low compatibility scores (below 70) for both trials.", type='text')]
2024-08-06 17:20:00,415 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. NCT05652179 (SGB Reduces the Incidence and Severity of CSA-AKI):
   This trial is focused on patients undergoing cardiopulmonary bypass cardiac surgery, which does not match the patient's condition (leukemia). The age range (18-80) fits, but the main focus and conditions do not align with the patient's profile.

2. NCT00075179 (Natrecor in Pulmonary Hypertension):
   This trial is for patients with pulmonary hypertension, cancer, lung disease, or those undergoing cardiothoracic surgery. While the patient has cancer (leukemia), the trial is specifically focused on pulmonary hypertension, which is not mentioned in the patient's profile. Additionally, the trial requires evidence of underlying lung disease, which is not present in the patient's information.

Neither trial specifically addresses leukemia or the medications the patient is taking, resulting in low compatibility scores (below 70) for both trials.
2024-08-06 17:20:00,416 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:20:01,849 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:20:07,512 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The patient is a 24-year-old male with leukemia.\n\n2. The first trial (NCT02278679) is focused on prostate exams and is not relevant to leukemia or the patient's age group.\n\n3. The second trial (NCT01741779) is for obese postmenopausal women, which does not match the patient's profile at all.\n\n4. The third trial (NCT06228079) is for recurrent nasopharyngeal carcinoma, which is not related to the patient's condition of leukemia.\n\nNone of these trials are suitable for a young male patient with leukemia, hence the empty result. For this patient, trials specifically targeting leukemia in young adults would be more appropriate.", type='text')]
2024-08-06 17:20:07,513 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The patient is a 24-year-old male with leukemia.\n\n2. The first trial (NCT02278679) is focused on prostate exams and is not relevant to leukemia or the patient's age group.\n\n3. The second trial (NCT01741779) is for obese postmenopausal women, which does not match the patient's profile at all.\n\n4. The third trial (NCT06228079) is for recurrent nasopharyngeal carcinoma, which is not related to the patient's condition of leukemia.\n\nNone of these trials are suitable for a young male patient with leukemia, hence the empty result. For this patient, trials specifically targeting leukemia in young adults would be more appropriate.", type='text')]
2024-08-06 17:20:07,514 - app.services.anthropic_service - INFO - Parsing response: After carefully analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. The patient is a 24-year-old male with leukemia.

2. The first trial (NCT02278679) is focused on prostate exams and is not relevant to leukemia or the patient's age group.

3. The second trial (NCT01741779) is for obese postmenopausal women, which does not match the patient's profile at all.

4. The third trial (NCT06228079) is for recurrent nasopharyngeal carcinoma, which is not related to the patient's condition of leukemia.

None of these trials are suitable for a young male patient with leukemia, hence the empty result. For this patient, trials specifically targeting leukemia in young adults would be more appropriate.
2024-08-06 17:20:07,514 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:20:08,823 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:20:11,639 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which doesn't match the conditions targeted by either of the provided clinical trials (Type 2 Diabetes Mellitus and Non-Small Cell Lung Cancer). Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:20:11,639 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which doesn't match the conditions targeted by either of the provided clinical trials (Type 2 Diabetes Mellitus and Non-Small Cell Lung Cancer). Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:20:11,639 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which doesn't match the conditions targeted by either of the provided clinical trials (Type 2 Diabetes Mellitus and Non-Small Cell Lung Cancer). Therefore, the output is an empty array:

[]
2024-08-06 17:20:11,640 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:20:12,934 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:20:15,988 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient, Jimmy Oldman, is a 24-year-old male with leukemia, while the provided clinical trial (NCT03169179) is focused on physical activity interventions for police officers and staff. The patient's medical condition and the trial's focus are not aligned.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:20:15,989 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient, Jimmy Oldman, is a 24-year-old male with leukemia, while the provided clinical trial (NCT03169179) is focused on physical activity interventions for police officers and staff. The patient's medical condition and the trial's focus are not aligned.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:20:15,989 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient, Jimmy Oldman, is a 24-year-old male with leukemia, while the provided clinical trial (NCT03169179) is focused on physical activity interventions for police officers and staff. The patient's medical condition and the trial's focus are not aligned.

Therefore, the output is an empty array:

[]
2024-08-06 17:20:15,989 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:20:17,238 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:20:23,827 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia as their primary medical condition.\n2. All of the provided clinical trials are for conditions unrelated to leukemia:\n   - NCT03408379 is for intracranial aneurysms\n   - NCT03152279 is for celiac disease\n   - NCT03672279 is for Alzheimer's disease and cognitive disorders\n   - NCT04119479 is for stroke patients\n\n3. The patient's age (24 years old) and specific medical condition do not align with the eligibility criteria of these trials.\n4. The medications the patient is taking are specific to leukemia treatment and are not relevant to the conditions studied in these trials.\n\nGiven this mismatch between the patient's profile and the available clinical trials, the compatibility score for each trial would be below 70. Therefore, the output in the requested JSON format is an empty array:\n\n[]\n\nTo find suitable trials for this patient, it would be necessary to search for clinical trials specifically related to leukemia or hematological malignancies that align with the patient's age and current treatment regimen.", type='text')]
2024-08-06 17:20:23,828 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia as their primary medical condition.\n2. All of the provided clinical trials are for conditions unrelated to leukemia:\n   - NCT03408379 is for intracranial aneurysms\n   - NCT03152279 is for celiac disease\n   - NCT03672279 is for Alzheimer's disease and cognitive disorders\n   - NCT04119479 is for stroke patients\n\n3. The patient's age (24 years old) and specific medical condition do not align with the eligibility criteria of these trials.\n4. The medications the patient is taking are specific to leukemia treatment and are not relevant to the conditions studied in these trials.\n\nGiven this mismatch between the patient's profile and the available clinical trials, the compatibility score for each trial would be below 70. Therefore, the output in the requested JSON format is an empty array:\n\n[]\n\nTo find suitable trials for this patient, it would be necessary to search for clinical trials specifically related to leukemia or hematological malignancies that align with the patient's age and current treatment regimen.", type='text')]
2024-08-06 17:20:23,830 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. The patient has leukemia as their primary medical condition.
2. All of the provided clinical trials are for conditions unrelated to leukemia:
   - NCT03408379 is for intracranial aneurysms
   - NCT03152279 is for celiac disease
   - NCT03672279 is for Alzheimer's disease and cognitive disorders
   - NCT04119479 is for stroke patients

3. The patient's age (24 years old) and specific medical condition do not align with the eligibility criteria of these trials.
4. The medications the patient is taking are specific to leukemia treatment and are not relevant to the conditions studied in these trials.

Given this mismatch between the patient's profile and the available clinical trials, the compatibility score for each trial would be below 70. Therefore, the output in the requested JSON format is an empty array:

[]

To find suitable trials for this patient, it would be necessary to search for clinical trials specifically related to leukemia or hematological malignancies that align with the patient's age and current treatment regimen.
2024-08-06 17:20:23,830 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:20:25,025 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:20:30,028 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The patient, Jimmy Oldman, has leukemia as his primary medical condition.\n\n2. The first clinical trial (NCT04521179) is focused on HER2-positive solid tumors, which is not relevant to leukemia. Additionally, the trial specifically targets patients with HER2-positive gastric cancer, gastroesophageal junction cancer, or breast cancer, none of which match the patient's condition.\n\n3. The second clinical trial (NCT05796479) is designed for healthy volunteers, which excludes the patient due to his leukemia diagnosis and ongoing medication regimen.\n\nGiven these factors, neither trial is sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, no matches are returned.", type='text')]
2024-08-06 17:20:30,029 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The patient, Jimmy Oldman, has leukemia as his primary medical condition.\n\n2. The first clinical trial (NCT04521179) is focused on HER2-positive solid tumors, which is not relevant to leukemia. Additionally, the trial specifically targets patients with HER2-positive gastric cancer, gastroesophageal junction cancer, or breast cancer, none of which match the patient's condition.\n\n3. The second clinical trial (NCT05796479) is designed for healthy volunteers, which excludes the patient due to his leukemia diagnosis and ongoing medication regimen.\n\nGiven these factors, neither trial is sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, no matches are returned.", type='text')]
2024-08-06 17:20:30,030 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. The patient, Jimmy Oldman, has leukemia as his primary medical condition.

2. The first clinical trial (NCT04521179) is focused on HER2-positive solid tumors, which is not relevant to leukemia. Additionally, the trial specifically targets patients with HER2-positive gastric cancer, gastroesophageal junction cancer, or breast cancer, none of which match the patient's condition.

3. The second clinical trial (NCT05796479) is designed for healthy volunteers, which excludes the patient due to his leukemia diagnosis and ongoing medication regimen.

Given these factors, neither trial is sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, no matches are returned.
2024-08-06 17:20:30,030 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:20:31,189 - app.services.trial_matching_service - INFO - Processing batch of 10 trials
2024-08-06 17:20:36,926 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically for leukemia or related conditions. The trials focus on:\n\n1. Parkinson's Disease\n2. Dental implants\n3. Postoperative pain after hip arthroplasty\n4. Colorectal screening\n\nThese conditions and procedures are not related to the patient's primary medical condition (leukemia). Additionally, the patient's age, medications, and other characteristics do not align well with the eligibility criteria of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:20:36,927 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically for leukemia or related conditions. The trials focus on:\n\n1. Parkinson's Disease\n2. Dental implants\n3. Postoperative pain after hip arthroplasty\n4. Colorectal screening\n\nThese conditions and procedures are not related to the patient's primary medical condition (leukemia). Additionally, the patient's age, medications, and other characteristics do not align well with the eligibility criteria of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:20:36,928 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:

[]

Explanation:
The patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically for leukemia or related conditions. The trials focus on:

1. Parkinson's Disease
2. Dental implants
3. Postoperative pain after hip arthroplasty
4. Colorectal screening

These conditions and procedures are not related to the patient's primary medical condition (leukemia). Additionally, the patient's age, medications, and other characteristics do not align well with the eligibility criteria of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 17:20:36,928 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:20:37,934 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:37,974 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:20:38,990 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:38,991 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:20:39,996 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:39,998 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:20:41,003 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:41,006 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:20:42,013 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:42,014 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:20:43,017 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:43,018 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:20:44,025 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:44,027 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:20:45,030 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:45,031 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:20:46,035 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:46,036 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:20:47,039 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:47,042 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:20:48,050 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:48,052 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:20:49,062 - app.services.trial_matching_service - ERROR - Error processing batch: cannot schedule new futures after shutdown
2024-08-06 17:20:49,063 - app.utils.error_handlers - ERROR - Anthropic API error: cannot schedule new futures after shutdown
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 45, in match_patient_to_trials
    trials = await trials_cursor.to_list(length=batch_size)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1680, in to_list
    self._get_more(),
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\core.py", line 1443, in _get_more
    return self._refresh()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 75, in method
    return framework.run_on_executor(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\frameworks\asyncio\__init__.py", line 85, in run_on_executor
    return loop.run_in_executor(_EXECUTOR, functools.partial(fn, *args, **kwargs))
  File "C:\Users\ethan\anaconda3\lib\asyncio\base_events.py", line 821, in run_in_executor
    executor.submit(func, *args), loop=self)
  File "C:\Users\ethan\anaconda3\lib\concurrent\futures\thread.py", line 167, in submit
    raise RuntimeError('cannot schedule new futures after shutdown')
RuntimeError: cannot schedule new futures after shutdown

2024-08-06 17:21:02,870 - app - INFO - Initializing Flask app...
2024-08-06 17:21:02,872 - app - INFO - Configuring app...
2024-08-06 17:21:02,872 - app - INFO - Setting up CORS...
2024-08-06 17:21:02,873 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:21:03,203 - app - INFO - Initializing JWT manager...
2024-08-06 17:21:03,203 - app - INFO - Setting up rate limiting...
2024-08-06 17:21:03,204 - app - INFO - Setting up database...
2024-08-06 17:21:03,205 - app - INFO - Starting database setup...
2024-08-06 17:21:03,960 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:21:03,961 - app - INFO - Database setup completed successfully
2024-08-06 17:21:03,961 - app - INFO - Registering error handler...
2024-08-06 17:21:03,961 - app - INFO - Initializing CLI commands...
2024-08-06 17:21:03,961 - app - INFO - Registering routes...
2024-08-06 17:21:03,968 - app - INFO - Initializing services...
2024-08-06 17:21:03,984 - app - INFO - Initializing email service...
2024-08-06 17:21:03,984 - app - INFO - Setting up scheduler...
2024-08-06 17:21:03,990 - app - INFO - Initializing scheduler...
2024-08-06 17:21:03,990 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:21:03,991 - app - INFO - Application initialized successfully
2024-08-06 17:21:06,289 - app - INFO - Initializing Flask app...
2024-08-06 17:21:06,291 - app - INFO - Configuring app...
2024-08-06 17:21:06,292 - app - INFO - Setting up CORS...
2024-08-06 17:21:06,293 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:21:06,679 - app - INFO - Initializing JWT manager...
2024-08-06 17:21:06,679 - app - INFO - Setting up rate limiting...
2024-08-06 17:21:06,680 - app - INFO - Setting up database...
2024-08-06 17:21:06,682 - app - INFO - Starting database setup...
2024-08-06 17:21:07,563 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:21:07,563 - app - INFO - Database setup completed successfully
2024-08-06 17:21:07,565 - app - INFO - Registering error handler...
2024-08-06 17:21:07,565 - app - INFO - Initializing CLI commands...
2024-08-06 17:21:07,566 - app - INFO - Registering routes...
2024-08-06 17:21:07,583 - app - INFO - Initializing services...
2024-08-06 17:21:07,605 - app - INFO - Initializing email service...
2024-08-06 17:21:07,606 - app - INFO - Setting up scheduler...
2024-08-06 17:21:07,612 - app - INFO - Initializing scheduler...
2024-08-06 17:21:07,614 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:21:07,614 - app - INFO - Application initialized successfully
2024-08-06 17:21:14,317 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:15,003 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:15,299 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:21:15,299 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:16,170 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:16,222 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:21:16,235 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:17,085 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:17,165 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:21:17,173 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:17,900 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:17,955 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:21:18,000 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:18,660 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:19,125 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:19,792 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:19,866 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:20,494 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:25,451 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:21:25,453 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:26,238 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:26,280 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:21:26,349 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:21:26,349 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:27,221 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:27,278 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:21:28,321 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:29,028 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:29,107 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:29,838 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:42,559 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 17:21:42,560 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:21:43,551 - app.database - INFO - Database connection established successfully
2024-08-06 17:21:44,512 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:21:52,271 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='After analyzing the patient profile and the provided clinical trials, I\'ve determined that one trial matches with a compatibility score of 70 or higher. Here\'s the output in the requested JSON format:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 75,\n        "reasons": [\n            "The patient has leukemia, which matches the trial\'s condition",\n            "The trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",\n            "The patient is taking medications commonly used in leukemia treatment, indicating active treatment",\n            "The patient\'s age (24 years old) falls within the typical age range for chronic myelogenous leukemia patients",\n            "The trial is in Phase 2, which is appropriate for patients who have already undergone initial treatment"\n        ]\n    }\n]\n\nNote: While this trial shows a good level of compatibility, it\'s important to note that the exact type of leukemia (chronic myelogenous leukemia) is not specified in the patient profile. Additionally, the trial has specific eligibility criteria related to cytogenetic remission and prior treatment that we cannot confirm from the given patient information. These factors prevent a higher compatibility score.', type='text')]
2024-08-06 17:21:52,271 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='After analyzing the patient profile and the provided clinical trials, I\'ve determined that one trial matches with a compatibility score of 70 or higher. Here\'s the output in the requested JSON format:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 75,\n        "reasons": [\n            "The patient has leukemia, which matches the trial\'s condition",\n            "The trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",\n            "The patient is taking medications commonly used in leukemia treatment, indicating active treatment",\n            "The patient\'s age (24 years old) falls within the typical age range for chronic myelogenous leukemia patients",\n            "The trial is in Phase 2, which is appropriate for patients who have already undergone initial treatment"\n        ]\n    }\n]\n\nNote: While this trial shows a good level of compatibility, it\'s important to note that the exact type of leukemia (chronic myelogenous leukemia) is not specified in the patient profile. Additionally, the trial has specific eligibility criteria related to cytogenetic remission and prior treatment that we cannot confirm from the given patient information. These factors prevent a higher compatibility score.', type='text')]
2024-08-06 17:21:52,272 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that one trial matches with a compatibility score of 70 or higher. Here's the output in the requested JSON format:

[
    {
        "nct_id": "NCT00072579",
        "compatibility_score": 75,
        "reasons": [
            "The patient has leukemia, which matches the trial's condition",
            "The trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",
            "The patient is taking medications commonly used in leukemia treatment, indicating active treatment",
            "The patient's age (24 years old) falls within the typical age range for chronic myelogenous leukemia patients",
            "The trial is in Phase 2, which is appropriate for patients who have already undergone initial treatment"
        ]
    }
]

Note: While this trial shows a good level of compatibility, it's important to note that the exact type of leukemia (chronic myelogenous leukemia) is not specified in the patient profile. Additionally, the trial has specific eligibility criteria related to cytogenetic remission and prior treatment that we cannot confirm [SQL REDACTED] the given patient information. These factors prevent a higher compatibility score.
2024-08-06 17:21:52,273 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 15 column 1 (char 653)
2024-08-06 17:21:52,273 - app.services.anthropic_service - ERROR - Response content: After analyzing the patient profile and the provided clinical trials, I've determined that one trial matches with a compatibility score of 70 or higher. Here's the output in the requested JSON format:

[
    {
        "nct_id": "NCT00072579",
        "compatibility_score": 75,
        "reasons": [
            "The patient has leukemia, which matches the trial's condition",
            "The trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",
            "The patient is taking medications commonly used in leukemia treatment, indicating active treatment",
            "The patient's age (24 years old) falls within the typical age range for chronic myelogenous leukemia patients",
            "The trial is in Phase 2, which is appropriate for patients who have already undergone initial treatment"
        ]
    }
]

Note: While this trial shows a good level of compatibility, it's important to note that the exact type of leukemia (chronic myelogenous leukemia) is not specified in the patient profile. Additionally, the trial has specific eligibility criteria related to cytogenetic remission and prior treatment that we cannot confirm [SQL REDACTED] the given patient information. These factors prevent a higher compatibility score.
2024-08-06 17:21:53,599 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:21:58,971 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a young male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia and sarcopenic obesity in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for this lack of compatibility include:\n\n1. The patient's primary medical condition (leukemia) is not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n\n2. The patient's age (24 years old) does not align with the typical demographic for sarcopenia and sarcopenic obesity, which are more common in older adults.\n\n3. The patient's medications and treatment are specific to leukemia, which is not relevant to the abdominal wall surgery focus of the trial.\n\n4. The trial's inclusion criteria specifically mention patients operated for incisional hernia, which is not mentioned in the patient's profile.\n\nGiven these significant differences, there is no meaningful match between the patient and the provided clinical trial.", type='text')]
2024-08-06 17:21:58,972 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a young male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia and sarcopenic obesity in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for this lack of compatibility include:\n\n1. The patient's primary medical condition (leukemia) is not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n\n2. The patient's age (24 years old) does not align with the typical demographic for sarcopenia and sarcopenic obesity, which are more common in older adults.\n\n3. The patient's medications and treatment are specific to leukemia, which is not relevant to the abdominal wall surgery focus of the trial.\n\n4. The trial's inclusion criteria specifically mention patients operated for incisional hernia, which is not mentioned in the patient's profile.\n\nGiven these significant differences, there is no meaningful match between the patient and the provided clinical trial.", type='text')]
2024-08-06 17:21:58,973 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a young male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia and sarcopenic obesity in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The reasons for this lack of compatibility include:

1. The patient's primary medical condition (leukemia) is not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).

2. The patient's age (24 years old) does not align with the typical demographic for sarcopenia and sarcopenic obesity, which are more common in older adults.

3. The patient's medications and treatment are specific to leukemia, which is not relevant to the abdominal wall surgery focus of the trial.

4. The trial's inclusion criteria specifically mention patients operated for incisional hernia, which is not mentioned in the patient's profile.

Given these significant differences, there is no meaningful match between the patient and the provided clinical trial.
2024-08-06 17:21:58,973 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:22:00,327 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:22:05,804 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient is a 24-year-old male with leukemia.\n2. None of the provided clinical trials are specifically focused on leukemia or related blood disorders.\n3. The trials cover topics such as heart disease risk factors, diabetes prevention, PTSD in veterans, and cerebral palsy in children, which are not directly relevant to the patient's condition.\n4. The patient's age, gender, and specific medical condition do not align well with the eligibility criteria of any of the provided trials.\n\nGiven these factors, there are no trials that can be considered a good match (score of 70 or higher) for this patient based on the information provided.", type='text')]
2024-08-06 17:22:05,805 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient is a 24-year-old male with leukemia.\n2. None of the provided clinical trials are specifically focused on leukemia or related blood disorders.\n3. The trials cover topics such as heart disease risk factors, diabetes prevention, PTSD in veterans, and cerebral palsy in children, which are not directly relevant to the patient's condition.\n4. The patient's age, gender, and specific medical condition do not align well with the eligibility criteria of any of the provided trials.\n\nGiven these factors, there are no trials that can be considered a good match (score of 70 or higher) for this patient based on the information provided.", type='text')]
2024-08-06 17:22:05,806 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient is a 24-year-old male with leukemia.
2. None of the provided clinical trials are specifically focused on leukemia or related blood disorders.
3. The trials cover topics such as heart disease risk factors, diabetes prevention, PTSD in veterans, and cerebral palsy in children, which are not directly relevant to the patient's condition.
4. The patient's age, gender, and specific medical condition do not align well with the eligibility criteria of any of the provided trials.

Given these factors, there are no trials that can be considered a good match (score of 70 or higher) for this patient based on the information provided.
2024-08-06 17:22:05,806 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:22:07,179 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:22:12,686 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='After analyzing the patient profile and clinical trial data provided, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. The two clinical trials provided are:\n\n1. NCT02244879: This trial is for patients with Type 2 Diabetes Mellitus, which the patient does not have.\n\n2. NCT02841579: This trial is for patients with Non-Small Cell Lung Cancer (NSCLC) with specific EGFR mutations, which the patient does not have.\n\nNeither of these trials is suitable for a patient with leukemia, resulting in very low compatibility scores (well below 70) for both trials. Therefore, no trials meet the criteria for inclusion in the output.', type='text')]
2024-08-06 17:22:12,687 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='After analyzing the patient profile and clinical trial data provided, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. The two clinical trials provided are:\n\n1. NCT02244879: This trial is for patients with Type 2 Diabetes Mellitus, which the patient does not have.\n\n2. NCT02841579: This trial is for patients with Non-Small Cell Lung Cancer (NSCLC) with specific EGFR mutations, which the patient does not have.\n\nNeither of these trials is suitable for a patient with leukemia, resulting in very low compatibility scores (well below 70) for both trials. Therefore, no trials meet the criteria for inclusion in the output.', type='text')]
2024-08-06 17:22:12,687 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data provided, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:

[]

Explanation:
The patient, Jimmy Oldman, is a 24-year-old male with leukemia. The two clinical trials provided are:

1. NCT02244879: This trial is for patients with Type 2 Diabetes Mellitus, which the patient does not have.

2. NCT02841579: This trial is for patients with Non-Small Cell Lung Cancer (NSCLC) with specific EGFR mutations, which the patient does not have.

Neither of these trials is suitable for a patient with leukemia, resulting in very low compatibility scores (well below 70) for both trials. Therefore, no trials meet the criteria for inclusion in the output.
2024-08-06 17:22:12,687 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:22:14,014 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:22:20,373 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT03059979 (Systemic Sclerosis trial): The patient has leukemia, not systemic sclerosis or Raynaud's phenomenon. This is a complete mismatch.\n\n2. NCT00293579 (Head and Neck Cancer trial): The patient has leukemia, not head and neck cancer. This is also a complete mismatch.\n\n3. NCT04491279 (Stroke trial): The patient does not have a history of stroke, making this trial incompatible.\n\nThe patient's primary condition (leukemia) does not match any of the conditions targeted by the provided clinical trials. Additionally, the patient's age (24 years old) and specific medications are not relevant to any of these trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nTo find suitable trials for this patient, we would need to search for clinical trials specifically targeting leukemia in young adults or those that match the patient's current treatment regimen.", type='text')]
2024-08-06 17:22:20,374 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT03059979 (Systemic Sclerosis trial): The patient has leukemia, not systemic sclerosis or Raynaud's phenomenon. This is a complete mismatch.\n\n2. NCT00293579 (Head and Neck Cancer trial): The patient has leukemia, not head and neck cancer. This is also a complete mismatch.\n\n3. NCT04491279 (Stroke trial): The patient does not have a history of stroke, making this trial incompatible.\n\nThe patient's primary condition (leukemia) does not match any of the conditions targeted by the provided clinical trials. Additionally, the patient's age (24 years old) and specific medications are not relevant to any of these trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nTo find suitable trials for this patient, we would need to search for clinical trials specifically targeting leukemia in young adults or those that match the patient's current treatment regimen.", type='text')]
2024-08-06 17:22:20,374 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Here's why:

1. NCT03059979 (Systemic Sclerosis trial): The patient has leukemia, not systemic sclerosis or Raynaud's phenomenon. This is a complete mismatch.

2. NCT00293579 (Head and Neck Cancer trial): The patient has leukemia, not head and neck cancer. This is also a complete mismatch.

3. NCT04491279 (Stroke trial): The patient does not have a history of stroke, making this trial incompatible.

The patient's primary condition (leukemia) does not match any of the conditions targeted by the provided clinical trials. Additionally, the patient's age (24 years old) and specific medications are not relevant to any of these trials.

Therefore, the output in the requested JSON format is an empty array:

[]

To find suitable trials for this patient, we would need to search for clinical trials specifically targeting leukemia in young adults or those that match the patient's current treatment regimen.
2024-08-06 17:22:20,374 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:22:21,655 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:22:24,566 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not addressed in any of the provided clinical trials. Additionally, the patient's age and specific treatment regimen do not align well with the eligibility criteria of the given trials.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:22:24,566 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not addressed in any of the provided clinical trials. Additionally, the patient's age and specific treatment regimen do not align well with the eligibility criteria of the given trials.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:22:24,567 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not addressed in any of the provided clinical trials. Additionally, the patient's age and specific treatment regimen do not align well with the eligibility criteria of the given trials.

Therefore, the output is an empty array:

[]
2024-08-06 17:22:24,567 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:22:25,823 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:22:31,539 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, I'm afraid there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a young male (born in 1999) with leukemia.\n2. None of the provided clinical trials are specifically for leukemia patients.\n3. The trials focus on different conditions:\n   - NCT01272479: For hemodialysis patients with chronic hepatitis C\n   - NCT01593579: For melanoma patients\n   - NCT01709279: For ischemic heart failure patients\n   - NCT03982979: For advanced refractory left ventricular heart failure patients\n\n4. The patient's age, gender, and specific medical condition (leukemia) do not align with the eligibility criteria of any of these trials.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the ones provided, with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:22:31,539 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, I'm afraid there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a young male (born in 1999) with leukemia.\n2. None of the provided clinical trials are specifically for leukemia patients.\n3. The trials focus on different conditions:\n   - NCT01272479: For hemodialysis patients with chronic hepatitis C\n   - NCT01593579: For melanoma patients\n   - NCT01709279: For ischemic heart failure patients\n   - NCT03982979: For advanced refractory left ventricular heart failure patients\n\n4. The patient's age, gender, and specific medical condition (leukemia) do not align with the eligibility criteria of any of these trials.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the ones provided, with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:22:31,539 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, I'm afraid there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. The patient is a young male (born in 1999) with leukemia.
2. None of the provided clinical trials are specifically for leukemia patients.
3. The trials focus on different conditions:
   - NCT01272479: For hemodialysis patients with chronic hepatitis C
   - NCT01593579: For melanoma patients
   - NCT01709279: For ischemic heart failure patients
   - NCT03982979: For advanced refractory left ventricular heart failure patients

4. The patient's age, gender, and specific medical condition (leukemia) do not align with the eligibility criteria of any of these trials.

Therefore, the output in the requested JSON format would be an empty array:

[]

This indicates that there are no suitable trials for this patient among the ones provided, with a compatibility score of 70 or higher.
2024-08-06 17:22:31,540 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:22:32,866 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:22:38,398 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's primary condition is leukemia, but none of the provided clinical trials are related to leukemia or cancer treatment. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is about thyroid and cortisol hormone response to sepsis, which is not related to the patient's condition of leukemia.\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has leukemia, so they are not eligible.\n\n3. The third trial (NCT00228579) is about obesity and changes in abdominal fat, which is also not related to the patient's condition.\n\nNone of these trials are suitable for a patient with leukemia, so there are no matches with a score of 70 or higher.", type='text')]
2024-08-06 17:22:38,399 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's primary condition is leukemia, but none of the provided clinical trials are related to leukemia or cancer treatment. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is about thyroid and cortisol hormone response to sepsis, which is not related to the patient's condition of leukemia.\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has leukemia, so they are not eligible.\n\n3. The third trial (NCT00228579) is about obesity and changes in abdominal fat, which is also not related to the patient's condition.\n\nNone of these trials are suitable for a patient with leukemia, so there are no matches with a score of 70 or higher.", type='text')]
2024-08-06 17:22:38,400 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's primary condition is leukemia, but none of the provided clinical trials are related to leukemia or cancer treatment. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT06289179) is about thyroid and cortisol hormone response to sepsis, which is not related to the patient's condition of leukemia.

2. The second trial (NCT03221179) is for healthy volunteers, and the patient has leukemia, so they are not eligible.

3. The third trial (NCT00228579) is about obesity and changes in abdominal fat, which is also not related to the patient's condition.

None of these trials are suitable for a patient with leukemia, so there are no matches with a score of 70 or higher.
2024-08-06 17:22:38,400 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:22:39,874 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:22:53,004 - app - INFO - Initializing Flask app...
2024-08-06 17:22:53,006 - app - INFO - Configuring app...
2024-08-06 17:22:53,006 - app - INFO - Setting up CORS...
2024-08-06 17:22:53,007 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:22:53,390 - app - INFO - Initializing JWT manager...
2024-08-06 17:22:53,391 - app - INFO - Setting up rate limiting...
2024-08-06 17:22:53,397 - app - INFO - Setting up database...
2024-08-06 17:22:53,398 - app - INFO - Starting database setup...
2024-08-06 17:22:54,209 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:22:54,210 - app - INFO - Database setup completed successfully
2024-08-06 17:22:54,210 - app - INFO - Registering error handler...
2024-08-06 17:22:54,211 - app - INFO - Initializing CLI commands...
2024-08-06 17:22:54,211 - app - INFO - Registering routes...
2024-08-06 17:22:54,220 - app - INFO - Initializing services...
2024-08-06 17:22:54,235 - app - INFO - Initializing email service...
2024-08-06 17:22:54,235 - app - INFO - Setting up scheduler...
2024-08-06 17:22:54,242 - app - INFO - Initializing scheduler...
2024-08-06 17:22:54,244 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:22:54,244 - app - INFO - Application initialized successfully
2024-08-06 17:22:56,620 - app - INFO - Initializing Flask app...
2024-08-06 17:22:56,623 - app - INFO - Configuring app...
2024-08-06 17:22:56,624 - app - INFO - Setting up CORS...
2024-08-06 17:22:56,625 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:22:57,015 - app - INFO - Initializing JWT manager...
2024-08-06 17:22:57,016 - app - INFO - Setting up rate limiting...
2024-08-06 17:22:57,018 - app - INFO - Setting up database...
2024-08-06 17:22:57,019 - app - INFO - Starting database setup...
2024-08-06 17:22:57,761 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:22:57,761 - app - INFO - Database setup completed successfully
2024-08-06 17:22:57,761 - app - INFO - Registering error handler...
2024-08-06 17:22:57,762 - app - INFO - Initializing CLI commands...
2024-08-06 17:22:57,762 - app - INFO - Registering routes...
2024-08-06 17:22:57,770 - app - INFO - Initializing services...
2024-08-06 17:22:57,804 - app - INFO - Initializing email service...
2024-08-06 17:22:57,805 - app - INFO - Setting up scheduler...
2024-08-06 17:22:57,809 - app - INFO - Initializing scheduler...
2024-08-06 17:22:57,810 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:22:57,810 - app - INFO - Application initialized successfully
2024-08-06 17:23:09,053 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:23:09,819 - app.database - INFO - Database connection established successfully
2024-08-06 17:23:10,359 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:23:10,359 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:23:11,260 - app.database - INFO - Database connection established successfully
2024-08-06 17:23:11,371 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:23:11,390 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:23:12,147 - app.database - INFO - Database connection established successfully
2024-08-06 17:23:12,452 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:23:12,457 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:23:13,295 - app.database - INFO - Database connection established successfully
2024-08-06 17:23:13,612 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:23:13,629 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:23:15,121 - app.database - INFO - Database connection established successfully
2024-08-06 17:23:17,136 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:23:18,222 - app.database - INFO - Database connection established successfully
2024-08-06 17:23:18,298 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:23:19,258 - app.database - INFO - Database connection established successfully
2024-08-06 17:23:19,931 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66af0d2d118d8e248b49a856
2024-08-06 17:23:19,931 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:23:20,889 - app.database - INFO - Database connection established successfully
2024-08-06 17:23:21,330 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:23:26,663 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (31-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by any of the provided clinical trials. The trials focus on leukemia, erectile dysfunction/prostatic hyperplasia, smoking, and alcohol abuse in adolescents, which are not relevant to this patient's reported conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:23:26,664 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (31-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by any of the provided clinical trials. The trials focus on leukemia, erectile dysfunction/prostatic hyperplasia, smoking, and alcohol abuse in adolescents, which are not relevant to this patient's reported conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:23:26,666 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (31-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by any of the provided clinical trials. The trials focus on leukemia, erectile dysfunction/prostatic hyperplasia, smoking, and alcohol abuse in adolescents, which are not relevant to this patient's reported conditions.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 17:23:26,666 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:23:28,466 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:23:34,607 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not align closely with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no matches include:\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31) doesn't specifically match the trial's focus, which seems to be more oriented towards older populations where sarcopenia is more prevalent.\n3. There's no mention of the patient having any abdominal surgery history or hernias, which are key aspects of the provided clinical trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]
2024-08-06 17:23:34,608 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not align closely with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no matches include:\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31) doesn't specifically match the trial's focus, which seems to be more oriented towards older populations where sarcopenia is more prevalent.\n3. There's no mention of the patient having any abdominal surgery history or hernias, which are key aspects of the provided clinical trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]
2024-08-06 17:23:34,609 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not align closely with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The reasons for no matches include:
1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (31) doesn't specifically match the trial's focus, which seems to be more oriented towards older populations [SQL REDACTED] sarcopenia is more prevalent.
3. There's no mention of the patient having any abdominal surgery history or hernias, which are key aspects of the provided clinical trial.
4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.
2024-08-06 17:23:34,609 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 3 column 1 (char 4)
2024-08-06 17:23:34,610 - app.services.anthropic_service - ERROR - Response content: Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not align closely with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The reasons for no matches include:
1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (31) doesn't specifically match the trial's focus, which seems to be more oriented towards older populations [SQL REDACTED] sarcopenia is more prevalent.
3. There's no mention of the patient having any abdominal surgery history or hernias, which are key aspects of the provided clinical trial.
4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.
2024-08-06 17:23:35,976 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:23:42,898 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on:\n\n1. Heart disease and cardiovascular risk factors (NCT00626379)\n2. Diabetes prevention in Korean and South Asian Americans (NCT03530579)\n3. PTSD in military veterans (NCT05900479)\n4. Virtual reality for children with cerebral palsy (NCT04679779)\n\nThese trials either don't match the patient's conditions or have specific eligibility criteria that the patient doesn't meet (e.g., age range, ethnicity, military service, or specific medical conditions). Therefore, none of the trials reach the threshold of 70 or higher for compatibility.", type='text')]
2024-08-06 17:23:42,899 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on:\n\n1. Heart disease and cardiovascular risk factors (NCT00626379)\n2. Diabetes prevention in Korean and South Asian Americans (NCT03530579)\n3. PTSD in military veterans (NCT05900479)\n4. Virtual reality for children with cerebral palsy (NCT04679779)\n\nThese trials either don't match the patient's conditions or have specific eligibility criteria that the patient doesn't meet (e.g., age range, ethnicity, military service, or specific medical conditions). Therefore, none of the trials reach the threshold of 70 or higher for compatibility.", type='text')]
2024-08-06 17:23:42,899 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on:

1. Heart disease and cardiovascular risk factors (NCT00626379)
2. Diabetes prevention in Korean and South Asian Americans (NCT03530579)
3. PTSD in military veterans (NCT05900479)
4. Virtual reality for children with cerebral palsy (NCT04679779)

These trials either don't match the patient's conditions or have specific eligibility criteria that the patient doesn't meet (e.g., age range, ethnicity, military service, or specific medical conditions). Therefore, none of the trials reach the threshold of 70 or higher for compatibility.
2024-08-06 17:23:42,900 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:23:44,380 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:23:48,521 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the two provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer respectively.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:23:48,523 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the two provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer respectively.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:23:48,523 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the two provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer respectively.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 17:23:48,523 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:23:49,890 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:23:54,310 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which the patient does not have.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 17:23:54,311 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which the patient does not have.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 17:23:54,312 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.
2. The second trial (NCT00293579) is for Head and Neck Cancer, which the patient does not have.
3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a score of 70 or higher.
2024-08-06 17:23:54,312 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:23:55,631 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:24:02,159 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that none of the given trials are suitable matches for the patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient's primary medical conditions are depression and anxiety, which are not the focus of any of the provided clinical trials.\n\n2. The trials focus on:\n   - Metastatic breast cancer and chemotherapy-induced alopecia\n   - Lung transplant infection and rejection\n   - Workplace health and safety\n   - Choroidal thickness and refractive errors\n\n3. The patient's age (31 years old) and medication (Escitalopram) are not specifically relevant to any of the trial's inclusion criteria.\n\n4. The patient's gender (male) doesn't align well with the breast cancer trial, which is typically more relevant to female patients.\n\nGiven these factors, none of the trials reach the threshold of 70 or higher for compatibility. Therefore, the output is an empty array:\n\n[]\n\nThis indicates that based on the provided information, there are no suitable clinical trials for this patient among the options given.", type='text')]
2024-08-06 17:24:02,160 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that none of the given trials are suitable matches for the patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient's primary medical conditions are depression and anxiety, which are not the focus of any of the provided clinical trials.\n\n2. The trials focus on:\n   - Metastatic breast cancer and chemotherapy-induced alopecia\n   - Lung transplant infection and rejection\n   - Workplace health and safety\n   - Choroidal thickness and refractive errors\n\n3. The patient's age (31 years old) and medication (Escitalopram) are not specifically relevant to any of the trial's inclusion criteria.\n\n4. The patient's gender (male) doesn't align well with the breast cancer trial, which is typically more relevant to female patients.\n\nGiven these factors, none of the trials reach the threshold of 70 or higher for compatibility. Therefore, the output is an empty array:\n\n[]\n\nThis indicates that based on the provided information, there are no suitable clinical trials for this patient among the options given.", type='text')]
2024-08-06 17:24:02,160 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the clinical trial data provided, I have determined that none of the given trials are suitable matches for the patient with a compatibility score of 70 or higher. Here's why:

1. The patient's primary medical conditions are depression and anxiety, which are not the focus of any of the provided clinical trials.

2. The trials focus on:
   - Metastatic breast cancer and chemotherapy-induced alopecia
   - Lung transplant infection and rejection
   - Workplace health and safety
   - Choroidal thickness and refractive errors

3. The patient's age (31 years old) and medication (Escitalopram) are not specifically relevant to any of the trial's inclusion criteria.

4. The patient's gender (male) doesn't align well with the breast cancer trial, which is typically more relevant to female patients.

Given these factors, none of the trials reach the threshold of 70 or higher for compatibility. Therefore, the output is an empty array:

[]

This indicates that based on the provided information, there are no suitable clinical trials for this patient among the options given.
2024-08-06 17:24:02,160 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:24:04,100 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:24:09,285 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and clinical trial data, I've determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:\n\n1. Hepatitis C in hemodialysis patients\n2. Akt inhibition in melanoma patients\n3. Stem cell therapy for ischemic heart failure\n4. Left ventricular assist device for heart failure\n\nThese trials are not compatible with the patient's profile, as they target different medical conditions and populations. Therefore, no trials meet the minimum compatibility score of 70.", type='text')]
2024-08-06 17:24:09,286 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and clinical trial data, I've determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:\n\n1. Hepatitis C in hemodialysis patients\n2. Akt inhibition in melanoma patients\n3. Stem cell therapy for ischemic heart failure\n4. Left ventricular assist device for heart failure\n\nThese trials are not compatible with the patient's profile, as they target different medical conditions and populations. Therefore, no trials meet the minimum compatibility score of 70.", type='text')]
2024-08-06 17:24:09,286 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and clinical trial data, I've determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:

1. Hepatitis C in hemodialysis patients
2. Akt inhibition in melanoma patients
3. Stem cell therapy for ischemic heart failure
4. Left ventricular assist device for heart failure

These trials are not compatible with the patient's profile, as they target different medical conditions and populations. Therefore, no trials meet the minimum compatibility score of 70.
2024-08-06 17:24:09,287 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:24:10,617 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:24:15,725 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's medical conditions (depression and anxiety).\n\n2. The second trial (NCT03221179) is for healthy volunteers, but the patient has existing medical conditions and is taking medication.\n\n3. The third trial (NCT00228579) is focused on obesity, which is not mentioned in the patient's profile.\n\nNone of these trials align closely with the patient's profile, which includes depression and anxiety as medical conditions. The patient's age (31 years old) and gender (male) might have been compatible with some trials, but the specific medical conditions and current medication use don't match well with the provided trial criteria.", type='text')]
2024-08-06 17:24:15,726 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's medical conditions (depression and anxiety).\n\n2. The second trial (NCT03221179) is for healthy volunteers, but the patient has existing medical conditions and is taking medication.\n\n3. The third trial (NCT00228579) is focused on obesity, which is not mentioned in the patient's profile.\n\nNone of these trials align closely with the patient's profile, which includes depression and anxiety as medical conditions. The patient's age (31 years old) and gender (male) might have been compatible with some trials, but the specific medical conditions and current medication use don't match well with the provided trial criteria.", type='text')]
2024-08-06 17:24:15,727 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the result is an empty array:

[]

Explanation:
1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's medical conditions (depression and anxiety).

2. The second trial (NCT03221179) is for healthy volunteers, but the patient has existing medical conditions and is taking medication.

3. The third trial (NCT00228579) is focused on obesity, which is not mentioned in the patient's profile.

None of these trials align closely with the patient's profile, which includes depression and anxiety as medical conditions. The patient's age (31 years old) and gender (male) might have been compatible with some trials, but the specific medical conditions and current medication use don't match well with the provided trial criteria.
2024-08-06 17:24:15,727 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:24:17,011 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:24:21,729 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials presented match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically focused on mental health conditions or related medications. The trials cover various conditions such as coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not directly related to the patient's medical profile. As a result, there are no strong matches that would warrant a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:24:21,729 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials presented match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically focused on mental health conditions or related medications. The trials cover various conditions such as coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not directly related to the patient's medical profile. As a result, there are no strong matches that would warrant a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:24:21,730 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials presented match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically focused on mental health conditions or related medications. The trials cover various conditions such as coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not directly related to the patient's medical profile. As a result, there are no strong matches that would warrant a compatibility score of 70 or higher.
2024-08-06 17:24:21,731 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:24:22,951 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:24:28,245 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not align well with the eligibility criteria of the two provided clinical trials. \n\nThe first trial (NCT05315479) is for pediatric patients aged 2 to <17 years undergoing surgery, which doesn't match the patient's age or medical conditions.\n\nThe second trial (NCT02052479) is for female adolescents aged 12-18 with Polycystic Ovary Syndrome (PCOS), which doesn't match the patient's gender, age, or medical conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:24:28,246 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not align well with the eligibility criteria of the two provided clinical trials. \n\nThe first trial (NCT05315479) is for pediatric patients aged 2 to <17 years undergoing surgery, which doesn't match the patient's age or medical conditions.\n\nThe second trial (NCT02052479) is for female adolescents aged 12-18 with Polycystic Ovary Syndrome (PCOS), which doesn't match the patient's gender, age, or medical conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:24:28,246 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not align well with the eligibility criteria of the two provided clinical trials. 

The first trial (NCT05315479) is for pediatric patients aged 2 to <17 years undergoing surgery, which doesn't match the patient's age or medical conditions.

The second trial (NCT02052479) is for female adolescents aged 12-18 with Polycystic Ovary Syndrome (PCOS), which doesn't match the patient's gender, age, or medical conditions.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 17:24:28,247 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:24:29,518 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:24:34,841 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with any of the provided clinical trials, which focus on influenza vaccines, postpartum perineal tears, colorectal cancer, and oncologist satisfaction with cytotoxic agents.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:24:34,843 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with any of the provided clinical trials, which focus on influenza vaccines, postpartum perineal tears, colorectal cancer, and oncologist satisfaction with cytotoxic agents.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:24:34,843 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with any of the provided clinical trials, which focus on influenza vaccines, postpartum perineal tears, colorectal cancer, and oncologist satisfaction with cytotoxic agents.

Therefore, the output is an empty array:

[]
2024-08-06 17:24:34,844 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:24:36,311 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:24:42,044 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I've determined that there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The first trial (NCT06378879) is about anesthesia during gastroscopy, which doesn't align with the patient's medical conditions (depression and anxiety) or current medications.\n\n2. The second trial (NCT02710279) is more related to the patient's condition (depression), but it has several specific requirements that the patient doesn't meet:\n   - It's specifically for female patients, while Ethan is male.\n   - It requires participants to have a major depressive episode, which isn't explicitly stated in Ethan's profile.\n   - The trial has very specific inclusion criteria related to suicidal behavior, which isn't mentioned in Ethan's profile.\n\nGiven these factors, neither trial reaches the threshold of 70% compatibility with Ethan's profile. Therefore, no trials are returned in the result.", type='text')]
2024-08-06 17:24:42,044 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I've determined that there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The first trial (NCT06378879) is about anesthesia during gastroscopy, which doesn't align with the patient's medical conditions (depression and anxiety) or current medications.\n\n2. The second trial (NCT02710279) is more related to the patient's condition (depression), but it has several specific requirements that the patient doesn't meet:\n   - It's specifically for female patients, while Ethan is male.\n   - It requires participants to have a major depressive episode, which isn't explicitly stated in Ethan's profile.\n   - The trial has very specific inclusion criteria related to suicidal behavior, which isn't mentioned in Ethan's profile.\n\nGiven these factors, neither trial reaches the threshold of 70% compatibility with Ethan's profile. Therefore, no trials are returned in the result.", type='text')]
2024-08-06 17:24:42,045 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I've determined that there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. The first trial (NCT06378879) is about anesthesia during gastroscopy, which doesn't align with the patient's medical conditions (depression and anxiety) or current medications.

2. The second trial (NCT02710279) is more related to the patient's condition (depression), but it has several specific requirements that the patient doesn't meet:
   - It's specifically for female patients, while Ethan is male.
   - It requires participants to have a major depressive episode, which isn't explicitly stated in Ethan's profile.
   - The trial has very specific inclusion criteria related to suicidal behavior, which isn't mentioned in Ethan's profile.

Given these factors, neither trial reaches the threshold of 70% compatibility with Ethan's profile. Therefore, no trials are returned in the result.
2024-08-06 17:24:42,046 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:24:43,337 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:24:49,218 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT05463679 (Vascular Ehlers-Danlos Syndrome trial): The patient does not have this condition, and the age range (18-60) is the only matching criterion.\n\n2. NCT03137979 (Periodontitis trial): The patient does not have periodontitis, and their age (31) is outside the inclusion criteria (35-60).\n\n3. NCT01733979 (Anemia trial): While the patient's age (31) falls within the inclusion criteria (19-60), there's no indication that the patient has anemia, which is the primary condition for this trial.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. The patient's main conditions (depression and anxiety) are not addressed by any of the provided clinical trials.", type='text')]
2024-08-06 17:24:49,219 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT05463679 (Vascular Ehlers-Danlos Syndrome trial): The patient does not have this condition, and the age range (18-60) is the only matching criterion.\n\n2. NCT03137979 (Periodontitis trial): The patient does not have periodontitis, and their age (31) is outside the inclusion criteria (35-60).\n\n3. NCT01733979 (Anemia trial): While the patient's age (31) falls within the inclusion criteria (19-60), there's no indication that the patient has anemia, which is the primary condition for this trial.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. The patient's main conditions (depression and anxiety) are not addressed by any of the provided clinical trials.", type='text')]
2024-08-06 17:24:49,220 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. NCT05463679 (Vascular Ehlers-Danlos Syndrome trial): The patient does not have this condition, and the age range (18-60) is the only matching criterion.

2. NCT03137979 (Periodontitis trial): The patient does not have periodontitis, and their age (31) is outside the inclusion criteria (35-60).

3. NCT01733979 (Anemia trial): While the patient's age (31) falls within the inclusion criteria (19-60), there's no indication that the patient has anemia, which is the primary condition for this trial.

None of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. The patient's main conditions (depression and anxiety) are not addressed by any of the provided clinical trials.
2024-08-06 17:24:49,220 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:24:50,487 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:24:56,703 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient's primary medical conditions are depression and anxiety, which do not match the focus of any of the provided clinical trials.\n2. The patient's age (31 years old) and gender (male) do not specifically match or disqualify him for any of the trials.\n3. The patient's medication (Escitalopram) is not relevant to any of the trial conditions or exclusion criteria.\n4. None of the trials are specifically focused on mental health conditions like depression or anxiety.\n5. The trials cover diverse conditions such as coronary artery bypass surgery, ADHD in children, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis, which are not related to the patient's profile.\n\nGiven these factors, there are no trials that can be considered a good match (score of 70 or higher) for this patient based on the information provided.", type='text')]
2024-08-06 17:24:56,704 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient's primary medical conditions are depression and anxiety, which do not match the focus of any of the provided clinical trials.\n2. The patient's age (31 years old) and gender (male) do not specifically match or disqualify him for any of the trials.\n3. The patient's medication (Escitalopram) is not relevant to any of the trial conditions or exclusion criteria.\n4. None of the trials are specifically focused on mental health conditions like depression or anxiety.\n5. The trials cover diverse conditions such as coronary artery bypass surgery, ADHD in children, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis, which are not related to the patient's profile.\n\nGiven these factors, there are no trials that can be considered a good match (score of 70 or higher) for this patient based on the information provided.", type='text')]
2024-08-06 17:24:56,705 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient's primary medical conditions are depression and anxiety, which do not match the focus of any of the provided clinical trials.
2. The patient's age (31 years old) and gender (male) do not specifically match or disqualify him for any of the trials.
3. The patient's medication (Escitalopram) is not relevant to any of the trial conditions or exclusion criteria.
4. None of the trials are specifically focused on mental health conditions like depression or anxiety.
5. The trials cover diverse conditions such as coronary artery bypass surgery, ADHD in children, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis, which are not related to the patient's profile.

Given these factors, there are no trials that can be considered a good match (score of 70 or higher) for this patient based on the information provided.
2024-08-06 17:24:56,705 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:24:58,068 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:25:02,801 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:\n\n1. The first trial (NCT02199379) is focused on renal impairment and pharmacokinetics of a specific drug. The patient's profile doesn't mention any kidney-related issues, and the trial is specifically looking for subjects with various degrees of renal impairment or healthy subjects.\n\n2. The second trial (NCT02407379) is about treating periodontitis using laser therapy. The patient's profile doesn't mention any dental or gum-related conditions.\n\nNeither of these trials align with the patient's reported medical conditions (depression and anxiety) or current medication (Escitalopram). Therefore, the compatibility score for both trials would be well below 70.\n\nAs per the instructions, since no trials match with a score of 70 or higher, I'm returning an empty array:\n\n[]", type='text')]
2024-08-06 17:25:02,802 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:\n\n1. The first trial (NCT02199379) is focused on renal impairment and pharmacokinetics of a specific drug. The patient's profile doesn't mention any kidney-related issues, and the trial is specifically looking for subjects with various degrees of renal impairment or healthy subjects.\n\n2. The second trial (NCT02407379) is about treating periodontitis using laser therapy. The patient's profile doesn't mention any dental or gum-related conditions.\n\nNeither of these trials align with the patient's reported medical conditions (depression and anxiety) or current medication (Escitalopram). Therefore, the compatibility score for both trials would be well below 70.\n\nAs per the instructions, since no trials match with a score of 70 or higher, I'm returning an empty array:\n\n[]", type='text')]
2024-08-06 17:25:02,803 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:

1. The first trial (NCT02199379) is focused on renal impairment and pharmacokinetics of a specific drug. The patient's profile doesn't mention any kidney-related issues, and the trial is specifically looking for subjects with various degrees of renal impairment or healthy subjects.

2. The second trial (NCT02407379) is about treating periodontitis using laser therapy. The patient's profile doesn't mention any dental or gum-related conditions.

Neither of these trials align with the patient's reported medical conditions (depression and anxiety) or current medication (Escitalopram). Therefore, the compatibility score for both trials would be well below 70.

As per the instructions, since no trials match with a score of 70 or higher, I'm returning an empty array:

[]
2024-08-06 17:25:02,803 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:25:04,141 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:25:07,691 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT06207279",\n        "compatibility_score": 80,\n        "reasons": [\n            "The trial includes depression as one of the conditions, which matches the patient\'s medical condition",\n            "The patient\'s age (31) falls within the trial\'s inclusion criteria of 18-60 years old",\n            "The trial is in the recruiting phase, making it potentially available for the patient",\n            "The trial focuses on attention and mental health, which aligns with the patient\'s conditions of depression and anxiety"\n        ]\n    }\n]', type='text')]
2024-08-06 17:25:07,691 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT06207279",\n        "compatibility_score": 80,\n        "reasons": [\n            "The trial includes depression as one of the conditions, which matches the patient\'s medical condition",\n            "The patient\'s age (31) falls within the trial\'s inclusion criteria of 18-60 years old",\n            "The trial is in the recruiting phase, making it potentially available for the patient",\n            "The trial focuses on attention and mental health, which aligns with the patient\'s conditions of depression and anxiety"\n        ]\n    }\n]', type='text')]
2024-08-06 17:25:07,692 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT06207279",
        "compatibility_score": 80,
        "reasons": [
            "The trial includes depression as one of the conditions, which matches the patient's medical condition",
            "The patient's age (31) falls within the trial's inclusion criteria of 18-60 years old",
            "The trial is in the recruiting phase, making it potentially available for the patient",
            "The trial focuses on attention and mental health, which aligns with the patient's conditions of depression and anxiety"
        ]
    }
]
2024-08-06 17:25:07,692 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-06 17:25:07,817 - app.services.trial_matching_service - ERROR - Error processing batch: Object of type datetime is not JSON serializable
2024-08-06 17:25:07,864 - app.utils.error_handlers - ERROR - Anthropic API error: Object of type datetime is not JSON serializable
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 58, in match_patient_to_trials
    await self.emit_trial_matches(str(user_id), new_matches)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 248, in emit_trial_matches
    self.socketio.emit('trial_matches', {'user_id': user_id, 'matches': matches}, room=user_id)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask_socketio\__init__.py", line 462, in emit
    self.server.emit(event, *args, namespace=namespace, to=to,
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\socketio\server.py", line 166, in emit
    self.manager.emit(event, data, namespace, room=room,
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\socketio\manager.py", line 43, in emit
    encoded_packet = pkt.encode()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\socketio\packet.py", line 64, in encode
    encoded_packet += self.json.dumps(data, separators=(',', ':'))
  File "C:\Users\ethan\anaconda3\lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
  File "C:\Users\ethan\anaconda3\lib\json\encoder.py", line 199, in encode
    chunks = self.iterencode(o, _one_shot=True)
  File "C:\Users\ethan\anaconda3\lib\json\encoder.py", line 257, in iterencode
    return _iterencode(o, 0)
  File "C:\Users\ethan\anaconda3\lib\json\encoder.py", line 179, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type datetime is not JSON serializable

2024-08-06 17:25:09,128 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:25:14,197 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the provided clinical trials.\n\nThe three trials provided focus on:\n1. Post-operative pain following knee arthroplasty\n2. Popliteal Entrapment Syndrome\n3. Duodenal Atresia surgical simulator validation\n\nNone of these trials are related to depression or anxiety, which are the main medical conditions listed for the patient. Additionally, the patient's age and specific health conditions do not meet the inclusion criteria for any of these studies.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient from the given set of clinical trials.", type='text')]
2024-08-06 17:25:14,197 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the provided clinical trials.\n\nThe three trials provided focus on:\n1. Post-operative pain following knee arthroplasty\n2. Popliteal Entrapment Syndrome\n3. Duodenal Atresia surgical simulator validation\n\nNone of these trials are related to depression or anxiety, which are the main medical conditions listed for the patient. Additionally, the patient's age and specific health conditions do not meet the inclusion criteria for any of these studies.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient from the given set of clinical trials.", type='text')]
2024-08-06 17:25:14,197 - app.services.anthropic_service - INFO - Parsing response: Based on the given patient profile and clinical trial data, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the provided clinical trials.

The three trials provided focus on:
1. Post-operative pain following knee arthroplasty
2. Popliteal Entrapment Syndrome
3. Duodenal Atresia surgical simulator validation

None of these trials are related to depression or anxiety, which are the main medical conditions listed for the patient. Additionally, the patient's age and specific health conditions do not meet the inclusion criteria for any of these studies.

Therefore, the output in the requested JSON format would be an empty array:

[]

This indicates that there are no suitable trials for this patient [SQL REDACTED] the given set of clinical trials.
2024-08-06 17:25:14,197 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 3 column 1 (char 4)
2024-08-06 17:25:14,198 - app.services.anthropic_service - ERROR - Response content: Based on the given patient profile and clinical trial data, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the provided clinical trials.

The three trials provided focus on:
1. Post-operative pain following knee arthroplasty
2. Popliteal Entrapment Syndrome
3. Duodenal Atresia surgical simulator validation

None of these trials are related to depression or anxiety, which are the main medical conditions listed for the patient. Additionally, the patient's age and specific health conditions do not meet the inclusion criteria for any of these studies.

Therefore, the output in the requested JSON format would be an empty array:

[]

This indicates that there are no suitable trials for this patient [SQL REDACTED] the given set of clinical trials.
2024-08-06 17:25:15,553 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:25:19,388 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05359679) is focused on dementia in patients 65 years and older, which doesn't match the patient's profile (30-year-old with depression and anxiety).\n\n2. The second trial (NCT04527679) is for intrahepatic cholangiocarcinoma, which is not mentioned in the patient's medical conditions.\n\nNeither of these trials are suitable for the patient given their age, medical conditions, and other characteristics. Therefore, no trials meet the minimum compatibility score of 70.", type='text')]
2024-08-06 17:25:19,388 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05359679) is focused on dementia in patients 65 years and older, which doesn't match the patient's profile (30-year-old with depression and anxiety).\n\n2. The second trial (NCT04527679) is for intrahepatic cholangiocarcinoma, which is not mentioned in the patient's medical conditions.\n\nNeither of these trials are suitable for the patient given their age, medical conditions, and other characteristics. Therefore, no trials meet the minimum compatibility score of 70.", type='text')]
2024-08-06 17:25:19,389 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT05359679) is focused on dementia in patients 65 years and older, which doesn't match the patient's profile (30-year-old with depression and anxiety).

2. The second trial (NCT04527679) is for intrahepatic cholangiocarcinoma, which is not mentioned in the patient's medical conditions.

Neither of these trials are suitable for the patient given their age, medical conditions, and other characteristics. Therefore, no trials meet the minimum compatibility score of 70.
2024-08-06 17:25:19,389 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:25:20,676 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:25:24,588 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. None of the provided clinical trials are directly related to depression, anxiety, or psychiatric conditions.\n3. The trials cover breast cancer, snacking habits in children, knee arthroplasty infection, and dry eye treatment.\n4. The patient's age, gender, and medical conditions do not align closely with any of the trial's inclusion criteria or targeted conditions.\n\nAs a result, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.", type='text')]
2024-08-06 17:25:24,588 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. None of the provided clinical trials are directly related to depression, anxiety, or psychiatric conditions.\n3. The trials cover breast cancer, snacking habits in children, knee arthroplasty infection, and dry eye treatment.\n4. The patient's age, gender, and medical conditions do not align closely with any of the trial's inclusion criteria or targeted conditions.\n\nAs a result, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.", type='text')]
2024-08-06 17:25:24,590 - app.services.anthropic_service - INFO - Parsing response: Based on the provided patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. None of the provided clinical trials are directly related to depression, anxiety, or psychiatric conditions.
3. The trials cover breast cancer, snacking habits in children, knee arthroplasty infection, and dry eye treatment.
4. The patient's age, gender, and medical conditions do not align closely with any of the trial's inclusion criteria or targeted conditions.

As a result, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.
2024-08-06 17:25:24,590 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:25:25,931 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:25:32,444 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials are for:\n   - Hemophilia and bleeding disorders (NCT03327779)\n   - Coronary artery disease and myocardial ischemia in healthy volunteers (NCT05195879)\n   - Draining hematomas following traumatic injury (NCT00582179)\n   - Hodgkin Lymphoma in elderly patients (NCT01056679)\n\nNone of these trials are related to depression or anxiety, which are Ethan's primary medical conditions. Additionally, Ethan doesn't meet the specific criteria for any of these trials (e.g., he doesn't have hemophilia, isn't a healthy volunteer for a heart study, doesn't have a draining hematoma, and isn't an elderly patient with Hodgkin Lymphoma).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that there are no suitable clinical trials for this patient from the provided list, with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:25:32,445 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials are for:\n   - Hemophilia and bleeding disorders (NCT03327779)\n   - Coronary artery disease and myocardial ischemia in healthy volunteers (NCT05195879)\n   - Draining hematomas following traumatic injury (NCT00582179)\n   - Hodgkin Lymphoma in elderly patients (NCT01056679)\n\nNone of these trials are related to depression or anxiety, which are Ethan's primary medical conditions. Additionally, Ethan doesn't meet the specific criteria for any of these trials (e.g., he doesn't have hemophilia, isn't a healthy volunteer for a heart study, doesn't have a draining hematoma, and isn't an elderly patient with Hodgkin Lymphoma).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that there are no suitable clinical trials for this patient from the provided list, with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:25:32,446 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.

2. The available clinical trials are for:
   - Hemophilia and bleeding disorders (NCT03327779)
   - Coronary artery disease and myocardial ischemia in healthy volunteers (NCT05195879)
   - Draining hematomas following traumatic injury (NCT00582179)
   - Hodgkin Lymphoma in elderly patients (NCT01056679)

None of these trials are related to depression or anxiety, which are Ethan's primary medical conditions. Additionally, Ethan doesn't meet the specific criteria for any of these trials (e.g., he doesn't have hemophilia, isn't a healthy volunteer for a heart study, doesn't have a draining hematoma, and isn't an elderly patient with Hodgkin Lymphoma).

Therefore, the output in the requested JSON format is an empty array:

[]

This indicates that there are no suitable clinical trials for this patient [SQL REDACTED] the provided list, with a compatibility score of 70 or higher.
2024-08-06 17:25:32,446 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 3 column 1 (char 4)
2024-08-06 17:25:32,447 - app.services.anthropic_service - ERROR - Response content: After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.

2. The available clinical trials are for:
   - Hemophilia and bleeding disorders (NCT03327779)
   - Coronary artery disease and myocardial ischemia in healthy volunteers (NCT05195879)
   - Draining hematomas following traumatic injury (NCT00582179)
   - Hodgkin Lymphoma in elderly patients (NCT01056679)

None of these trials are related to depression or anxiety, which are Ethan's primary medical conditions. Additionally, Ethan doesn't meet the specific criteria for any of these trials (e.g., he doesn't have hemophilia, isn't a healthy volunteer for a heart study, doesn't have a draining hematoma, and isn't an elderly patient with Hodgkin Lymphoma).

Therefore, the output in the requested JSON format is an empty array:

[]

This indicates that there are no suitable clinical trials for this patient [SQL REDACTED] the provided list, with a compatibility score of 70 or higher.
2024-08-06 17:25:33,736 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:25:38,229 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05448079) is focused on postmenopausal women, which doesn't match the patient's profile (male, born in 1992).\n\n2. The second trial (NCT01350479) is about MRSA in nursing homes, which is not related to the patient's conditions (depression and anxiety) or demographics.\n\nNeither of these trials are suitable for the patient based on the information provided, resulting in compatibility scores well below 70 for both. Hence, no trials are returned in the output.", type='text')]
2024-08-06 17:25:38,229 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05448079) is focused on postmenopausal women, which doesn't match the patient's profile (male, born in 1992).\n\n2. The second trial (NCT01350479) is about MRSA in nursing homes, which is not related to the patient's conditions (depression and anxiety) or demographics.\n\nNeither of these trials are suitable for the patient based on the information provided, resulting in compatibility scores well below 70 for both. Hence, no trials are returned in the output.", type='text')]
2024-08-06 17:25:38,229 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT05448079) is focused on postmenopausal women, which doesn't match the patient's profile (male, born in 1992).

2. The second trial (NCT01350479) is about MRSA in nursing homes, which is not related to the patient's conditions (depression and anxiety) or demographics.

Neither of these trials are suitable for the patient based on the information provided, resulting in compatibility scores well below 70 for both. Hence, no trials are returned in the output.
2024-08-06 17:25:38,229 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:25:39,518 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:25:44,344 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT01566279 (CPCT-03 study): This trial is for patients with solid tumors and cancer. The patient doesn't have any cancer diagnosis mentioned in their profile, so it's not compatible.\n\n2. NCT00973479 (Rheumatoid Arthritis study): This trial is specifically for patients with rheumatoid arthritis. The patient's profile doesn't mention this condition, so it's not a match.\n\n3. NCT02744079 (Breast Cancer study): This trial is for women with breast cancer. The patient is male and doesn't have a breast cancer diagnosis, so it's not compatible.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:25:44,345 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT01566279 (CPCT-03 study): This trial is for patients with solid tumors and cancer. The patient doesn't have any cancer diagnosis mentioned in their profile, so it's not compatible.\n\n2. NCT00973479 (Rheumatoid Arthritis study): This trial is specifically for patients with rheumatoid arthritis. The patient's profile doesn't mention this condition, so it's not a match.\n\n3. NCT02744079 (Breast Cancer study): This trial is for women with breast cancer. The patient is male and doesn't have a breast cancer diagnosis, so it's not compatible.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:25:44,346 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. NCT01566279 (CPCT-03 study): This trial is for patients with solid tumors and cancer. The patient doesn't have any cancer diagnosis mentioned in their profile, so it's not compatible.

2. NCT00973479 (Rheumatoid Arthritis study): This trial is specifically for patients with rheumatoid arthritis. The patient's profile doesn't mention this condition, so it's not a match.

3. NCT02744079 (Breast Cancer study): This trial is for women with breast cancer. The patient is male and doesn't have a breast cancer diagnosis, so it's not compatible.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 17:25:44,346 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:25:45,626 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:25:50,019 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided have a compatibility score of 70 or higher for this patient. Here's why:\n\n1. NCT00578279: This trial is for pancreatic cancer patients, which doesn't match the patient's conditions.\n\n2. NCT03482479: This trial is for patients with various types of vasculitis, which doesn't match the patient's conditions.\n\n3. NCT05403879: This trial is for patients with greater tuberosity fractures, which doesn't match the patient's conditions.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided trials are related to these conditions or medications. Therefore, the output in the requested JSON format is:\n\n[]", type='text')]
2024-08-06 17:25:50,020 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided have a compatibility score of 70 or higher for this patient. Here's why:\n\n1. NCT00578279: This trial is for pancreatic cancer patients, which doesn't match the patient's conditions.\n\n2. NCT03482479: This trial is for patients with various types of vasculitis, which doesn't match the patient's conditions.\n\n3. NCT05403879: This trial is for patients with greater tuberosity fractures, which doesn't match the patient's conditions.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided trials are related to these conditions or medications. Therefore, the output in the requested JSON format is:\n\n[]", type='text')]
2024-08-06 17:25:50,021 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided have a compatibility score of 70 or higher for this patient. Here's why:

1. NCT00578279: This trial is for pancreatic cancer patients, which doesn't match the patient's conditions.

2. NCT03482479: This trial is for patients with various types of vasculitis, which doesn't match the patient's conditions.

3. NCT05403879: This trial is for patients with greater tuberosity fractures, which doesn't match the patient's conditions.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided trials are related to these conditions or medications. Therefore, the output in the requested JSON format is:

[]
2024-08-06 17:25:50,021 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:25:51,271 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:25:56,223 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02602379) is focused on pain management during anesthesia, which doesn't align with the patient's medical conditions (depression and anxiety).\n\n2. The second trial (NCT00913679) is about hip resurfacing arthroplasty, which is unrelated to the patient's medical profile.\n\nNeither of these trials addresses the patient's specific medical conditions (depression and anxiety) or current medication (Escitalopram). Additionally, the patient's age (31 years old) and gender (male) don't specifically match any criteria mentioned in these trials. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 17:25:56,224 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02602379) is focused on pain management during anesthesia, which doesn't align with the patient's medical conditions (depression and anxiety).\n\n2. The second trial (NCT00913679) is about hip resurfacing arthroplasty, which is unrelated to the patient's medical profile.\n\nNeither of these trials addresses the patient's specific medical conditions (depression and anxiety) or current medication (Escitalopram). Additionally, the patient's age (31 years old) and gender (male) don't specifically match any criteria mentioned in these trials. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 17:25:56,225 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT02602379) is focused on pain management during anesthesia, which doesn't align with the patient's medical conditions (depression and anxiety).

2. The second trial (NCT00913679) is about hip resurfacing arthroplasty, which is unrelated to the patient's medical profile.

Neither of these trials addresses the patient's specific medical conditions (depression and anxiety) or current medication (Escitalopram). Additionally, the patient's age (31 years old) and gender (male) don't specifically match any criteria mentioned in these trials. Therefore, there are no suitable matches with a score of 70 or higher.
2024-08-06 17:25:56,225 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:25:57,523 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:26:11,273 - app - INFO - Initializing Flask app...
2024-08-06 17:26:11,274 - app - INFO - Configuring app...
2024-08-06 17:26:11,275 - app - INFO - Setting up CORS...
2024-08-06 17:26:11,275 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:26:11,524 - app - INFO - Initializing JWT manager...
2024-08-06 17:26:11,524 - app - INFO - Setting up rate limiting...
2024-08-06 17:26:11,525 - app - INFO - Setting up database...
2024-08-06 17:26:11,526 - app - INFO - Starting database setup...
2024-08-06 17:26:12,399 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:26:12,399 - app - INFO - Database setup completed successfully
2024-08-06 17:26:12,400 - app - INFO - Registering error handler...
2024-08-06 17:26:12,400 - app - INFO - Initializing CLI commands...
2024-08-06 17:26:12,400 - app - INFO - Registering routes...
2024-08-06 17:26:12,408 - app - INFO - Initializing services...
2024-08-06 17:26:12,426 - app - INFO - Initializing email service...
2024-08-06 17:26:12,427 - app - INFO - Setting up scheduler...
2024-08-06 17:26:12,430 - app - INFO - Initializing scheduler...
2024-08-06 17:26:12,431 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:26:12,432 - app - INFO - Application initialized successfully
2024-08-06 17:26:14,891 - app - INFO - Initializing Flask app...
2024-08-06 17:26:14,893 - app - INFO - Configuring app...
2024-08-06 17:26:14,894 - app - INFO - Setting up CORS...
2024-08-06 17:26:14,895 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:26:15,324 - app - INFO - Initializing JWT manager...
2024-08-06 17:26:15,324 - app - INFO - Setting up rate limiting...
2024-08-06 17:26:15,325 - app - INFO - Setting up database...
2024-08-06 17:26:15,326 - app - INFO - Starting database setup...
2024-08-06 17:26:16,096 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:26:16,096 - app - INFO - Database setup completed successfully
2024-08-06 17:26:16,098 - app - INFO - Registering error handler...
2024-08-06 17:26:16,098 - app - INFO - Initializing CLI commands...
2024-08-06 17:26:16,098 - app - INFO - Registering routes...
2024-08-06 17:26:16,114 - app - INFO - Initializing services...
2024-08-06 17:26:16,131 - app - INFO - Initializing email service...
2024-08-06 17:26:16,131 - app - INFO - Setting up scheduler...
2024-08-06 17:26:16,136 - app - INFO - Initializing scheduler...
2024-08-06 17:26:16,137 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:26:16,137 - app - INFO - Application initialized successfully
2024-08-06 17:26:39,843 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:26:40,457 - app.database - INFO - Database connection established successfully
2024-08-06 17:26:40,994 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:26:40,995 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:26:42,018 - app.database - INFO - Database connection established successfully
2024-08-06 17:26:42,056 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:26:42,073 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:26:42,631 - app.database - INFO - Database connection established successfully
2024-08-06 17:26:42,695 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:26:42,696 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:26:43,437 - app.database - INFO - Database connection established successfully
2024-08-06 17:26:43,498 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:26:43,546 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:26:44,229 - app.database - INFO - Database connection established successfully
2024-08-06 17:26:44,625 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:26:45,329 - app.database - INFO - Database connection established successfully
2024-08-06 17:26:45,417 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:26:46,114 - app.database - INFO - Database connection established successfully
2024-08-06 17:26:53,925 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66af0d2d118d8e248b49a856
2024-08-06 17:26:53,926 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:26:54,537 - app.database - INFO - Database connection established successfully
2024-08-06 17:26:55,660 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:27:01,878 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years), which doesn't match the patient's profile (31-year-old with depression and anxiety).\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: This trial is for adolescents (12-21 years) studying alcohol abuse, which doesn't match the patient's age or reported conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThe patient's profile (31-year-old male with depression and anxiety) doesn't align closely with any of the provided clinical trials, which focus on very different conditions and demographics.", type='text')]
2024-08-06 17:27:01,879 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years), which doesn't match the patient's profile (31-year-old with depression and anxiety).\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: This trial is for adolescents (12-21 years) studying alcohol abuse, which doesn't match the patient's age or reported conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThe patient's profile (31-year-old male with depression and anxiety) doesn't align closely with any of the provided clinical trials, which focus on very different conditions and demographics.", type='text')]
2024-08-06 17:27:01,882 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years), which doesn't match the patient's profile (31-year-old with depression and anxiety).

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: This trial is for adolescents (12-21 years) studying alcohol abuse, which doesn't match the patient's age or reported conditions.

Therefore, the output in the requested JSON format is an empty array:

[]

The patient's profile (31-year-old male with depression and anxiety) doesn't align closely with any of the provided clinical trials, which focus on very different conditions and demographics.
2024-08-06 17:27:01,884 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:27:03,557 - app.services.trial_matching_service - INFO - Processing batch of 50 trials
2024-08-06 17:28:31,516 - app - INFO - Initializing Flask app...
2024-08-06 17:28:31,517 - app - INFO - Configuring app...
2024-08-06 17:28:31,518 - app - INFO - Setting up CORS...
2024-08-06 17:28:31,518 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:28:31,873 - app - INFO - Initializing JWT manager...
2024-08-06 17:28:31,873 - app - INFO - Setting up rate limiting...
2024-08-06 17:28:31,875 - app - INFO - Setting up database...
2024-08-06 17:28:31,876 - app - INFO - Starting database setup...
2024-08-06 17:28:32,538 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:28:32,538 - app - INFO - Database setup completed successfully
2024-08-06 17:28:32,539 - app - INFO - Registering error handler...
2024-08-06 17:28:32,539 - app - INFO - Initializing CLI commands...
2024-08-06 17:28:32,539 - app - INFO - Registering routes...
2024-08-06 17:28:32,546 - app - INFO - Initializing services...
2024-08-06 17:28:32,559 - app - INFO - Initializing email service...
2024-08-06 17:28:32,559 - app - INFO - Setting up scheduler...
2024-08-06 17:28:32,563 - app - INFO - Initializing scheduler...
2024-08-06 17:28:32,564 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:28:32,564 - app - INFO - Application initialized successfully
2024-08-06 17:28:35,280 - app - INFO - Initializing Flask app...
2024-08-06 17:28:35,282 - app - INFO - Configuring app...
2024-08-06 17:28:35,282 - app - INFO - Setting up CORS...
2024-08-06 17:28:35,283 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:28:35,629 - app - INFO - Initializing JWT manager...
2024-08-06 17:28:35,631 - app - INFO - Setting up rate limiting...
2024-08-06 17:28:35,632 - app - INFO - Setting up database...
2024-08-06 17:28:35,632 - app - INFO - Starting database setup...
2024-08-06 17:28:36,257 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:28:36,258 - app - INFO - Database setup completed successfully
2024-08-06 17:28:36,259 - app - INFO - Registering error handler...
2024-08-06 17:28:36,259 - app - INFO - Initializing CLI commands...
2024-08-06 17:28:36,259 - app - INFO - Registering routes...
2024-08-06 17:28:36,271 - app - INFO - Initializing services...
2024-08-06 17:28:36,290 - app - INFO - Initializing email service...
2024-08-06 17:28:36,291 - app - INFO - Setting up scheduler...
2024-08-06 17:28:36,298 - app - INFO - Initializing scheduler...
2024-08-06 17:28:36,299 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:28:36,299 - app - INFO - Application initialized successfully
2024-08-06 17:29:00,442 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:01,247 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:01,549 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:29:01,550 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:02,390 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:02,470 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:29:02,480 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:03,318 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:03,419 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:29:03,420 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:04,158 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:04,205 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:29:04,212 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:05,864 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:06,190 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:06,740 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:06,822 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:07,421 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:08,903 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:29:08,904 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:09,468 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:09,519 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:29:09,527 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:10,131 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:10,186 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:29:10,187 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:10,676 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:10,723 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:29:10,734 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:11,283 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:50,375 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:50,937 - app.database - INFO - Database connection established successfully
2024-08-06 17:29:50,991 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:29:51,537 - app.database - INFO - Database connection established successfully
2024-08-06 17:40:01,167 - app - INFO - Initializing Flask app...
2024-08-06 17:40:01,170 - app - INFO - Configuring app...
2024-08-06 17:40:01,170 - app - INFO - Setting up CORS...
2024-08-06 17:40:01,171 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:40:01,588 - app - INFO - Initializing JWT manager...
2024-08-06 17:40:01,588 - app - INFO - Setting up rate limiting...
2024-08-06 17:40:01,590 - app - INFO - Setting up database...
2024-08-06 17:40:01,590 - app - INFO - Starting database setup...
2024-08-06 17:40:02,205 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:40:02,205 - app - INFO - Database setup completed successfully
2024-08-06 17:40:02,206 - app - INFO - Registering error handler...
2024-08-06 17:40:02,206 - app - INFO - Initializing CLI commands...
2024-08-06 17:40:02,207 - app - INFO - Registering routes...
2024-08-06 17:40:02,249 - app - INFO - Initializing services...
2024-08-06 17:40:02,267 - app - INFO - Initializing email service...
2024-08-06 17:40:02,268 - app - INFO - Setting up scheduler...
2024-08-06 17:40:02,277 - app - INFO - Initializing scheduler...
2024-08-06 17:40:02,278 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:40:02,278 - app - INFO - Application initialized successfully
2024-08-06 17:42:02,843 - app - INFO - Initializing Flask app...
2024-08-06 17:42:02,845 - app - INFO - Configuring app...
2024-08-06 17:42:02,845 - app - INFO - Setting up CORS...
2024-08-06 17:42:02,846 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:42:03,051 - app - INFO - Initializing JWT manager...
2024-08-06 17:42:03,051 - app - INFO - Setting up rate limiting...
2024-08-06 17:42:03,053 - app - INFO - Setting up database...
2024-08-06 17:42:03,053 - app - INFO - Starting database setup...
2024-08-06 17:42:03,808 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:42:03,809 - app - INFO - Database setup completed successfully
2024-08-06 17:42:03,811 - app - INFO - Registering error handler...
2024-08-06 17:42:03,811 - app - INFO - Initializing CLI commands...
2024-08-06 17:42:03,811 - app - INFO - Registering routes...
2024-08-06 17:42:03,819 - app - INFO - Initializing services...
2024-08-06 17:42:03,828 - app - INFO - Initializing email service...
2024-08-06 17:42:03,829 - app - INFO - Setting up scheduler...
2024-08-06 17:42:03,835 - app - INFO - Initializing scheduler...
2024-08-06 17:42:03,836 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:42:03,836 - app - INFO - Application initialized successfully
2024-08-06 17:42:19,373 - app - INFO - Initializing Flask app...
2024-08-06 17:42:19,374 - app - INFO - Configuring app...
2024-08-06 17:42:19,374 - app - INFO - Setting up CORS...
2024-08-06 17:42:19,375 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:42:19,676 - app - INFO - Initializing JWT manager...
2024-08-06 17:42:19,676 - app - INFO - Setting up rate limiting...
2024-08-06 17:42:19,677 - app - INFO - Setting up database...
2024-08-06 17:42:19,678 - app - INFO - Starting database setup...
2024-08-06 17:42:20,337 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:42:20,337 - app - INFO - Database setup completed successfully
2024-08-06 17:42:20,338 - app - INFO - Registering error handler...
2024-08-06 17:42:20,338 - app - INFO - Initializing CLI commands...
2024-08-06 17:42:20,338 - app - INFO - Registering routes...
2024-08-06 17:42:20,346 - app - INFO - Initializing services...
2024-08-06 17:42:20,360 - app - INFO - Initializing email service...
2024-08-06 17:42:20,361 - app - INFO - Setting up scheduler...
2024-08-06 17:42:20,365 - app - INFO - Initializing scheduler...
2024-08-06 17:42:20,366 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:42:20,367 - app - INFO - Application initialized successfully
2024-08-06 17:42:22,782 - app - INFO - Initializing Flask app...
2024-08-06 17:42:22,785 - app - INFO - Configuring app...
2024-08-06 17:42:22,786 - app - INFO - Setting up CORS...
2024-08-06 17:42:22,787 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:42:23,183 - app - INFO - Initializing JWT manager...
2024-08-06 17:42:23,184 - app - INFO - Setting up rate limiting...
2024-08-06 17:42:23,185 - app - INFO - Setting up database...
2024-08-06 17:42:23,185 - app - INFO - Starting database setup...
2024-08-06 17:42:23,876 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:42:23,876 - app - INFO - Database setup completed successfully
2024-08-06 17:42:23,877 - app - INFO - Registering error handler...
2024-08-06 17:42:23,878 - app - INFO - Initializing CLI commands...
2024-08-06 17:42:23,878 - app - INFO - Registering routes...
2024-08-06 17:42:23,889 - app - INFO - Initializing services...
2024-08-06 17:42:23,905 - app - INFO - Initializing email service...
2024-08-06 17:42:23,906 - app - INFO - Setting up scheduler...
2024-08-06 17:42:23,912 - app - INFO - Initializing scheduler...
2024-08-06 17:42:23,912 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:42:23,913 - app - INFO - Application initialized successfully
2024-08-06 17:42:34,436 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:42:35,083 - app.database - INFO - Database connection established successfully
2024-08-06 17:42:35,542 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:42:35,543 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:42:36,111 - app.database - INFO - Database connection established successfully
2024-08-06 17:42:36,166 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:42:36,177 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:42:36,832 - app.database - INFO - Database connection established successfully
2024-08-06 17:42:36,888 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:42:36,888 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:42:37,453 - app.database - INFO - Database connection established successfully
2024-08-06 17:42:37,502 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:42:37,519 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:42:38,108 - app.database - INFO - Database connection established successfully
2024-08-06 17:42:38,659 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:42:39,238 - app.database - INFO - Database connection established successfully
2024-08-06 17:42:39,301 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:42:39,907 - app.database - INFO - Database connection established successfully
2024-08-06 17:42:42,340 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:42:42,943 - app.database - INFO - Database connection established successfully
2024-08-06 17:42:43,081 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:42:48,460 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is for adolescents and young adults (12-21 years), it's specifically studying alcohol abuse. The patient is outside the age range (31 years old) and there's no indication of alcohol abuse in their profile.\n\nNone of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 17:42:48,461 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is for adolescents and young adults (12-21 years), it's specifically studying alcohol abuse. The patient is outside the age range (31 years old) and there's no indication of alcohol abuse in their profile.\n\nNone of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 17:42:48,462 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: While this trial is for adolescents and young adults (12-21 years), it's specifically studying alcohol abuse. The patient is outside the age range (31 years old) and there's no indication of alcohol abuse in their profile.

None of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format would be an empty array:

[]
2024-08-06 17:42:48,462 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:42:48,463 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:42:49,564 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:42:55,924 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT01353079) is for allergies, specifically ragweed allergy. The patient's profile does not mention any allergies, so this trial is not a match.\n\n2. The second trial (NCT03793179) is for non-small cell lung cancer. The patient's profile does not indicate any cancer diagnosis, so this trial is also not a match.\n\nThe patient's profile shows that they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:42:55,924 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT01353079) is for allergies, specifically ragweed allergy. The patient's profile does not mention any allergies, so this trial is not a match.\n\n2. The second trial (NCT03793179) is for non-small cell lung cancer. The patient's profile does not indicate any cancer diagnosis, so this trial is also not a match.\n\nThe patient's profile shows that they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:42:55,924 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT01353079) is for allergies, specifically ragweed allergy. The patient's profile does not mention any allergies, so this trial is not a match.

2. The second trial (NCT03793179) is for non-small cell lung cancer. The patient's profile does not indicate any cancer diagnosis, so this trial is also not a match.

The patient's profile shows that they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 17:42:55,924 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:42:55,925 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:42:57,116 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:43:02,172 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT00717379) is about kidney transplantation, which is not related to the patient's medical conditions.\n2. The second trial (NCT01294579) is for non-Hodgkin's lymphoma, which is also not related to the patient's conditions.\n3. The third trial (NCT02589379) is about pancreatic fistula, which is not relevant to the patient's profile.\n\nThe patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align with any of the provided clinical trials. The trials focus on kidney transplantation, lymphoma, and pancreatic issues, which are not related to the patient's mental health conditions.", type='text')]
2024-08-06 17:43:02,173 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT00717379) is about kidney transplantation, which is not related to the patient's medical conditions.\n2. The second trial (NCT01294579) is for non-Hodgkin's lymphoma, which is also not related to the patient's conditions.\n3. The third trial (NCT02589379) is about pancreatic fistula, which is not relevant to the patient's profile.\n\nThe patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align with any of the provided clinical trials. The trials focus on kidney transplantation, lymphoma, and pancreatic issues, which are not related to the patient's mental health conditions.", type='text')]
2024-08-06 17:43:02,173 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT00717379) is about kidney transplantation, which is not related to the patient's medical conditions.
2. The second trial (NCT01294579) is for non-Hodgkin's lymphoma, which is also not related to the patient's conditions.
3. The third trial (NCT02589379) is about pancreatic fistula, which is not relevant to the patient's profile.

The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align with any of the provided clinical trials. The trials focus on kidney transplantation, lymphoma, and pancreatic issues, which are not related to the patient's mental health conditions.
2024-08-06 17:43:02,174 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:43:02,174 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:43:03,353 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:43:07,394 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeted at depression or anxiety. The trials focus on:\n\n1. Acromegaly and insulin resistance\n2. Diabetes mellitus\n3. Post-intensive care syndrome\n4. Esophageal cancer\n\nThese conditions do not match the patient's profile, and the eligibility criteria for these trials do not align with the patient's characteristics. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:43:07,395 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeted at depression or anxiety. The trials focus on:\n\n1. Acromegaly and insulin resistance\n2. Diabetes mellitus\n3. Post-intensive care syndrome\n4. Esophageal cancer\n\nThese conditions do not match the patient's profile, and the eligibility criteria for these trials do not align with the patient's characteristics. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:43:07,396 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeted at depression or anxiety. The trials focus on:

1. Acromegaly and insulin resistance
2. Diabetes mellitus
3. Post-intensive care syndrome
4. Esophageal cancer

These conditions do not match the patient's profile, and the eligibility criteria for these trials do not align with the patient's characteristics. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 17:43:07,396 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:43:07,397 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:43:08,543 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:43:14,067 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT04801979 (Normative Values and Reference Equations of a New Incremental Step Test):\n   - This trial is for adults without disabilities, but the patient has depression and anxiety.\n   - The trial specifically excludes people with acute or chronic conditions, which would include the patient's mental health conditions.\n   - The compatibility score would be well below 70 due to these mismatches.\n\n2. NCT01312779 (Magna Mitral - 23mm):\n   - This trial is for patients with mitral heart valve disease requiring surgical replacement.\n   - The patient profile does not mention any heart conditions.\n   - The trial has specific inclusion criteria related to heart valve disease, which the patient does not meet.\n   - The compatibility score would be very low, well below 70.\n\nNeither of these trials is suitable for the patient based on the provided information, hence the empty array result.", type='text')]
2024-08-06 17:43:14,067 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT04801979 (Normative Values and Reference Equations of a New Incremental Step Test):\n   - This trial is for adults without disabilities, but the patient has depression and anxiety.\n   - The trial specifically excludes people with acute or chronic conditions, which would include the patient's mental health conditions.\n   - The compatibility score would be well below 70 due to these mismatches.\n\n2. NCT01312779 (Magna Mitral - 23mm):\n   - This trial is for patients with mitral heart valve disease requiring surgical replacement.\n   - The patient profile does not mention any heart conditions.\n   - The trial has specific inclusion criteria related to heart valve disease, which the patient does not meet.\n   - The compatibility score would be very low, well below 70.\n\nNeither of these trials is suitable for the patient based on the provided information, hence the empty array result.", type='text')]
2024-08-06 17:43:14,067 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. NCT04801979 (Normative Values and Reference Equations of a New Incremental Step Test):
   - This trial is for adults without disabilities, but the patient has depression and anxiety.
   - The trial specifically excludes people with acute or chronic conditions, which would include the patient's mental health conditions.
   - The compatibility score would be well below 70 due to these mismatches.

2. NCT01312779 (Magna Mitral - 23mm):
   - This trial is for patients with mitral heart valve disease requiring surgical replacement.
   - The patient profile does not mention any heart conditions.
   - The trial has specific inclusion criteria related to heart valve disease, which the patient does not meet.
   - The compatibility score would be very low, well below 70.

Neither of these trials is suitable for the patient based on the provided information, hence the empty array result.
2024-08-06 17:43:14,068 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:43:14,068 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:43:15,222 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:43:17,737 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the clinical trial focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:43:17,737 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the clinical trial focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:43:17,737 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the clinical trial focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]
2024-08-06 17:43:17,737 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:43:17,738 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:43:18,741 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: cannot schedule new futures after shutdown
2024-08-06 17:43:25,757 - app - INFO - Initializing Flask app...
2024-08-06 17:43:25,759 - app - INFO - Configuring app...
2024-08-06 17:43:25,760 - app - INFO - Setting up CORS...
2024-08-06 17:43:25,760 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:43:26,124 - app - INFO - Initializing JWT manager...
2024-08-06 17:43:26,124 - app - INFO - Setting up rate limiting...
2024-08-06 17:43:26,125 - app - INFO - Setting up database...
2024-08-06 17:43:26,126 - app - INFO - Starting database setup...
2024-08-06 17:43:26,741 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:43:26,742 - app - INFO - Database setup completed successfully
2024-08-06 17:43:26,742 - app - INFO - Registering error handler...
2024-08-06 17:43:26,743 - app - INFO - Initializing CLI commands...
2024-08-06 17:43:26,743 - app - INFO - Registering routes...
2024-08-06 17:43:26,752 - app - INFO - Initializing services...
2024-08-06 17:43:26,768 - app - INFO - Initializing email service...
2024-08-06 17:43:26,769 - app - INFO - Setting up scheduler...
2024-08-06 17:43:26,773 - app - INFO - Initializing scheduler...
2024-08-06 17:43:26,775 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:43:26,776 - app - INFO - Application initialized successfully
2024-08-06 17:43:29,520 - app - INFO - Initializing Flask app...
2024-08-06 17:43:29,523 - app - INFO - Configuring app...
2024-08-06 17:43:29,523 - app - INFO - Setting up CORS...
2024-08-06 17:43:29,524 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:43:29,920 - app - INFO - Initializing JWT manager...
2024-08-06 17:43:29,920 - app - INFO - Setting up rate limiting...
2024-08-06 17:43:29,921 - app - INFO - Setting up database...
2024-08-06 17:43:29,922 - app - INFO - Starting database setup...
2024-08-06 17:43:30,554 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:43:30,554 - app - INFO - Database setup completed successfully
2024-08-06 17:43:30,555 - app - INFO - Registering error handler...
2024-08-06 17:43:30,555 - app - INFO - Initializing CLI commands...
2024-08-06 17:43:30,555 - app - INFO - Registering routes...
2024-08-06 17:43:30,564 - app - INFO - Initializing services...
2024-08-06 17:43:30,612 - app - INFO - Initializing email service...
2024-08-06 17:43:30,613 - app - INFO - Setting up scheduler...
2024-08-06 17:43:30,618 - app - INFO - Initializing scheduler...
2024-08-06 17:43:30,619 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:43:30,620 - app - INFO - Application initialized successfully
2024-08-06 17:43:42,089 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:43:42,853 - app.database - INFO - Database connection established successfully
2024-08-06 17:43:43,088 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:43:43,089 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:43:44,126 - app.database - INFO - Database connection established successfully
2024-08-06 17:43:44,360 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:43:44,368 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:43:45,493 - app.database - INFO - Database connection established successfully
2024-08-06 17:43:45,558 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:43:45,558 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:43:46,469 - app.database - INFO - Database connection established successfully
2024-08-06 17:43:46,524 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:43:46,534 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:43:47,617 - app.database - INFO - Database connection established successfully
2024-08-06 17:43:49,706 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:43:50,562 - app.database - INFO - Database connection established successfully
2024-08-06 17:43:50,640 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:43:51,328 - app.database - INFO - Database connection established successfully
2024-08-06 17:43:52,527 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:43:53,244 - app.database - INFO - Database connection established successfully
2024-08-06 17:43:53,544 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:43:58,971 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: This trial is for adolescents (12-21 years old) studying alcohol abuse. The patient is too old (31 years old) and doesn't have a mentioned alcohol abuse problem.\n\nNone of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:43:58,972 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: This trial is for adolescents (12-21 years old) studying alcohol abuse. The patient is too old (31 years old) and doesn't have a mentioned alcohol abuse problem.\n\nNone of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:43:58,973 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: This trial is for adolescents (12-21 years old) studying alcohol abuse. The patient is too old (31 years old) and doesn't have a mentioned alcohol abuse problem.

None of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 17:43:58,973 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:43:58,974 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:44:00,332 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:44:06,866 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not match well with the provided clinical trial, which is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for this lack of compatibility include:\n\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n\n2. The patient's age (31 years old) doesn't align with the focus of the study, which seems to be more concerned with older populations who are more likely to experience sarcopenia.\n\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are central to the clinical trial.\n\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.\n\n5. The trial is retrospective and based on existing data, which further limits the possibility of new patient enrollment.", type='text')]
2024-08-06 17:44:06,867 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not match well with the provided clinical trial, which is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for this lack of compatibility include:\n\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n\n2. The patient's age (31 years old) doesn't align with the focus of the study, which seems to be more concerned with older populations who are more likely to experience sarcopenia.\n\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are central to the clinical trial.\n\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.\n\n5. The trial is retrospective and based on existing data, which further limits the possibility of new patient enrollment.", type='text')]
2024-08-06 17:44:06,867 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not match well with the provided clinical trial, which is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The reasons for this lack of compatibility include:

1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).

2. The patient's age (31 years old) doesn't align with the focus of the study, which seems to be more concerned with older populations who are more likely to experience sarcopenia.

3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are central to the clinical trial.

4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.

5. The trial is retrospective and based on existing data, which further limits the possibility of new patient enrollment.
2024-08-06 17:44:06,868 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:44:06,868 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:44:08,104 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:44:15,188 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I don't find any trials that match with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease and cardiovascular risk factors, which are not mentioned in Ethan's profile. His age (31) is also outside the study's age range (65-84).\n\n2. NCT03530579 (Diabetes Prevention Intervention): This study targets Korean and South Asian Americans for diabetes prevention. Ethan's ethnicity is not specified, and he doesn't have any diabetes-related conditions mentioned.\n\n3. NCT05900479 (Service Dogs for Veterans with PTSD): While this study involves mental health conditions, it's specifically for military veterans with PTSD. Ethan's profile doesn't mention military service or PTSD.\n\n4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This study is for children aged 7-11 with cerebral palsy, which doesn't match Ethan's age or medical conditions.\n\nNone of these trials directly address Ethan's reported conditions of depression and anxiety, nor do they match his demographic profile. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:44:15,189 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I don't find any trials that match with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease and cardiovascular risk factors, which are not mentioned in Ethan's profile. His age (31) is also outside the study's age range (65-84).\n\n2. NCT03530579 (Diabetes Prevention Intervention): This study targets Korean and South Asian Americans for diabetes prevention. Ethan's ethnicity is not specified, and he doesn't have any diabetes-related conditions mentioned.\n\n3. NCT05900479 (Service Dogs for Veterans with PTSD): While this study involves mental health conditions, it's specifically for military veterans with PTSD. Ethan's profile doesn't mention military service or PTSD.\n\n4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This study is for children aged 7-11 with cerebral palsy, which doesn't match Ethan's age or medical conditions.\n\nNone of these trials directly address Ethan's reported conditions of depression and anxiety, nor do they match his demographic profile. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:44:15,190 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I don't find any trials that match with a compatibility score of 70 or higher. Here's why:

1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease and cardiovascular risk factors, which are not mentioned in Ethan's profile. His age (31) is also outside the study's age range (65-84).

2. NCT03530579 (Diabetes Prevention Intervention): This study targets Korean and South Asian Americans for diabetes prevention. Ethan's ethnicity is not specified, and he doesn't have any diabetes-related conditions mentioned.

3. NCT05900479 (Service Dogs for Veterans with PTSD): While this study involves mental health conditions, it's specifically for military veterans with PTSD. Ethan's profile doesn't mention military service or PTSD.

4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This study is for children aged 7-11 with cerebral palsy, which doesn't match Ethan's age or medical conditions.

None of these trials directly address Ethan's reported conditions of depression and anxiety, nor do they match his demographic profile. Therefore, the output is an empty array:

[]
2024-08-06 17:44:15,190 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:44:15,190 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:44:16,459 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:44:19,793 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. The two clinical trials provided are focused on type 2 diabetes and non-small cell lung cancer, which are not relevant to the patient's conditions.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:44:19,794 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. The two clinical trials provided are focused on type 2 diabetes and non-small cell lung cancer, which are not relevant to the patient's conditions.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:44:19,794 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. The two clinical trials provided are focused on type 2 diabetes and non-small cell lung cancer, which are not relevant to the patient's conditions.

Therefore, the output is an empty array:

[]
2024-08-06 17:44:19,795 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:44:19,795 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:44:21,020 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:44:26,381 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. NCT03059979: This trial is for patients with early Systemic Sclerosis, which the patient doesn't have.\n\n2. NCT00293579: This trial is for patients with advanced head and neck cancer, which the patient doesn't have.\n\n3. NCT04491279: This trial is for chronic stroke patients, which doesn't match the patient's profile.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided trials are related to these conditions or medications.\n\nTherefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-06 17:44:26,382 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. NCT03059979: This trial is for patients with early Systemic Sclerosis, which the patient doesn't have.\n\n2. NCT00293579: This trial is for patients with advanced head and neck cancer, which the patient doesn't have.\n\n3. NCT04491279: This trial is for chronic stroke patients, which doesn't match the patient's profile.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided trials are related to these conditions or medications.\n\nTherefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-06 17:44:26,382 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. NCT03059979: This trial is for patients with early Systemic Sclerosis, which the patient doesn't have.

2. NCT00293579: This trial is for patients with advanced head and neck cancer, which the patient doesn't have.

3. NCT04491279: This trial is for chronic stroke patients, which doesn't match the patient's profile.

The patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided trials are related to these conditions or medications.

Therefore, the output in the requested JSON format is:

[]

This empty array indicates that no trials match with a score of 70 or higher for this patient.
2024-08-06 17:44:26,383 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:44:26,383 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:44:27,708 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:44:32,799 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I've determined that there are no trials that match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements in relation to refractive errors\n\nThese trials are not suitable for the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 17:44:32,799 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I've determined that there are no trials that match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements in relation to refractive errors\n\nThese trials are not suitable for the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 17:44:32,800 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I've determined that there are no trials that match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:

1. Scalp cooling for metastatic breast cancer patients
2. Extracorporeal photopheresis for lung transplant patients
3. Health and safety training in the workplace
4. Choroidal thickness measurements in relation to refractive errors

These trials are not suitable for the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.
2024-08-06 17:44:32,801 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:44:32,801 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:44:34,009 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:44:37,725 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I do not find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on conditions such as hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and left ventricular heart failure.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:44:37,727 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I do not find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on conditions such as hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and left ventricular heart failure.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:44:37,728 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, I do not find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on conditions such as hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and left ventricular heart failure.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 17:44:37,728 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:44:37,730 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:44:38,968 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:44:43,925 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The first trial (NCT06289179) is about thyroid and cortisol hormone response in sepsis patients, which is not related to the patient's conditions.\n3. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions, so it's not a match.\n4. The third trial (NCT00228579) is focused on obesity in females, which doesn't match the patient's profile in terms of gender or condition.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-06 17:44:43,926 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The first trial (NCT06289179) is about thyroid and cortisol hormone response in sepsis patients, which is not related to the patient's conditions.\n3. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions, so it's not a match.\n4. The third trial (NCT00228579) is focused on obesity in females, which doesn't match the patient's profile in terms of gender or condition.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-06 17:44:43,926 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. The first trial (NCT06289179) is about thyroid and cortisol hormone response in sepsis patients, which is not related to the patient's conditions.
3. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions, so it's not a match.
4. The third trial (NCT00228579) is focused on obesity in females, which doesn't match the patient's profile in terms of gender or condition.

None of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.
2024-08-06 17:44:43,927 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:44:43,927 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:44:45,210 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:44:48,866 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not mentioned in the patient's profile. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:44:48,866 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not mentioned in the patient's profile. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:44:48,867 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not mentioned in the patient's profile. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 17:44:48,867 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:44:48,867 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:44:50,100 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:44:55,016 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The first trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years. The patient, Ethan Brush, is 31 years old (born in 1992) and does not have any condition related to postoperative pain.\n\n2. The second trial (NCT02052479) is specifically for adolescent females with Polycystic Ovary Syndrome (PCOS). The patient is male and does not have PCOS.\n\nNeither of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher based on the given criteria and patient profile.", type='text')]
2024-08-06 17:44:55,017 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The first trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years. The patient, Ethan Brush, is 31 years old (born in 1992) and does not have any condition related to postoperative pain.\n\n2. The second trial (NCT02052479) is specifically for adolescent females with Polycystic Ovary Syndrome (PCOS). The patient is male and does not have PCOS.\n\nNeither of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher based on the given criteria and patient profile.", type='text')]
2024-08-06 17:44:55,017 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. The first trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years. The patient, Ethan Brush, is 31 years old (born in 1992) and does not have any condition related to postoperative pain.

2. The second trial (NCT02052479) is specifically for adolescent females with Polycystic Ovary Syndrome (PCOS). The patient is male and does not have PCOS.

Neither of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format is:

[]

This empty array indicates that no trials match with a score of 70 or higher based on the given criteria and patient profile.
2024-08-06 17:44:55,017 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:44:55,017 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:45:25,866 - app - INFO - Initializing Flask app...
2024-08-06 17:45:25,868 - app - INFO - Configuring app...
2024-08-06 17:45:25,868 - app - INFO - Setting up CORS...
2024-08-06 17:45:25,869 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:45:26,179 - app - INFO - Initializing JWT manager...
2024-08-06 17:45:26,180 - app - INFO - Setting up rate limiting...
2024-08-06 17:45:26,181 - app - INFO - Setting up database...
2024-08-06 17:45:26,182 - app - INFO - Starting database setup...
2024-08-06 17:45:27,231 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:45:27,231 - app - INFO - Database setup completed successfully
2024-08-06 17:45:27,232 - app - INFO - Registering error handler...
2024-08-06 17:45:27,232 - app - INFO - Initializing CLI commands...
2024-08-06 17:45:27,232 - app - INFO - Registering routes...
2024-08-06 17:45:27,240 - app - INFO - Initializing services...
2024-08-06 17:45:27,255 - app - INFO - Initializing email service...
2024-08-06 17:45:27,256 - app - INFO - Setting up scheduler...
2024-08-06 17:45:27,262 - app - INFO - Initializing scheduler...
2024-08-06 17:45:27,262 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:45:27,262 - app - INFO - Application initialized successfully
2024-08-06 17:45:30,327 - app - INFO - Initializing Flask app...
2024-08-06 17:45:30,329 - app - INFO - Configuring app...
2024-08-06 17:45:30,330 - app - INFO - Setting up CORS...
2024-08-06 17:45:30,330 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:45:30,717 - app - INFO - Initializing JWT manager...
2024-08-06 17:45:30,718 - app - INFO - Setting up rate limiting...
2024-08-06 17:45:30,719 - app - INFO - Setting up database...
2024-08-06 17:45:30,720 - app - INFO - Starting database setup...
2024-08-06 17:45:31,588 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:45:31,588 - app - INFO - Database setup completed successfully
2024-08-06 17:45:31,589 - app - INFO - Registering error handler...
2024-08-06 17:45:31,590 - app - INFO - Initializing CLI commands...
2024-08-06 17:45:31,590 - app - INFO - Registering routes...
2024-08-06 17:45:31,604 - app - INFO - Initializing services...
2024-08-06 17:45:31,623 - app - INFO - Initializing email service...
2024-08-06 17:45:31,624 - app - INFO - Setting up scheduler...
2024-08-06 17:45:31,631 - app - INFO - Initializing scheduler...
2024-08-06 17:45:31,631 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:45:31,633 - app - INFO - Application initialized successfully
2024-08-06 17:45:39,321 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:45:40,138 - app.database - INFO - Database connection established successfully
2024-08-06 17:45:40,390 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:45:40,390 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:45:43,068 - app.database - INFO - Database connection established successfully
2024-08-06 17:45:43,110 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:45:43,123 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:45:43,816 - app.database - INFO - Database connection established successfully
2024-08-06 17:45:43,880 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:45:43,882 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:45:44,542 - app.database - INFO - Database connection established successfully
2024-08-06 17:45:44,593 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:45:44,602 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:45:45,238 - app.database - INFO - Database connection established successfully
2024-08-06 17:45:45,663 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:45:46,627 - app.database - INFO - Database connection established successfully
2024-08-06 17:45:46,691 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:45:47,372 - app.database - INFO - Database connection established successfully
2024-08-06 17:45:48,103 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:45:49,004 - app.database - INFO - Database connection established successfully
2024-08-06 17:45:49,330 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:45:55,101 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The provided clinical trials are focused on:\n   - Chronic Myelogenous Leukemia (NCT00072579)\n   - Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)\n   - Smoking and exposure to smoke constituents (NCT00812279)\n   - Adolescent alcohol use and brain development (NCT01511679)\n\nNone of these trials are directly related to the patient's conditions (depression and anxiety) or age group. The patient doesn't have any of the conditions targeted by these trials, and his age (31) doesn't match the adolescent study. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 17:45:55,101 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The provided clinical trials are focused on:\n   - Chronic Myelogenous Leukemia (NCT00072579)\n   - Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)\n   - Smoking and exposure to smoke constituents (NCT00812279)\n   - Adolescent alcohol use and brain development (NCT01511679)\n\nNone of these trials are directly related to the patient's conditions (depression and anxiety) or age group. The patient doesn't have any of the conditions targeted by these trials, and his age (31) doesn't match the adolescent study. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 17:45:55,102 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. The provided clinical trials are focused on:
   - Chronic Myelogenous Leukemia (NCT00072579)
   - Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)
   - Smoking and exposure to smoke constituents (NCT00812279)
   - Adolescent alcohol use and brain development (NCT01511679)

None of these trials are directly related to the patient's conditions (depression and anxiety) or age group. The patient doesn't have any of the conditions targeted by these trials, and his age (31) doesn't match the adolescent study. Therefore, there are no suitable matches with a score of 70 or higher.
2024-08-06 17:45:55,102 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:45:55,103 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:45:56,550 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:46:01,828 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trial, I've determined that there are no suitable matches with a compatibility score of 70 or higher. The reasons for this are:\n\n1. The patient's medical conditions (depression and anxiety) do not align with the conditions targeted in the clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n\n2. The patient's age (31 years old) doesn't seem to be a focus of the study, which appears to be more concerned with older populations at risk of sarcopenia.\n\n3. The trial is specifically looking at patients who have had complex abdominal wall surgery, which is not mentioned in the patient's profile.\n\n4. The trial's inclusion criteria specify patients with incisional hernias greater than 10 cm, which is not mentioned in the patient's medical conditions.\n\nGiven these factors, the compatibility score would be well below 70, so the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:46:01,829 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trial, I've determined that there are no suitable matches with a compatibility score of 70 or higher. The reasons for this are:\n\n1. The patient's medical conditions (depression and anxiety) do not align with the conditions targeted in the clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n\n2. The patient's age (31 years old) doesn't seem to be a focus of the study, which appears to be more concerned with older populations at risk of sarcopenia.\n\n3. The trial is specifically looking at patients who have had complex abdominal wall surgery, which is not mentioned in the patient's profile.\n\n4. The trial's inclusion criteria specify patients with incisional hernias greater than 10 cm, which is not mentioned in the patient's medical conditions.\n\nGiven these factors, the compatibility score would be well below 70, so the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:46:01,829 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trial, I've determined that there are no suitable matches with a compatibility score of 70 or higher. The reasons for this are:

1. The patient's medical conditions (depression and anxiety) do not align with the conditions targeted in the clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).

2. The patient's age (31 years old) doesn't seem to be a focus of the study, which appears to be more concerned with older populations at risk of sarcopenia.

3. The trial is specifically looking at patients who have had complex abdominal wall surgery, which is not mentioned in the patient's profile.

4. The trial's inclusion criteria specify patients with incisional hernias greater than 10 cm, which is not mentioned in the patient's medical conditions.

Given these factors, the compatibility score would be well below 70, so the output is an empty array:

[]
2024-08-06 17:46:01,829 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:46:01,830 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:46:03,388 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:46:08,225 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:\n\n1. Heart disease risk factors and aging\n2. Diabetes prevention in Korean and South Asian Americans\n3. PTSD in military veterans\n4. Virtual reality for children with cerebral palsy\n\nThese trials either don't match the patient's conditions, age group, or other specific criteria. Therefore, none of them reach the threshold of 70% compatibility.", type='text')]
2024-08-06 17:46:08,226 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:\n\n1. Heart disease risk factors and aging\n2. Diabetes prevention in Korean and South Asian Americans\n3. PTSD in military veterans\n4. Virtual reality for children with cerebral palsy\n\nThese trials either don't match the patient's conditions, age group, or other specific criteria. Therefore, none of them reach the threshold of 70% compatibility.", type='text')]
2024-08-06 17:46:08,226 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:

1. Heart disease risk factors and aging
2. Diabetes prevention in Korean and South Asian Americans
3. PTSD in military veterans
4. Virtual reality for children with cerebral palsy

These trials either don't match the patient's conditions, age group, or other specific criteria. Therefore, none of them reach the threshold of 70% compatibility.
2024-08-06 17:46:08,227 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:46:08,227 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:46:09,452 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:46:12,026 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I do not find any trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:46:12,027 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I do not find any trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:46:12,028 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I do not find any trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.

Therefore, the output is an empty array:

[]
2024-08-06 17:46:12,029 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:46:12,029 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:46:13,319 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:46:18,168 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:46:18,169 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 17:46:18,171 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.
2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.
3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 17:46:18,171 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:46:18,172 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:46:19,503 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:46:22,470 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions or eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:46:22,471 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions or eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 17:46:22,472 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions or eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.

Therefore, the output is an empty array:

[]
2024-08-06 17:46:22,473 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:46:22,474 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:46:23,780 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:46:28,608 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have evaluated the compatibility of the patient with the given trials. Unfortunately, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on:\n\n1. Hemodialysis patients with Hepatitis C\n2. Melanoma patients\n3. Ischemic heart failure\n4. Left ventricular heart failure and LVAD support\n\nThese conditions and treatments are not relevant to the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no matches are returned.", type='text')]
2024-08-06 17:46:28,609 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have evaluated the compatibility of the patient with the given trials. Unfortunately, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on:\n\n1. Hemodialysis patients with Hepatitis C\n2. Melanoma patients\n3. Ischemic heart failure\n4. Left ventricular heart failure and LVAD support\n\nThese conditions and treatments are not relevant to the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no matches are returned.", type='text')]
2024-08-06 17:46:28,610 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have evaluated the compatibility of the patient with the given trials. Unfortunately, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on:

1. Hemodialysis patients with Hepatitis C
2. Melanoma patients
3. Ischemic heart failure
4. Left ventricular heart failure and LVAD support

These conditions and treatments are not relevant to the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no matches are returned.
2024-08-06 17:46:28,611 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:46:28,612 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:46:29,809 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:47:14,915 - app - INFO - Initializing Flask app...
2024-08-06 17:47:14,918 - app - INFO - Configuring app...
2024-08-06 17:47:14,918 - app - INFO - Setting up CORS...
2024-08-06 17:47:14,919 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:47:15,415 - app - INFO - Initializing JWT manager...
2024-08-06 17:47:15,416 - app - INFO - Setting up rate limiting...
2024-08-06 17:47:15,418 - app - INFO - Setting up database...
2024-08-06 17:47:15,419 - app - INFO - Starting database setup...
2024-08-06 17:47:16,232 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:47:16,232 - app - INFO - Database setup completed successfully
2024-08-06 17:47:16,233 - app - INFO - Registering error handler...
2024-08-06 17:47:16,233 - app - INFO - Initializing CLI commands...
2024-08-06 17:47:16,234 - app - INFO - Registering routes...
2024-08-06 17:47:16,243 - app - INFO - Initializing services...
2024-08-06 17:47:16,259 - app - INFO - Initializing email service...
2024-08-06 17:47:16,259 - app - INFO - Setting up scheduler...
2024-08-06 17:47:16,264 - app - INFO - Initializing scheduler...
2024-08-06 17:47:16,266 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:47:16,266 - app - INFO - Application initialized successfully
2024-08-06 17:47:19,146 - app - INFO - Initializing Flask app...
2024-08-06 17:47:19,148 - app - INFO - Configuring app...
2024-08-06 17:47:19,149 - app - INFO - Setting up CORS...
2024-08-06 17:47:19,150 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 17:47:19,571 - app - INFO - Initializing JWT manager...
2024-08-06 17:47:19,572 - app - INFO - Setting up rate limiting...
2024-08-06 17:47:19,573 - app - INFO - Setting up database...
2024-08-06 17:47:19,574 - app - INFO - Starting database setup...
2024-08-06 17:47:20,216 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 17:47:20,224 - app - INFO - Database setup completed successfully
2024-08-06 17:47:20,225 - app - INFO - Registering error handler...
2024-08-06 17:47:20,226 - app - INFO - Initializing CLI commands...
2024-08-06 17:47:20,226 - app - INFO - Registering routes...
2024-08-06 17:47:20,236 - app - INFO - Initializing services...
2024-08-06 17:47:20,251 - app - INFO - Initializing email service...
2024-08-06 17:47:20,252 - app - INFO - Setting up scheduler...
2024-08-06 17:47:20,257 - app - INFO - Initializing scheduler...
2024-08-06 17:47:20,257 - app.scheduler - INFO - Scheduler initialized
2024-08-06 17:47:20,258 - app - INFO - Application initialized successfully
2024-08-06 17:47:37,135 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:47:37,862 - app.database - INFO - Database connection established successfully
2024-08-06 17:47:38,401 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:47:38,402 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:47:39,028 - app.database - INFO - Database connection established successfully
2024-08-06 17:47:39,069 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:47:39,085 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:47:40,453 - app.database - INFO - Database connection established successfully
2024-08-06 17:47:40,516 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 17:47:40,517 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:47:41,105 - app.database - INFO - Database connection established successfully
2024-08-06 17:47:41,161 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 17:47:41,212 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:47:41,869 - app.database - INFO - Database connection established successfully
2024-08-06 17:47:42,840 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:47:43,439 - app.database - INFO - Database connection established successfully
2024-08-06 17:47:43,494 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:47:44,086 - app.database - INFO - Database connection established successfully
2024-08-06 17:47:45,446 - app.database - INFO - Attempting to establish database connection...
2024-08-06 17:47:46,063 - app.database - INFO - Database connection established successfully
2024-08-06 17:47:46,315 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:47:51,691 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary conditions (depression and anxiety) do not match the conditions targeted in any of the provided trials (Leukemia, Prostatic Hyperplasia, Impotence, Smoking, Alcohol Abuse).\n\n2. The patient's age (31 years old) and medical history do not align with the specific requirements of the trials, which are focused on different age groups or medical conditions.\n\n3. The medications the patient is taking (Escitalopram) are not relevant to the treatments being studied in these trials.\n\n4. There are no mental health-related trials in the provided list that would be suitable for the patient's conditions of depression and anxiety.\n\nGiven these factors, none of the trials reach the minimum compatibility score of 70 required for inclusion in the output.", type='text')]
2024-08-06 17:47:51,692 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary conditions (depression and anxiety) do not match the conditions targeted in any of the provided trials (Leukemia, Prostatic Hyperplasia, Impotence, Smoking, Alcohol Abuse).\n\n2. The patient's age (31 years old) and medical history do not align with the specific requirements of the trials, which are focused on different age groups or medical conditions.\n\n3. The medications the patient is taking (Escitalopram) are not relevant to the treatments being studied in these trials.\n\n4. There are no mental health-related trials in the provided list that would be suitable for the patient's conditions of depression and anxiety.\n\nGiven these factors, none of the trials reach the minimum compatibility score of 70 required for inclusion in the output.", type='text')]
2024-08-06 17:47:51,696 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. The patient's primary conditions (depression and anxiety) do not match the conditions targeted in any of the provided trials (Leukemia, Prostatic Hyperplasia, Impotence, Smoking, Alcohol Abuse).

2. The patient's age (31 years old) and medical history do not align with the specific requirements of the trials, which are focused on different age groups or medical conditions.

3. The medications the patient is taking (Escitalopram) are not relevant to the treatments being studied in these trials.

4. There are no mental health-related trials in the provided list that would be suitable for the patient's conditions of depression and anxiety.

Given these factors, none of the trials reach the minimum compatibility score of 70 required for inclusion in the output.
2024-08-06 17:47:51,696 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:47:51,697 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:47:52,914 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:47:58,217 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trial, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The clinical trial (NCT04690179) is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\n3. There is no overlap between the patient's medical conditions (depression, anxiety) and the conditions targeted by the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n\n4. The patient's age (31) and medical history don't align with the trial's focus on sarcopenia, which is more common in older adults.\n\n5. The trial's inclusion criteria specifically mention patients operated for incisional hernia, which is not mentioned in the patient's profile.\n\nGiven these factors, the compatibility score would be well below 70, and therefore, according to the instructions, the trial should not be included in the output.\n\nAs a result, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:47:58,218 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trial, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The clinical trial (NCT04690179) is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\n3. There is no overlap between the patient's medical conditions (depression, anxiety) and the conditions targeted by the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n\n4. The patient's age (31) and medical history don't align with the trial's focus on sarcopenia, which is more common in older adults.\n\n5. The trial's inclusion criteria specifically mention patients operated for incisional hernia, which is not mentioned in the patient's profile.\n\nGiven these factors, the compatibility score would be well below 70, and therefore, according to the instructions, the trial should not be included in the output.\n\nAs a result, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 17:47:58,220 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trial, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.

2. The clinical trial (NCT04690179) is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

3. There is no overlap between the patient's medical conditions (depression, anxiety) and the conditions targeted by the trial (sarcopenia, sarcopenic obesity, incisional hernia).

4. The patient's age (31) and medical history don't align with the trial's focus on sarcopenia, which is more common in older adults.

5. The trial's inclusion criteria specifically mention patients operated for incisional hernia, which is not mentioned in the patient's profile.

Given these factors, the compatibility score would be well below 70, and therefore, according to the instructions, the trial should not be included in the output.

As a result, the output in the requested JSON format is an empty array:

[]
2024-08-06 17:47:58,220 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:47:58,221 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:47:59,468 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:48:06,817 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a score of 70 or higher. Here's why:\n\n1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors in older adults (65-84 years old). The patient is 31 years old and doesn't have any mentioned cardiovascular conditions.\n\n2. NCT03530579 (Diabetes Prevention): This trial is specifically for Korean and South Asian Americans at risk for diabetes. The patient's ethnicity is not specified, and he doesn't have any mentioned diabetes risk factors.\n\n3. NCT05900479 (PTSD in Military Veterans): This study is for military veterans with PTSD. The patient is not mentioned to be a veteran or to have PTSD.\n\n4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This trial is for children aged 7-11 with hemiparetic cerebral palsy. The patient is an adult and doesn't have the specified condition.\n\nGiven these mismatches, the output in the requested JSON format would be an empty array:\n\n[]\n\nThe patient's profile (31-year-old male with depression and anxiety) doesn't align closely with any of the provided clinical trials, which focus on very different conditions and demographics.", type='text')]
2024-08-06 17:48:06,819 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a score of 70 or higher. Here's why:\n\n1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors in older adults (65-84 years old). The patient is 31 years old and doesn't have any mentioned cardiovascular conditions.\n\n2. NCT03530579 (Diabetes Prevention): This trial is specifically for Korean and South Asian Americans at risk for diabetes. The patient's ethnicity is not specified, and he doesn't have any mentioned diabetes risk factors.\n\n3. NCT05900479 (PTSD in Military Veterans): This study is for military veterans with PTSD. The patient is not mentioned to be a veteran or to have PTSD.\n\n4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This trial is for children aged 7-11 with hemiparetic cerebral palsy. The patient is an adult and doesn't have the specified condition.\n\nGiven these mismatches, the output in the requested JSON format would be an empty array:\n\n[]\n\nThe patient's profile (31-year-old male with depression and anxiety) doesn't align closely with any of the provided clinical trials, which focus on very different conditions and demographics.", type='text')]
2024-08-06 17:48:06,819 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a score of 70 or higher. Here's why:

1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors in older adults (65-84 years old). The patient is 31 years old and doesn't have any mentioned cardiovascular conditions.

2. NCT03530579 (Diabetes Prevention): This trial is specifically for Korean and South Asian Americans at risk for diabetes. The patient's ethnicity is not specified, and he doesn't have any mentioned diabetes risk factors.

3. NCT05900479 (PTSD in Military Veterans): This study is for military veterans with PTSD. The patient is not mentioned to be a veteran or to have PTSD.

4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This trial is for children aged 7-11 with hemiparetic cerebral palsy. The patient is an adult and doesn't have the specified condition.

Given these mismatches, the output in the requested JSON format would be an empty array:

[]

The patient's profile (31-year-old male with depression and anxiety) doesn't align closely with any of the provided clinical trials, which focus on very different conditions and demographics.
2024-08-06 17:48:06,819 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:48:06,820 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:48:08,076 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 17:48:13,742 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02244879) is focused on Type 2 Diabetes Mellitus, inflammation, insulin resistance, and bone disorders. The patient's profile does not mention any of these conditions, so this trial is not a match.\n\n2. The second trial (NCT02841579) is for patients with non-small cell lung cancer (NSCLC) with specific EGFR mutations. The patient's profile does not indicate any cancer diagnosis or EGFR mutations, so this trial is also not a match.\n\nThe patient's profile indicates that they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher for this patient based on the given information.", type='text')]
2024-08-06 17:48:13,742 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02244879) is focused on Type 2 Diabetes Mellitus, inflammation, insulin resistance, and bone disorders. The patient's profile does not mention any of these conditions, so this trial is not a match.\n\n2. The second trial (NCT02841579) is for patients with non-small cell lung cancer (NSCLC) with specific EGFR mutations. The patient's profile does not indicate any cancer diagnosis or EGFR mutations, so this trial is also not a match.\n\nThe patient's profile indicates that they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher for this patient based on the given information.", type='text')]
2024-08-06 17:48:13,743 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT02244879) is focused on Type 2 Diabetes Mellitus, inflammation, insulin resistance, and bone disorders. The patient's profile does not mention any of these conditions, so this trial is not a match.

2. The second trial (NCT02841579) is for patients with non-small cell lung cancer (NSCLC) with specific EGFR mutations. The patient's profile does not indicate any cancer diagnosis or EGFR mutations, so this trial is also not a match.

The patient's profile indicates that they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher for this patient based on the given information.
2024-08-06 17:48:13,743 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 17:48:13,743 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 17:48:14,999 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:10:50,407 - app - INFO - Initializing Flask app...
2024-08-06 18:10:50,409 - app - INFO - Configuring app...
2024-08-06 18:10:50,409 - app - INFO - Setting up CORS...
2024-08-06 18:10:50,410 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 18:10:50,853 - app - INFO - Initializing JWT manager...
2024-08-06 18:10:50,853 - app - INFO - Setting up rate limiting...
2024-08-06 18:10:50,854 - app - INFO - Setting up database...
2024-08-06 18:10:50,854 - app - INFO - Starting database setup...
2024-08-06 18:10:51,426 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 18:10:51,427 - app - INFO - Database setup completed successfully
2024-08-06 18:10:51,427 - app - INFO - Registering error handler...
2024-08-06 18:10:51,427 - app - INFO - Initializing CLI commands...
2024-08-06 18:10:51,428 - app - INFO - Registering routes...
2024-08-06 18:13:36,077 - app - INFO - Initializing Flask app...
2024-08-06 18:13:36,079 - app - INFO - Configuring app...
2024-08-06 18:13:36,079 - app - INFO - Setting up CORS...
2024-08-06 18:13:36,079 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 18:13:36,388 - app - INFO - Initializing JWT manager...
2024-08-06 18:13:36,389 - app - INFO - Setting up rate limiting...
2024-08-06 18:13:36,389 - app - INFO - Setting up database...
2024-08-06 18:13:36,390 - app - INFO - Starting database setup...
2024-08-06 18:13:37,748 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 18:13:37,748 - app - INFO - Database setup completed successfully
2024-08-06 18:13:37,749 - app - INFO - Registering error handler...
2024-08-06 18:13:37,749 - app - INFO - Initializing CLI commands...
2024-08-06 18:13:37,749 - app - INFO - Registering routes...
2024-08-06 18:14:56,708 - app - INFO - Initializing Flask app...
2024-08-06 18:14:56,710 - app - INFO - Configuring app...
2024-08-06 18:14:56,710 - app - INFO - Setting up CORS...
2024-08-06 18:14:56,711 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 18:14:57,060 - app - INFO - Initializing JWT manager...
2024-08-06 18:14:57,060 - app - INFO - Setting up rate limiting...
2024-08-06 18:14:57,062 - app - INFO - Setting up database...
2024-08-06 18:14:57,063 - app - INFO - Starting database setup...
2024-08-06 18:14:58,092 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 18:14:58,093 - app - INFO - Database setup completed successfully
2024-08-06 18:14:58,093 - app - INFO - Registering error handler...
2024-08-06 18:14:58,094 - app - INFO - Initializing CLI commands...
2024-08-06 18:14:58,094 - app - INFO - Registering routes...
2024-08-06 18:14:58,163 - app - INFO - Initializing services...
2024-08-06 18:14:58,181 - app - INFO - Initializing email service...
2024-08-06 18:14:58,181 - app - INFO - Setting up scheduler...
2024-08-06 18:14:58,188 - app - INFO - Initializing scheduler...
2024-08-06 18:14:58,189 - app.scheduler - INFO - Scheduler initialized
2024-08-06 18:14:58,189 - app - INFO - Application initialized successfully
2024-08-06 18:15:00,939 - app - INFO - Initializing Flask app...
2024-08-06 18:15:00,941 - app - INFO - Configuring app...
2024-08-06 18:15:00,941 - app - INFO - Setting up CORS...
2024-08-06 18:15:00,942 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 18:15:01,327 - app - INFO - Initializing JWT manager...
2024-08-06 18:15:01,327 - app - INFO - Setting up rate limiting...
2024-08-06 18:15:01,329 - app - INFO - Setting up database...
2024-08-06 18:15:01,329 - app - INFO - Starting database setup...
2024-08-06 18:15:03,907 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 18:15:03,908 - app - INFO - Database setup completed successfully
2024-08-06 18:15:03,908 - app - INFO - Registering error handler...
2024-08-06 18:15:03,909 - app - INFO - Initializing CLI commands...
2024-08-06 18:15:03,909 - app - INFO - Registering routes...
2024-08-06 18:15:03,918 - app - INFO - Initializing services...
2024-08-06 18:15:03,956 - app - INFO - Initializing email service...
2024-08-06 18:15:03,957 - app - INFO - Setting up scheduler...
2024-08-06 18:15:03,960 - app - INFO - Initializing scheduler...
2024-08-06 18:15:03,961 - app.scheduler - INFO - Scheduler initialized
2024-08-06 18:15:04,019 - app - INFO - Application initialized successfully
2024-08-06 18:15:25,296 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:15:25,878 - app.database - INFO - Database connection established successfully
2024-08-06 18:15:26,208 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 18:15:26,209 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:15:26,754 - app.database - INFO - Database connection established successfully
2024-08-06 18:15:26,796 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 18:15:26,806 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:15:27,363 - app.database - INFO - Database connection established successfully
2024-08-06 18:15:27,413 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 18:15:27,414 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:15:27,946 - app.database - INFO - Database connection established successfully
2024-08-06 18:15:27,986 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 18:15:27,998 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:15:28,536 - app.database - INFO - Database connection established successfully
2024-08-06 18:15:33,419 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:15:34,039 - app.database - INFO - Database connection established successfully
2024-08-06 18:15:34,091 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:15:34,614 - app.database - INFO - Database connection established successfully
2024-08-06 18:15:42,322 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:15:42,885 - app.database - INFO - Database connection established successfully
2024-08-06 18:24:21,058 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:24:21,734 - app.database - INFO - Database connection established successfully
2024-08-06 18:24:21,796 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:24:22,363 - app.database - INFO - Database connection established successfully
2024-08-06 18:24:53,173 - app - INFO - Initializing Flask app...
2024-08-06 18:24:53,175 - app - INFO - Configuring app...
2024-08-06 18:24:53,175 - app - INFO - Setting up CORS...
2024-08-06 18:24:53,176 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 18:24:53,461 - app - INFO - Initializing JWT manager...
2024-08-06 18:24:53,462 - app - INFO - Setting up rate limiting...
2024-08-06 18:24:53,463 - app - INFO - Setting up database...
2024-08-06 18:24:53,464 - app - INFO - Starting database setup...
2024-08-06 18:24:54,941 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 18:24:54,941 - app - INFO - Database setup completed successfully
2024-08-06 18:24:54,943 - app - INFO - Registering error handler...
2024-08-06 18:24:54,943 - app - INFO - Initializing CLI commands...
2024-08-06 18:24:54,943 - app - INFO - Registering routes...
2024-08-06 18:24:54,952 - app - INFO - Initializing services...
2024-08-06 18:24:54,965 - app - INFO - Initializing email service...
2024-08-06 18:24:54,966 - app - INFO - Setting up scheduler...
2024-08-06 18:24:54,975 - app - INFO - Initializing scheduler...
2024-08-06 18:24:54,976 - app.scheduler - INFO - Scheduler initialized
2024-08-06 18:24:54,977 - app - INFO - Application initialized successfully
2024-08-06 18:24:57,980 - app - INFO - Initializing Flask app...
2024-08-06 18:24:57,982 - app - INFO - Configuring app...
2024-08-06 18:24:57,982 - app - INFO - Setting up CORS...
2024-08-06 18:24:57,983 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 18:24:58,450 - app - INFO - Initializing JWT manager...
2024-08-06 18:24:58,450 - app - INFO - Setting up rate limiting...
2024-08-06 18:24:58,451 - app - INFO - Setting up database...
2024-08-06 18:24:58,453 - app - INFO - Starting database setup...
2024-08-06 18:24:59,051 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 18:24:59,051 - app - INFO - Database setup completed successfully
2024-08-06 18:24:59,051 - app - INFO - Registering error handler...
2024-08-06 18:24:59,052 - app - INFO - Initializing CLI commands...
2024-08-06 18:24:59,052 - app - INFO - Registering routes...
2024-08-06 18:24:59,063 - app - INFO - Initializing services...
2024-08-06 18:24:59,084 - app - INFO - Initializing email service...
2024-08-06 18:24:59,084 - app - INFO - Setting up scheduler...
2024-08-06 18:24:59,089 - app - INFO - Initializing scheduler...
2024-08-06 18:24:59,091 - app.scheduler - INFO - Scheduler initialized
2024-08-06 18:24:59,091 - app - INFO - Application initialized successfully
2024-08-06 18:25:11,659 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:25:12,249 - app.database - INFO - Database connection established successfully
2024-08-06 18:25:12,704 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 18:25:12,705 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:25:13,235 - app.database - INFO - Database connection established successfully
2024-08-06 18:25:13,275 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 18:25:13,292 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:25:13,847 - app.database - INFO - Database connection established successfully
2024-08-06 18:25:13,961 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 18:25:13,962 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:25:14,587 - app.database - INFO - Database connection established successfully
2024-08-06 18:25:14,628 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 18:25:14,646 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:25:15,245 - app.database - INFO - Database connection established successfully
2024-08-06 18:25:16,338 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:25:16,922 - app.database - INFO - Database connection established successfully
2024-08-06 18:25:16,981 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:25:17,485 - app.database - INFO - Database connection established successfully
2024-08-06 18:29:32,544 - app - INFO - Initializing Flask app...
2024-08-06 18:29:32,547 - app - INFO - Configuring app...
2024-08-06 18:29:32,547 - app - INFO - Setting up CORS...
2024-08-06 18:29:32,548 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 18:29:32,814 - app - INFO - Initializing JWT manager...
2024-08-06 18:29:32,815 - app - INFO - Setting up rate limiting...
2024-08-06 18:29:32,816 - app - INFO - Setting up database...
2024-08-06 18:29:32,817 - app - INFO - Starting database setup...
2024-08-06 18:29:33,426 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 18:29:33,426 - app - INFO - Database setup completed successfully
2024-08-06 18:29:33,427 - app - INFO - Registering error handler...
2024-08-06 18:29:33,427 - app - INFO - Initializing CLI commands...
2024-08-06 18:29:33,427 - app - INFO - Registering routes...
2024-08-06 18:29:33,468 - app - INFO - Initializing services...
2024-08-06 18:29:33,478 - app - INFO - Initializing email service...
2024-08-06 18:29:33,478 - app - INFO - Setting up scheduler...
2024-08-06 18:29:33,483 - app - INFO - Initializing scheduler...
2024-08-06 18:29:33,484 - app.scheduler - INFO - Scheduler initialized
2024-08-06 18:29:33,484 - app - INFO - Application initialized successfully
2024-08-06 18:30:09,582 - app - INFO - Initializing Flask app...
2024-08-06 18:30:09,584 - app - INFO - Configuring app...
2024-08-06 18:30:09,584 - app - INFO - Setting up CORS...
2024-08-06 18:30:09,585 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 18:30:09,846 - app - INFO - Initializing JWT manager...
2024-08-06 18:30:09,846 - app - INFO - Setting up rate limiting...
2024-08-06 18:30:09,849 - app - INFO - Setting up database...
2024-08-06 18:30:09,849 - app - INFO - Starting database setup...
2024-08-06 18:30:10,389 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 18:30:10,389 - app - INFO - Database setup completed successfully
2024-08-06 18:30:10,390 - app - INFO - Registering error handler...
2024-08-06 18:30:10,390 - app - INFO - Initializing CLI commands...
2024-08-06 18:30:10,391 - app - INFO - Registering routes...
2024-08-06 18:30:10,398 - app - INFO - Initializing services...
2024-08-06 18:30:10,410 - app - INFO - Initializing email service...
2024-08-06 18:30:10,410 - app - INFO - Setting up scheduler...
2024-08-06 18:30:10,414 - app - INFO - Initializing scheduler...
2024-08-06 18:30:10,415 - app.scheduler - INFO - Scheduler initialized
2024-08-06 18:30:10,416 - app - INFO - Application initialized successfully
2024-08-06 18:30:12,761 - app - INFO - Initializing Flask app...
2024-08-06 18:30:12,763 - app - INFO - Configuring app...
2024-08-06 18:30:12,763 - app - INFO - Setting up CORS...
2024-08-06 18:30:12,764 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 18:30:13,123 - app - INFO - Initializing JWT manager...
2024-08-06 18:30:13,124 - app - INFO - Setting up rate limiting...
2024-08-06 18:30:13,125 - app - INFO - Setting up database...
2024-08-06 18:30:13,126 - app - INFO - Starting database setup...
2024-08-06 18:30:13,706 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 18:30:13,707 - app - INFO - Database setup completed successfully
2024-08-06 18:30:13,707 - app - INFO - Registering error handler...
2024-08-06 18:30:13,707 - app - INFO - Initializing CLI commands...
2024-08-06 18:30:13,708 - app - INFO - Registering routes...
2024-08-06 18:30:13,717 - app - INFO - Initializing services...
2024-08-06 18:30:13,737 - app - INFO - Initializing email service...
2024-08-06 18:30:13,738 - app - INFO - Setting up scheduler...
2024-08-06 18:30:13,743 - app - INFO - Initializing scheduler...
2024-08-06 18:30:13,744 - app.scheduler - INFO - Scheduler initialized
2024-08-06 18:30:13,745 - app - INFO - Application initialized successfully
2024-08-06 18:30:25,737 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 18:30:25,738 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:30:26,242 - app.database - INFO - Database connection established successfully
2024-08-06 18:30:26,287 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 18:30:26,301 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:30:26,911 - app.database - INFO - Database connection established successfully
2024-08-06 18:30:26,973 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 18:30:26,973 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:30:27,521 - app.database - INFO - Database connection established successfully
2024-08-06 18:30:27,562 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 18:30:27,573 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:30:28,101 - app.database - INFO - Database connection established successfully
2024-08-06 18:30:30,380 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:30:30,968 - app.database - INFO - Database connection established successfully
2024-08-06 18:30:31,046 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:30:31,576 - app.database - INFO - Database connection established successfully
2024-08-06 18:30:32,286 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:30:32,856 - app.database - INFO - Database connection established successfully
2024-08-06 18:30:33,216 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:30:39,190 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the clinical trial data provided, I've determined that none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n4. NCT01511679: This trial is for studying alcohol abuse in adolescents, which doesn't match the patient's profile (30-year-old with depression and anxiety).\n\nThe patient's profile (30-year-old male with depression and anxiety) doesn't align well with any of the provided clinical trials. The trials are focused on very specific conditions (leukemia, erectile dysfunction, smoking, adolescent alcohol use) that are not present in the patient's profile.", type='text')]
2024-08-06 18:30:39,190 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the clinical trial data provided, I've determined that none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n4. NCT01511679: This trial is for studying alcohol abuse in adolescents, which doesn't match the patient's profile (30-year-old with depression and anxiety).\n\nThe patient's profile (30-year-old male with depression and anxiety) doesn't align well with any of the provided clinical trials. The trials are focused on very specific conditions (leukemia, erectile dysfunction, smoking, adolescent alcohol use) that are not present in the patient's profile.", type='text')]
2024-08-06 18:30:39,191 - app.services.anthropic_service - INFO - Parsing response: After carefully analyzing the patient profile and the clinical trial data provided, I've determined that none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.
2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.
3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.
4. NCT01511679: This trial is for studying alcohol abuse in adolescents, which doesn't match the patient's profile (30-year-old with depression and anxiety).

The patient's profile (30-year-old male with depression and anxiety) doesn't align well with any of the provided clinical trials. The trials are focused on very specific conditions (leukemia, erectile dysfunction, smoking, adolescent alcohol use) that are not present in the patient's profile.
2024-08-06 18:30:39,191 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:30:39,191 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:30:40,410 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:30:42,711 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial information, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (depression, anxiety, and medication for these conditions) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:30:42,712 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial information, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (depression, anxiety, and medication for these conditions) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:30:42,713 - app.services.anthropic_service - INFO - Parsing response: Based on the given patient profile and clinical trial information, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (depression, anxiety, and medication for these conditions) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]
2024-08-06 18:30:42,714 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:30:42,714 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:30:43,957 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:30:47,880 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety who is taking Escitalopram. None of the provided clinical trials are specifically focused on depression, anxiety, or related mental health conditions. The trials cover topics such as heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children. These do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 18:30:47,881 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety who is taking Escitalopram. None of the provided clinical trials are specifically focused on depression, anxiety, or related mental health conditions. The trials cover topics such as heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children. These do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 18:30:47,881 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety who is taking Escitalopram. None of the provided clinical trials are specifically focused on depression, anxiety, or related mental health conditions. The trials cover topics such as heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children. These do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials.
2024-08-06 18:30:47,881 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:30:47,882 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:30:49,218 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:30:51,960 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the eligibility criteria or focus of the provided clinical trials, which are mainly about diabetes and lung cancer.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 18:30:51,960 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the eligibility criteria or focus of the provided clinical trials, which are mainly about diabetes and lung cancer.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 18:30:51,961 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the eligibility criteria or focus of the provided clinical trials, which are mainly about diabetes and lung cancer.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 18:30:51,961 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:30:51,961 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:30:53,227 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:30:58,105 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT03059979: This trial is for patients with systemic sclerosis and Raynaud's phenomenon, which the patient does not have.\n\n2. NCT00293579: This trial is for patients with advanced head and neck cancer, which is not applicable to the patient's conditions.\n\n3. NCT04491279: This trial is for chronic stroke patients, which does not match the patient's profile.\n\nThe patient's primary conditions are depression and anxiety, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 18:30:58,105 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT03059979: This trial is for patients with systemic sclerosis and Raynaud's phenomenon, which the patient does not have.\n\n2. NCT00293579: This trial is for patients with advanced head and neck cancer, which is not applicable to the patient's conditions.\n\n3. NCT04491279: This trial is for chronic stroke patients, which does not match the patient's profile.\n\nThe patient's primary conditions are depression and anxiety, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 18:30:58,105 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT03059979: This trial is for patients with systemic sclerosis and Raynaud's phenomenon, which the patient does not have.

2. NCT00293579: This trial is for patients with advanced head and neck cancer, which is not applicable to the patient's conditions.

3. NCT04491279: This trial is for chronic stroke patients, which does not match the patient's profile.

The patient's primary conditions are depression and anxiety, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 18:30:58,106 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:30:58,106 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:30:59,603 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:31:02,305 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile (male, 31 years old, with depression and anxiety) does not align closely with the specific conditions and eligibility criteria of the given clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye conditions.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:31:02,306 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile (male, 31 years old, with depression and anxiety) does not align closely with the specific conditions and eligibility criteria of the given clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye conditions.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:31:02,306 - app.services.anthropic_service - INFO - Parsing response: Based on the provided patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile (male, 31 years old, with depression and anxiety) does not align closely with the specific conditions and eligibility criteria of the given clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye conditions.

Therefore, the output is an empty array:

[]
2024-08-06 18:31:02,306 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:31:02,307 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:31:03,584 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:48:26,238 - app - INFO - Initializing Flask app...
2024-08-06 18:48:26,241 - app - INFO - Configuring app...
2024-08-06 18:48:26,241 - app - INFO - Setting up CORS...
2024-08-06 18:48:26,242 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 18:48:26,632 - app - INFO - Initializing JWT manager...
2024-08-06 18:48:26,633 - app - INFO - Setting up rate limiting...
2024-08-06 18:48:26,634 - app - INFO - Setting up database...
2024-08-06 18:48:26,634 - app - INFO - Starting database setup...
2024-08-06 18:48:27,420 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 18:48:27,420 - app - INFO - Database setup completed successfully
2024-08-06 18:48:27,420 - app - INFO - Registering error handler...
2024-08-06 18:48:27,420 - app - INFO - Initializing CLI commands...
2024-08-06 18:48:27,420 - app - INFO - Registering routes...
2024-08-06 18:48:27,428 - app - INFO - Initializing services...
2024-08-06 18:48:27,442 - app - INFO - Initializing email service...
2024-08-06 18:48:27,442 - app - INFO - Setting up scheduler...
2024-08-06 18:48:27,448 - app - INFO - Initializing scheduler...
2024-08-06 18:48:27,450 - app.scheduler - INFO - Scheduler initialized
2024-08-06 18:48:27,450 - app - INFO - Application initialized successfully
2024-08-06 18:48:30,546 - app - INFO - Initializing Flask app...
2024-08-06 18:48:30,549 - app - INFO - Configuring app...
2024-08-06 18:48:30,549 - app - INFO - Setting up CORS...
2024-08-06 18:48:30,549 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 18:48:30,973 - app - INFO - Initializing JWT manager...
2024-08-06 18:48:30,974 - app - INFO - Setting up rate limiting...
2024-08-06 18:48:30,975 - app - INFO - Setting up database...
2024-08-06 18:48:30,976 - app - INFO - Starting database setup...
2024-08-06 18:48:31,635 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 18:48:31,636 - app - INFO - Database setup completed successfully
2024-08-06 18:48:31,636 - app - INFO - Registering error handler...
2024-08-06 18:48:31,637 - app - INFO - Initializing CLI commands...
2024-08-06 18:48:31,637 - app - INFO - Registering routes...
2024-08-06 18:48:31,645 - app - INFO - Initializing services...
2024-08-06 18:48:31,659 - app - INFO - Initializing email service...
2024-08-06 18:48:31,660 - app - INFO - Setting up scheduler...
2024-08-06 18:48:31,664 - app - INFO - Initializing scheduler...
2024-08-06 18:48:31,665 - app.scheduler - INFO - Scheduler initialized
2024-08-06 18:48:31,665 - app - INFO - Application initialized successfully
2024-08-06 18:48:38,954 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:48:39,680 - app.database - INFO - Database connection established successfully
2024-08-06 18:48:40,002 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 18:48:40,003 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:48:40,763 - app.database - INFO - Database connection established successfully
2024-08-06 18:48:40,804 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 18:48:40,812 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:48:41,524 - app.database - INFO - Database connection established successfully
2024-08-06 18:48:41,604 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 18:48:41,605 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:48:42,441 - app.database - INFO - Database connection established successfully
2024-08-06 18:48:42,493 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 18:48:42,502 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:48:44,076 - app.database - INFO - Database connection established successfully
2024-08-06 18:48:44,127 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:48:44,894 - app.database - INFO - Database connection established successfully
2024-08-06 18:48:44,979 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:48:45,691 - app.database - INFO - Database connection established successfully
2024-08-06 18:48:47,137 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:48:47,991 - app.database - INFO - Database connection established successfully
2024-08-06 18:48:48,951 - app.database - INFO - Attempting to establish database connection...
2024-08-06 18:48:49,734 - app.database - INFO - Database connection established successfully
2024-08-06 18:48:50,240 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:48:56,301 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for patients with erectile dysfunction and benign prostatic hyperplasia, which are not conditions listed for this patient.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is about adolescent alcohol use, the patient is 31 years old (born in 1992) and doesn't fit the age range (12-21 years) for this study. Additionally, there's no mention of alcohol abuse in the patient's profile.\n\nNone of these trials align with the patient's listed conditions (depression and anxiety) or other characteristics. Therefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 18:48:56,302 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for patients with erectile dysfunction and benign prostatic hyperplasia, which are not conditions listed for this patient.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is about adolescent alcohol use, the patient is 31 years old (born in 1992) and doesn't fit the age range (12-21 years) for this study. Additionally, there's no mention of alcohol abuse in the patient's profile.\n\nNone of these trials align with the patient's listed conditions (depression and anxiety) or other characteristics. Therefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 18:48:56,303 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.

2. NCT00517179: This trial is for patients with erectile dysfunction and benign prostatic hyperplasia, which are not conditions listed for this patient.

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: While this trial is about adolescent alcohol use, the patient is 31 years old (born in 1992) and doesn't fit the age range (12-21 years) for this study. Additionally, there's no mention of alcohol abuse in the patient's profile.

None of these trials align with the patient's listed conditions (depression and anxiety) or other characteristics. Therefore, the output in the requested JSON format would be an empty array:

[]
2024-08-06 18:48:56,303 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:48:56,303 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:48:57,879 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:49:04,225 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe main reasons for the lack of compatibility are:\n\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions targeted by the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31) doesn't seem to be a focus of the study, which appears to be more concerned with older populations prone to sarcopenia.\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are the primary focus of the trial.\n4. The patient's medication (Escitalopram) is not relevant to the study's focus.", type='text')]
2024-08-06 18:49:04,226 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe main reasons for the lack of compatibility are:\n\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions targeted by the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31) doesn't seem to be a focus of the study, which appears to be more concerned with older populations prone to sarcopenia.\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are the primary focus of the trial.\n4. The patient's medication (Escitalopram) is not relevant to the study's focus.", type='text')]
2024-08-06 18:49:04,227 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The main reasons for the lack of compatibility are:

1. The patient's medical conditions (depression and anxiety) are not related to the conditions targeted by the trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (31) doesn't seem to be a focus of the study, which appears to be more concerned with older populations prone to sarcopenia.
3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are the primary focus of the trial.
4. The patient's medication (Escitalopram) is not relevant to the study's focus.
2024-08-06 18:49:04,227 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:49:04,227 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:49:05,669 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:49:09,911 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials meet the compatibility threshold of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or include them in their inclusion criteria. The trials focus on:\n\n1. Heart disease risk factors and aging\n2. Diabetes prevention in specific ethnic groups\n3. PTSD in military veterans\n4. Virtual reality for children with cerebral palsy\n\nThese trials do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no matches are returned based on the given criteria.", type='text')]
2024-08-06 18:49:09,911 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials meet the compatibility threshold of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or include them in their inclusion criteria. The trials focus on:\n\n1. Heart disease risk factors and aging\n2. Diabetes prevention in specific ethnic groups\n3. PTSD in military veterans\n4. Virtual reality for children with cerebral palsy\n\nThese trials do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no matches are returned based on the given criteria.", type='text')]
2024-08-06 18:49:09,911 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials meet the compatibility threshold of 70 or higher for this patient. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or include them in their inclusion criteria. The trials focus on:

1. Heart disease risk factors and aging
2. Diabetes prevention in specific ethnic groups
3. PTSD in military veterans
4. Virtual reality for children with cerebral palsy

These trials do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no matches are returned based on the given criteria.
2024-08-06 18:49:09,912 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:49:09,912 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:49:11,245 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:49:14,938 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the two provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer respectively.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:49:14,938 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the two provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer respectively.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:49:14,938 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the two provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer respectively.

Therefore, the output is an empty array:

[]
2024-08-06 18:49:14,938 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:49:14,939 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:49:16,347 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:49:19,890 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on systemic sclerosis, head and neck cancer, and stroke.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:49:19,891 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on systemic sclerosis, head and neck cancer, and stroke.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:49:19,891 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on systemic sclerosis, head and neck cancer, and stroke.

Therefore, the output is an empty array:

[]
2024-08-06 18:49:19,891 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:49:19,891 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:49:21,206 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:49:26,090 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not compatible with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Hence, no trials are included in the output.", type='text')]
2024-08-06 18:49:26,091 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not compatible with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Hence, no trials are included in the output.", type='text')]
2024-08-06 18:49:26,092 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:

1. Scalp cooling for metastatic breast cancer patients
2. Extracorporeal photopheresis for lung transplant patients
3. Health and safety training in the workplace
4. Choroidal thickness measurements related to refractive errors

These trials are not compatible with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Hence, no trials are included in the output.
2024-08-06 18:49:26,093 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:49:26,093 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:49:27,302 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:49:32,437 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:\n\n1. Hepatitis C in hemodialysis patients\n2. Akt inhibition in melanoma patients\n3. Stem cell therapy for ischemic heart failure\n4. Left ventricular assist device for heart failure\n\nThese trials are not compatible with the patient's profile, as they target different medical conditions and demographics. The patient does not have any of the specific conditions (hepatitis C, renal failure, melanoma, or heart failure) required for these trials, resulting in very low compatibility scores (well below 70) for all of them.", type='text')]
2024-08-06 18:49:32,438 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:\n\n1. Hepatitis C in hemodialysis patients\n2. Akt inhibition in melanoma patients\n3. Stem cell therapy for ischemic heart failure\n4. Left ventricular assist device for heart failure\n\nThese trials are not compatible with the patient's profile, as they target different medical conditions and demographics. The patient does not have any of the specific conditions (hepatitis C, renal failure, melanoma, or heart failure) required for these trials, resulting in very low compatibility scores (well below 70) for all of them.", type='text')]
2024-08-06 18:49:32,438 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:

1. Hepatitis C in hemodialysis patients
2. Akt inhibition in melanoma patients
3. Stem cell therapy for ischemic heart failure
4. Left ventricular assist device for heart failure

These trials are not compatible with the patient's profile, as they target different medical conditions and demographics. The patient does not have any of the specific conditions (hepatitis C, renal failure, melanoma, or heart failure) required for these trials, resulting in very low compatibility scores (well below 70) for all of them.
2024-08-06 18:49:32,438 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:49:32,440 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:49:33,717 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:49:39,193 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's conditions of depression and anxiety.\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions.\n\n3. The third trial (NCT00228579) is focused on obesity in females, while the patient is male and obesity is not mentioned in his profile.\n\nNone of these trials align closely with the patient's profile of a 31-year-old male with depression and anxiety, taking Escitalopram. Therefore, no trials meet the minimum compatibility score of 70.", type='text')]
2024-08-06 18:49:39,194 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's conditions of depression and anxiety.\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions.\n\n3. The third trial (NCT00228579) is focused on obesity in females, while the patient is male and obesity is not mentioned in his profile.\n\nNone of these trials align closely with the patient's profile of a 31-year-old male with depression and anxiety, taking Escitalopram. Therefore, no trials meet the minimum compatibility score of 70.", type='text')]
2024-08-06 18:49:39,195 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's conditions of depression and anxiety.

2. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions.

3. The third trial (NCT00228579) is focused on obesity in females, while the patient is male and obesity is not mentioned in his profile.

None of these trials align closely with the patient's profile of a 31-year-old male with depression and anxiety, taking Escitalopram. Therefore, no trials meet the minimum compatibility score of 70.
2024-08-06 18:49:39,195 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:49:39,195 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:49:40,383 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:49:44,693 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After reviewing the patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe provided trials focus on conditions such as coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not relevant to the patient's profile. Additionally, the patient's age (31 years old) and lack of specific cardiovascular or oncological conditions make them ineligible for most of these trials.", type='text')]
2024-08-06 18:49:44,693 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After reviewing the patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe provided trials focus on conditions such as coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not relevant to the patient's profile. Additionally, the patient's age (31 years old) and lack of specific cardiovascular or oncological conditions make them ineligible for most of these trials.", type='text')]
2024-08-06 18:49:44,694 - app.services.anthropic_service - INFO - Parsing response: After reviewing the patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:

[]

The provided trials focus on conditions such as coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not relevant to the patient's profile. Additionally, the patient's age (31 years old) and lack of specific cardiovascular or oncological conditions make them ineligible for most of these trials.
2024-08-06 18:49:44,694 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:49:44,694 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:49:45,987 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:49:50,972 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05315479) is focused on postoperative pain in children aged 2 to <17 years. The patient, Ethan Brush, is 31 years old and does not match the age criteria or the condition being studied.\n\n2. The second trial (NCT02052479) is focused on Polycystic Ovary Syndrome (PCOS) in African-American and Caucasian female adolescents aged 12-18 years. The patient is a 31-year-old male, which does not match the gender, age, or condition criteria for this trial.\n\nNeither of these trials is suitable for the patient based on their profile, resulting in compatibility scores well below 70. Therefore, no trials are returned in the output.', type='text')]
2024-08-06 18:49:50,974 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05315479) is focused on postoperative pain in children aged 2 to <17 years. The patient, Ethan Brush, is 31 years old and does not match the age criteria or the condition being studied.\n\n2. The second trial (NCT02052479) is focused on Polycystic Ovary Syndrome (PCOS) in African-American and Caucasian female adolescents aged 12-18 years. The patient is a 31-year-old male, which does not match the gender, age, or condition criteria for this trial.\n\nNeither of these trials is suitable for the patient based on their profile, resulting in compatibility scores well below 70. Therefore, no trials are returned in the output.', type='text')]
2024-08-06 18:49:50,975 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT05315479) is focused on postoperative pain in children aged 2 to <17 years. The patient, Ethan Brush, is 31 years old and does not match the age criteria or the condition being studied.

2. The second trial (NCT02052479) is focused on Polycystic Ovary Syndrome (PCOS) in African-American and Caucasian female adolescents aged 12-18 years. The patient is a 31-year-old male, which does not match the gender, age, or condition criteria for this trial.

Neither of these trials is suitable for the patient based on their profile, resulting in compatibility scores well below 70. Therefore, no trials are returned in the output.
2024-08-06 18:49:50,975 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:49:50,976 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:49:52,202 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:49:57,250 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials cover topics such as influenza vaccines in children, pain relief during postpartum perineal tears, colorectal cancer with liver metastases, and oncologist satisfaction with cytotoxic agents. These trials are not relevant to the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 18:49:57,251 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials cover topics such as influenza vaccines in children, pain relief during postpartum perineal tears, colorectal cancer with liver metastases, and oncologist satisfaction with cytotoxic agents. These trials are not relevant to the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 18:49:57,252 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials cover topics such as influenza vaccines in children, pain relief during postpartum perineal tears, colorectal cancer with liver metastases, and oncologist satisfaction with cytotoxic agents. These trials are not relevant to the patient's profile, resulting in low compatibility scores (below 70) for all trials.
2024-08-06 18:49:57,252 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:49:57,252 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:49:58,509 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:50:04,596 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no trials that match with a compatibility score of 70 or higher. Here's why:\n\n1. The first trial (NCT06378879) is focused on anesthesia methods during upper endoscopy. This is not related to the patient's medical conditions (depression and anxiety) or current medication (Escitalopram).\n\n2. The second trial (NCT02710279) is closer to the patient's profile as it's related to unipolar depression. However, there are several factors that significantly reduce the compatibility:\n\n   - The trial is specifically for female patients, while Ethan is male.\n   - The trial is for patients between 18 and 65 years old. While Ethan (born in 1992) fits this age range, it's not enough to overcome other incompatibilities.\n   - The trial is focused on patients with a history of suicidal behavior, which is not mentioned in Ethan's profile.\n   - The trial has been terminated, which means it's no longer recruiting patients.\n\nGiven these factors, neither trial reaches the threshold of 70 or higher for compatibility. Therefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 18:50:04,597 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no trials that match with a compatibility score of 70 or higher. Here's why:\n\n1. The first trial (NCT06378879) is focused on anesthesia methods during upper endoscopy. This is not related to the patient's medical conditions (depression and anxiety) or current medication (Escitalopram).\n\n2. The second trial (NCT02710279) is closer to the patient's profile as it's related to unipolar depression. However, there are several factors that significantly reduce the compatibility:\n\n   - The trial is specifically for female patients, while Ethan is male.\n   - The trial is for patients between 18 and 65 years old. While Ethan (born in 1992) fits this age range, it's not enough to overcome other incompatibilities.\n   - The trial is focused on patients with a history of suicidal behavior, which is not mentioned in Ethan's profile.\n   - The trial has been terminated, which means it's no longer recruiting patients.\n\nGiven these factors, neither trial reaches the threshold of 70 or higher for compatibility. Therefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 18:50:04,597 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that there are no trials that match with a compatibility score of 70 or higher. Here's why:

1. The first trial (NCT06378879) is focused on anesthesia methods during upper endoscopy. This is not related to the patient's medical conditions (depression and anxiety) or current medication (Escitalopram).

2. The second trial (NCT02710279) is closer to the patient's profile as it's related to unipolar depression. However, there are several factors that significantly reduce the compatibility:

   - The trial is specifically for female patients, while Ethan is male.
   - The trial is for patients between 18 and 65 years old. While Ethan (born in 1992) fits this age range, it's not enough to overcome other incompatibilities.
   - The trial is focused on patients with a history of suicidal behavior, which is not mentioned in Ethan's profile.
   - The trial has been terminated, which means it's no longer recruiting patients.

Given these factors, neither trial reaches the threshold of 70 or higher for compatibility. Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 18:50:04,597 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:50:04,598 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:50:05,891 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:50:09,046 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (depression, anxiety, taking Escitalopram) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials (which focus on vascular Ehlers-Danlos Syndrome, periodontitis, and anemia).\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:50:09,046 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (depression, anxiety, taking Escitalopram) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials (which focus on vascular Ehlers-Danlos Syndrome, periodontitis, and anemia).\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:50:09,047 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (depression, anxiety, taking Escitalopram) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials (which focus on vascular Ehlers-Danlos Syndrome, periodontitis, and anemia).

Therefore, the output is an empty array:

[]
2024-08-06 18:50:09,047 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:50:09,048 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:50:10,288 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:50:15,344 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that there are no trials that match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting depression or anxiety. The trials focus on:\n\n1. Hemodynamics in coronary artery bypass surgery\n2. ADHD symptoms in children\n3. Atrial fibrillation\n4. Temperature monitoring during general anesthesia\n5. Allergic rhinitis\n\nThese conditions and study focuses are not directly related to the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 18:50:15,345 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that there are no trials that match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting depression or anxiety. The trials focus on:\n\n1. Hemodynamics in coronary artery bypass surgery\n2. ADHD symptoms in children\n3. Atrial fibrillation\n4. Temperature monitoring during general anesthesia\n5. Allergic rhinitis\n\nThese conditions and study focuses are not directly related to the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 18:50:15,346 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the clinical trial data provided, I have determined that there are no trials that match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting depression or anxiety. The trials focus on:

1. Hemodynamics in coronary artery bypass surgery
2. ADHD symptoms in children
3. Atrial fibrillation
4. Temperature monitoring during general anesthesia
5. Allergic rhinitis

These conditions and study focuses are not directly related to the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.
2024-08-06 18:50:15,347 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:50:15,347 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:50:16,568 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:50:22,614 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT02199379: This trial is focused on renal impairment and pharmacokinetics of a specific drug. The patient's profile does not mention any renal issues, and the conditions (depression, anxiety) do not match the trial's focus.\n\n2. NCT02407379: This trial is about periodontal treatments, which is unrelated to the patient's reported conditions of depression and anxiety.\n\n3. NCT01100879: This trial is for patients with multiple myeloma and anemia. The patient's profile does not indicate either of these conditions.\n\nNone of these trials align closely with the patient's reported medical conditions (depression and anxiety) or current medication (Escitalopram). Therefore, no trials meet the minimum compatibility score of 70.", type='text')]
2024-08-06 18:50:22,615 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT02199379: This trial is focused on renal impairment and pharmacokinetics of a specific drug. The patient's profile does not mention any renal issues, and the conditions (depression, anxiety) do not match the trial's focus.\n\n2. NCT02407379: This trial is about periodontal treatments, which is unrelated to the patient's reported conditions of depression and anxiety.\n\n3. NCT01100879: This trial is for patients with multiple myeloma and anemia. The patient's profile does not indicate either of these conditions.\n\nNone of these trials align closely with the patient's reported medical conditions (depression and anxiety) or current medication (Escitalopram). Therefore, no trials meet the minimum compatibility score of 70.", type='text')]
2024-08-06 18:50:22,616 - app.services.anthropic_service - INFO - Parsing response: After reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. NCT02199379: This trial is focused on renal impairment and pharmacokinetics of a specific drug. The patient's profile does not mention any renal issues, and the conditions (depression, anxiety) do not match the trial's focus.

2. NCT02407379: This trial is about periodontal treatments, which is unrelated to the patient's reported conditions of depression and anxiety.

3. NCT01100879: This trial is for patients with multiple myeloma and anemia. The patient's profile does not indicate either of these conditions.

None of these trials align closely with the patient's reported medical conditions (depression and anxiety) or current medication (Escitalopram). Therefore, no trials meet the minimum compatibility score of 70.
2024-08-06 18:50:22,616 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:50:22,617 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:50:23,846 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:50:33,699 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT06207279",\n        "compatibility_score": 75,\n        "reasons": [\n            "The patient has depression, which is one of the conditions listed for this trial",\n            "The patient\'s age (31) falls within the trial\'s age range of 18-60 years",\n            "The trial includes healthy subjects as well as those with depression, making it potentially suitable for this patient",\n            "The patient is not reported to have any exclusion criteria mentioned in the trial"\n        ]\n    }\n]\n\nExplanation:\nThe second trial (NCT06207279) is a potential match for the patient. The compatibility score is set at 75 because while there are several matching factors, it\'s not a perfect fit. The patient meets some key criteria:\n\n1. He has depression, which is one of the conditions being studied.\n2. His age (31, calculated from the date of birth) falls within the trial\'s age range.\n3. The trial includes both healthy subjects and those with depression.\n4. There are no apparent conflicts with the exclusion criteria based on the information provided.\n\nHowever, the score is not higher because:\n1. The patient is also taking medication (Escitalopram), which isn\'t explicitly mentioned in the trial details.\n2. The patient has anxiety, which isn\'t specifically mentioned in the trial conditions.\n\nThe first trial (NCT04931979) is not a suitable match because it\'s focused on prostate cancer, which the patient does not have. Therefore, it\'s not included in the results.', type='text')]
2024-08-06 18:50:33,700 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT06207279",\n        "compatibility_score": 75,\n        "reasons": [\n            "The patient has depression, which is one of the conditions listed for this trial",\n            "The patient\'s age (31) falls within the trial\'s age range of 18-60 years",\n            "The trial includes healthy subjects as well as those with depression, making it potentially suitable for this patient",\n            "The patient is not reported to have any exclusion criteria mentioned in the trial"\n        ]\n    }\n]\n\nExplanation:\nThe second trial (NCT06207279) is a potential match for the patient. The compatibility score is set at 75 because while there are several matching factors, it\'s not a perfect fit. The patient meets some key criteria:\n\n1. He has depression, which is one of the conditions being studied.\n2. His age (31, calculated from the date of birth) falls within the trial\'s age range.\n3. The trial includes both healthy subjects and those with depression.\n4. There are no apparent conflicts with the exclusion criteria based on the information provided.\n\nHowever, the score is not higher because:\n1. The patient is also taking medication (Escitalopram), which isn\'t explicitly mentioned in the trial details.\n2. The patient has anxiety, which isn\'t specifically mentioned in the trial conditions.\n\nThe first trial (NCT04931979) is not a suitable match because it\'s focused on prostate cancer, which the patient does not have. Therefore, it\'s not included in the results.', type='text')]
2024-08-06 18:50:33,700 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT06207279",
        "compatibility_score": 75,
        "reasons": [
            "The patient has depression, which is one of the conditions listed for this trial",
            "The patient's age (31) falls within the trial's age range of 18-60 years",
            "The trial includes healthy subjects as well as those with depression, making it potentially suitable for this patient",
            "The patient is not reported to have any exclusion criteria mentioned in the trial"
        ]
    }
]

Explanation:
The second trial (NCT06207279) is a potential match for the patient. The compatibility score is set at 75 because while there are several matching factors, it's not a perfect fit. The patient meets some key criteria:

1. He has depression, which is one of the conditions being studied.
2. His age (31, calculated [SQL REDACTED] the date of birth) falls within the trial's age range.
3. The trial includes both healthy subjects and those with depression.
4. There are no apparent conflicts with the exclusion criteria based on the information provided.

However, the score is not higher because:
1. The patient is also taking medication (Escitalopram), which isn't explicitly mentioned in the trial details.
2. The patient has anxiety, which isn't specifically mentioned in the trial conditions.

The first trial (NCT04931979) is not a suitable match because it's focused on prostate cancer, which the patient does not have. Therefore, it's not included in the results.
2024-08-06 18:50:33,701 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 14 column 1 (char 529)
2024-08-06 18:50:33,701 - app.services.anthropic_service - ERROR - Response content: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT06207279",
        "compatibility_score": 75,
        "reasons": [
            "The patient has depression, which is one of the conditions listed for this trial",
            "The patient's age (31) falls within the trial's age range of 18-60 years",
            "The trial includes healthy subjects as well as those with depression, making it potentially suitable for this patient",
            "The patient is not reported to have any exclusion criteria mentioned in the trial"
        ]
    }
]

Explanation:
The second trial (NCT06207279) is a potential match for the patient. The compatibility score is set at 75 because while there are several matching factors, it's not a perfect fit. The patient meets some key criteria:

1. He has depression, which is one of the conditions being studied.
2. His age (31, calculated [SQL REDACTED] the date of birth) falls within the trial's age range.
3. The trial includes both healthy subjects and those with depression.
4. There are no apparent conflicts with the exclusion criteria based on the information provided.

However, the score is not higher because:
1. The patient is also taking medication (Escitalopram), which isn't explicitly mentioned in the trial details.
2. The patient has anxiety, which isn't specifically mentioned in the trial conditions.

The first trial (NCT04931979) is not a suitable match because it's focused on prostate cancer, which the patient does not have. Therefore, it's not included in the results.
2024-08-06 18:50:33,701 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:50:35,173 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:50:38,574 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the specific focus of the provided clinical trials, which are related to post-operative pain, popliteal entrapment syndrome, and duodenal atresia surgery.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 18:50:38,575 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the specific focus of the provided clinical trials, which are related to post-operative pain, popliteal entrapment syndrome, and duodenal atresia surgery.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 18:50:38,575 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the specific focus of the provided clinical trials, which are related to post-operative pain, popliteal entrapment syndrome, and duodenal atresia surgery.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 18:50:38,576 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:50:38,577 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:50:39,866 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:50:43,403 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05359679) is focused on dementia in patients 65 years and older, which doesn't match the patient's age (31 years old) or medical conditions (depression and anxiety).\n\n2. The second trial (NCT04527679) is for intrahepatic cholangiocarcinoma, which is not related to the patient's medical conditions.\n\nNeither of these trials are suitable for the patient based on their profile, resulting in compatibility scores below 70 for both trials.", type='text')]
2024-08-06 18:50:43,403 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05359679) is focused on dementia in patients 65 years and older, which doesn't match the patient's age (31 years old) or medical conditions (depression and anxiety).\n\n2. The second trial (NCT04527679) is for intrahepatic cholangiocarcinoma, which is not related to the patient's medical conditions.\n\nNeither of these trials are suitable for the patient based on their profile, resulting in compatibility scores below 70 for both trials.", type='text')]
2024-08-06 18:50:43,404 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT05359679) is focused on dementia in patients 65 years and older, which doesn't match the patient's age (31 years old) or medical conditions (depression and anxiety).

2. The second trial (NCT04527679) is for intrahepatic cholangiocarcinoma, which is not related to the patient's medical conditions.

Neither of these trials are suitable for the patient based on their profile, resulting in compatibility scores below 70 for both trials.
2024-08-06 18:50:43,405 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:50:43,406 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:50:44,693 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:50:47,801 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on breast cancer, snacking habits, knee arthroplasty infection, and dry eye syndrome.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:50:47,802 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on breast cancer, snacking habits, knee arthroplasty infection, and dry eye syndrome.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:50:47,802 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on breast cancer, snacking habits, knee arthroplasty infection, and dry eye syndrome.

Therefore, the output is an empty array:

[]
2024-08-06 18:50:47,802 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:50:47,802 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:50:49,098 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:50:53,642 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I've determined that none of the trials match this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient's primary medical conditions are depression and anxiety, which don't match the conditions targeted by any of the provided clinical trials.\n\n2. The trials focus on hemophilia, coronary artery disease, draining hematomas, and Hodgkin lymphoma, none of which are mentioned in the patient's profile.\n\n3. The patient's age (31 years old) and medication (Escitalopram) are not specifically relevant to any of the trial eligibility criteria.\n\n4. None of the trials are specifically targeting mental health conditions like depression or anxiety.\n\nGiven these factors, the compatibility scores for all trials would be below 70. Therefore, as per the instructions, I'm returning an empty array:\n\n[]", type='text')]
2024-08-06 18:50:53,642 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I've determined that none of the trials match this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient's primary medical conditions are depression and anxiety, which don't match the conditions targeted by any of the provided clinical trials.\n\n2. The trials focus on hemophilia, coronary artery disease, draining hematomas, and Hodgkin lymphoma, none of which are mentioned in the patient's profile.\n\n3. The patient's age (31 years old) and medication (Escitalopram) are not specifically relevant to any of the trial eligibility criteria.\n\n4. None of the trials are specifically targeting mental health conditions like depression or anxiety.\n\nGiven these factors, the compatibility scores for all trials would be below 70. Therefore, as per the instructions, I'm returning an empty array:\n\n[]", type='text')]
2024-08-06 18:50:53,643 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the clinical trial data provided, I've determined that none of the trials match this patient with a compatibility score of 70 or higher. Here's why:

1. The patient's primary medical conditions are depression and anxiety, which don't match the conditions targeted by any of the provided clinical trials.

2. The trials focus on hemophilia, coronary artery disease, draining hematomas, and Hodgkin lymphoma, none of which are mentioned in the patient's profile.

3. The patient's age (31 years old) and medication (Escitalopram) are not specifically relevant to any of the trial eligibility criteria.

4. None of the trials are specifically targeting mental health conditions like depression or anxiety.

Given these factors, the compatibility scores for all trials would be below 70. Therefore, as per the instructions, I'm returning an empty array:

[]
2024-08-06 18:50:53,644 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:50:53,644 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:50:54,972 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:50:58,104 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not closely match the eligibility criteria or focus of the two provided clinical trials, which are about:\n\n1. Sexual counseling for postmenopausal women\n2. MRSA infection control in nursing homes\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:50:58,105 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not closely match the eligibility criteria or focus of the two provided clinical trials, which are about:\n\n1. Sexual counseling for postmenopausal women\n2. MRSA infection control in nursing homes\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:50:58,105 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not closely match the eligibility criteria or focus of the two provided clinical trials, which are about:

1. Sexual counseling for postmenopausal women
2. MRSA infection control in nursing homes

Therefore, the output is an empty array:

[]
2024-08-06 18:50:58,106 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:50:58,106 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:50:59,488 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:51:04,292 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT01566279: This trial is for solid tumors, which the patient does not have. The patient's medical conditions (depression and anxiety) are not related to this trial.\n\n2. NCT00973479: This trial is for rheumatoid arthritis, which the patient does not have.\n\n3. NCT02744079: This trial is for breast cancer in women, but the patient is male and does not have breast cancer.\n\nNone of these trials are suitable for the patient's profile, which lists depression and anxiety as the primary medical conditions. The patient's age, gender, and current medication (Escitalopram) are not relevant to any of the provided clinical trials.", type='text')]
2024-08-06 18:51:04,292 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT01566279: This trial is for solid tumors, which the patient does not have. The patient's medical conditions (depression and anxiety) are not related to this trial.\n\n2. NCT00973479: This trial is for rheumatoid arthritis, which the patient does not have.\n\n3. NCT02744079: This trial is for breast cancer in women, but the patient is male and does not have breast cancer.\n\nNone of these trials are suitable for the patient's profile, which lists depression and anxiety as the primary medical conditions. The patient's age, gender, and current medication (Escitalopram) are not relevant to any of the provided clinical trials.", type='text')]
2024-08-06 18:51:04,293 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. NCT01566279: This trial is for solid tumors, which the patient does not have. The patient's medical conditions (depression and anxiety) are not related to this trial.

2. NCT00973479: This trial is for rheumatoid arthritis, which the patient does not have.

3. NCT02744079: This trial is for breast cancer in women, but the patient is male and does not have breast cancer.

None of these trials are suitable for the patient's profile, which lists depression and anxiety as the primary medical conditions. The patient's age, gender, and current medication (Escitalopram) are not relevant to any of the provided clinical trials.
2024-08-06 18:51:04,293 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:51:04,294 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:51:05,815 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:51:09,326 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) don't align closely with the conditions and eligibility criteria of the provided clinical trials. The trials focus on pancreatic cancer, vasculitis, and greater tuberosity fractures, which are not related to the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:51:09,327 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) don't align closely with the conditions and eligibility criteria of the provided clinical trials. The trials focus on pancreatic cancer, vasculitis, and greater tuberosity fractures, which are not related to the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 18:51:09,327 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) don't align closely with the conditions and eligibility criteria of the provided clinical trials. The trials focus on pancreatic cancer, vasculitis, and greater tuberosity fractures, which are not related to the patient's profile.

Therefore, the output is an empty array:

[]
2024-08-06 18:51:09,327 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:51:09,328 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:51:10,627 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:51:16,273 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02602379) is about pain management during surgery, which doesn't align with the patient's medical conditions (depression and anxiety) or current medication (Escitalopram).\n\n2. The second trial (NCT00913679) is about hip resurfacing arthroplasty, which is not related to the patient's reported medical conditions or medications.\n\nNeither of these trials addresses depression, anxiety, or the use of Escitalopram, which are the key elements of the patient's profile. Additionally, the patient's age (31 years old) and lack of reported joint issues make them unsuitable for the hip surgery trial. Therefore, no trials meet the minimum compatibility score of 70.", type='text')]
2024-08-06 18:51:16,274 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02602379) is about pain management during surgery, which doesn't align with the patient's medical conditions (depression and anxiety) or current medication (Escitalopram).\n\n2. The second trial (NCT00913679) is about hip resurfacing arthroplasty, which is not related to the patient's reported medical conditions or medications.\n\nNeither of these trials addresses depression, anxiety, or the use of Escitalopram, which are the key elements of the patient's profile. Additionally, the patient's age (31 years old) and lack of reported joint issues make them unsuitable for the hip surgery trial. Therefore, no trials meet the minimum compatibility score of 70.", type='text')]
2024-08-06 18:51:16,275 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT02602379) is about pain management during surgery, which doesn't align with the patient's medical conditions (depression and anxiety) or current medication (Escitalopram).

2. The second trial (NCT00913679) is about hip resurfacing arthroplasty, which is not related to the patient's reported medical conditions or medications.

Neither of these trials addresses depression, anxiety, or the use of Escitalopram, which are the key elements of the patient's profile. Additionally, the patient's age (31 years old) and lack of reported joint issues make them unsuitable for the hip surgery trial. Therefore, no trials meet the minimum compatibility score of 70.
2024-08-06 18:51:16,275 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:51:16,276 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:51:17,607 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:51:23,133 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT02711579 (Celecoxib study): This trial is for healthy volunteers and focuses on brain electrophysiology. The patient has depression and anxiety, which makes them ineligible.\n\n2. NCT01174979 (Caroverin for inner ear diseases): This trial is for patients with tinnitus and inner ear diseases. The patient does not have these conditions.\n\n3. NCT05990179 (Newborn screening study): This trial is for newborns, and the patient is an adult born in 1992.\n\nNone of these trials are suitable for the patient's profile, which includes depression and anxiety. The patient's age, medical conditions, and current medication (Escitalopram) do not align with the eligibility criteria or focus of any of the provided clinical trials.", type='text')]
2024-08-06 18:51:23,134 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT02711579 (Celecoxib study): This trial is for healthy volunteers and focuses on brain electrophysiology. The patient has depression and anxiety, which makes them ineligible.\n\n2. NCT01174979 (Caroverin for inner ear diseases): This trial is for patients with tinnitus and inner ear diseases. The patient does not have these conditions.\n\n3. NCT05990179 (Newborn screening study): This trial is for newborns, and the patient is an adult born in 1992.\n\nNone of these trials are suitable for the patient's profile, which includes depression and anxiety. The patient's age, medical conditions, and current medication (Escitalopram) do not align with the eligibility criteria or focus of any of the provided clinical trials.", type='text')]
2024-08-06 18:51:23,135 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. NCT02711579 (Celecoxib study): This trial is for healthy volunteers and focuses on brain electrophysiology. The patient has depression and anxiety, which makes them ineligible.

2. NCT01174979 (Caroverin for inner ear diseases): This trial is for patients with tinnitus and inner ear diseases. The patient does not have these conditions.

3. NCT05990179 (Newborn screening study): This trial is for newborns, and the patient is an adult born in 1992.

None of these trials are suitable for the patient's profile, which includes depression and anxiety. The patient's age, medical conditions, and current medication (Escitalopram) do not align with the eligibility criteria or focus of any of the provided clinical trials.
2024-08-06 18:51:23,135 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:51:23,136 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:51:24,400 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:51:29,054 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT01671579) is for pediatric Crohn's disease, which doesn't match the patient's age (31 years old) or medical conditions.\n\n2. The second trial (NCT03758079) is for uremic pruritus in hemodialysis patients, which doesn't match the patient's medical conditions.\n\n3. The third trial (NCT01182779) is for chordoma of the skull base, which also doesn't match the patient's medical conditions.\n\nThe patient's profile indicates depression and anxiety as medical conditions, but none of the provided clinical trials are related to these conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 18:51:29,054 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT01671579) is for pediatric Crohn's disease, which doesn't match the patient's age (31 years old) or medical conditions.\n\n2. The second trial (NCT03758079) is for uremic pruritus in hemodialysis patients, which doesn't match the patient's medical conditions.\n\n3. The third trial (NCT01182779) is for chordoma of the skull base, which also doesn't match the patient's medical conditions.\n\nThe patient's profile indicates depression and anxiety as medical conditions, but none of the provided clinical trials are related to these conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 18:51:29,055 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT01671579) is for pediatric Crohn's disease, which doesn't match the patient's age (31 years old) or medical conditions.

2. The second trial (NCT03758079) is for uremic pruritus in hemodialysis patients, which doesn't match the patient's medical conditions.

3. The third trial (NCT01182779) is for chordoma of the skull base, which also doesn't match the patient's medical conditions.

The patient's profile indicates depression and anxiety as medical conditions, but none of the provided clinical trials are related to these conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 18:51:29,055 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:51:29,055 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:51:30,436 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 18:51:33,883 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the conditions targeted by the provided clinical trials (solar lentigines, cow milk allergy, and breast cancer).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that none of the provided clinical trials are suitable matches for the patient based on the given criteria and minimum compatibility score threshold.", type='text')]
2024-08-06 18:51:33,884 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the conditions targeted by the provided clinical trials (solar lentigines, cow milk allergy, and breast cancer).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that none of the provided clinical trials are suitable matches for the patient based on the given criteria and minimum compatibility score threshold.", type='text')]
2024-08-06 18:51:33,885 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the conditions targeted by the provided clinical trials (solar lentigines, cow milk allergy, and breast cancer).

Therefore, the output in the requested JSON format is an empty array:

[]

This indicates that none of the provided clinical trials are suitable matches for the patient based on the given criteria and minimum compatibility score threshold.
2024-08-06 18:51:33,885 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 18:51:33,886 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 18:51:35,261 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 19:34:02,467 - app - INFO - Initializing Flask app...
2024-08-06 19:34:02,471 - app - INFO - Configuring app...
2024-08-06 19:34:02,472 - app - INFO - Setting up CORS...
2024-08-06 19:34:02,474 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 19:34:02,914 - app - INFO - Initializing JWT manager...
2024-08-06 19:34:02,914 - app - INFO - Setting up rate limiting...
2024-08-06 19:34:02,916 - app - INFO - Setting up database...
2024-08-06 19:34:02,916 - app - INFO - Starting database setup...
2024-08-06 19:34:03,594 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 19:34:03,595 - app - INFO - Database setup completed successfully
2024-08-06 19:34:03,595 - app - INFO - Registering error handler...
2024-08-06 19:34:03,595 - app - INFO - Initializing CLI commands...
2024-08-06 19:34:03,596 - app - INFO - Registering routes...
2024-08-06 19:34:03,604 - app - INFO - Initializing services...
2024-08-06 19:34:03,618 - app - INFO - Initializing email service...
2024-08-06 19:34:03,619 - app - INFO - Setting up scheduler...
2024-08-06 19:34:03,630 - app - INFO - Initializing scheduler...
2024-08-06 19:34:03,631 - app.scheduler - INFO - Scheduler initialized
2024-08-06 19:34:03,632 - app - INFO - Application initialized successfully
2024-08-06 19:34:06,049 - app - INFO - Initializing Flask app...
2024-08-06 19:34:06,050 - app - INFO - Configuring app...
2024-08-06 19:34:06,051 - app - INFO - Setting up CORS...
2024-08-06 19:34:06,051 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 19:34:06,363 - app - INFO - Initializing JWT manager...
2024-08-06 19:34:06,363 - app - INFO - Setting up rate limiting...
2024-08-06 19:34:06,365 - app - INFO - Setting up database...
2024-08-06 19:34:06,365 - app - INFO - Starting database setup...
2024-08-06 19:34:06,972 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 19:34:06,972 - app - INFO - Database setup completed successfully
2024-08-06 19:34:06,973 - app - INFO - Registering error handler...
2024-08-06 19:34:06,974 - app - INFO - Initializing CLI commands...
2024-08-06 19:34:06,974 - app - INFO - Registering routes...
2024-08-06 19:34:06,990 - app - INFO - Initializing services...
2024-08-06 19:34:07,020 - app - INFO - Initializing email service...
2024-08-06 19:34:07,021 - app - INFO - Setting up scheduler...
2024-08-06 19:34:07,027 - app - INFO - Initializing scheduler...
2024-08-06 19:34:07,030 - app.scheduler - INFO - Scheduler initialized
2024-08-06 19:34:07,031 - app - INFO - Application initialized successfully
2024-08-06 19:34:32,239 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:34:32,845 - app.database - INFO - Database connection established successfully
2024-08-06 19:34:33,269 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:34:33,270 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:34:33,831 - app.database - INFO - Database connection established successfully
2024-08-06 19:34:33,876 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:34:33,885 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:34:34,459 - app.database - INFO - Database connection established successfully
2024-08-06 19:34:34,520 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:34:34,520 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:34:35,057 - app.database - INFO - Database connection established successfully
2024-08-06 19:34:35,100 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:34:35,112 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:34:35,679 - app.database - INFO - Database connection established successfully
2024-08-06 19:34:45,933 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:34:46,493 - app.database - INFO - Database connection established successfully
2024-08-06 19:34:46,556 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:34:47,162 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:06,137 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:06,808 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:07,127 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:35:07,128 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:07,645 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:07,684 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:35:07,699 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:08,232 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:08,288 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:35:08,288 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:08,815 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:08,879 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:35:08,924 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:09,550 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:22,809 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:23,353 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:23,688 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:35:23,689 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:24,233 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:24,287 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:35:24,298 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:24,866 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:24,954 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:35:24,955 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:25,552 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:25,599 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 19:35:25,612 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:26,203 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:35,368 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:36,076 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:36,372 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 19:35:36,373 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:36,924 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:36,964 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 19:35:36,979 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:37,552 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:37,602 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 19:35:37,602 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:38,214 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:38,264 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 19:35:38,273 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:38,823 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:39,662 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:40,461 - app.database - INFO - Database connection established successfully
2024-08-06 19:35:40,517 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:35:41,172 - app.database - INFO - Database connection established successfully
2024-08-06 19:55:39,138 - app.database - INFO - Attempting to establish database connection...
2024-08-06 19:55:39,810 - app.database - INFO - Database connection established successfully
2024-08-06 19:55:40,056 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 19:55:43,539 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the provided clinical trials, which focus on leukemia, erectile dysfunction, smoking, and alcohol abuse in adolescents.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 19:55:43,539 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the provided clinical trials, which focus on leukemia, erectile dysfunction, smoking, and alcohol abuse in adolescents.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 19:55:43,541 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the provided clinical trials, which focus on leukemia, erectile dysfunction, smoking, and alcohol abuse in adolescents.

Therefore, the output is an empty array:

[]
2024-08-06 19:55:43,542 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 19:55:43,542 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 19:55:44,781 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 19:55:49,378 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no matches include:\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The trial is focused on complex abdominal wall surgery, which is not mentioned in the patient's profile.\n3. The patient's age (31) and lack of mentioned abdominal issues make them unlikely to be a candidate for this specific study.", type='text')]
2024-08-06 19:55:49,379 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no matches include:\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The trial is focused on complex abdominal wall surgery, which is not mentioned in the patient's profile.\n3. The patient's age (31) and lack of mentioned abdominal issues make them unlikely to be a candidate for this specific study.", type='text')]
2024-08-06 19:55:49,379 - app.services.anthropic_service - INFO - Parsing response: Based on the given patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The reasons for no matches include:
1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The trial is focused on complex abdominal wall surgery, which is not mentioned in the patient's profile.
3. The patient's age (31) and lack of mentioned abdominal issues make them unlikely to be a candidate for this specific study.
2024-08-06 19:55:49,380 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 19:55:49,381 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 19:55:50,631 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 19:55:55,536 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:\n\n1. Heart disease risk factors and aging\n2. Diabetes prevention in Korean and South Asian Americans\n3. PTSD in military veterans\n4. Virtual reality for children with cerebral palsy\n\nThese trials do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 19:55:55,536 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:\n\n1. Heart disease risk factors and aging\n2. Diabetes prevention in Korean and South Asian Americans\n3. PTSD in military veterans\n4. Virtual reality for children with cerebral palsy\n\nThese trials do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 19:55:55,537 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:

1. Heart disease risk factors and aging
2. Diabetes prevention in Korean and South Asian Americans
3. PTSD in military veterans
4. Virtual reality for children with cerebral palsy

These trials do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.
2024-08-06 19:55:55,538 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 19:55:55,538 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 19:55:56,743 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 19:55:59,657 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. The provided clinical trials are focused on type 2 diabetes and non-small cell lung cancer, which are not relevant to the patient's current medical profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 19:55:59,660 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. The provided clinical trials are focused on type 2 diabetes and non-small cell lung cancer, which are not relevant to the patient's current medical profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 19:55:59,660 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. The provided clinical trials are focused on type 2 diabetes and non-small cell lung cancer, which are not relevant to the patient's current medical profile.

Therefore, the output is an empty array:

[]
2024-08-06 19:55:59,661 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 19:55:59,662 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 19:56:00,884 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:04:20,703 - app - INFO - Initializing Flask app...
2024-08-06 21:04:20,705 - app - INFO - Configuring app...
2024-08-06 21:04:20,705 - app - INFO - Setting up CORS...
2024-08-06 21:04:20,705 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:04:21,050 - app - INFO - Initializing JWT manager...
2024-08-06 21:04:21,050 - app - INFO - Setting up rate limiting...
2024-08-06 21:04:21,051 - app - INFO - Setting up database...
2024-08-06 21:04:21,052 - app - INFO - Starting database setup...
2024-08-06 21:04:21,788 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:04:21,788 - app - INFO - Database setup completed successfully
2024-08-06 21:04:21,788 - app - INFO - Registering error handler...
2024-08-06 21:04:21,788 - app - INFO - Initializing CLI commands...
2024-08-06 21:04:21,788 - app - INFO - Registering routes...
2024-08-06 21:04:21,795 - app - INFO - Initializing services...
2024-08-06 21:04:21,805 - app - INFO - Initializing email service...
2024-08-06 21:04:21,806 - app - INFO - Setting up scheduler...
2024-08-06 21:04:21,819 - app - INFO - Initializing scheduler...
2024-08-06 21:04:21,819 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:04:21,819 - app - INFO - Application initialized successfully
2024-08-06 21:04:23,345 - app - INFO - Initializing Flask app...
2024-08-06 21:04:23,346 - app - INFO - Configuring app...
2024-08-06 21:04:23,347 - app - INFO - Setting up CORS...
2024-08-06 21:04:23,347 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:04:23,587 - app - INFO - Initializing JWT manager...
2024-08-06 21:04:23,588 - app - INFO - Setting up rate limiting...
2024-08-06 21:04:23,589 - app - INFO - Setting up database...
2024-08-06 21:04:23,589 - app - INFO - Starting database setup...
2024-08-06 21:04:24,380 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:04:24,380 - app - INFO - Database setup completed successfully
2024-08-06 21:04:24,380 - app - INFO - Registering error handler...
2024-08-06 21:04:24,380 - app - INFO - Initializing CLI commands...
2024-08-06 21:04:24,381 - app - INFO - Registering routes...
2024-08-06 21:04:24,387 - app - INFO - Initializing services...
2024-08-06 21:04:24,399 - app - INFO - Initializing email service...
2024-08-06 21:04:24,399 - app - INFO - Setting up scheduler...
2024-08-06 21:04:24,404 - app - INFO - Initializing scheduler...
2024-08-06 21:04:24,404 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:04:24,405 - app - INFO - Application initialized successfully
2024-08-06 21:04:40,110 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:04:40,825 - app.database - INFO - Database connection established successfully
2024-08-06 21:04:41,113 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:04:41,113 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:04:41,782 - app.database - INFO - Database connection established successfully
2024-08-06 21:04:41,825 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:04:41,832 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: name 'sanitize_input' is not defined
2024-08-06 21:04:41,832 - app - ERROR - Error fetching recent matches: name 'sanitize_input' is not defined
2024-08-06 21:04:41,838 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:04:41,838 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:04:42,506 - app.database - INFO - Database connection established successfully
2024-08-06 21:04:42,550 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:04:42,560 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: name 'sanitize_input' is not defined
2024-08-06 21:04:42,560 - app - ERROR - Error fetching recent matches: name 'sanitize_input' is not defined
2024-08-06 21:04:44,378 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: name 'sanitize_input' is not defined
2024-08-06 21:04:44,402 - app.utils.error_handlers - ERROR - General error: name 'sanitize_input' is not defined
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 246, in get_recent_matches
    safe_user_id = sanitize_input(user_id)
NameError: name 'sanitize_input' is not defined

2024-08-06 21:04:44,413 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: name 'sanitize_input' is not defined
2024-08-06 21:04:44,419 - app.utils.error_handlers - ERROR - General error: name 'sanitize_input' is not defined
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 246, in get_recent_matches
    safe_user_id = sanitize_input(user_id)
NameError: name 'sanitize_input' is not defined

2024-08-06 21:06:59,559 - app - INFO - Initializing Flask app...
2024-08-06 21:06:59,560 - app - INFO - Configuring app...
2024-08-06 21:06:59,561 - app - INFO - Setting up CORS...
2024-08-06 21:06:59,561 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:06:59,750 - app - INFO - Initializing JWT manager...
2024-08-06 21:06:59,751 - app - INFO - Setting up rate limiting...
2024-08-06 21:06:59,751 - app - INFO - Setting up database...
2024-08-06 21:06:59,752 - app - INFO - Starting database setup...
2024-08-06 21:07:00,862 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:07:00,862 - app - INFO - Database setup completed successfully
2024-08-06 21:07:00,864 - app - INFO - Registering error handler...
2024-08-06 21:07:00,864 - app - INFO - Initializing CLI commands...
2024-08-06 21:07:00,864 - app - INFO - Registering routes...
2024-08-06 21:07:00,869 - app - INFO - Initializing services...
2024-08-06 21:07:00,878 - app - INFO - Initializing email service...
2024-08-06 21:07:00,879 - app - INFO - Setting up scheduler...
2024-08-06 21:07:00,883 - app - INFO - Initializing scheduler...
2024-08-06 21:07:00,884 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:07:00,884 - app - INFO - Application initialized successfully
2024-08-06 21:07:09,459 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:07:10,061 - app.database - INFO - Database connection established successfully
2024-08-06 21:07:10,354 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:07:10,355 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:07:11,361 - app.database - INFO - Database connection established successfully
2024-08-06 21:07:11,417 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:07:11,422 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:07:12,052 - app.database - INFO - Database connection established successfully
2024-08-06 21:07:12,097 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:07:12,107 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:07:12,108 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:07:12,696 - app.database - INFO - Database connection established successfully
2024-08-06 21:07:12,785 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:07:12,795 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:07:13,457 - app.database - INFO - Database connection established successfully
2024-08-06 21:07:13,510 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:07:18,506 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-06 21:07:18,507 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 247, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-06 21:07:18,513 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-06 21:07:18,513 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 247, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-06 21:07:28,876 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:07:29,539 - app.database - INFO - Database connection established successfully
2024-08-06 21:07:29,865 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:07:37,036 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is for adolescents and young adults (12-21 years), it's specifically for studying alcohol abuse. The patient is outside the age range (31 years old) and there's no mention of alcohol abuse in their profile.\n\nGiven that none of the trials match the patient's profile with a score of 70 or higher, the output is an empty array:\n\n[]\n\nThe patient's primary conditions (depression and anxiety) and current medication (Escitalopram) don't align with any of the provided clinical trials, which focus on very different health issues.", type='text')]
2024-08-06 21:07:37,036 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is for adolescents and young adults (12-21 years), it's specifically for studying alcohol abuse. The patient is outside the age range (31 years old) and there's no mention of alcohol abuse in their profile.\n\nGiven that none of the trials match the patient's profile with a score of 70 or higher, the output is an empty array:\n\n[]\n\nThe patient's primary conditions (depression and anxiety) and current medication (Escitalopram) don't align with any of the provided clinical trials, which focus on very different health issues.", type='text')]
2024-08-06 21:07:37,037 - app.services.anthropic_service - INFO - Parsing response: After reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: While this trial is for adolescents and young adults (12-21 years), it's specifically for studying alcohol abuse. The patient is outside the age range (31 years old) and there's no mention of alcohol abuse in their profile.

Given that none of the trials match the patient's profile with a score of 70 or higher, the output is an empty array:

[]

The patient's primary conditions (depression and anxiety) and current medication (Escitalopram) don't align with any of the provided clinical trials, which focus on very different health issues.
2024-08-06 21:07:37,037 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:07:37,038 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:07:38,414 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:09:30,760 - app - INFO - Initializing Flask app...
2024-08-06 21:09:30,762 - app - INFO - Configuring app...
2024-08-06 21:09:30,762 - app - INFO - Setting up CORS...
2024-08-06 21:09:30,762 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:09:30,928 - app - INFO - Initializing JWT manager...
2024-08-06 21:09:30,928 - app - INFO - Setting up rate limiting...
2024-08-06 21:09:30,929 - app - INFO - Setting up database...
2024-08-06 21:09:30,929 - app - INFO - Starting database setup...
2024-08-06 21:09:31,616 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:09:31,617 - app - INFO - Database setup completed successfully
2024-08-06 21:09:31,617 - app - INFO - Registering error handler...
2024-08-06 21:09:31,618 - app - INFO - Initializing CLI commands...
2024-08-06 21:09:31,618 - app - INFO - Registering routes...
2024-08-06 21:09:31,622 - app - INFO - Initializing services...
2024-08-06 21:09:31,632 - app - INFO - Initializing email service...
2024-08-06 21:09:31,632 - app - INFO - Setting up scheduler...
2024-08-06 21:09:31,635 - app - INFO - Initializing scheduler...
2024-08-06 21:09:31,636 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:09:31,637 - app - INFO - Application initialized successfully
2024-08-06 21:09:32,814 - app - INFO - Initializing Flask app...
2024-08-06 21:09:32,815 - app - INFO - Configuring app...
2024-08-06 21:09:32,815 - app - INFO - Setting up CORS...
2024-08-06 21:09:32,815 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:09:32,981 - app - INFO - Initializing JWT manager...
2024-08-06 21:09:32,982 - app - INFO - Setting up rate limiting...
2024-08-06 21:09:32,982 - app - INFO - Setting up database...
2024-08-06 21:09:32,983 - app - INFO - Starting database setup...
2024-08-06 21:09:33,573 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:09:33,574 - app - INFO - Database setup completed successfully
2024-08-06 21:09:33,574 - app - INFO - Registering error handler...
2024-08-06 21:09:33,575 - app - INFO - Initializing CLI commands...
2024-08-06 21:09:33,575 - app - INFO - Registering routes...
2024-08-06 21:09:33,582 - app - INFO - Initializing services...
2024-08-06 21:09:33,592 - app - INFO - Initializing email service...
2024-08-06 21:09:33,593 - app - INFO - Setting up scheduler...
2024-08-06 21:09:33,598 - app - INFO - Initializing scheduler...
2024-08-06 21:09:33,598 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:09:33,598 - app - INFO - Application initialized successfully
2024-08-06 21:09:44,658 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:09:45,323 - app.database - INFO - Database connection established successfully
2024-08-06 21:09:45,648 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:09:45,648 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:09:46,347 - app.database - INFO - Database connection established successfully
2024-08-06 21:09:46,391 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:09:46,396 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:09:47,127 - app.database - INFO - Database connection established successfully
2024-08-06 21:09:47,191 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:09:47,201 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:09:47,201 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:09:47,864 - app.database - INFO - Database connection established successfully
2024-08-06 21:09:47,926 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:09:47,932 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:09:48,608 - app.database - INFO - Database connection established successfully
2024-08-06 21:09:48,698 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:10:15,230 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-06 21:10:15,231 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 247, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-06 21:10:15,239 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-06 21:10:15,240 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 247, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-06 21:10:16,813 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:10:17,644 - app.database - INFO - Database connection established successfully
2024-08-06 21:10:17,937 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:10:23,457 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. None of the provided clinical trials are related to depression, anxiety, or mental health conditions.\n3. The trials provided focus on leukemia, erectile dysfunction/benign prostatic hyperplasia, smoking, and alcohol abuse in adolescents.\n4. The patient's age, gender, and medical conditions do not match the eligibility criteria for any of the given trials.\n\nAs a result, there are no trials that can be considered suitable matches with a score of 70 or higher for this patient based on the given information.", type='text')]
2024-08-06 21:10:23,457 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. None of the provided clinical trials are related to depression, anxiety, or mental health conditions.\n3. The trials provided focus on leukemia, erectile dysfunction/benign prostatic hyperplasia, smoking, and alcohol abuse in adolescents.\n4. The patient's age, gender, and medical conditions do not match the eligibility criteria for any of the given trials.\n\nAs a result, there are no trials that can be considered suitable matches with a score of 70 or higher for this patient based on the given information.", type='text')]
2024-08-06 21:10:23,459 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the clinical trial data provided, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. None of the provided clinical trials are related to depression, anxiety, or mental health conditions.
3. The trials provided focus on leukemia, erectile dysfunction/benign prostatic hyperplasia, smoking, and alcohol abuse in adolescents.
4. The patient's age, gender, and medical conditions do not match the eligibility criteria for any of the given trials.

As a result, there are no trials that can be considered suitable matches with a score of 70 or higher for this patient based on the given information.
2024-08-06 21:10:23,459 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:10:23,460 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:14:25,459 - app - INFO - Initializing Flask app...
2024-08-06 21:14:25,460 - app - INFO - Configuring app...
2024-08-06 21:14:25,460 - app - INFO - Setting up CORS...
2024-08-06 21:14:25,460 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:14:25,628 - app - INFO - Initializing JWT manager...
2024-08-06 21:14:25,628 - app - INFO - Setting up rate limiting...
2024-08-06 21:14:25,629 - app - INFO - Setting up database...
2024-08-06 21:14:25,630 - app - INFO - Starting database setup...
2024-08-06 21:14:26,363 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:14:26,363 - app - INFO - Database setup completed successfully
2024-08-06 21:14:26,363 - app - INFO - Registering error handler...
2024-08-06 21:14:26,364 - app - INFO - Initializing CLI commands...
2024-08-06 21:14:26,364 - app - INFO - Registering routes...
2024-08-06 21:14:26,370 - app - INFO - Initializing services...
2024-08-06 21:14:26,377 - app - INFO - Initializing email service...
2024-08-06 21:14:26,378 - app - INFO - Setting up scheduler...
2024-08-06 21:14:26,382 - app - INFO - Initializing scheduler...
2024-08-06 21:14:26,382 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:14:26,382 - app - INFO - Application initialized successfully
2024-08-06 21:14:27,937 - app - INFO - Initializing Flask app...
2024-08-06 21:14:27,939 - app - INFO - Configuring app...
2024-08-06 21:14:27,939 - app - INFO - Setting up CORS...
2024-08-06 21:14:27,939 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:14:28,172 - app - INFO - Initializing JWT manager...
2024-08-06 21:14:28,172 - app - INFO - Setting up rate limiting...
2024-08-06 21:14:28,173 - app - INFO - Setting up database...
2024-08-06 21:14:28,173 - app - INFO - Starting database setup...
2024-08-06 21:14:28,843 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:14:28,844 - app - INFO - Database setup completed successfully
2024-08-06 21:14:28,844 - app - INFO - Registering error handler...
2024-08-06 21:14:28,844 - app - INFO - Initializing CLI commands...
2024-08-06 21:14:28,844 - app - INFO - Registering routes...
2024-08-06 21:14:28,851 - app - INFO - Initializing services...
2024-08-06 21:14:28,859 - app - INFO - Initializing email service...
2024-08-06 21:14:28,860 - app - INFO - Setting up scheduler...
2024-08-06 21:14:28,863 - app - INFO - Initializing scheduler...
2024-08-06 21:14:28,864 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:14:28,864 - app - INFO - Application initialized successfully
2024-08-06 21:14:36,110 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:14:39,586 - app.database - INFO - Database connection established successfully
2024-08-06 21:14:39,917 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:14:39,918 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:14:40,643 - app.database - INFO - Database connection established successfully
2024-08-06 21:14:40,695 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:14:40,700 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:14:41,280 - app.database - INFO - Database connection established successfully
2024-08-06 21:14:41,322 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:14:41,330 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:14:41,331 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:14:41,978 - app.database - INFO - Database connection established successfully
2024-08-06 21:14:42,049 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:14:42,056 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:14:43,003 - app.database - INFO - Database connection established successfully
2024-08-06 21:14:43,047 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:14:50,284 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-06 21:14:50,285 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 247, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-06 21:14:50,293 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-06 21:14:50,294 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 55, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 247, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-06 21:15:59,559 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:16:01,040 - app.database - INFO - Database connection established successfully
2024-08-06 21:16:01,302 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:16:07,245 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the clinical trial data provided, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in any of the provided clinical trials.\n\n2. The patient's age (31 years old) and gender (male) do not specifically match the eligibility criteria of the given trials.\n\n3. The patient's current medication (Escitalopram) is not relevant to any of the trials presented.\n\n4. The clinical trials provided focus on conditions such as chronic myelogenous leukemia, erectile dysfunction, benign prostatic hyperplasia, smoking, and alcohol abuse, which are not mentioned in the patient's profile.\n\n5. None of the trials specifically target mental health conditions like depression or anxiety, which are the patient's primary medical conditions.\n\nGiven these factors, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.", type='text')]
2024-08-06 21:16:07,246 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the clinical trial data provided, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in any of the provided clinical trials.\n\n2. The patient's age (31 years old) and gender (male) do not specifically match the eligibility criteria of the given trials.\n\n3. The patient's current medication (Escitalopram) is not relevant to any of the trials presented.\n\n4. The clinical trials provided focus on conditions such as chronic myelogenous leukemia, erectile dysfunction, benign prostatic hyperplasia, smoking, and alcohol abuse, which are not mentioned in the patient's profile.\n\n5. None of the trials specifically target mental health conditions like depression or anxiety, which are the patient's primary medical conditions.\n\nGiven these factors, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.", type='text')]
2024-08-06 21:16:07,249 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the clinical trial data provided, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in any of the provided clinical trials.

2. The patient's age (31 years old) and gender (male) do not specifically match the eligibility criteria of the given trials.

3. The patient's current medication (Escitalopram) is not relevant to any of the trials presented.

4. The clinical trials provided focus on conditions such as chronic myelogenous leukemia, erectile dysfunction, benign prostatic hyperplasia, smoking, and alcohol abuse, which are not mentioned in the patient's profile.

5. None of the trials specifically target mental health conditions like depression or anxiety, which are the patient's primary medical conditions.

Given these factors, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.
2024-08-06 21:16:07,250 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:16:07,250 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:16:08,530 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:16:15,687 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the clinical trial presented, which is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThe reasons for this lack of compatibility include:\n\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31) is much younger than the typical population affected by sarcopenia, which is more common in older adults.\n3. There's no indication in the patient's profile of any abdominal surgery history or complex abdominal wall issues, which are key focuses of the trial.\n4. The trial is specifically looking at CT scans for patients with large incisional hernias, which is not mentioned in the patient's profile.\n\nGiven these factors, the compatibility score would be well below 70, resulting in no match for this patient with the provided clinical trial.", type='text')]
2024-08-06 21:16:15,687 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the clinical trial presented, which is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThe reasons for this lack of compatibility include:\n\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31) is much younger than the typical population affected by sarcopenia, which is more common in older adults.\n3. There's no indication in the patient's profile of any abdominal surgery history or complex abdominal wall issues, which are key focuses of the trial.\n4. The trial is specifically looking at CT scans for patients with large incisional hernias, which is not mentioned in the patient's profile.\n\nGiven these factors, the compatibility score would be well below 70, resulting in no match for this patient with the provided clinical trial.", type='text')]
2024-08-06 21:16:15,687 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the clinical trial presented, which is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output in the requested JSON format is an empty array:

[]

The reasons for this lack of compatibility include:

1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (31) is much younger than the typical population affected by sarcopenia, which is more common in older adults.
3. There's no indication in the patient's profile of any abdominal surgery history or complex abdominal wall issues, which are key focuses of the trial.
4. The trial is specifically looking at CT scans for patients with large incisional hernias, which is not mentioned in the patient's profile.

Given these factors, the compatibility score would be well below 70, resulting in no match for this patient with the provided clinical trial.
2024-08-06 21:16:15,688 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:16:15,688 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:16:16,951 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:16:23,195 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I couldn't find any trials that match the patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials focus on:\n   - Heart disease and cardiovascular risk factors (NCT00626379)\n   - Diabetes prevention among Korean and South Asian Americans (NCT03530579)\n   - PTSD in military veterans (NCT05900479)\n   - Virtual reality for children with cerebral palsy (NCT04679779)\n\nNone of these trials specifically target depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient doesn't meet the specific criteria for any of these studies (e.g., he's not a veteran with PTSD, not a child with cerebral palsy, not at risk for diabetes, and doesn't have a known heart condition).\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.", type='text')]
2024-08-06 21:16:23,195 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I couldn't find any trials that match the patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials focus on:\n   - Heart disease and cardiovascular risk factors (NCT00626379)\n   - Diabetes prevention among Korean and South Asian Americans (NCT03530579)\n   - PTSD in military veterans (NCT05900479)\n   - Virtual reality for children with cerebral palsy (NCT04679779)\n\nNone of these trials specifically target depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient doesn't meet the specific criteria for any of these studies (e.g., he's not a veteran with PTSD, not a child with cerebral palsy, not at risk for diabetes, and doesn't have a known heart condition).\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.", type='text')]
2024-08-06 21:16:23,195 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I couldn't find any trials that match the patient with a compatibility score of 70 or higher. Here's why:

1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.

2. The available clinical trials focus on:
   - Heart disease and cardiovascular risk factors (NCT00626379)
   - Diabetes prevention among Korean and South Asian Americans (NCT03530579)
   - PTSD in military veterans (NCT05900479)
   - Virtual reality for children with cerebral palsy (NCT04679779)

None of these trials specifically target depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient doesn't meet the specific criteria for any of these studies (e.g., he's not a veteran with PTSD, not a child with cerebral palsy, not at risk for diabetes, and doesn't have a known heart condition).

Therefore, the output in the requested JSON format would be an empty array:

[]

This indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.
2024-08-06 21:16:23,195 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:16:23,196 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:16:24,496 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:21:23,929 - app - INFO - Initializing Flask app...
2024-08-06 21:21:23,930 - app - INFO - Configuring app...
2024-08-06 21:21:23,931 - app - INFO - Setting up CORS...
2024-08-06 21:21:23,931 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:21:24,103 - app - INFO - Initializing JWT manager...
2024-08-06 21:21:24,103 - app - INFO - Setting up rate limiting...
2024-08-06 21:21:24,105 - app - INFO - Setting up database...
2024-08-06 21:21:24,105 - app - INFO - Starting database setup...
2024-08-06 21:21:24,946 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:21:24,946 - app - INFO - Database setup completed successfully
2024-08-06 21:21:24,946 - app - INFO - Registering error handler...
2024-08-06 21:21:24,946 - app - INFO - Initializing CLI commands...
2024-08-06 21:21:24,946 - app - INFO - Registering routes...
2024-08-06 21:21:24,952 - app - INFO - Initializing services...
2024-08-06 21:21:24,962 - app - INFO - Initializing email service...
2024-08-06 21:21:24,962 - app - INFO - Setting up scheduler...
2024-08-06 21:21:24,965 - app - INFO - Initializing scheduler...
2024-08-06 21:21:24,965 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:21:24,966 - app - INFO - Application initialized successfully
2024-08-06 21:21:26,556 - app - INFO - Initializing Flask app...
2024-08-06 21:21:26,557 - app - INFO - Configuring app...
2024-08-06 21:21:26,558 - app - INFO - Setting up CORS...
2024-08-06 21:21:26,558 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:21:26,741 - app - INFO - Initializing JWT manager...
2024-08-06 21:21:26,741 - app - INFO - Setting up rate limiting...
2024-08-06 21:21:26,742 - app - INFO - Setting up database...
2024-08-06 21:21:26,743 - app - INFO - Starting database setup...
2024-08-06 21:21:27,471 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:21:27,471 - app - INFO - Database setup completed successfully
2024-08-06 21:21:27,471 - app - INFO - Registering error handler...
2024-08-06 21:21:27,471 - app - INFO - Initializing CLI commands...
2024-08-06 21:21:27,472 - app - INFO - Registering routes...
2024-08-06 21:21:27,478 - app - INFO - Initializing services...
2024-08-06 21:21:27,487 - app - INFO - Initializing email service...
2024-08-06 21:21:27,488 - app - INFO - Setting up scheduler...
2024-08-06 21:21:27,492 - app - INFO - Initializing scheduler...
2024-08-06 21:21:27,493 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:21:27,493 - app - INFO - Application initialized successfully
2024-08-06 21:21:58,195 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:21:58,859 - app.database - INFO - Database connection established successfully
2024-08-06 21:21:59,078 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:21:59,078 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:21:59,848 - app.database - INFO - Database connection established successfully
2024-08-06 21:21:59,892 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:21:59,896 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:22:00,704 - app.database - INFO - Database connection established successfully
2024-08-06 21:22:00,753 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:22:00,758 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:22:00,758 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:22:01,407 - app.database - INFO - Database connection established successfully
2024-08-06 21:22:01,453 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:22:01,458 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:22:02,999 - app.database - INFO - Database connection established successfully
2024-08-06 21:22:03,047 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:22:03,058 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:22:03,719 - app.database - INFO - Database connection established successfully
2024-08-06 21:22:03,805 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:22:03,810 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:22:04,569 - app.database - INFO - Database connection established successfully
2024-08-06 21:22:04,616 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:22:14,961 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:22:14,962 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:22:15,673 - app.database - INFO - Database connection established successfully
2024-08-06 21:22:15,744 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:22:15,750 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:22:16,387 - app.database - INFO - Database connection established successfully
2024-08-06 21:22:16,433 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:22:16,439 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:22:16,440 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:22:17,048 - app.database - INFO - Database connection established successfully
2024-08-06 21:22:17,112 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:22:17,118 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:22:18,016 - app.database - INFO - Database connection established successfully
2024-08-06 21:22:18,088 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:23:47,263 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:23:48,479 - app.database - INFO - Database connection established successfully
2024-08-06 21:23:48,709 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 21:23:48,709 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:23:49,383 - app.database - INFO - Database connection established successfully
2024-08-06 21:23:49,459 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 21:23:49,464 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:23:50,289 - app.database - INFO - Database connection established successfully
2024-08-06 21:23:50,361 - app.services.trial_matching_service - INFO - Retrieved 5 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:23:50,366 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 21:23:50,367 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:23:51,037 - app.database - INFO - Database connection established successfully
2024-08-06 21:23:51,104 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 21:23:51,109 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:23:51,783 - app.database - INFO - Database connection established successfully
2024-08-06 21:23:51,827 - app.services.trial_matching_service - INFO - Retrieved 5 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:23:58,403 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:23:59,017 - app.database - INFO - Database connection established successfully
2024-08-06 21:23:59,131 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:23:59,137 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:23:59,922 - app.database - INFO - Database connection established successfully
2024-08-06 21:24:00,050 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:24:32,278 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:24:33,041 - app.database - INFO - Database connection established successfully
2024-08-06 21:24:33,462 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:24:42,734 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 85,\n        "reasons": [\n            "Patient has leukemia, which matches the trial\'s condition",\n            "Trial is specifically for leukemia patients",\n            "Patient\'s age (24 years old) is suitable for adult trials",\n            "Trial is completed, which may limit actual enrollment, but the match is still relevant"\n        ]\n    }\n]\n\nExplanation:\n1. The trial NCT00072579 is the only one that closely matches the patient\'s profile.\n2. The patient has leukemia, which directly corresponds to the trial\'s focus on chronic myelogenous leukemia.\n3. The patient\'s age (24 years old, born in 1999) makes them eligible for adult trials.\n4. While the trial status is "COMPLETED", which means the patient can\'t actually enroll, the match is still relevant for demonstrating compatibility.\n5. The other trials in the list do not match the patient\'s condition (leukemia) and thus have very low compatibility scores (below 70).\n\nNote: The compatibility score is not 100 because the trial specifically targets chronic myelogenous leukemia, and we don\'t have information on the exact type of leukemia the patient has. Additionally, there are specific eligibility criteria that we can\'t confirm based on the limited patient information provided.', type='text')]
2024-08-06 21:24:42,735 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 85,\n        "reasons": [\n            "Patient has leukemia, which matches the trial\'s condition",\n            "Trial is specifically for leukemia patients",\n            "Patient\'s age (24 years old) is suitable for adult trials",\n            "Trial is completed, which may limit actual enrollment, but the match is still relevant"\n        ]\n    }\n]\n\nExplanation:\n1. The trial NCT00072579 is the only one that closely matches the patient\'s profile.\n2. The patient has leukemia, which directly corresponds to the trial\'s focus on chronic myelogenous leukemia.\n3. The patient\'s age (24 years old, born in 1999) makes them eligible for adult trials.\n4. While the trial status is "COMPLETED", which means the patient can\'t actually enroll, the match is still relevant for demonstrating compatibility.\n5. The other trials in the list do not match the patient\'s condition (leukemia) and thus have very low compatibility scores (below 70).\n\nNote: The compatibility score is not 100 because the trial specifically targets chronic myelogenous leukemia, and we don\'t have information on the exact type of leukemia the patient has. Additionally, there are specific eligibility criteria that we can\'t confirm based on the limited patient information provided.', type='text')]
2024-08-06 21:24:42,736 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT00072579",
        "compatibility_score": 85,
        "reasons": [
            "Patient has leukemia, which matches the trial's condition",
            "Trial is specifically for leukemia patients",
            "Patient's age (24 years old) is suitable for adult trials",
            "Trial is completed, which may limit actual enrollment, but the match is still relevant"
        ]
    }
]

Explanation:
1. The trial NCT00072579 is the only one that closely matches the patient's profile.
2. The patient has leukemia, which directly corresponds to the trial's focus on chronic myelogenous leukemia.
3. The patient's age (24 years old, born in 1999) makes them eligible for adult trials.
4. While the trial status is "COMPLETED", which means the patient can't actually enroll, the match is still relevant for demonstrating compatibility.
5. The other trials in the list do not match the patient's condition (leukemia) and thus have very low compatibility scores (below 70).

Note: The compatibility score is not 100 because the trial specifically targets chronic myelogenous leukemia, and we don't have information on the exact type of leukemia the patient has. Additionally, there are specific eligibility criteria that we can't confirm based on the limited patient information provided.
2024-08-06 21:24:42,736 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-06 21:24:42,814 - app.services.trial_matching_service - INFO - Trial NCT00072579 already matched for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:24:42,815 - app.services.trial_matching_service - INFO - Emitted 0 trial matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:24:42,815 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:24:44,241 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:24:49,734 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a young male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia and sarcopenic obesity in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no match include:\n1. The patient's primary condition (leukemia) is not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (23 years old) is likely too young for a study focusing on conditions often associated with older adults.\n3. The trial's focus on complex abdominal wall surgery is not relevant to the patient's current medical profile.\n4. The patient's medications are specific to leukemia treatment and are not related to the trial's area of study.", type='text')]
2024-08-06 21:24:49,734 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a young male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia and sarcopenic obesity in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no match include:\n1. The patient's primary condition (leukemia) is not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (23 years old) is likely too young for a study focusing on conditions often associated with older adults.\n3. The trial's focus on complex abdominal wall surgery is not relevant to the patient's current medical profile.\n4. The patient's medications are specific to leukemia treatment and are not related to the trial's area of study.", type='text')]
2024-08-06 21:24:49,734 - app.services.anthropic_service - INFO - Parsing response: Based on the provided patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a young male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia and sarcopenic obesity in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The reasons for no match include:
1. The patient's primary condition (leukemia) is not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (23 years old) is likely too young for a study focusing on conditions often associated with older adults.
3. The trial's focus on complex abdominal wall surgery is not relevant to the patient's current medical profile.
4. The patient's medications are specific to leukemia treatment and are not related to the trial's area of study.
2024-08-06 21:24:49,735 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:24:49,735 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:24:51,099 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:24:56,331 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically focused on leukemia or related blood disorders. The trials cover heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children. These conditions and target populations do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 21:24:56,331 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically focused on leukemia or related blood disorders. The trials cover heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children. These conditions and target populations do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 21:24:56,331 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically focused on leukemia or related blood disorders. The trials cover heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children. These conditions and target populations do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials.
2024-08-06 21:24:56,331 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:24:56,331 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:24:57,339 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: cannot schedule new futures after shutdown
2024-08-06 21:27:27,424 - app - INFO - Initializing Flask app...
2024-08-06 21:27:27,425 - app - INFO - Configuring app...
2024-08-06 21:27:27,425 - app - INFO - Setting up CORS...
2024-08-06 21:27:27,426 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:27:27,595 - app - INFO - Initializing JWT manager...
2024-08-06 21:27:27,596 - app - INFO - Setting up rate limiting...
2024-08-06 21:27:27,596 - app - INFO - Setting up database...
2024-08-06 21:27:27,597 - app - INFO - Starting database setup...
2024-08-06 21:27:28,760 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:27:28,760 - app - INFO - Database setup completed successfully
2024-08-06 21:27:28,760 - app - INFO - Registering error handler...
2024-08-06 21:27:28,761 - app - INFO - Initializing CLI commands...
2024-08-06 21:27:28,761 - app - INFO - Registering routes...
2024-08-06 21:27:28,767 - app - INFO - Initializing services...
2024-08-06 21:27:28,776 - app - INFO - Initializing email service...
2024-08-06 21:27:28,777 - app - INFO - Setting up scheduler...
2024-08-06 21:27:28,781 - app - INFO - Initializing scheduler...
2024-08-06 21:27:28,782 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:27:28,782 - app - INFO - Application initialized successfully
2024-08-06 21:27:30,349 - app - INFO - Initializing Flask app...
2024-08-06 21:27:30,350 - app - INFO - Configuring app...
2024-08-06 21:27:30,350 - app - INFO - Setting up CORS...
2024-08-06 21:27:30,351 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:27:30,575 - app - INFO - Initializing JWT manager...
2024-08-06 21:27:30,575 - app - INFO - Setting up rate limiting...
2024-08-06 21:27:30,576 - app - INFO - Setting up database...
2024-08-06 21:27:30,577 - app - INFO - Starting database setup...
2024-08-06 21:27:31,234 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:27:31,234 - app - INFO - Database setup completed successfully
2024-08-06 21:27:31,235 - app - INFO - Registering error handler...
2024-08-06 21:27:31,235 - app - INFO - Initializing CLI commands...
2024-08-06 21:27:31,235 - app - INFO - Registering routes...
2024-08-06 21:27:31,242 - app - INFO - Initializing services...
2024-08-06 21:27:31,252 - app - INFO - Initializing email service...
2024-08-06 21:27:31,252 - app - INFO - Setting up scheduler...
2024-08-06 21:27:31,255 - app - INFO - Initializing scheduler...
2024-08-06 21:27:31,255 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:27:31,256 - app - INFO - Application initialized successfully
2024-08-06 21:27:38,432 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:27:39,121 - app.database - INFO - Database connection established successfully
2024-08-06 21:27:39,402 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:27:39,403 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:27:40,044 - app.database - INFO - Database connection established successfully
2024-08-06 21:27:40,094 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:27:40,101 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:27:40,836 - app.database - INFO - Database connection established successfully
2024-08-06 21:27:40,916 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:27:40,922 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:27:40,923 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:27:41,629 - app.database - INFO - Database connection established successfully
2024-08-06 21:27:41,672 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:27:41,677 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:27:42,345 - app.database - INFO - Database connection established successfully
2024-08-06 21:27:42,401 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:27:44,807 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:27:45,505 - app.database - INFO - Database connection established successfully
2024-08-06 21:27:45,565 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:27:45,572 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:27:46,304 - app.database - INFO - Database connection established successfully
2024-08-06 21:27:46,346 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:27:46,523 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:27:47,264 - app.database - INFO - Database connection established successfully
2024-08-06 21:27:47,572 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:27:54,562 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in the provided clinical trials (leukemia, prostatic hyperplasia, impotence, and alcohol abuse).\n\n2. The patient's age (31 years old) and medical history do not match the eligibility criteria for the provided trials, which are focused on different age groups or specific medical conditions.\n\n3. The patient's current medication (Escitalopram) is not relevant to any of the treatments being studied in these trials.\n\n4. None of the trials are specifically targeting mental health conditions like depression or anxiety, which are the patient's primary medical concerns.\n\nFor this patient to find suitable clinical trials, it would be beneficial to search for studies specifically related to depression, anxiety, or mental health treatments that align with their age group and current medical status.", type='text')]
2024-08-06 21:27:54,563 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in the provided clinical trials (leukemia, prostatic hyperplasia, impotence, and alcohol abuse).\n\n2. The patient's age (31 years old) and medical history do not match the eligibility criteria for the provided trials, which are focused on different age groups or specific medical conditions.\n\n3. The patient's current medication (Escitalopram) is not relevant to any of the treatments being studied in these trials.\n\n4. None of the trials are specifically targeting mental health conditions like depression or anxiety, which are the patient's primary medical concerns.\n\nFor this patient to find suitable clinical trials, it would be beneficial to search for studies specifically related to depression, anxiety, or mental health treatments that align with their age group and current medical status.", type='text')]
2024-08-06 21:27:54,564 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in the provided clinical trials (leukemia, prostatic hyperplasia, impotence, and alcohol abuse).

2. The patient's age (31 years old) and medical history do not match the eligibility criteria for the provided trials, which are focused on different age groups or specific medical conditions.

3. The patient's current medication (Escitalopram) is not relevant to any of the treatments being studied in these trials.

4. None of the trials are specifically targeting mental health conditions like depression or anxiety, which are the patient's primary medical concerns.

For this patient to find suitable clinical trials, it would be beneficial to search for studies specifically related to depression, anxiety, or mental health treatments that align with their age group and current medical status.
2024-08-06 21:27:54,564 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:27:54,564 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:27:55,779 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:31:11,957 - app - INFO - Initializing Flask app...
2024-08-06 21:31:11,958 - app - INFO - Configuring app...
2024-08-06 21:31:11,958 - app - INFO - Setting up CORS...
2024-08-06 21:31:11,958 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:31:12,144 - app - INFO - Initializing JWT manager...
2024-08-06 21:31:12,145 - app - INFO - Setting up rate limiting...
2024-08-06 21:31:12,145 - app - INFO - Setting up database...
2024-08-06 21:31:12,146 - app - INFO - Starting database setup...
2024-08-06 21:31:13,793 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:31:13,793 - app - INFO - Database setup completed successfully
2024-08-06 21:31:13,794 - app - INFO - Registering error handler...
2024-08-06 21:31:13,794 - app - INFO - Initializing CLI commands...
2024-08-06 21:31:13,794 - app - INFO - Registering routes...
2024-08-06 21:31:13,802 - app - INFO - Initializing services...
2024-08-06 21:31:13,815 - app - INFO - Initializing email service...
2024-08-06 21:31:13,816 - app - INFO - Setting up scheduler...
2024-08-06 21:31:13,820 - app - INFO - Initializing scheduler...
2024-08-06 21:31:13,821 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:31:13,821 - app - INFO - Application initialized successfully
2024-08-06 21:31:15,304 - app - INFO - Initializing Flask app...
2024-08-06 21:31:15,306 - app - INFO - Configuring app...
2024-08-06 21:31:15,306 - app - INFO - Setting up CORS...
2024-08-06 21:31:15,306 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:31:15,518 - app - INFO - Initializing JWT manager...
2024-08-06 21:31:15,518 - app - INFO - Setting up rate limiting...
2024-08-06 21:31:15,519 - app - INFO - Setting up database...
2024-08-06 21:31:15,520 - app - INFO - Starting database setup...
2024-08-06 21:31:16,094 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:31:16,094 - app - INFO - Database setup completed successfully
2024-08-06 21:31:16,094 - app - INFO - Registering error handler...
2024-08-06 21:31:16,095 - app - INFO - Initializing CLI commands...
2024-08-06 21:31:16,095 - app - INFO - Registering routes...
2024-08-06 21:31:16,104 - app - INFO - Initializing services...
2024-08-06 21:31:16,113 - app - INFO - Initializing email service...
2024-08-06 21:31:16,113 - app - INFO - Setting up scheduler...
2024-08-06 21:31:16,117 - app - INFO - Initializing scheduler...
2024-08-06 21:31:16,117 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:31:16,117 - app - INFO - Application initialized successfully
2024-08-06 21:31:26,584 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:31:27,513 - app.database - INFO - Database connection established successfully
2024-08-06 21:31:27,860 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:31:27,860 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:31:28,459 - app.database - INFO - Database connection established successfully
2024-08-06 21:31:28,503 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:31:28,509 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:31:29,161 - app.database - INFO - Database connection established successfully
2024-08-06 21:31:29,201 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:31:29,209 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:31:29,209 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:31:29,896 - app.database - INFO - Database connection established successfully
2024-08-06 21:31:29,937 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:31:29,944 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:31:30,810 - app.database - INFO - Database connection established successfully
2024-08-06 21:31:30,857 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:31:32,875 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:31:32,876 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:31:33,467 - app.database - INFO - Database connection established successfully
2024-08-06 21:31:33,515 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:31:33,522 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:31:33,523 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:31:34,136 - app.database - INFO - Database connection established successfully
2024-08-06 21:31:34,196 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:31:35,669 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:31:36,266 - app.database - INFO - Database connection established successfully
2024-08-06 21:31:36,308 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:31:36,316 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:31:36,939 - app.database - INFO - Database connection established successfully
2024-08-06 21:31:36,992 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:31:37,422 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:31:38,068 - app.database - INFO - Database connection established successfully
2024-08-06 21:31:38,364 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:31:41,131 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the conditions and eligibility criteria of the provided clinical trials. The trials focus on leukemia, erectile dysfunction, smoking, and alcohol abuse, which are not relevant to the patient's reported conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 21:31:41,132 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the conditions and eligibility criteria of the provided clinical trials. The trials focus on leukemia, erectile dysfunction, smoking, and alcohol abuse, which are not relevant to the patient's reported conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 21:31:41,132 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the conditions and eligibility criteria of the provided clinical trials. The trials focus on leukemia, erectile dysfunction, smoking, and alcohol abuse, which are not relevant to the patient's reported conditions.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 21:31:41,133 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:31:41,133 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:31:42,318 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:38:07,277 - app - INFO - Initializing Flask app...
2024-08-06 21:38:07,278 - app - INFO - Configuring app...
2024-08-06 21:38:07,278 - app - INFO - Setting up CORS...
2024-08-06 21:38:07,279 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:38:07,444 - app - INFO - Initializing JWT manager...
2024-08-06 21:38:07,445 - app - INFO - Setting up rate limiting...
2024-08-06 21:38:07,445 - app - INFO - Setting up database...
2024-08-06 21:38:07,446 - app - INFO - Starting database setup...
2024-08-06 21:38:08,070 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:38:08,072 - app - INFO - Database setup completed successfully
2024-08-06 21:38:08,072 - app - INFO - Registering error handler...
2024-08-06 21:38:08,072 - app - INFO - Initializing CLI commands...
2024-08-06 21:38:08,072 - app - INFO - Registering routes...
2024-08-06 21:38:08,087 - app - INFO - Initializing services...
2024-08-06 21:38:08,095 - app - INFO - Initializing email service...
2024-08-06 21:38:08,095 - app - INFO - Setting up scheduler...
2024-08-06 21:38:08,098 - app - INFO - Initializing scheduler...
2024-08-06 21:38:08,099 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:38:08,099 - app - INFO - Application initialized successfully
2024-08-06 21:38:09,564 - app - INFO - Initializing Flask app...
2024-08-06 21:38:09,566 - app - INFO - Configuring app...
2024-08-06 21:38:09,567 - app - INFO - Setting up CORS...
2024-08-06 21:38:09,567 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:38:09,818 - app - INFO - Initializing JWT manager...
2024-08-06 21:38:09,819 - app - INFO - Setting up rate limiting...
2024-08-06 21:38:09,819 - app - INFO - Setting up database...
2024-08-06 21:38:09,820 - app - INFO - Starting database setup...
2024-08-06 21:38:10,431 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:38:10,431 - app - INFO - Database setup completed successfully
2024-08-06 21:38:10,432 - app - INFO - Registering error handler...
2024-08-06 21:38:10,432 - app - INFO - Initializing CLI commands...
2024-08-06 21:38:10,432 - app - INFO - Registering routes...
2024-08-06 21:38:10,437 - app - INFO - Initializing services...
2024-08-06 21:38:10,446 - app - INFO - Initializing email service...
2024-08-06 21:38:10,447 - app - INFO - Setting up scheduler...
2024-08-06 21:38:10,450 - app - INFO - Initializing scheduler...
2024-08-06 21:38:10,450 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:38:10,450 - app - INFO - Application initialized successfully
2024-08-06 21:38:20,827 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:38:21,444 - app.database - INFO - Database connection established successfully
2024-08-06 21:38:21,722 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:38:21,723 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:38:22,422 - app.database - INFO - Database connection established successfully
2024-08-06 21:38:22,469 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:38:22,474 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:38:23,227 - app.database - INFO - Database connection established successfully
2024-08-06 21:38:23,337 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:38:23,342 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:38:23,342 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:38:24,569 - app.database - INFO - Database connection established successfully
2024-08-06 21:38:24,638 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:38:24,642 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:38:25,361 - app.database - INFO - Database connection established successfully
2024-08-06 21:38:25,403 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:38:25,417 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:38:26,177 - app.database - INFO - Database connection established successfully
2024-08-06 21:38:26,255 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:38:26,261 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:38:27,092 - app.database - INFO - Database connection established successfully
2024-08-06 21:38:27,169 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:38:27,180 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:38:27,778 - app.database - INFO - Database connection established successfully
2024-08-06 21:38:28,134 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:38:33,924 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not mentioned in the patient's profile.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is about adolescent alcohol use, the patient is 31 years old (born in 1992) and does not fit the age range (12-21 years) for this study. Additionally, there's no mention of alcohol abuse in the patient's profile.\n\nThe patient's profile indicates depression and anxiety as medical conditions, but none of the provided trials are related to these conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 21:38:33,925 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not mentioned in the patient's profile.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is about adolescent alcohol use, the patient is 31 years old (born in 1992) and does not fit the age range (12-21 years) for this study. Additionally, there's no mention of alcohol abuse in the patient's profile.\n\nThe patient's profile indicates depression and anxiety as medical conditions, but none of the provided trials are related to these conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 21:38:33,926 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not mentioned in the patient's profile.

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: While this trial is about adolescent alcohol use, the patient is 31 years old (born in 1992) and does not fit the age range (12-21 years) for this study. Additionally, there's no mention of alcohol abuse in the patient's profile.

The patient's profile indicates depression and anxiety as medical conditions, but none of the provided trials are related to these conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 21:38:33,926 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:38:33,926 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:38:35,499 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:38:41,929 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile does not align closely with the eligibility criteria or conditions studied in the provided clinical trial. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not match the conditions being studied in the provided clinical trial (Sarcopenia, Sarcopenic Obesity, Incisional Hernia).\n\n2. The clinical trial focuses on complex abdominal wall surgery and related conditions, which are not mentioned in the patient's profile.\n\n3. The patient's age (31 years old) and lack of mentioned surgical history or abdominal conditions make them unlikely to be a suitable candidate for this specific trial.\n\n4. The trial's inclusion criteria specifically mention patients with incisional hernias larger than 10 cm, which is not mentioned in the patient's profile.\n\nGiven these factors, there are no trials that meet the minimum compatibility score of 70 or higher for this patient based on the provided information.", type='text')]
2024-08-06 21:38:41,929 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile does not align closely with the eligibility criteria or conditions studied in the provided clinical trial. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not match the conditions being studied in the provided clinical trial (Sarcopenia, Sarcopenic Obesity, Incisional Hernia).\n\n2. The clinical trial focuses on complex abdominal wall surgery and related conditions, which are not mentioned in the patient's profile.\n\n3. The patient's age (31 years old) and lack of mentioned surgical history or abdominal conditions make them unlikely to be a suitable candidate for this specific trial.\n\n4. The trial's inclusion criteria specifically mention patients with incisional hernias larger than 10 cm, which is not mentioned in the patient's profile.\n\nGiven these factors, there are no trials that meet the minimum compatibility score of 70 or higher for this patient based on the provided information.", type='text')]
2024-08-06 21:38:41,929 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile does not align closely with the eligibility criteria or conditions studied in the provided clinical trial. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. The patient's primary medical conditions (depression and anxiety) do not match the conditions being studied in the provided clinical trial (Sarcopenia, Sarcopenic Obesity, Incisional Hernia).

2. The clinical trial focuses on complex abdominal wall surgery and related conditions, which are not mentioned in the patient's profile.

3. The patient's age (31 years old) and lack of mentioned surgical history or abdominal conditions make them unlikely to be a suitable candidate for this specific trial.

4. The trial's inclusion criteria specifically mention patients with incisional hernias larger than 10 cm, which is not mentioned in the patient's profile.

Given these factors, there are no trials that meet the minimum compatibility score of 70 or higher for this patient based on the provided information.
2024-08-06 21:38:41,929 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:38:41,930 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:38:43,393 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:38:50,305 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match with a score of 70 or higher. Here's why:\n\n1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors and healthy aging. The patient is too young (31 years old) and doesn't have any mentioned cardiovascular conditions.\n\n2. NCT03530579 (Diabetes Prevention Intervention): This trial is specifically for Korean and South Asian Americans for diabetes prevention. The patient's ethnicity is not specified, and he doesn't have any mentioned diabetes risk factors.\n\n3. NCT05900479 (Service Dogs for Veterans with PTSD): This study is for military veterans with PTSD. The patient is not mentioned to be a veteran and doesn't have PTSD listed in his medical conditions.\n\n4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This trial is for children with cerebral palsy, which doesn't match the patient's profile (adult with depression and anxiety).\n\nGiven that none of the trials are sufficiently compatible with the patient's profile, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:38:50,305 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match with a score of 70 or higher. Here's why:\n\n1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors and healthy aging. The patient is too young (31 years old) and doesn't have any mentioned cardiovascular conditions.\n\n2. NCT03530579 (Diabetes Prevention Intervention): This trial is specifically for Korean and South Asian Americans for diabetes prevention. The patient's ethnicity is not specified, and he doesn't have any mentioned diabetes risk factors.\n\n3. NCT05900479 (Service Dogs for Veterans with PTSD): This study is for military veterans with PTSD. The patient is not mentioned to be a veteran and doesn't have PTSD listed in his medical conditions.\n\n4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This trial is for children with cerebral palsy, which doesn't match the patient's profile (adult with depression and anxiety).\n\nGiven that none of the trials are sufficiently compatible with the patient's profile, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:38:50,306 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match with a score of 70 or higher. Here's why:

1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors and healthy aging. The patient is too young (31 years old) and doesn't have any mentioned cardiovascular conditions.

2. NCT03530579 (Diabetes Prevention Intervention): This trial is specifically for Korean and South Asian Americans for diabetes prevention. The patient's ethnicity is not specified, and he doesn't have any mentioned diabetes risk factors.

3. NCT05900479 (Service Dogs for Veterans with PTSD): This study is for military veterans with PTSD. The patient is not mentioned to be a veteran and doesn't have PTSD listed in his medical conditions.

4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This trial is for children with cerebral palsy, which doesn't match the patient's profile (adult with depression and anxiety).

Given that none of the trials are sufficiently compatible with the patient's profile, the output is an empty array:

[]
2024-08-06 21:38:50,306 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:38:50,306 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:38:51,669 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:38:54,648 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (29-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:38:54,648 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (29-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:38:54,649 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (29-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.

Therefore, the output is an empty array:

[]
2024-08-06 21:38:54,649 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:38:54,649 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:38:56,012 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:39:00,107 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which don't match the patient's medical conditions of depression and anxiety.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not relevant to the patient's profile.\n\n3. The third trial (NCT04491279) is for stroke patients, which also doesn't match the patient's medical conditions.\n\nNone of these trials are suitable for a patient with depression and anxiety, so there are no matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 21:39:00,108 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which don't match the patient's medical conditions of depression and anxiety.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not relevant to the patient's profile.\n\n3. The third trial (NCT04491279) is for stroke patients, which also doesn't match the patient's medical conditions.\n\nNone of these trials are suitable for a patient with depression and anxiety, so there are no matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 21:39:00,108 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which don't match the patient's medical conditions of depression and anxiety.

2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not relevant to the patient's profile.

3. The third trial (NCT04491279) is for stroke patients, which also doesn't match the patient's medical conditions.

None of these trials are suitable for a patient with depression and anxiety, so there are no matches with a compatibility score of 70 or higher.
2024-08-06 21:39:00,108 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:39:00,109 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:39:01,756 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:39:06,978 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not suitable for the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 21:39:06,978 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not suitable for the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 21:39:06,978 - app.services.anthropic_service - INFO - Parsing response: Based on the provided patient profile and clinical trial data, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:

1. Scalp cooling for metastatic breast cancer patients
2. Extracorporeal photopheresis for lung transplant patients
3. Health and safety training in the workplace
4. Choroidal thickness measurements related to refractive errors

These trials are not suitable for the patient's profile, resulting in low compatibility scores (below 70) for all trials.
2024-08-06 21:39:06,979 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:39:06,979 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:39:08,571 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:44:01,897 - app - INFO - Initializing Flask app...
2024-08-06 21:44:01,898 - app - INFO - Configuring app...
2024-08-06 21:44:01,898 - app - INFO - Setting up CORS...
2024-08-06 21:44:01,898 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:44:02,080 - app - INFO - Initializing JWT manager...
2024-08-06 21:44:02,080 - app - INFO - Setting up rate limiting...
2024-08-06 21:44:02,081 - app - INFO - Setting up database...
2024-08-06 21:44:02,081 - app - INFO - Starting database setup...
2024-08-06 21:44:02,828 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:44:02,828 - app - INFO - Database setup completed successfully
2024-08-06 21:44:02,828 - app - INFO - Registering error handler...
2024-08-06 21:44:02,828 - app - INFO - Initializing CLI commands...
2024-08-06 21:44:02,828 - app - INFO - Registering routes...
2024-08-06 21:44:02,834 - app - INFO - Initializing services...
2024-08-06 21:44:02,843 - app - INFO - Initializing email service...
2024-08-06 21:44:02,843 - app - INFO - Setting up scheduler...
2024-08-06 21:44:02,846 - app - INFO - Initializing scheduler...
2024-08-06 21:44:02,847 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:44:02,847 - app - INFO - Application initialized successfully
2024-08-06 21:44:04,295 - app - INFO - Initializing Flask app...
2024-08-06 21:44:04,297 - app - INFO - Configuring app...
2024-08-06 21:44:04,298 - app - INFO - Setting up CORS...
2024-08-06 21:44:04,298 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:44:04,567 - app - INFO - Initializing JWT manager...
2024-08-06 21:44:04,567 - app - INFO - Setting up rate limiting...
2024-08-06 21:44:04,567 - app - INFO - Setting up database...
2024-08-06 21:44:04,568 - app - INFO - Starting database setup...
2024-08-06 21:44:05,167 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:44:05,167 - app - INFO - Database setup completed successfully
2024-08-06 21:44:05,167 - app - INFO - Registering error handler...
2024-08-06 21:44:05,168 - app - INFO - Initializing CLI commands...
2024-08-06 21:44:05,168 - app - INFO - Registering routes...
2024-08-06 21:44:05,174 - app - INFO - Initializing services...
2024-08-06 21:44:05,183 - app - INFO - Initializing email service...
2024-08-06 21:44:05,183 - app - INFO - Setting up scheduler...
2024-08-06 21:44:05,187 - app - INFO - Initializing scheduler...
2024-08-06 21:44:05,188 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:44:05,188 - app - INFO - Application initialized successfully
2024-08-06 21:44:16,365 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:44:17,017 - app.database - INFO - Database connection established successfully
2024-08-06 21:44:17,304 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:44:17,305 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:44:18,067 - app.database - INFO - Database connection established successfully
2024-08-06 21:44:18,107 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:44:18,115 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:44:18,748 - app.database - INFO - Database connection established successfully
2024-08-06 21:44:18,789 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:44:18,796 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 21:44:18,797 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:44:19,537 - app.database - INFO - Database connection established successfully
2024-08-06 21:44:19,590 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 21:44:19,596 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:44:20,217 - app.database - INFO - Database connection established successfully
2024-08-06 21:44:20,319 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:44:20,335 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:44:20,932 - app.database - INFO - Database connection established successfully
2024-08-06 21:44:20,994 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:44:21,000 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:44:21,609 - app.database - INFO - Database connection established successfully
2024-08-06 21:44:21,664 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 21:44:21,678 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:44:22,285 - app.database - INFO - Database connection established successfully
2024-08-06 21:44:22,598 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:44:27,710 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is about adolescent alcohol use, the patient is 31 years old (born in 1992) and doesn't fit the age criteria (12-21 years). Additionally, there's no mention of alcohol abuse in the patient's profile.\n\nGiven that none of the trials match the patient's profile with a score of 70 or higher, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:44:27,711 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is about adolescent alcohol use, the patient is 31 years old (born in 1992) and doesn't fit the age criteria (12-21 years). Additionally, there's no mention of alcohol abuse in the patient's profile.\n\nGiven that none of the trials match the patient's profile with a score of 70 or higher, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:44:27,713 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: While this trial is about adolescent alcohol use, the patient is 31 years old (born in 1992) and doesn't fit the age criteria (12-21 years). Additionally, there's no mention of alcohol abuse in the patient's profile.

Given that none of the trials match the patient's profile with a score of 70 or higher, the output is an empty array:

[]
2024-08-06 21:44:27,713 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:44:27,714 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 21:44:28,997 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 21:54:50,804 - app - INFO - Initializing Flask app...
2024-08-06 21:54:50,805 - app - INFO - Configuring app...
2024-08-06 21:54:50,805 - app - INFO - Setting up CORS...
2024-08-06 21:54:50,805 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:54:50,985 - app - INFO - Initializing JWT manager...
2024-08-06 21:54:50,986 - app - INFO - Setting up rate limiting...
2024-08-06 21:54:50,986 - app - INFO - Setting up database...
2024-08-06 21:54:50,987 - app - INFO - Starting database setup...
2024-08-06 21:54:51,575 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:54:51,575 - app - INFO - Database setup completed successfully
2024-08-06 21:54:51,576 - app - INFO - Registering error handler...
2024-08-06 21:54:51,576 - app - INFO - Initializing CLI commands...
2024-08-06 21:54:51,576 - app - INFO - Registering routes...
2024-08-06 21:54:51,597 - app - INFO - Initializing services...
2024-08-06 21:54:51,606 - app - INFO - Initializing email service...
2024-08-06 21:54:51,606 - app - INFO - Setting up scheduler...
2024-08-06 21:54:51,609 - app - INFO - Initializing scheduler...
2024-08-06 21:54:51,610 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:54:51,610 - app - INFO - Application initialized successfully
2024-08-06 21:54:53,202 - app - INFO - Initializing Flask app...
2024-08-06 21:54:53,203 - app - INFO - Configuring app...
2024-08-06 21:54:53,204 - app - INFO - Setting up CORS...
2024-08-06 21:54:53,204 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 21:54:53,470 - app - INFO - Initializing JWT manager...
2024-08-06 21:54:53,471 - app - INFO - Setting up rate limiting...
2024-08-06 21:54:53,471 - app - INFO - Setting up database...
2024-08-06 21:54:53,472 - app - INFO - Starting database setup...
2024-08-06 21:54:54,060 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 21:54:54,060 - app - INFO - Database setup completed successfully
2024-08-06 21:54:54,060 - app - INFO - Registering error handler...
2024-08-06 21:54:54,061 - app - INFO - Initializing CLI commands...
2024-08-06 21:54:54,061 - app - INFO - Registering routes...
2024-08-06 21:54:54,068 - app - INFO - Initializing services...
2024-08-06 21:54:54,081 - app - INFO - Initializing email service...
2024-08-06 21:54:54,082 - app - INFO - Setting up scheduler...
2024-08-06 21:54:54,085 - app - INFO - Initializing scheduler...
2024-08-06 21:54:54,086 - app.scheduler - INFO - Scheduler initialized
2024-08-06 21:54:54,086 - app - INFO - Application initialized successfully
2024-08-06 21:55:07,665 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:55:08,428 - app.database - INFO - Database connection established successfully
2024-08-06 21:55:08,736 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:08,736 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:55:09,334 - app.database - INFO - Database connection established successfully
2024-08-06 21:55:09,394 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:09,399 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:55:10,022 - app.database - INFO - Database connection established successfully
2024-08-06 21:55:10,107 - app.services.trial_matching_service - INFO - Retrieved 5 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:10,114 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:10,114 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:55:10,855 - app.database - INFO - Database connection established successfully
2024-08-06 21:55:10,900 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:10,905 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:55:11,604 - app.database - INFO - Database connection established successfully
2024-08-06 21:55:11,671 - app.services.trial_matching_service - INFO - Retrieved 5 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:13,123 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:55:14,449 - app.database - INFO - Database connection established successfully
2024-08-06 21:55:14,542 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:14,549 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:55:15,206 - app.database - INFO - Database connection established successfully
2024-08-06 21:55:15,287 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:17,487 - app.database - INFO - Attempting to establish database connection...
2024-08-06 21:55:18,185 - app.database - INFO - Database connection established successfully
2024-08-06 21:55:18,531 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:29,052 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, I\'ve analyzed the compatibility. Here\'s the output in the requested JSON format:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 80,\n        "reasons": [\n            "Patient has leukemia, which matches the trial\'s condition",\n            "Trial is specifically for leukemia patients",\n            "Patient\'s age (24 years old) falls within the typical adult range for clinical trials",\n            "Trial is completed, which may limit actual enrollment, but the compatibility is still high based on the medical condition"\n        ]\n    }\n]\n\nExplanation:\n1. NCT00072579 is the only trial that matches the patient\'s condition (leukemia) with a high compatibility score.\n\n2. The other trials (NCT00517179, NCT00812279, and NCT01511679) are not related to leukemia and focus on different conditions (erectile dysfunction, smoking, and alcohol abuse respectively), so they don\'t meet the 70+ compatibility threshold.\n\n3. While the leukemia trial (NCT00072579) is a good match in terms of the medical condition, it\'s important to note that the trial status is "COMPLETED," which means the patient cannot actually enroll. However, based on the medical condition match, it still scores high on compatibility.\n\n4. The patient\'s specific type of leukemia (not specified beyond "leukemia") and treatment history would need to be evaluated against the trial\'s detailed eligibility criteria for a more precise match. The current high score is based on the general match of the leukemia condition.', type='text')]
2024-08-06 21:55:29,052 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, I\'ve analyzed the compatibility. Here\'s the output in the requested JSON format:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 80,\n        "reasons": [\n            "Patient has leukemia, which matches the trial\'s condition",\n            "Trial is specifically for leukemia patients",\n            "Patient\'s age (24 years old) falls within the typical adult range for clinical trials",\n            "Trial is completed, which may limit actual enrollment, but the compatibility is still high based on the medical condition"\n        ]\n    }\n]\n\nExplanation:\n1. NCT00072579 is the only trial that matches the patient\'s condition (leukemia) with a high compatibility score.\n\n2. The other trials (NCT00517179, NCT00812279, and NCT01511679) are not related to leukemia and focus on different conditions (erectile dysfunction, smoking, and alcohol abuse respectively), so they don\'t meet the 70+ compatibility threshold.\n\n3. While the leukemia trial (NCT00072579) is a good match in terms of the medical condition, it\'s important to note that the trial status is "COMPLETED," which means the patient cannot actually enroll. However, based on the medical condition match, it still scores high on compatibility.\n\n4. The patient\'s specific type of leukemia (not specified beyond "leukemia") and treatment history would need to be evaluated against the trial\'s detailed eligibility criteria for a more precise match. The current high score is based on the general match of the leukemia condition.', type='text')]
2024-08-06 21:55:29,053 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the output in the requested JSON format:

[
    {
        "nct_id": "NCT00072579",
        "compatibility_score": 80,
        "reasons": [
            "Patient has leukemia, which matches the trial's condition",
            "Trial is specifically for leukemia patients",
            "Patient's age (24 years old) falls within the typical adult range for clinical trials",
            "Trial is completed, which may limit actual enrollment, but the compatibility is still high based on the medical condition"
        ]
    }
]

Explanation:
1. NCT00072579 is the only trial that matches the patient's condition (leukemia) with a high compatibility score.

2. The other trials (NCT00517179, NCT00812279, and NCT01511679) are not related to leukemia and focus on different conditions (erectile dysfunction, smoking, and alcohol abuse respectively), so they don't meet the 70+ compatibility threshold.

3. While the leukemia trial (NCT00072579) is a good match in terms of the medical condition, it's important to note that the trial status is "COMPLETED," which means the patient cannot actually enroll. However, based on the medical condition match, it still scores high on compatibility.

4. The patient's specific type of leukemia (not specified beyond "leukemia") and treatment history would need to be evaluated against the trial's detailed eligibility criteria for a more precise match. The current high score is based on the general match of the leukemia condition.
2024-08-06 21:55:29,053 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-06 21:55:29,107 - app.services.trial_matching_service - INFO - Trial NCT00072579 already matched for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:29,107 - app.services.trial_matching_service - INFO - Emitted 0 trial matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:29,107 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:55:30,633 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:36,470 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a young male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe key factors that lead to this conclusion are:\n\n1. The patient's primary condition (leukemia) is not related to the conditions targeted by the clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (24 years old) does not align with the typical demographic for sarcopenia and obesity-related studies, which often focus on older adults.\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are central to the clinical trial.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that no trials match with a score of 70 or higher based on the given information.", type='text')]
2024-08-06 21:55:36,471 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a young male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe key factors that lead to this conclusion are:\n\n1. The patient's primary condition (leukemia) is not related to the conditions targeted by the clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (24 years old) does not align with the typical demographic for sarcopenia and obesity-related studies, which often focus on older adults.\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are central to the clinical trial.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that no trials match with a score of 70 or higher based on the given information.", type='text')]
2024-08-06 21:55:36,471 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a young male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

The key factors that lead to this conclusion are:

1. The patient's primary condition (leukemia) is not related to the conditions targeted by the clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (24 years old) does not align with the typical demographic for sarcopenia and obesity-related studies, which often focus on older adults.
3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are central to the clinical trial.

Therefore, the output in the requested JSON format would be an empty array:

[]

This indicates that no trials match with a score of 70 or higher based on the given information.
2024-08-06 21:55:36,471 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:55:36,471 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:55:37,821 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:44,002 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that none of the provided clinical trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient is a 24-year-old male with leukemia, which doesn't align well with any of the provided clinical trials:\n\n1. NCT00626379 focuses on heart disease risk factors and aging, which is not relevant to this patient's condition.\n2. NCT03530579 is about diabetes prevention in Korean and South Asian Americans, which doesn't match the patient's profile or condition.\n3. NCT05900479 is for veterans with PTSD, which doesn't apply to this patient.\n4. NCT04679779 is for children with cerebral palsy, which doesn't match the patient's age or condition.\n\nNone of these trials are specifically targeting leukemia or related blood disorders, and the patient's age, gender, and medical condition do not meet the eligibility criteria for any of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 21:55:44,002 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that none of the provided clinical trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient is a 24-year-old male with leukemia, which doesn't align well with any of the provided clinical trials:\n\n1. NCT00626379 focuses on heart disease risk factors and aging, which is not relevant to this patient's condition.\n2. NCT03530579 is about diabetes prevention in Korean and South Asian Americans, which doesn't match the patient's profile or condition.\n3. NCT05900479 is for veterans with PTSD, which doesn't apply to this patient.\n4. NCT04679779 is for children with cerebral palsy, which doesn't match the patient's age or condition.\n\nNone of these trials are specifically targeting leukemia or related blood disorders, and the patient's age, gender, and medical condition do not meet the eligibility criteria for any of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 21:55:44,003 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I have determined that none of the provided clinical trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient is a 24-year-old male with leukemia, which doesn't align well with any of the provided clinical trials:

1. NCT00626379 focuses on heart disease risk factors and aging, which is not relevant to this patient's condition.
2. NCT03530579 is about diabetes prevention in Korean and South Asian Americans, which doesn't match the patient's profile or condition.
3. NCT05900479 is for veterans with PTSD, which doesn't apply to this patient.
4. NCT04679779 is for children with cerebral palsy, which doesn't match the patient's age or condition.

None of these trials are specifically targeting leukemia or related blood disorders, and the patient's age, gender, and medical condition do not meet the eligibility criteria for any of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 21:55:44,003 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:55:44,003 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:55:45,493 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:48,527 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary condition is leukemia, which is not targeted by either of the provided clinical trials. One trial focuses on type 2 diabetes mellitus, and the other on non-small cell lung cancer. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:55:48,528 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary condition is leukemia, which is not targeted by either of the provided clinical trials. One trial focuses on type 2 diabetes mellitus, and the other on non-small cell lung cancer. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:55:48,529 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary condition is leukemia, which is not targeted by either of the provided clinical trials. One trial focuses on type 2 diabetes mellitus, and the other on non-small cell lung cancer. Therefore, the output is an empty array:

[]
2024-08-06 21:55:48,529 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:55:48,529 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:55:49,875 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:53,121 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not the focus of any of the provided clinical trials. The trials are focused on systemic sclerosis, head and neck cancer, and stroke, which are not relevant to the patient's condition.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:55:53,121 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not the focus of any of the provided clinical trials. The trials are focused on systemic sclerosis, head and neck cancer, and stroke, which are not relevant to the patient's condition.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:55:53,122 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not the focus of any of the provided clinical trials. The trials are focused on systemic sclerosis, head and neck cancer, and stroke, which are not relevant to the patient's condition.

Therefore, the output is an empty array:

[]
2024-08-06 21:55:53,122 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:55:53,122 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:55:54,393 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:55:59,780 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not specifically addressed in any of the provided clinical trials.\n\n2. The first trial (NCT04986579) is for metastatic breast cancer and specifically excludes patients with hematological malignancies like leukemia.\n\n3. The second trial (NCT05721079) is for lung transplant patients, which doesn't apply to this patient.\n\n4. The third trial (NCT06060379) is about workplace safety and not related to the patient's medical condition.\n\n5. The fourth trial (NCT03906279) is about refractive errors and choroidal thickness, which is unrelated to leukemia.\n\nGiven these factors, none of the trials are suitable for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:55:59,780 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not specifically addressed in any of the provided clinical trials.\n\n2. The first trial (NCT04986579) is for metastatic breast cancer and specifically excludes patients with hematological malignancies like leukemia.\n\n3. The second trial (NCT05721079) is for lung transplant patients, which doesn't apply to this patient.\n\n4. The third trial (NCT06060379) is about workplace safety and not related to the patient's medical condition.\n\n5. The fourth trial (NCT03906279) is about refractive errors and choroidal thickness, which is unrelated to leukemia.\n\nGiven these factors, none of the trials are suitable for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:55:59,781 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. The patient has leukemia, which is not specifically addressed in any of the provided clinical trials.

2. The first trial (NCT04986579) is for metastatic breast cancer and specifically excludes patients with hematological malignancies like leukemia.

3. The second trial (NCT05721079) is for lung transplant patients, which doesn't apply to this patient.

4. The third trial (NCT06060379) is about workplace safety and not related to the patient's medical condition.

5. The fourth trial (NCT03906279) is about refractive errors and choroidal thickness, which is unrelated to leukemia.

Given these factors, none of the trials are suitable for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]
2024-08-06 21:55:59,781 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:55:59,781 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:56:01,071 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:56:05,035 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a 24-year-old male with leukemia.\n2. The provided clinical trials are focused on:\n   - Hemodialysis patients with Hepatitis C\n   - Melanoma patients\n   - Ischemic heart failure\n   - Advanced refractory left ventricular heart failure\n\nNone of these trials are related to leukemia or match the patient's age, gender, or medical condition. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-06 21:56:05,036 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a 24-year-old male with leukemia.\n2. The provided clinical trials are focused on:\n   - Hemodialysis patients with Hepatitis C\n   - Melanoma patients\n   - Ischemic heart failure\n   - Advanced refractory left ventricular heart failure\n\nNone of these trials are related to leukemia or match the patient's age, gender, or medical condition. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-06 21:56:05,036 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. The patient is a 24-year-old male with leukemia.
2. The provided clinical trials are focused on:
   - Hemodialysis patients with Hepatitis C
   - Melanoma patients
   - Ischemic heart failure
   - Advanced refractory left ventricular heart failure

None of these trials are related to leukemia or match the patient's age, gender, or medical condition. Therefore, the output in the requested JSON format is:

[]

This empty array indicates that no trials match with a score of 70 or higher for this patient.
2024-08-06 21:56:05,036 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:56:05,037 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:56:06,457 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:56:12,101 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which does not align with the conditions targeted by any of the provided clinical trials (sepsis, healthy volunteers, and obesity).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nExplanation:\n1. NCT06289179 focuses on sepsis, which is not relevant to the patient's leukemia diagnosis.\n2. NCT03221179 is for healthy volunteers, and the patient has a significant medical condition (leukemia).\n3. NCT00228579 is focused on obesity, which is not mentioned in the patient's profile.\n\nNone of these trials are suitable for a leukemia patient, resulting in compatibility scores well below the 70% threshold.", type='text')]
2024-08-06 21:56:12,101 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which does not align with the conditions targeted by any of the provided clinical trials (sepsis, healthy volunteers, and obesity).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nExplanation:\n1. NCT06289179 focuses on sepsis, which is not relevant to the patient's leukemia diagnosis.\n2. NCT03221179 is for healthy volunteers, and the patient has a significant medical condition (leukemia).\n3. NCT00228579 is focused on obesity, which is not mentioned in the patient's profile.\n\nNone of these trials are suitable for a leukemia patient, resulting in compatibility scores well below the 70% threshold.", type='text')]
2024-08-06 21:56:12,102 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which does not align with the conditions targeted by any of the provided clinical trials (sepsis, healthy volunteers, and obesity).

Therefore, the output in the requested JSON format is an empty array:

[]

Explanation:
1. NCT06289179 focuses on sepsis, which is not relevant to the patient's leukemia diagnosis.
2. NCT03221179 is for healthy volunteers, and the patient has a significant medical condition (leukemia).
3. NCT00228579 is focused on obesity, which is not mentioned in the patient's profile.

None of these trials are suitable for a leukemia patient, resulting in compatibility scores well below the 70% threshold.
2024-08-06 21:56:12,102 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:56:12,102 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:56:13,357 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:56:18,556 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here is the matching result:\n\n[\n    {\n        "nct_id": "NCT05639179",\n        "compatibility_score": 90,\n        "reasons": [\n            "The trial is specifically for B-cell Acute Lymphoblastic Leukemia (B-ALL), which is a type of leukemia matching the patient\'s medical condition",\n            "The trial is in Phase 1/2 and recruiting, which means it\'s potentially open for new patients",\n            "The patient\'s age (24 years) falls within the trial\'s age range (2-75 years)",\n            "The trial is for relapsed/refractory B-ALL, which may be applicable given the patient\'s current medications suggesting ongoing treatment",\n            "The patient\'s gender (male) is not excluded from the trial"\n        ]\n    }\n]', type='text')]
2024-08-06 21:56:18,556 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here is the matching result:\n\n[\n    {\n        "nct_id": "NCT05639179",\n        "compatibility_score": 90,\n        "reasons": [\n            "The trial is specifically for B-cell Acute Lymphoblastic Leukemia (B-ALL), which is a type of leukemia matching the patient\'s medical condition",\n            "The trial is in Phase 1/2 and recruiting, which means it\'s potentially open for new patients",\n            "The patient\'s age (24 years) falls within the trial\'s age range (2-75 years)",\n            "The trial is for relapsed/refractory B-ALL, which may be applicable given the patient\'s current medications suggesting ongoing treatment",\n            "The patient\'s gender (male) is not excluded from the trial"\n        ]\n    }\n]', type='text')]
2024-08-06 21:56:18,557 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here is the matching result:

[
    {
        "nct_id": "NCT05639179",
        "compatibility_score": 90,
        "reasons": [
            "The trial is specifically for B-cell Acute Lymphoblastic Leukemia (B-ALL), which is a type of leukemia matching the patient's medical condition",
            "The trial is in Phase 1/2 and recruiting, which means it's potentially open for new patients",
            "The patient's age (24 years) falls within the trial's age range (2-75 years)",
            "The trial is for relapsed/refractory B-ALL, which may be applicable given the patient's current medications suggesting ongoing treatment",
            "The patient's gender (male) is not excluded [SQL REDACTED] the trial"
        ]
    }
]
2024-08-06 21:56:18,557 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-06 21:56:18,624 - app.services.trial_matching_service - INFO - Trial NCT05639179 already matched for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:56:18,624 - app.services.trial_matching_service - INFO - Emitted 0 trial matches for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:56:18,625 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:56:19,832 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:56:23,892 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 24-year-old male with leukemia) does not align well with either of the two provided clinical trials.\n\nThe first trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years, which doesn't match the patient's age or medical condition.\n\nThe second trial (NCT02052479) is for female adolescents with Polycystic Ovary Syndrome (PCOS), which doesn't match the patient's gender, age, or medical condition.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 21:56:23,892 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 24-year-old male with leukemia) does not align well with either of the two provided clinical trials.\n\nThe first trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years, which doesn't match the patient's age or medical condition.\n\nThe second trial (NCT02052479) is for female adolescents with Polycystic Ovary Syndrome (PCOS), which doesn't match the patient's gender, age, or medical condition.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 21:56:23,893 - app.services.anthropic_service - INFO - Parsing response: Based on the provided patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 24-year-old male with leukemia) does not align well with either of the two provided clinical trials.

The first trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years, which doesn't match the patient's age or medical condition.

The second trial (NCT02052479) is for female adolescents with Polycystic Ovary Syndrome (PCOS), which doesn't match the patient's gender, age, or medical condition.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 21:56:23,893 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:56:23,893 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:56:25,138 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:56:30,050 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient is a 24-year-old male with leukemia, which doesn't align well with any of the provided clinical trials. The trials focus on:\n\n1. Influenza vaccine in young children\n2. Pain relief during postpartum perineal tear repair\n3. Colorectal cancer with liver metastases\n4. Physician satisfaction with cytotoxic agents\n\nNone of these trials are relevant to the patient's condition (leukemia) or age group. Additionally, the patient's current medications and medical history don't align with the eligibility criteria of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 21:56:30,050 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient is a 24-year-old male with leukemia, which doesn't align well with any of the provided clinical trials. The trials focus on:\n\n1. Influenza vaccine in young children\n2. Pain relief during postpartum perineal tear repair\n3. Colorectal cancer with liver metastases\n4. Physician satisfaction with cytotoxic agents\n\nNone of these trials are relevant to the patient's condition (leukemia) or age group. Additionally, the patient's current medications and medical history don't align with the eligibility criteria of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 21:56:30,050 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient is a 24-year-old male with leukemia, which doesn't align well with any of the provided clinical trials. The trials focus on:

1. Influenza vaccine in young children
2. Pain relief during postpartum perineal tear repair
3. Colorectal cancer with liver metastases
4. Physician satisfaction with cytotoxic agents

None of these trials are relevant to the patient's condition (leukemia) or age group. Additionally, the patient's current medications and medical history don't align with the eligibility criteria of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 21:56:30,050 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:56:30,051 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:56:31,287 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:56:38,157 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical condition is leukemia, but neither of the provided clinical trials are related to leukemia or cancer treatment.\n\n2. The first trial (NCT06378879) is about anesthesia during gastroscopy, which is not relevant to the patient's condition.\n\n3. The second trial (NCT02710279) is focused on depression and suicidal behavior, which are not mentioned in the patient's profile.\n\n4. The patient's age (24 years old, born in 1999) and gender (male) do not align well with the specific requirements of the second trial, which is for females between 18 and 65 years old.\n\n5. The medications the patient is taking are not directly relevant to either of the clinical trials presented.\n\nGiven these factors, none of the provided trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-06 21:56:38,157 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical condition is leukemia, but neither of the provided clinical trials are related to leukemia or cancer treatment.\n\n2. The first trial (NCT06378879) is about anesthesia during gastroscopy, which is not relevant to the patient's condition.\n\n3. The second trial (NCT02710279) is focused on depression and suicidal behavior, which are not mentioned in the patient's profile.\n\n4. The patient's age (24 years old, born in 1999) and gender (male) do not align well with the specific requirements of the second trial, which is for females between 18 and 65 years old.\n\n5. The medications the patient is taking are not directly relevant to either of the clinical trials presented.\n\nGiven these factors, none of the provided trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-06 21:56:38,157 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. The patient's primary medical condition is leukemia, but neither of the provided clinical trials are related to leukemia or cancer treatment.

2. The first trial (NCT06378879) is about anesthesia during gastroscopy, which is not relevant to the patient's condition.

3. The second trial (NCT02710279) is focused on depression and suicidal behavior, which are not mentioned in the patient's profile.

4. The patient's age (24 years old, born in 1999) and gender (male) do not align well with the specific requirements of the second trial, which is for females between 18 and 65 years old.

5. The medications the patient is taking are not directly relevant to either of the clinical trials presented.

Given these factors, none of the provided trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.
2024-08-06 21:56:38,157 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:56:38,158 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:56:39,383 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:56:45,449 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, I have analyzed the compatibility. Unfortunately, none of the trials have a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT05463679 (Vascular Ehlers-Danlos Syndrome trial): The patient does not have vascular Ehlers-Danlos Syndrome, which is the primary condition for this trial.\n\n2. NCT03137979 (Periodontitis trial): The patient does not have periodontitis, which is the main condition this trial is addressing.\n\n3. NCT01733979 (Anemia trial): While this trial is for anemia, the patient's profile does not explicitly mention anemia as a medical condition. The patient has leukemia, which can cause anemia, but without specific hemoglobin levels or an anemia diagnosis, we cannot confidently match this trial with a high compatibility score.\n\nThe patient's primary condition is leukemia, and none of the provided trials are specifically targeting leukemia or its treatments. Therefore, there are no highly compatible trials for this patient based on the given information.", type='text')]
2024-08-06 21:56:45,449 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, I have analyzed the compatibility. Unfortunately, none of the trials have a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT05463679 (Vascular Ehlers-Danlos Syndrome trial): The patient does not have vascular Ehlers-Danlos Syndrome, which is the primary condition for this trial.\n\n2. NCT03137979 (Periodontitis trial): The patient does not have periodontitis, which is the main condition this trial is addressing.\n\n3. NCT01733979 (Anemia trial): While this trial is for anemia, the patient's profile does not explicitly mention anemia as a medical condition. The patient has leukemia, which can cause anemia, but without specific hemoglobin levels or an anemia diagnosis, we cannot confidently match this trial with a high compatibility score.\n\nThe patient's primary condition is leukemia, and none of the provided trials are specifically targeting leukemia or its treatments. Therefore, there are no highly compatible trials for this patient based on the given information.", type='text')]
2024-08-06 21:56:45,450 - app.services.anthropic_service - INFO - Parsing response: Based on the provided patient profile and clinical trial data, I have analyzed the compatibility. Unfortunately, none of the trials have a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:

[]

Explanation:

1. NCT05463679 (Vascular Ehlers-Danlos Syndrome trial): The patient does not have vascular Ehlers-Danlos Syndrome, which is the primary condition for this trial.

2. NCT03137979 (Periodontitis trial): The patient does not have periodontitis, which is the main condition this trial is addressing.

3. NCT01733979 (Anemia trial): While this trial is for anemia, the patient's profile does not explicitly mention anemia as a medical condition. The patient has leukemia, which can cause anemia, but without specific hemoglobin levels or an anemia diagnosis, we cannot confidently match this trial with a high compatibility score.

The patient's primary condition is leukemia, and none of the provided trials are specifically targeting leukemia or its treatments. Therefore, there are no highly compatible trials for this patient based on the given information.
2024-08-06 21:56:45,450 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:56:45,450 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:56:46,709 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:56:51,787 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically targeting leukemia or related conditions. The trials focus on:\n\n1. Coronary artery bypass grafting surgery\n2. ADHD symptoms in children\n3. Atrial fibrillation\n4. Temperature monitoring during general anesthesia\n5. Allergic rhinitis\n\nThese conditions and study focuses are not directly related to the patient's primary medical condition (leukemia) or any of their current medications. Therefore, none of the trials reach the threshold of 70 or higher for compatibility.", type='text')]
2024-08-06 21:56:51,787 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically targeting leukemia or related conditions. The trials focus on:\n\n1. Coronary artery bypass grafting surgery\n2. ADHD symptoms in children\n3. Atrial fibrillation\n4. Temperature monitoring during general anesthesia\n5. Allergic rhinitis\n\nThese conditions and study focuses are not directly related to the patient's primary medical condition (leukemia) or any of their current medications. Therefore, none of the trials reach the threshold of 70 or higher for compatibility.", type='text')]
2024-08-06 21:56:51,787 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:

[]

Explanation:
The patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically targeting leukemia or related conditions. The trials focus on:

1. Coronary artery bypass grafting surgery
2. ADHD symptoms in children
3. Atrial fibrillation
4. Temperature monitoring during general anesthesia
5. Allergic rhinitis

These conditions and study focuses are not directly related to the patient's primary medical condition (leukemia) or any of their current medications. Therefore, none of the trials reach the threshold of 70 or higher for compatibility.
2024-08-06 21:56:51,787 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:56:51,787 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:56:53,052 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:56:58,793 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT02199379: This trial is for renal impairment, which the patient doesn't have. It's also for healthy subjects or those with renal issues, not leukemia patients.\n\n2. NCT02407379: This trial is for periodontitis (gum disease), which is unrelated to the patient's condition of leukemia.\n\n3. NCT01100879: This trial is for multiple myeloma patients with anemia. While the patient has leukemia (a blood cancer), it's not the specific type of cancer this trial is targeting.\n\nGiven these mismatches, the compatibility scores for all trials would be below 70. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-06 21:56:58,794 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT02199379: This trial is for renal impairment, which the patient doesn't have. It's also for healthy subjects or those with renal issues, not leukemia patients.\n\n2. NCT02407379: This trial is for periodontitis (gum disease), which is unrelated to the patient's condition of leukemia.\n\n3. NCT01100879: This trial is for multiple myeloma patients with anemia. While the patient has leukemia (a blood cancer), it's not the specific type of cancer this trial is targeting.\n\nGiven these mismatches, the compatibility scores for all trials would be below 70. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-06 21:56:58,794 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Here's why:

1. NCT02199379: This trial is for renal impairment, which the patient doesn't have. It's also for healthy subjects or those with renal issues, not leukemia patients.

2. NCT02407379: This trial is for periodontitis (gum disease), which is unrelated to the patient's condition of leukemia.

3. NCT01100879: This trial is for multiple myeloma patients with anemia. While the patient has leukemia (a blood cancer), it's not the specific type of cancer this trial is targeting.

Given these mismatches, the compatibility scores for all trials would be below 70. Therefore, the output in the requested JSON format is:

[]

This empty array indicates that no trials match with a score of 70 or higher for this patient.
2024-08-06 21:56:58,794 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:56:58,795 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:57:00,030 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:57:05,806 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Jimmy Oldman, is a 24-year-old male with leukemia.\n2. The first clinical trial (NCT04931979) is for prostate cancer patients, which doesn't match the patient's condition.\n3. The second clinical trial (NCT06207279) is primarily for patients with depression, insomnia, attention disturbances, or healthy individuals. It also doesn't match the patient's primary condition of leukemia.\n\nNeither of these trials is suitable for a leukemia patient, resulting in compatibility scores well below the 70-point threshold. Therefore, no trials are returned in the output.", type='text')]
2024-08-06 21:57:05,808 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Jimmy Oldman, is a 24-year-old male with leukemia.\n2. The first clinical trial (NCT04931979) is for prostate cancer patients, which doesn't match the patient's condition.\n3. The second clinical trial (NCT06207279) is primarily for patients with depression, insomnia, attention disturbances, or healthy individuals. It also doesn't match the patient's primary condition of leukemia.\n\nNeither of these trials is suitable for a leukemia patient, resulting in compatibility scores well below the 70-point threshold. Therefore, no trials are returned in the output.", type='text')]
2024-08-06 21:57:05,808 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Jimmy Oldman, is a 24-year-old male with leukemia.
2. The first clinical trial (NCT04931979) is for prostate cancer patients, which doesn't match the patient's condition.
3. The second clinical trial (NCT06207279) is primarily for patients with depression, insomnia, attention disturbances, or healthy individuals. It also doesn't match the patient's primary condition of leukemia.

Neither of these trials is suitable for a leukemia patient, resulting in compatibility scores well below the 70-point threshold. Therefore, no trials are returned in the output.
2024-08-06 21:57:05,809 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:57:05,809 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:57:07,061 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 21:57:10,104 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not addressed by any of the given clinical trials. The trials focus on post-operative pain management, popliteal entrapment syndrome, and duodenal atresia, none of which are related to the patient's condition.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:57:10,105 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not addressed by any of the given clinical trials. The trials focus on post-operative pain management, popliteal entrapment syndrome, and duodenal atresia, none of which are related to the patient's condition.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 21:57:10,106 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not addressed by any of the given clinical trials. The trials focus on post-operative pain management, popliteal entrapment syndrome, and duodenal atresia, none of which are related to the patient's condition.

Therefore, the output is an empty array:

[]
2024-08-06 21:57:10,107 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 21:57:10,107 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-06 21:57:11,408 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-06 22:01:35,934 - app - INFO - Initializing Flask app...
2024-08-06 22:01:35,935 - app - INFO - Configuring app...
2024-08-06 22:01:35,936 - app - INFO - Setting up CORS...
2024-08-06 22:01:35,936 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:01:36,125 - app - INFO - Initializing JWT manager...
2024-08-06 22:01:36,126 - app - INFO - Setting up rate limiting...
2024-08-06 22:01:36,126 - app - INFO - Setting up database...
2024-08-06 22:01:36,127 - app - INFO - Starting database setup...
2024-08-06 22:01:36,919 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:01:36,919 - app - INFO - Database setup completed successfully
2024-08-06 22:01:36,919 - app - INFO - Registering error handler...
2024-08-06 22:01:36,920 - app - INFO - Initializing CLI commands...
2024-08-06 22:01:36,920 - app - INFO - Registering routes...
2024-08-06 22:01:36,925 - app - INFO - Initializing services...
2024-08-06 22:01:36,933 - app - INFO - Initializing email service...
2024-08-06 22:01:36,934 - app - INFO - Setting up scheduler...
2024-08-06 22:01:36,937 - app - INFO - Initializing scheduler...
2024-08-06 22:01:36,937 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:01:36,937 - app - INFO - Application initialized successfully
2024-08-06 22:01:38,434 - app - INFO - Initializing Flask app...
2024-08-06 22:01:38,436 - app - INFO - Configuring app...
2024-08-06 22:01:38,437 - app - INFO - Setting up CORS...
2024-08-06 22:01:38,437 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:01:38,667 - app - INFO - Initializing JWT manager...
2024-08-06 22:01:38,668 - app - INFO - Setting up rate limiting...
2024-08-06 22:01:38,669 - app - INFO - Setting up database...
2024-08-06 22:01:38,670 - app - INFO - Starting database setup...
2024-08-06 22:01:39,275 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:01:39,275 - app - INFO - Database setup completed successfully
2024-08-06 22:01:39,275 - app - INFO - Registering error handler...
2024-08-06 22:01:39,276 - app - INFO - Initializing CLI commands...
2024-08-06 22:01:39,276 - app - INFO - Registering routes...
2024-08-06 22:01:39,282 - app - INFO - Initializing services...
2024-08-06 22:01:39,290 - app - INFO - Initializing email service...
2024-08-06 22:01:39,291 - app - INFO - Setting up scheduler...
2024-08-06 22:01:39,296 - app - INFO - Initializing scheduler...
2024-08-06 22:01:39,296 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:01:39,297 - app - INFO - Application initialized successfully
2024-08-06 22:01:51,500 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:01:52,127 - app.database - INFO - Database connection established successfully
2024-08-06 22:01:52,417 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 22:01:52,418 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:01:53,022 - app.database - INFO - Database connection established successfully
2024-08-06 22:01:53,065 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 22:01:53,071 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:01:54,082 - app.database - INFO - Database connection established successfully
2024-08-06 22:01:54,130 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:01:54,137 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 22:01:54,137 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:01:54,813 - app.database - INFO - Database connection established successfully
2024-08-06 22:01:54,855 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 22:01:54,861 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:01:55,435 - app.database - INFO - Database connection established successfully
2024-08-06 22:01:55,485 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:01:57,008 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:01:57,586 - app.database - INFO - Database connection established successfully
2024-08-06 22:01:57,627 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:01:57,634 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:01:58,270 - app.database - INFO - Database connection established successfully
2024-08-06 22:01:58,311 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:01:58,440 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:01:59,100 - app.database - INFO - Database connection established successfully
2024-08-06 22:01:59,360 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:02:05,177 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. The reasons for this include:\n\n1. The patient's primary medical conditions (depression and anxiety) do not match the conditions targeted by any of the trials.\n2. The patient's age (31 years old) and gender do not specifically match the eligibility criteria for the provided trials.\n3. The patient's current medication (Escitalopram) is not relevant to any of the trial interventions.\n4. The trials focus on conditions such as chronic myelogenous leukemia, erectile dysfunction, benign prostatic hyperplasia, smoking, and alcohol abuse, which are not present in the patient's profile.\n\nGiven these factors, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a compatibility score of 70 or higher for this patient.", type='text')]
2024-08-06 22:02:05,177 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. The reasons for this include:\n\n1. The patient's primary medical conditions (depression and anxiety) do not match the conditions targeted by any of the trials.\n2. The patient's age (31 years old) and gender do not specifically match the eligibility criteria for the provided trials.\n3. The patient's current medication (Escitalopram) is not relevant to any of the trial interventions.\n4. The trials focus on conditions such as chronic myelogenous leukemia, erectile dysfunction, benign prostatic hyperplasia, smoking, and alcohol abuse, which are not present in the patient's profile.\n\nGiven these factors, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a compatibility score of 70 or higher for this patient.", type='text')]
2024-08-06 22:02:05,178 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. The reasons for this include:

1. The patient's primary medical conditions (depression and anxiety) do not match the conditions targeted by any of the trials.
2. The patient's age (31 years old) and gender do not specifically match the eligibility criteria for the provided trials.
3. The patient's current medication (Escitalopram) is not relevant to any of the trial interventions.
4. The trials focus on conditions such as chronic myelogenous leukemia, erectile dysfunction, benign prostatic hyperplasia, smoking, and alcohol abuse, which are not present in the patient's profile.

Given these factors, the output in the requested JSON format is:

[]

This empty array indicates that no trials match with a compatibility score of 70 or higher for this patient.
2024-08-06 22:02:05,178 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:02:05,178 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:02:06,451 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:02:11,669 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial information provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or focus of the provided clinical trial, which is about sarcopenia and sarcopenic obesity in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no matches include:\n1. The patient's medical conditions (depression and anxiety) are not related to the trial's focus (sarcopenia, obesity, incisional hernia).\n2. The trial is specifically looking at patients who have had complex abdominal wall surgery, which is not mentioned in the patient's profile.\n3. The trial requires patients to have had a preoperative CT scan, which is not indicated in the patient's information.\n4. The patient's age (31) doesn't necessarily align with the typical demographic for sarcopenia studies, which often focus on older adults.", type='text')]
2024-08-06 22:02:11,669 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial information provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or focus of the provided clinical trial, which is about sarcopenia and sarcopenic obesity in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no matches include:\n1. The patient's medical conditions (depression and anxiety) are not related to the trial's focus (sarcopenia, obesity, incisional hernia).\n2. The trial is specifically looking at patients who have had complex abdominal wall surgery, which is not mentioned in the patient's profile.\n3. The trial requires patients to have had a preoperative CT scan, which is not indicated in the patient's information.\n4. The patient's age (31) doesn't necessarily align with the typical demographic for sarcopenia studies, which often focus on older adults.", type='text')]
2024-08-06 22:02:11,669 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial information provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or focus of the provided clinical trial, which is about sarcopenia and sarcopenic obesity in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The reasons for no matches include:
1. The patient's medical conditions (depression and anxiety) are not related to the trial's focus (sarcopenia, obesity, incisional hernia).
2. The trial is specifically looking at patients who have had complex abdominal wall surgery, which is not mentioned in the patient's profile.
3. The trial requires patients to have had a preoperative CT scan, which is not indicated in the patient's information.
4. The patient's age (31) doesn't necessarily align with the typical demographic for sarcopenia studies, which often focus on older adults.
2024-08-06 22:02:11,671 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:02:11,671 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:02:12,874 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:02:19,453 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNone of the provided clinical trials have a compatibility score of 70 or higher for the given patient profile. Here's a brief explanation for each trial:\n\n1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors and aging. The patient's profile doesn't mention any cardiovascular conditions or risk factors, and the age range (65-84) doesn't match the patient's age (31 years old).\n\n2. NCT03530579 (Community Health Worker Diabetes Prevention Intervention): This study is specifically for Korean and South Asian Americans at risk for diabetes. The patient's profile doesn't indicate ethnicity or diabetes risk factors.\n\n3. NCT05900479 (Service Dogs for Military Veterans With PTSD): While the patient has depression and anxiety, the study is specifically for military veterans with PTSD, which doesn't match the patient's profile.\n\n4. NCT04679779 (Virtual Reality in Children With Hemiparesis): This study is for children with cerebral palsy, which doesn't match the adult patient's profile or medical conditions.\n\nGiven these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the result is an empty array.", type='text')]
2024-08-06 22:02:19,453 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNone of the provided clinical trials have a compatibility score of 70 or higher for the given patient profile. Here's a brief explanation for each trial:\n\n1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors and aging. The patient's profile doesn't mention any cardiovascular conditions or risk factors, and the age range (65-84) doesn't match the patient's age (31 years old).\n\n2. NCT03530579 (Community Health Worker Diabetes Prevention Intervention): This study is specifically for Korean and South Asian Americans at risk for diabetes. The patient's profile doesn't indicate ethnicity or diabetes risk factors.\n\n3. NCT05900479 (Service Dogs for Military Veterans With PTSD): While the patient has depression and anxiety, the study is specifically for military veterans with PTSD, which doesn't match the patient's profile.\n\n4. NCT04679779 (Virtual Reality in Children With Hemiparesis): This study is for children with cerebral palsy, which doesn't match the adult patient's profile or medical conditions.\n\nGiven these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the result is an empty array.", type='text')]
2024-08-06 22:02:19,453 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result:

[]

Explanation:
None of the provided clinical trials have a compatibility score of 70 or higher for the given patient profile. Here's a brief explanation for each trial:

1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors and aging. The patient's profile doesn't mention any cardiovascular conditions or risk factors, and the age range (65-84) doesn't match the patient's age (31 years old).

2. NCT03530579 (Community Health Worker Diabetes Prevention Intervention): This study is specifically for Korean and South Asian Americans at risk for diabetes. The patient's profile doesn't indicate ethnicity or diabetes risk factors.

3. NCT05900479 (Service Dogs for Military Veterans With PTSD): While the patient has depression and anxiety, the study is specifically for military veterans with PTSD, which doesn't match the patient's profile.

4. NCT04679779 (Virtual Reality in Children With Hemiparesis): This study is for children with cerebral palsy, which doesn't match the adult patient's profile or medical conditions.

Given these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the result is an empty array.
2024-08-06 22:02:19,453 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:02:19,454 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:02:20,637 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:12:56,939 - app - INFO - Initializing Flask app...
2024-08-06 22:12:56,941 - app - INFO - Configuring app...
2024-08-06 22:12:56,941 - app - INFO - Setting up CORS...
2024-08-06 22:12:56,941 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:12:57,126 - app - INFO - Initializing JWT manager...
2024-08-06 22:12:57,126 - app - INFO - Setting up rate limiting...
2024-08-06 22:12:57,127 - app - INFO - Setting up database...
2024-08-06 22:12:57,127 - app - INFO - Starting database setup...
2024-08-06 22:12:57,939 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:12:57,939 - app - INFO - Database setup completed successfully
2024-08-06 22:12:57,939 - app - INFO - Registering error handler...
2024-08-06 22:12:57,940 - app - INFO - Initializing CLI commands...
2024-08-06 22:12:57,940 - app - INFO - Registering routes...
2024-08-06 22:12:57,946 - app - INFO - Initializing services...
2024-08-06 22:12:57,956 - app - INFO - Initializing email service...
2024-08-06 22:12:57,956 - app - INFO - Setting up scheduler...
2024-08-06 22:12:57,959 - app - INFO - Initializing scheduler...
2024-08-06 22:12:57,960 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:12:57,960 - app - INFO - Application initialized successfully
2024-08-06 22:12:59,435 - app - INFO - Initializing Flask app...
2024-08-06 22:12:59,436 - app - INFO - Configuring app...
2024-08-06 22:12:59,437 - app - INFO - Setting up CORS...
2024-08-06 22:12:59,437 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:12:59,695 - app - INFO - Initializing JWT manager...
2024-08-06 22:12:59,696 - app - INFO - Setting up rate limiting...
2024-08-06 22:12:59,697 - app - INFO - Setting up database...
2024-08-06 22:12:59,697 - app - INFO - Starting database setup...
2024-08-06 22:13:00,247 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:13:00,247 - app - INFO - Database setup completed successfully
2024-08-06 22:13:00,248 - app - INFO - Registering error handler...
2024-08-06 22:13:00,248 - app - INFO - Initializing CLI commands...
2024-08-06 22:13:00,248 - app - INFO - Registering routes...
2024-08-06 22:13:00,254 - app - INFO - Initializing services...
2024-08-06 22:13:00,263 - app - INFO - Initializing email service...
2024-08-06 22:13:00,263 - app - INFO - Setting up scheduler...
2024-08-06 22:13:00,266 - app - INFO - Initializing scheduler...
2024-08-06 22:13:00,267 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:13:00,267 - app - INFO - Application initialized successfully
2024-08-06 22:13:08,411 - app - INFO - Initializing Flask app...
2024-08-06 22:13:08,414 - app - INFO - Configuring app...
2024-08-06 22:13:08,414 - app - INFO - Setting up CORS...
2024-08-06 22:13:08,415 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:13:08,605 - app - INFO - Initializing JWT manager...
2024-08-06 22:13:08,605 - app - INFO - Setting up rate limiting...
2024-08-06 22:13:08,606 - app - INFO - Setting up database...
2024-08-06 22:13:08,606 - app - INFO - Starting database setup...
2024-08-06 22:13:09,236 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:13:09,236 - app - INFO - Database setup completed successfully
2024-08-06 22:13:09,237 - app - INFO - Registering error handler...
2024-08-06 22:13:09,238 - app - INFO - Initializing CLI commands...
2024-08-06 22:13:09,238 - app - INFO - Registering routes...
2024-08-06 22:20:06,053 - app - INFO - Initializing Flask app...
2024-08-06 22:20:06,054 - app - INFO - Configuring app...
2024-08-06 22:20:06,054 - app - INFO - Setting up CORS...
2024-08-06 22:20:06,054 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:20:06,244 - app - INFO - Initializing JWT manager...
2024-08-06 22:20:06,244 - app - INFO - Setting up rate limiting...
2024-08-06 22:20:06,245 - app - INFO - Setting up database...
2024-08-06 22:20:06,245 - app - INFO - Starting database setup...
2024-08-06 22:20:07,205 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:20:07,205 - app - INFO - Database setup completed successfully
2024-08-06 22:20:07,205 - app - INFO - Registering error handler...
2024-08-06 22:20:07,205 - app - INFO - Initializing CLI commands...
2024-08-06 22:20:07,206 - app - INFO - Registering routes...
2024-08-06 22:20:07,230 - app - INFO - Initializing services...
2024-08-06 22:20:07,238 - app - INFO - Initializing email service...
2024-08-06 22:20:07,239 - app - INFO - Setting up scheduler...
2024-08-06 22:20:07,242 - app - INFO - Initializing scheduler...
2024-08-06 22:20:07,242 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:20:07,242 - app - INFO - Application initialized successfully
2024-08-06 22:20:08,919 - app - INFO - Initializing Flask app...
2024-08-06 22:20:08,921 - app - INFO - Configuring app...
2024-08-06 22:20:08,921 - app - INFO - Setting up CORS...
2024-08-06 22:20:08,921 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:20:09,177 - app - INFO - Initializing JWT manager...
2024-08-06 22:20:09,177 - app - INFO - Setting up rate limiting...
2024-08-06 22:20:09,178 - app - INFO - Setting up database...
2024-08-06 22:20:09,179 - app - INFO - Starting database setup...
2024-08-06 22:20:09,906 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:20:09,906 - app - INFO - Database setup completed successfully
2024-08-06 22:20:09,907 - app - INFO - Registering error handler...
2024-08-06 22:20:09,907 - app - INFO - Initializing CLI commands...
2024-08-06 22:20:09,907 - app - INFO - Registering routes...
2024-08-06 22:20:09,913 - app - INFO - Initializing services...
2024-08-06 22:20:09,926 - app - INFO - Initializing email service...
2024-08-06 22:20:09,926 - app - INFO - Setting up scheduler...
2024-08-06 22:20:09,932 - app - INFO - Initializing scheduler...
2024-08-06 22:20:09,933 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:20:09,933 - app - INFO - Application initialized successfully
2024-08-06 22:20:33,509 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:20:34,122 - app.database - INFO - Database connection established successfully
2024-08-06 22:20:34,342 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 22:20:34,342 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:20:34,905 - app.database - INFO - Database connection established successfully
2024-08-06 22:20:34,992 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 22:20:34,998 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:20:35,523 - app.database - INFO - Database connection established successfully
2024-08-06 22:20:35,562 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:20:35,568 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 22:20:35,568 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:20:36,160 - app.database - INFO - Database connection established successfully
2024-08-06 22:20:36,222 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 22:20:36,227 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:20:36,743 - app.database - INFO - Database connection established successfully
2024-08-06 22:20:36,806 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:20:36,827 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:20:37,355 - app.database - INFO - Database connection established successfully
2024-08-06 22:20:37,394 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:20:37,401 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:20:38,004 - app.database - INFO - Database connection established successfully
2024-08-06 22:20:38,045 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:20:38,113 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:20:38,698 - app.database - INFO - Database connection established successfully
2024-08-06 22:20:38,996 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:20:44,740 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The available trials focus on:\n\n1. Chronic Myelogenous Leukemia (NCT00072579)\n2. Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)\n3. Smoking and exposure to smoke constituents (NCT00812279)\n4. Adolescent alcohol use and brain development (NCT01511679)\n\nThese trials are not compatible with the patient's profile, as they target different conditions and age groups. Therefore, no trials meet the minimum compatibility score of 70 or higher.", type='text')]
2024-08-06 22:20:44,741 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The available trials focus on:\n\n1. Chronic Myelogenous Leukemia (NCT00072579)\n2. Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)\n3. Smoking and exposure to smoke constituents (NCT00812279)\n4. Adolescent alcohol use and brain development (NCT01511679)\n\nThese trials are not compatible with the patient's profile, as they target different conditions and age groups. Therefore, no trials meet the minimum compatibility score of 70 or higher.", type='text')]
2024-08-06 22:20:44,741 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The available trials focus on:

1. Chronic Myelogenous Leukemia (NCT00072579)
2. Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)
3. Smoking and exposure to smoke constituents (NCT00812279)
4. Adolescent alcohol use and brain development (NCT01511679)

These trials are not compatible with the patient's profile, as they target different conditions and age groups. Therefore, no trials meet the minimum compatibility score of 70 or higher.
2024-08-06 22:20:44,742 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:20:44,742 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:20:45,926 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:20:50,157 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the clinical trial presented (NCT04690179), which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe patient does not have any of the conditions mentioned in the trial (sarcopenia, obesity, or incisional hernia), and the trial's focus is not related to the patient's reported medical conditions (depression and anxiety).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:20:50,158 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the clinical trial presented (NCT04690179), which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe patient does not have any of the conditions mentioned in the trial (sarcopenia, obesity, or incisional hernia), and the trial's focus is not related to the patient's reported medical conditions (depression and anxiety).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:20:50,158 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the clinical trial presented (NCT04690179), which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

The patient does not have any of the conditions mentioned in the trial (sarcopenia, obesity, or incisional hernia), and the trial's focus is not related to the patient's reported medical conditions (depression and anxiety).

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 22:20:50,158 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:20:50,158 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:20:51,461 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:20:57,297 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. None of the provided clinical trials specifically target depression or anxiety.\n3. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, which are not directly related to the patient's conditions.\n4. The patient's age, gender, and medical history do not align closely with the eligibility criteria of any of the provided trials.\n\nAs a result, there are no high-compatibility matches (score 70 or above) between this patient and the given clinical trials.", type='text')]
2024-08-06 22:20:57,298 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. None of the provided clinical trials specifically target depression or anxiety.\n3. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, which are not directly related to the patient's conditions.\n4. The patient's age, gender, and medical history do not align closely with the eligibility criteria of any of the provided trials.\n\nAs a result, there are no high-compatibility matches (score 70 or above) between this patient and the given clinical trials.", type='text')]
2024-08-06 22:20:57,298 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. None of the provided clinical trials specifically target depression or anxiety.
3. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, which are not directly related to the patient's conditions.
4. The patient's age, gender, and medical history do not align closely with the eligibility criteria of any of the provided trials.

As a result, there are no high-compatibility matches (score 70 or above) between this patient and the given clinical trials.
2024-08-06 22:20:57,298 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:20:57,298 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:20:58,661 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:21:01,652 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. The two clinical trials provided are focused on type 2 diabetes and non-small cell lung cancer, which are not related to the patient's conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:21:01,652 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. The two clinical trials provided are focused on type 2 diabetes and non-small cell lung cancer, which are not related to the patient's conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:21:01,652 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. The two clinical trials provided are focused on type 2 diabetes and non-small cell lung cancer, which are not related to the patient's conditions.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 22:21:01,653 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:21:01,653 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:21:03,041 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:21:08,597 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:21:08,599 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:21:08,599 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.
2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.
3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 22:21:08,600 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:21:08,600 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:21:09,877 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:21:13,569 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) doesn't align closely with the specific conditions and eligibility criteria of the given trials, which focus on breast cancer, lung transplantation, workplace safety, and choroidal thickness measurements.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:21:13,569 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) doesn't align closely with the specific conditions and eligibility criteria of the given trials, which focus on breast cancer, lung transplantation, workplace safety, and choroidal thickness measurements.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:21:13,569 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) doesn't align closely with the specific conditions and eligibility criteria of the given trials, which focus on breast cancer, lung transplantation, workplace safety, and choroidal thickness measurements.

Therefore, the output is an empty array:

[]
2024-08-06 22:21:13,570 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:21:13,570 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:21:14,834 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:40:37,702 - app - INFO - Initializing Flask app...
2024-08-06 22:40:37,703 - app - INFO - Configuring app...
2024-08-06 22:40:37,703 - app - INFO - Setting up CORS...
2024-08-06 22:40:37,703 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:40:37,870 - app - INFO - Initializing JWT manager...
2024-08-06 22:40:37,871 - app - INFO - Setting up rate limiting...
2024-08-06 22:40:37,871 - app - INFO - Setting up database...
2024-08-06 22:40:37,872 - app - INFO - Starting database setup...
2024-08-06 22:40:38,705 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:40:38,705 - app - INFO - Database setup completed successfully
2024-08-06 22:40:38,706 - app - INFO - Registering error handler...
2024-08-06 22:40:38,706 - app - INFO - Initializing CLI commands...
2024-08-06 22:40:38,706 - app - INFO - Registering routes...
2024-08-06 22:40:38,712 - app - INFO - Initializing services...
2024-08-06 22:40:38,721 - app - INFO - Initializing email service...
2024-08-06 22:40:38,722 - app - INFO - Setting up scheduler...
2024-08-06 22:40:38,726 - app - INFO - Initializing scheduler...
2024-08-06 22:40:38,726 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:40:38,727 - app - INFO - Application initialized successfully
2024-08-06 22:40:40,274 - app - INFO - Initializing Flask app...
2024-08-06 22:40:40,275 - app - INFO - Configuring app...
2024-08-06 22:40:40,275 - app - INFO - Setting up CORS...
2024-08-06 22:40:40,275 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:40:40,462 - app - INFO - Initializing JWT manager...
2024-08-06 22:40:40,462 - app - INFO - Setting up rate limiting...
2024-08-06 22:40:40,463 - app - INFO - Setting up database...
2024-08-06 22:40:40,463 - app - INFO - Starting database setup...
2024-08-06 22:40:41,034 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:40:41,035 - app - INFO - Database setup completed successfully
2024-08-06 22:40:41,035 - app - INFO - Registering error handler...
2024-08-06 22:40:41,035 - app - INFO - Initializing CLI commands...
2024-08-06 22:40:41,036 - app - INFO - Registering routes...
2024-08-06 22:40:41,041 - app - INFO - Initializing services...
2024-08-06 22:40:41,051 - app - INFO - Initializing email service...
2024-08-06 22:40:41,052 - app - INFO - Setting up scheduler...
2024-08-06 22:40:41,055 - app - INFO - Initializing scheduler...
2024-08-06 22:40:41,056 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:40:41,056 - app - INFO - Application initialized successfully
2024-08-06 22:40:50,409 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:40:50,963 - app.database - INFO - Database connection established successfully
2024-08-06 22:40:56,030 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:40:56,664 - app.database - INFO - Database connection established successfully
2024-08-06 22:40:56,923 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 22:40:56,923 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:40:57,705 - app.database - INFO - Database connection established successfully
2024-08-06 22:40:57,762 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 22:40:57,768 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:40:58,498 - app.database - INFO - Database connection established successfully
2024-08-06 22:40:58,617 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:40:58,624 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 22:40:58,625 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:40:59,286 - app.database - INFO - Database connection established successfully
2024-08-06 22:40:59,334 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 22:40:59,338 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:40:59,913 - app.database - INFO - Database connection established successfully
2024-08-06 22:40:59,956 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:41:06,652 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:41:07,194 - app.database - INFO - Database connection established successfully
2024-08-06 22:41:07,270 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:41:07,276 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:41:07,896 - app.database - INFO - Database connection established successfully
2024-08-06 22:41:07,938 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:41:09,433 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:41:10,000 - app.database - INFO - Database connection established successfully
2024-08-06 22:41:10,214 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:41:16,463 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in any of the provided clinical trials.\n\n2. The patient's age (31 years old) and gender (male) do not specifically match the eligibility criteria for any of the trials.\n\n3. The patient's current medication (Escitalopram) is not relevant to any of the trials' interventions or exclusion criteria.\n\n4. The clinical trials focus on conditions such as chronic myelogenous leukemia, erectile dysfunction, benign prostatic hyperplasia, smoking, and alcohol abuse, which are not present in the patient's profile.\n\n5. The patient does not meet the specific disease characteristics or eligibility criteria required for any of the trials.\n\nGiven these factors, none of the provided clinical trials are suitable matches for this patient with a score of 70 or higher.", type='text')]
2024-08-06 22:41:16,463 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in any of the provided clinical trials.\n\n2. The patient's age (31 years old) and gender (male) do not specifically match the eligibility criteria for any of the trials.\n\n3. The patient's current medication (Escitalopram) is not relevant to any of the trials' interventions or exclusion criteria.\n\n4. The clinical trials focus on conditions such as chronic myelogenous leukemia, erectile dysfunction, benign prostatic hyperplasia, smoking, and alcohol abuse, which are not present in the patient's profile.\n\n5. The patient does not meet the specific disease characteristics or eligibility criteria required for any of the trials.\n\nGiven these factors, none of the provided clinical trials are suitable matches for this patient with a score of 70 or higher.", type='text')]
2024-08-06 22:41:16,464 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in any of the provided clinical trials.

2. The patient's age (31 years old) and gender (male) do not specifically match the eligibility criteria for any of the trials.

3. The patient's current medication (Escitalopram) is not relevant to any of the trials' interventions or exclusion criteria.

4. The clinical trials focus on conditions such as chronic myelogenous leukemia, erectile dysfunction, benign prostatic hyperplasia, smoking, and alcohol abuse, which are not present in the patient's profile.

5. The patient does not meet the specific disease characteristics or eligibility criteria required for any of the trials.

Given these factors, none of the provided clinical trials are suitable matches for this patient with a score of 70 or higher.
2024-08-06 22:41:16,464 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:41:16,464 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:41:17,667 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:41:24,208 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. The only clinical trial provided (NCT04690179) focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery. This trial does not align with the patient's medical conditions or characteristics:\n\n1. The trial is about sarcopenia and obesity, which are not mentioned in the patient's profile.\n2. The trial focuses on abdominal wall surgery, which is not relevant to the patient's conditions.\n3. The patient's age (31) doesn't suggest a high risk for sarcopenia, which is more common in older adults.\n4. The patient's medical conditions (depression and anxiety) are not related to the trial's focus.\n\nGiven these factors, the compatibility score for this trial would be well below 70, resulting in no suitable matches for the patient.", type='text')]
2024-08-06 22:41:24,209 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. The only clinical trial provided (NCT04690179) focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery. This trial does not align with the patient's medical conditions or characteristics:\n\n1. The trial is about sarcopenia and obesity, which are not mentioned in the patient's profile.\n2. The trial focuses on abdominal wall surgery, which is not relevant to the patient's conditions.\n3. The patient's age (31) doesn't suggest a high risk for sarcopenia, which is more common in older adults.\n4. The patient's medical conditions (depression and anxiety) are not related to the trial's focus.\n\nGiven these factors, the compatibility score for this trial would be well below 70, resulting in no suitable matches for the patient.", type='text')]
2024-08-06 22:41:24,209 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. The only clinical trial provided (NCT04690179) focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery. This trial does not align with the patient's medical conditions or characteristics:

1. The trial is about sarcopenia and obesity, which are not mentioned in the patient's profile.
2. The trial focuses on abdominal wall surgery, which is not relevant to the patient's conditions.
3. The patient's age (31) doesn't suggest a high risk for sarcopenia, which is more common in older adults.
4. The patient's medical conditions (depression and anxiety) are not related to the trial's focus.

Given these factors, the compatibility score for this trial would be well below 70, resulting in no suitable matches for the patient.
2024-08-06 22:41:24,210 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:41:24,210 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:41:25,398 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:41:31,925 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:\n\n1. Heart disease and cardiovascular risk factors (NCT00626379)\n2. Diabetes prevention in Korean and South Asian Americans (NCT03530579)\n3. PTSD in military veterans (NCT05900479)\n4. Virtual reality for children with cerebral palsy (NCT04679779)\n\nThese trials either focus on different medical conditions, specific demographics, or age groups that do not align with Ethan's profile. Therefore, none of the trials reach the threshold of 70 or higher for compatibility.", type='text')]
2024-08-06 22:41:31,926 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:\n\n1. Heart disease and cardiovascular risk factors (NCT00626379)\n2. Diabetes prevention in Korean and South Asian Americans (NCT03530579)\n3. PTSD in military veterans (NCT05900479)\n4. Virtual reality for children with cerebral palsy (NCT04679779)\n\nThese trials either focus on different medical conditions, specific demographics, or age groups that do not align with Ethan's profile. Therefore, none of the trials reach the threshold of 70 or higher for compatibility.", type='text')]
2024-08-06 22:41:31,926 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:

1. Heart disease and cardiovascular risk factors (NCT00626379)
2. Diabetes prevention in Korean and South Asian Americans (NCT03530579)
3. PTSD in military veterans (NCT05900479)
4. Virtual reality for children with cerebral palsy (NCT04679779)

These trials either focus on different medical conditions, specific demographics, or age groups that do not align with Ethan's profile. Therefore, none of the trials reach the threshold of 70 or higher for compatibility.
2024-08-06 22:41:31,926 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:41:31,927 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:41:33,119 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:41:36,596 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety, and is taking Escitalopram. The provided clinical trials are focused on type 2 diabetes and non-small cell lung cancer, which are not relevant to the patient's medical conditions.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:41:36,597 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety, and is taking Escitalopram. The provided clinical trials are focused on type 2 diabetes and non-small cell lung cancer, which are not relevant to the patient's medical conditions.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:41:36,597 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety, and is taking Escitalopram. The provided clinical trials are focused on type 2 diabetes and non-small cell lung cancer, which are not relevant to the patient's medical conditions.

Therefore, the output is an empty array:

[]
2024-08-06 22:41:36,597 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:41:36,598 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:41:37,793 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:41:44,283 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions listed in the patient's profile.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n\n3. The third trial (NCT04491279) is for Stroke patients, which is not applicable to this patient.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:41:44,283 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions listed in the patient's profile.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n\n3. The third trial (NCT04491279) is for Stroke patients, which is not applicable to this patient.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:41:44,283 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions listed in the patient's profile.

2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.

3. The third trial (NCT04491279) is for Stroke patients, which is not applicable to this patient.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 22:41:44,284 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:41:44,284 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:41:45,509 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:41:52,024 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not suitable for the patient's current medical conditions and profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 22:41:52,025 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not suitable for the patient's current medical conditions and profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 22:41:52,025 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:

1. Scalp cooling for metastatic breast cancer patients
2. Extracorporeal photopheresis for lung transplant patients
3. Health and safety training in the workplace
4. Choroidal thickness measurements related to refractive errors

These trials are not suitable for the patient's current medical conditions and profile, resulting in low compatibility scores (below 70) for all trials.
2024-08-06 22:41:52,025 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:41:52,027 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:41:53,220 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:41:58,844 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, I'm afraid there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on conditions such as renal failure, hepatitis C, melanoma, and heart failure.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThe main reasons for no matches are:\n1. The patient's medical conditions (depression and anxiety) are not the focus of any of the provided trials.\n2. The patient doesn't have any of the specific conditions required for the trials (such as renal failure, hepatitis C, melanoma, or heart failure).\n3. The patient's age and general health profile don't match the eligibility criteria for the provided trials.\n\nIf you have additional clinical trials that focus on mental health conditions like depression or anxiety, those might be more suitable for this patient.", type='text')]
2024-08-06 22:41:58,844 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, I'm afraid there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on conditions such as renal failure, hepatitis C, melanoma, and heart failure.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThe main reasons for no matches are:\n1. The patient's medical conditions (depression and anxiety) are not the focus of any of the provided trials.\n2. The patient doesn't have any of the specific conditions required for the trials (such as renal failure, hepatitis C, melanoma, or heart failure).\n3. The patient's age and general health profile don't match the eligibility criteria for the provided trials.\n\nIf you have additional clinical trials that focus on mental health conditions like depression or anxiety, those might be more suitable for this patient.", type='text')]
2024-08-06 22:41:58,844 - app.services.anthropic_service - INFO - Parsing response: Based on the provided patient profile and clinical trial data, I'm afraid there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on conditions such as renal failure, hepatitis C, melanoma, and heart failure.

Therefore, the output in the requested JSON format would be an empty array:

[]

The main reasons for no matches are:
1. The patient's medical conditions (depression and anxiety) are not the focus of any of the provided trials.
2. The patient doesn't have any of the specific conditions required for the trials (such as renal failure, hepatitis C, melanoma, or heart failure).
3. The patient's age and general health profile don't match the eligibility criteria for the provided trials.

If you have additional clinical trials that focus on mental health conditions like depression or anxiety, those might be more suitable for this patient.
2024-08-06 22:41:58,844 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:41:58,845 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:42:00,052 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:42:07,997 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, has medical conditions of depression and anxiety, and is taking Escitalopram.\n2. The three clinical trials provided are focused on:\n   - Thyroid and cortisol hormone response in sepsis patients\n   - Safety and tolerability of RO7049665 in healthy volunteers\n   - Assessment of changes in abdominal fat in obese patients\n\nNone of these trials are directly related to depression or anxiety, which are the patient's primary medical conditions. Additionally:\n\n- The sepsis trial explicitly excludes patients with thyroid disease, which doesn't apply to this patient, but also doesn't make it relevant.\n- The healthy volunteers trial is not suitable for patients with existing medical conditions.\n- The obesity trial is focused on females and obesity, which doesn't match this male patient's profile.\n\nTherefore, none of the trials have a high compatibility score with this patient's profile, resulting in an empty array as the output.", type='text')]
2024-08-06 22:42:07,997 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, has medical conditions of depression and anxiety, and is taking Escitalopram.\n2. The three clinical trials provided are focused on:\n   - Thyroid and cortisol hormone response in sepsis patients\n   - Safety and tolerability of RO7049665 in healthy volunteers\n   - Assessment of changes in abdominal fat in obese patients\n\nNone of these trials are directly related to depression or anxiety, which are the patient's primary medical conditions. Additionally:\n\n- The sepsis trial explicitly excludes patients with thyroid disease, which doesn't apply to this patient, but also doesn't make it relevant.\n- The healthy volunteers trial is not suitable for patients with existing medical conditions.\n- The obesity trial is focused on females and obesity, which doesn't match this male patient's profile.\n\nTherefore, none of the trials have a high compatibility score with this patient's profile, resulting in an empty array as the output.", type='text')]
2024-08-06 22:42:07,998 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, has medical conditions of depression and anxiety, and is taking Escitalopram.
2. The three clinical trials provided are focused on:
   - Thyroid and cortisol hormone response in sepsis patients
   - Safety and tolerability of RO7049665 in healthy volunteers
   - Assessment of changes in abdominal fat in obese patients

None of these trials are directly related to depression or anxiety, which are the patient's primary medical conditions. Additionally:

- The sepsis trial explicitly excludes patients with thyroid disease, which doesn't apply to this patient, but also doesn't make it relevant.
- The healthy volunteers trial is not suitable for patients with existing medical conditions.
- The obesity trial is focused on females and obesity, which doesn't match this male patient's profile.

Therefore, none of the trials have a high compatibility score with this patient's profile, resulting in an empty array as the output.
2024-08-06 22:42:07,999 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:42:07,999 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:42:09,231 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:42:12,297 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:42:12,298 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:42:12,298 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:

[]
2024-08-06 22:42:12,300 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:42:12,300 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:42:13,514 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:42:18,453 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials.\n\nThe first trial (NCT05315479) is focused on post-operative pain in children aged 2 to <17 years, which doesn't match the patient's age (31 years old) or medical conditions.\n\nThe second trial (NCT02052479) is for adolescent females with Polycystic Ovary Syndrome (PCOS), which also doesn't match the patient's gender (male) or medical conditions.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 22:42:18,453 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials.\n\nThe first trial (NCT05315479) is focused on post-operative pain in children aged 2 to <17 years, which doesn't match the patient's age (31 years old) or medical conditions.\n\nThe second trial (NCT02052479) is for adolescent females with Polycystic Ovary Syndrome (PCOS), which also doesn't match the patient's gender (male) or medical conditions.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 22:42:18,453 - app.services.anthropic_service - INFO - Parsing response: Based on the given patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials.

The first trial (NCT05315479) is focused on post-operative pain in children aged 2 to <17 years, which doesn't match the patient's age (31 years old) or medical conditions.

The second trial (NCT02052479) is for adolescent females with Polycystic Ovary Syndrome (PCOS), which also doesn't match the patient's gender (male) or medical conditions.

Therefore, the output in the requested JSON format would be an empty array:

[]
2024-08-06 22:42:18,453 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:42:18,454 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:42:19,637 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:42:25,774 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasoning:\n1. The patient's medical conditions (depression and anxiety) do not match any of the conditions targeted by the provided clinical trials.\n2. The patient's age (31 years old, born in 1992) does not fit the age criteria for the trials that specify age requirements.\n3. The patient's current medication (Escitalopram) is not relevant to any of the trials' interventions or exclusion criteria.\n4. The trials focus on conditions such as influenza, postpartum perineal tears, colorectal cancer with liver metastases, and oncologist satisfaction, which are not related to the patient's profile.\n\nGiven these factors, none of the trials have a high enough compatibility score to be recommended for this patient.", type='text')]
2024-08-06 22:42:25,775 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasoning:\n1. The patient's medical conditions (depression and anxiety) do not match any of the conditions targeted by the provided clinical trials.\n2. The patient's age (31 years old, born in 1992) does not fit the age criteria for the trials that specify age requirements.\n3. The patient's current medication (Escitalopram) is not relevant to any of the trials' interventions or exclusion criteria.\n4. The trials focus on conditions such as influenza, postpartum perineal tears, colorectal cancer with liver metastases, and oncologist satisfaction, which are not related to the patient's profile.\n\nGiven these factors, none of the trials have a high enough compatibility score to be recommended for this patient.", type='text')]
2024-08-06 22:42:25,776 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasoning:
1. The patient's medical conditions (depression and anxiety) do not match any of the conditions targeted by the provided clinical trials.
2. The patient's age (31 years old, born in 1992) does not fit the age criteria for the trials that specify age requirements.
3. The patient's current medication (Escitalopram) is not relevant to any of the trials' interventions or exclusion criteria.
4. The trials focus on conditions such as influenza, postpartum perineal tears, colorectal cancer with liver metastases, and oncologist satisfaction, which are not related to the patient's profile.

Given these factors, none of the trials have a high enough compatibility score to be recommended for this patient.
2024-08-06 22:42:25,776 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:42:25,776 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:42:26,989 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:42:33,917 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='After carefully analyzing the patient profile and the provided clinical trials, I\'ve determined that there are no suitable matches with a compatibility score of 70 or higher. Here\'s why:\n\n1. The first trial (NCT06378879) is focused on anesthesia methods during upper endoscopy. This is not related to the patient\'s medical conditions of depression and anxiety.\n\n2. The second trial (NCT02710279) is related to unipolar depression, which could potentially be relevant. However, there are several factors that significantly reduce the compatibility:\n\n   - The trial specifically recruits female patients, while the patient (Ethan) is male.\n   - The trial is focused on suicidal behavior, which is not mentioned in the patient\'s profile.\n   - The trial status is "TERMINATED", which means it\'s no longer active.\n   - The trial has specific requirements related to social rejection and inflammatory responses, which are not indicated in the patient\'s profile.\n\nGiven these factors, neither trial reaches the threshold of 70 or higher for compatibility. Therefore, the output is an empty array:\n\n[]', type='text')]
2024-08-06 22:42:33,918 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='After carefully analyzing the patient profile and the provided clinical trials, I\'ve determined that there are no suitable matches with a compatibility score of 70 or higher. Here\'s why:\n\n1. The first trial (NCT06378879) is focused on anesthesia methods during upper endoscopy. This is not related to the patient\'s medical conditions of depression and anxiety.\n\n2. The second trial (NCT02710279) is related to unipolar depression, which could potentially be relevant. However, there are several factors that significantly reduce the compatibility:\n\n   - The trial specifically recruits female patients, while the patient (Ethan) is male.\n   - The trial is focused on suicidal behavior, which is not mentioned in the patient\'s profile.\n   - The trial status is "TERMINATED", which means it\'s no longer active.\n   - The trial has specific requirements related to social rejection and inflammatory responses, which are not indicated in the patient\'s profile.\n\nGiven these factors, neither trial reaches the threshold of 70 or higher for compatibility. Therefore, the output is an empty array:\n\n[]', type='text')]
2024-08-06 22:42:33,918 - app.services.anthropic_service - INFO - Parsing response: After carefully analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. The first trial (NCT06378879) is focused on anesthesia methods during upper endoscopy. This is not related to the patient's medical conditions of depression and anxiety.

2. The second trial (NCT02710279) is related to unipolar depression, which could potentially be relevant. However, there are several factors that significantly reduce the compatibility:

   - The trial specifically recruits female patients, while the patient (Ethan) is male.
   - The trial is focused on suicidal behavior, which is not mentioned in the patient's profile.
   - The trial status is "TERMINATED", which means it's no longer active.
   - The trial has specific requirements related to social rejection and inflammatory responses, which are not indicated in the patient's profile.

Given these factors, neither trial reaches the threshold of 70 or higher for compatibility. Therefore, the output is an empty array:

[]
2024-08-06 22:42:33,920 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:42:33,920 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:42:35,153 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:42:38,234 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials.\n\nHere's the empty array as requested for cases with no suitable matches:\n\n[]", type='text')]
2024-08-06 22:42:38,234 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials.\n\nHere's the empty array as requested for cases with no suitable matches:\n\n[]", type='text')]
2024-08-06 22:42:38,234 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials.

Here's the empty array as requested for cases with no suitable matches:

[]
2024-08-06 22:42:38,235 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:42:38,235 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:42:39,473 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:42:44,155 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to depression, anxiety, or psychiatric medications. The trials focus on various other conditions such as coronary artery bypass grafting, ADHD in children, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis. These conditions and study focuses do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 22:42:44,156 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to depression, anxiety, or psychiatric medications. The trials focus on various other conditions such as coronary artery bypass grafting, ADHD in children, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis. These conditions and study focuses do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 22:42:44,157 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the result is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to depression, anxiety, or psychiatric medications. The trials focus on various other conditions such as coronary artery bypass grafting, ADHD in children, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis. These conditions and study focuses do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials.
2024-08-06 22:42:44,158 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:42:44,158 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:42:45,413 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:42:49,592 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT02199379: This trial is for patients with renal impairment, which doesn't match the patient's profile of depression and anxiety.\n\n2. NCT02407379: This trial is for patients with periodontitis, which is not mentioned in the patient's profile.\n\n3. NCT01100879: This trial is for patients with multiple myeloma and iron-deficiency anemia, which are not present in the patient's profile.\n\nNone of these trials align with the patient's medical conditions (depression and anxiety) or current medication (Escitalopram). Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:42:49,592 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT02199379: This trial is for patients with renal impairment, which doesn't match the patient's profile of depression and anxiety.\n\n2. NCT02407379: This trial is for patients with periodontitis, which is not mentioned in the patient's profile.\n\n3. NCT01100879: This trial is for patients with multiple myeloma and iron-deficiency anemia, which are not present in the patient's profile.\n\nNone of these trials align with the patient's medical conditions (depression and anxiety) or current medication (Escitalopram). Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:42:49,593 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. NCT02199379: This trial is for patients with renal impairment, which doesn't match the patient's profile of depression and anxiety.

2. NCT02407379: This trial is for patients with periodontitis, which is not mentioned in the patient's profile.

3. NCT01100879: This trial is for patients with multiple myeloma and iron-deficiency anemia, which are not present in the patient's profile.

None of these trials align with the patient's medical conditions (depression and anxiety) or current medication (Escitalopram). Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 22:42:49,594 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:42:49,594 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:42:50,844 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:42:54,269 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT06207279",\n        "compatibility_score": 80,\n        "reasons": [\n            "The trial includes depression as one of the conditions, which matches the patient\'s medical condition",\n            "The patient\'s age (31) falls within the trial\'s inclusion criteria of 18-60 years old",\n            "The trial is recruiting, indicating it\'s currently open for enrollment",\n            "The patient\'s gender (male) is not excluded from the trial"\n        ]\n    }\n]', type='text')]
2024-08-06 22:42:54,270 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT06207279",\n        "compatibility_score": 80,\n        "reasons": [\n            "The trial includes depression as one of the conditions, which matches the patient\'s medical condition",\n            "The patient\'s age (31) falls within the trial\'s inclusion criteria of 18-60 years old",\n            "The trial is recruiting, indicating it\'s currently open for enrollment",\n            "The patient\'s gender (male) is not excluded from the trial"\n        ]\n    }\n]', type='text')]
2024-08-06 22:42:54,270 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT06207279",
        "compatibility_score": 80,
        "reasons": [
            "The trial includes depression as one of the conditions, which matches the patient's medical condition",
            "The patient's age (31) falls within the trial's inclusion criteria of 18-60 years old",
            "The trial is recruiting, indicating it's currently open for enrollment",
            "The patient's gender (male) is not excluded [SQL REDACTED] the trial"
        ]
    }
]
2024-08-06 22:42:54,270 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-06 22:42:54,308 - app.services.trial_matching_service - INFO - Trial NCT06207279 already matched for user 66af0d2d118d8e248b49a856
2024-08-06 22:42:54,309 - app.services.trial_matching_service - INFO - Emitted 0 trial matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:42:54,309 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:42:55,544 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:43:01,339 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The first trial (NCT01939379) is for post-op pain following knee replacement surgery, which is not relevant to the patient's conditions.\n3. The second trial (NCT03356379) is for Popliteal Entrapment Syndrome, which is also not related to the patient's conditions.\n4. The third trial (NCT04114279) is for a surgical simulator for Duodenal Atresia, which is not relevant to the patient's profile.\n\nNone of these trials are related to depression or anxiety, which are the patient's primary medical conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:43:01,339 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The first trial (NCT01939379) is for post-op pain following knee replacement surgery, which is not relevant to the patient's conditions.\n3. The second trial (NCT03356379) is for Popliteal Entrapment Syndrome, which is also not related to the patient's conditions.\n4. The third trial (NCT04114279) is for a surgical simulator for Duodenal Atresia, which is not relevant to the patient's profile.\n\nNone of these trials are related to depression or anxiety, which are the patient's primary medical conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:43:01,339 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. The first trial (NCT01939379) is for post-op pain following knee replacement surgery, which is not relevant to the patient's conditions.
3. The second trial (NCT03356379) is for Popliteal Entrapment Syndrome, which is also not related to the patient's conditions.
4. The third trial (NCT04114279) is for a surgical simulator for Duodenal Atresia, which is not relevant to the patient's profile.

None of these trials are related to depression or anxiety, which are the patient's primary medical conditions. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 22:43:01,339 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:43:01,339 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:43:02,510 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:43:06,568 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (32-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the two provided clinical trials.\n\nThe first trial (NCT05359679) focuses on reducing inappropriate prescribing for people with dementia aged 65 and older, which does not apply to this patient.\n\nThe second trial (NCT04527679) is for patients with unresectable intrahepatic cholangiocarcinoma, which is also not relevant to the patient's conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:43:06,569 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (32-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the two provided clinical trials.\n\nThe first trial (NCT05359679) focuses on reducing inappropriate prescribing for people with dementia aged 65 and older, which does not apply to this patient.\n\nThe second trial (NCT04527679) is for patients with unresectable intrahepatic cholangiocarcinoma, which is also not relevant to the patient's conditions.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:43:06,569 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (32-year-old male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the two provided clinical trials.

The first trial (NCT05359679) focuses on reducing inappropriate prescribing for people with dementia aged 65 and older, which does not apply to this patient.

The second trial (NCT04527679) is for patients with unresectable intrahepatic cholangiocarcinoma, which is also not relevant to the patient's conditions.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 22:43:06,569 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:43:06,569 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:43:08,160 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:43:13,815 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. None of the provided clinical trials are directly related to depression, anxiety, or psychiatric medications.\n3. The trials cover breast cancer, children's snacking habits, knee arthroplasty infection, and dry eye treatment, which are not relevant to the patient's profile.\n4. The patient's age, gender, and medical conditions do not align with the eligibility criteria of any of the provided trials.\n\nAs a result, there are no suitable matches with a compatibility score of 70 or higher for this patient among the given clinical trials.", type='text')]
2024-08-06 22:43:13,816 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. None of the provided clinical trials are directly related to depression, anxiety, or psychiatric medications.\n3. The trials cover breast cancer, children's snacking habits, knee arthroplasty infection, and dry eye treatment, which are not relevant to the patient's profile.\n4. The patient's age, gender, and medical conditions do not align with the eligibility criteria of any of the provided trials.\n\nAs a result, there are no suitable matches with a compatibility score of 70 or higher for this patient among the given clinical trials.", type='text')]
2024-08-06 22:43:13,816 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. None of the provided clinical trials are directly related to depression, anxiety, or psychiatric medications.
3. The trials cover breast cancer, children's snacking habits, knee arthroplasty infection, and dry eye treatment, which are not relevant to the patient's profile.
4. The patient's age, gender, and medical conditions do not align with the eligibility criteria of any of the provided trials.

As a result, there are no suitable matches with a compatibility score of 70 or higher for this patient among the given clinical trials.
2024-08-06 22:43:13,816 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:43:13,816 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:43:15,277 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:43:18,348 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with any of the provided clinical trials, which focus on bleeding disorders, cardiovascular imaging, hematoma treatment, and Hodgkin Lymphoma.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:43:18,349 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with any of the provided clinical trials, which focus on bleeding disorders, cardiovascular imaging, hematoma treatment, and Hodgkin Lymphoma.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:43:18,349 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with any of the provided clinical trials, which focus on bleeding disorders, cardiovascular imaging, hematoma treatment, and Hodgkin Lymphoma.

Therefore, the output is an empty array:

[]
2024-08-06 22:43:18,351 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:43:18,352 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:43:19,847 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:43:22,730 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not closely match the eligibility criteria or focus of the two provided clinical trials, which are about postmenopausal women's sexual health and MRSA infections in nursing homes.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:43:22,730 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not closely match the eligibility criteria or focus of the two provided clinical trials, which are about postmenopausal women's sexual health and MRSA infections in nursing homes.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:43:22,731 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not closely match the eligibility criteria or focus of the two provided clinical trials, which are about postmenopausal women's sexual health and MRSA infections in nursing homes.

Therefore, the output is an empty array:

[]
2024-08-06 22:43:22,731 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:43:22,733 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:43:24,112 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:43:28,830 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT01566279 (CPCT-03 study): This trial is for solid tumors, which the patient doesn't have. It's also focused on cancer treatment, which is not relevant to the patient's conditions.\n\n2. NCT00973479 (Rheumatoid Arthritis study): This trial is specifically for rheumatoid arthritis, which the patient doesn't have. The patient's conditions (depression and anxiety) are not related to this study.\n\n3. NCT02744079 (Breast Cancer study): This trial is for women with breast cancer, which doesn't match the patient's gender (male) or medical conditions.\n\nNone of these trials are suitable for the patient's profile (male with depression and anxiety), resulting in compatibility scores well below 70 for all trials.", type='text')]
2024-08-06 22:43:28,831 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT01566279 (CPCT-03 study): This trial is for solid tumors, which the patient doesn't have. It's also focused on cancer treatment, which is not relevant to the patient's conditions.\n\n2. NCT00973479 (Rheumatoid Arthritis study): This trial is specifically for rheumatoid arthritis, which the patient doesn't have. The patient's conditions (depression and anxiety) are not related to this study.\n\n3. NCT02744079 (Breast Cancer study): This trial is for women with breast cancer, which doesn't match the patient's gender (male) or medical conditions.\n\nNone of these trials are suitable for the patient's profile (male with depression and anxiety), resulting in compatibility scores well below 70 for all trials.", type='text')]
2024-08-06 22:43:28,832 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. NCT01566279 (CPCT-03 study): This trial is for solid tumors, which the patient doesn't have. It's also focused on cancer treatment, which is not relevant to the patient's conditions.

2. NCT00973479 (Rheumatoid Arthritis study): This trial is specifically for rheumatoid arthritis, which the patient doesn't have. The patient's conditions (depression and anxiety) are not related to this study.

3. NCT02744079 (Breast Cancer study): This trial is for women with breast cancer, which doesn't match the patient's gender (male) or medical conditions.

None of these trials are suitable for the patient's profile (male with depression and anxiety), resulting in compatibility scores well below 70 for all trials.
2024-08-06 22:43:28,832 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:43:28,832 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:43:30,214 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:43:33,380 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the focus of the provided clinical trials, which are related to pancreatic cancer, vasculitis, and greater tuberosity fractures.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:43:33,381 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the focus of the provided clinical trials, which are related to pancreatic cancer, vasculitis, and greater tuberosity fractures.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:43:33,381 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the focus of the provided clinical trials, which are related to pancreatic cancer, vasculitis, and greater tuberosity fractures.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 22:43:33,381 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:43:33,381 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:43:34,722 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:43:40,515 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, has medical conditions of depression and anxiety, and is taking Escitalopram.\n\n2. The first trial (NCT02602379) is focused on pain management during surgery, which is not related to Ethan's conditions.\n\n3. The second trial (NCT00913679) is about hip resurfacing arthroplasty, which is also unrelated to Ethan's conditions.\n\nNeither of these trials addresses depression, anxiety, or involves the medication Escitalopram. Therefore, the compatibility score for both trials would be very low, certainly below 70.\n\nAs per the instructions, since no trials match with a score of 70 or higher, I'm returning an empty array:\n\n[]", type='text')]
2024-08-06 22:43:40,515 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, has medical conditions of depression and anxiety, and is taking Escitalopram.\n\n2. The first trial (NCT02602379) is focused on pain management during surgery, which is not related to Ethan's conditions.\n\n3. The second trial (NCT00913679) is about hip resurfacing arthroplasty, which is also unrelated to Ethan's conditions.\n\nNeither of these trials addresses depression, anxiety, or involves the medication Escitalopram. Therefore, the compatibility score for both trials would be very low, certainly below 70.\n\nAs per the instructions, since no trials match with a score of 70 or higher, I'm returning an empty array:\n\n[]", type='text')]
2024-08-06 22:43:40,515 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Here's why:

1. The patient, Ethan Brush, has medical conditions of depression and anxiety, and is taking Escitalopram.

2. The first trial (NCT02602379) is focused on pain management during surgery, which is not related to Ethan's conditions.

3. The second trial (NCT00913679) is about hip resurfacing arthroplasty, which is also unrelated to Ethan's conditions.

Neither of these trials addresses depression, anxiety, or involves the medication Escitalopram. Therefore, the compatibility score for both trials would be very low, certainly below 70.

As per the instructions, since no trials match with a score of 70 or higher, I'm returning an empty array:

[]
2024-08-06 22:43:40,516 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:43:40,516 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:43:41,896 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:43:47,934 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT02711579 (Celecoxib study): This trial is for healthy volunteers and focuses on brain electrophysiology. The patient has depression and anxiety, which excludes them from being considered a healthy volunteer.\n\n2. NCT01174979 (Caroverine for inner ear diseases): This trial is specifically for patients with tinnitus and inner ear diseases, which are not mentioned in the patient's medical conditions.\n\n3. NCT05990179 (Newborn screening study): This trial is for newborns, and the patient is an adult born in 1992.\n\nGiven these considerations, the appropriate JSON output would be an empty array:\n\n[]\n\nThe patient's profile (31-year-old male with depression and anxiety) does not align well with any of the provided clinical trials, which focus on healthy volunteers, inner ear diseases, and newborn screening respectively.", type='text')]
2024-08-06 22:43:47,934 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT02711579 (Celecoxib study): This trial is for healthy volunteers and focuses on brain electrophysiology. The patient has depression and anxiety, which excludes them from being considered a healthy volunteer.\n\n2. NCT01174979 (Caroverine for inner ear diseases): This trial is specifically for patients with tinnitus and inner ear diseases, which are not mentioned in the patient's medical conditions.\n\n3. NCT05990179 (Newborn screening study): This trial is for newborns, and the patient is an adult born in 1992.\n\nGiven these considerations, the appropriate JSON output would be an empty array:\n\n[]\n\nThe patient's profile (31-year-old male with depression and anxiety) does not align well with any of the provided clinical trials, which focus on healthy volunteers, inner ear diseases, and newborn screening respectively.", type='text')]
2024-08-06 22:43:47,935 - app.services.anthropic_service - INFO - Parsing response: After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT02711579 (Celecoxib study): This trial is for healthy volunteers and focuses on brain electrophysiology. The patient has depression and anxiety, which excludes them [SQL REDACTED] being considered a healthy volunteer.

2. NCT01174979 (Caroverine for inner ear diseases): This trial is specifically for patients with tinnitus and inner ear diseases, which are not mentioned in the patient's medical conditions.

3. NCT05990179 (Newborn screening study): This trial is for newborns, and the patient is an adult born in 1992.

Given these considerations, the appropriate JSON output would be an empty array:

[]

The patient's profile (31-year-old male with depression and anxiety) does not align well with any of the provided clinical trials, which focus on healthy volunteers, inner ear diseases, and newborn screening respectively.
2024-08-06 22:43:47,935 - app.services.anthropic_service - ERROR - Error parsing matching response: Expecting value: line 1 column 2 (char 1)
2024-08-06 22:43:47,935 - app.services.anthropic_service - ERROR - Response content: After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT02711579 (Celecoxib study): This trial is for healthy volunteers and focuses on brain electrophysiology. The patient has depression and anxiety, which excludes them [SQL REDACTED] being considered a healthy volunteer.

2. NCT01174979 (Caroverine for inner ear diseases): This trial is specifically for patients with tinnitus and inner ear diseases, which are not mentioned in the patient's medical conditions.

3. NCT05990179 (Newborn screening study): This trial is for newborns, and the patient is an adult born in 1992.

Given these considerations, the appropriate JSON output would be an empty array:

[]

The patient's profile (31-year-old male with depression and anxiety) does not align well with any of the provided clinical trials, which focus on healthy volunteers, inner ear diseases, and newborn screening respectively.
2024-08-06 22:43:47,935 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:43:49,209 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:47:44,824 - app - INFO - Initializing Flask app...
2024-08-06 22:47:44,825 - app - INFO - Configuring app...
2024-08-06 22:47:44,826 - app - INFO - Setting up CORS...
2024-08-06 22:47:44,826 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:47:44,988 - app - INFO - Initializing JWT manager...
2024-08-06 22:47:44,989 - app - INFO - Setting up rate limiting...
2024-08-06 22:47:44,989 - app - INFO - Setting up database...
2024-08-06 22:47:44,990 - app - INFO - Starting database setup...
2024-08-06 22:47:45,711 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:47:45,711 - app - INFO - Database setup completed successfully
2024-08-06 22:47:45,711 - app - INFO - Registering error handler...
2024-08-06 22:47:45,711 - app - INFO - Initializing CLI commands...
2024-08-06 22:47:45,711 - app - INFO - Registering routes...
2024-08-06 22:47:45,725 - app - INFO - Initializing services...
2024-08-06 22:47:45,734 - app - INFO - Initializing email service...
2024-08-06 22:47:45,734 - app - INFO - Setting up scheduler...
2024-08-06 22:47:45,737 - app - INFO - Initializing scheduler...
2024-08-06 22:47:45,738 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:47:45,738 - app - INFO - Application initialized successfully
2024-08-06 22:47:47,295 - app - INFO - Initializing Flask app...
2024-08-06 22:47:47,296 - app - INFO - Configuring app...
2024-08-06 22:47:47,296 - app - INFO - Setting up CORS...
2024-08-06 22:47:47,297 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:47:47,510 - app - INFO - Initializing JWT manager...
2024-08-06 22:47:47,510 - app - INFO - Setting up rate limiting...
2024-08-06 22:47:47,511 - app - INFO - Setting up database...
2024-08-06 22:47:47,511 - app - INFO - Starting database setup...
2024-08-06 22:47:48,546 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:47:48,546 - app - INFO - Database setup completed successfully
2024-08-06 22:47:48,547 - app - INFO - Registering error handler...
2024-08-06 22:47:48,547 - app - INFO - Initializing CLI commands...
2024-08-06 22:47:48,547 - app - INFO - Registering routes...
2024-08-06 22:47:48,556 - app - INFO - Initializing services...
2024-08-06 22:47:48,565 - app - INFO - Initializing email service...
2024-08-06 22:47:48,565 - app - INFO - Setting up scheduler...
2024-08-06 22:47:48,569 - app - INFO - Initializing scheduler...
2024-08-06 22:47:48,570 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:47:48,570 - app - INFO - Application initialized successfully
2024-08-06 22:47:56,652 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:47:57,261 - app.database - INFO - Database connection established successfully
2024-08-06 22:47:57,524 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 22:47:57,524 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:47:58,130 - app.database - INFO - Database connection established successfully
2024-08-06 22:47:58,186 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 22:47:58,194 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:47:58,773 - app.database - INFO - Database connection established successfully
2024-08-06 22:47:58,818 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:47:58,826 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 22:47:58,828 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:47:59,472 - app.database - INFO - Database connection established successfully
2024-08-06 22:47:59,515 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 22:47:59,521 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:48:00,211 - app.database - INFO - Database connection established successfully
2024-08-06 22:48:00,254 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:48:00,682 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:48:01,343 - app.database - INFO - Database connection established successfully
2024-08-06 22:48:01,392 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:48:01,399 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:48:02,113 - app.database - INFO - Database connection established successfully
2024-08-06 22:48:02,169 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:48:02,249 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:48:02,873 - app.database - INFO - Database connection established successfully
2024-08-06 22:48:03,090 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:48:10,958 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After reviewing the patient profile and the provided clinical trials, I couldn't find any trials that match the patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials are:\n   - NCT00072579: For chronic myelogenous leukemia\n   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia\n   - NCT00812279: For smokers\n   - NCT01511679: For adolescents studying alcohol use effects on the brain\n\nNone of these trials are related to depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient's age and specific health conditions do not match the eligibility criteria for any of the provided trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:48:10,959 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After reviewing the patient profile and the provided clinical trials, I couldn't find any trials that match the patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials are:\n   - NCT00072579: For chronic myelogenous leukemia\n   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia\n   - NCT00812279: For smokers\n   - NCT01511679: For adolescents studying alcohol use effects on the brain\n\nNone of these trials are related to depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient's age and specific health conditions do not match the eligibility criteria for any of the provided trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:48:10,960 - app.services.anthropic_service - INFO - Parsing response: After reviewing the patient profile and the provided clinical trials, I couldn't find any trials that match the patient with a compatibility score of 70 or higher. Here's why:

1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.

2. The available clinical trials are:
   - NCT00072579: For chronic myelogenous leukemia
   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia
   - NCT00812279: For smokers
   - NCT01511679: For adolescents studying alcohol use effects on the brain

None of these trials are related to depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient's age and specific health conditions do not match the eligibility criteria for any of the provided trials.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 22:48:10,960 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:48:10,960 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:48:12,315 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:48:18,739 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the clinical trial focusing on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe main reasons for the lack of compatibility include:\n\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31 years old) doesn't align with the focus on sarcopenia, which is more common in older adults.\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are the primary focus of the clinical trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]
2024-08-06 22:48:18,740 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the clinical trial focusing on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe main reasons for the lack of compatibility include:\n\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31 years old) doesn't align with the focus on sarcopenia, which is more common in older adults.\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are the primary focus of the clinical trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]
2024-08-06 22:48:18,740 - app.services.anthropic_service - INFO - Parsing response: Based on the provided patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the clinical trial focusing on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The main reasons for the lack of compatibility include:

1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (31 years old) doesn't align with the focus on sarcopenia, which is more common in older adults.
3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are the primary focus of the clinical trial.
4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.
2024-08-06 22:48:18,740 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:48:18,740 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:48:19,935 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:48:26,419 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient's characteristics with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient's primary medical conditions are depression and anxiety, which don't align with the focus of any of the provided trials.\n2. The patient's age (31 years old) and lack of specific cardiovascular risk factors make them unsuitable for the heart disease study (NCT00626379).\n3. The diabetes prevention study (NCT03530579) is specifically for Korean and South Asian Americans, which doesn't match the patient's profile.\n4. The PTSD study for military veterans (NCT05900479) doesn't apply as there's no indication the patient is a veteran or has PTSD.\n5. The cerebral palsy study (NCT04679779) is for children, which doesn't match the patient's age.\n\nGiven these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-06 22:48:26,420 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient's characteristics with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient's primary medical conditions are depression and anxiety, which don't align with the focus of any of the provided trials.\n2. The patient's age (31 years old) and lack of specific cardiovascular risk factors make them unsuitable for the heart disease study (NCT00626379).\n3. The diabetes prevention study (NCT03530579) is specifically for Korean and South Asian Americans, which doesn't match the patient's profile.\n4. The PTSD study for military veterans (NCT05900479) doesn't apply as there's no indication the patient is a veteran or has PTSD.\n5. The cerebral palsy study (NCT04679779) is for children, which doesn't match the patient's age.\n\nGiven these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-06 22:48:26,420 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient's characteristics with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient's primary medical conditions are depression and anxiety, which don't align with the focus of any of the provided trials.
2. The patient's age (31 years old) and lack of specific cardiovascular risk factors make them unsuitable for the heart disease study (NCT00626379).
3. The diabetes prevention study (NCT03530579) is specifically for Korean and South Asian Americans, which doesn't match the patient's profile.
4. The PTSD study for military veterans (NCT05900479) doesn't apply as there's no indication the patient is a veteran or has PTSD.
5. The cerebral palsy study (NCT04679779) is for children, which doesn't match the patient's age.

Given these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.
2024-08-06 22:48:26,421 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:48:26,421 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:48:27,643 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:48:33,455 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02244879) is focused on type 2 diabetes mellitus, inflammation, insulin resistance, and bone disorders. The patient's profile does not mention any of these conditions, so this trial is not a suitable match.\n\n2. The second trial (NCT02841579) is for patients with non-small cell lung cancer (NSCLC) with specific EGFR mutations. The patient's profile does not indicate any cancer diagnosis or EGFR mutations, so this trial is also not a suitable match.\n\nThe patient's profile mentions depression and anxiety as medical conditions, and they are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications, resulting in very low compatibility scores (well below 70) for both trials.", type='text')]
2024-08-06 22:48:33,456 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02244879) is focused on type 2 diabetes mellitus, inflammation, insulin resistance, and bone disorders. The patient's profile does not mention any of these conditions, so this trial is not a suitable match.\n\n2. The second trial (NCT02841579) is for patients with non-small cell lung cancer (NSCLC) with specific EGFR mutations. The patient's profile does not indicate any cancer diagnosis or EGFR mutations, so this trial is also not a suitable match.\n\nThe patient's profile mentions depression and anxiety as medical conditions, and they are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications, resulting in very low compatibility scores (well below 70) for both trials.", type='text')]
2024-08-06 22:48:33,456 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT02244879) is focused on type 2 diabetes mellitus, inflammation, insulin resistance, and bone disorders. The patient's profile does not mention any of these conditions, so this trial is not a suitable match.

2. The second trial (NCT02841579) is for patients with non-small cell lung cancer (NSCLC) with specific EGFR mutations. The patient's profile does not indicate any cancer diagnosis or EGFR mutations, so this trial is also not a suitable match.

The patient's profile mentions depression and anxiety as medical conditions, and they are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications, resulting in very low compatibility scores (well below 70) for both trials.
2024-08-06 22:48:33,456 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:48:33,457 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:48:34,717 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:48:39,917 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions listed in the patient's profile.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not present in the patient's medical conditions.\n\n3. The third trial (NCT04491279) is for stroke patients, which is not a condition listed in the patient's profile.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:48:39,917 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions listed in the patient's profile.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not present in the patient's medical conditions.\n\n3. The third trial (NCT04491279) is for stroke patients, which is not a condition listed in the patient's profile.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:48:39,918 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions listed in the patient's profile.

2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not present in the patient's medical conditions.

3. The third trial (NCT04491279) is for stroke patients, which is not a condition listed in the patient's profile.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 22:48:39,918 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:48:39,918 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:48:41,144 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:48:44,360 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on metastatic breast cancer, lung transplantation, workplace safety, and choroidal thickness measurement.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:48:44,360 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on metastatic breast cancer, lung transplantation, workplace safety, and choroidal thickness measurement.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:48:44,360 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on metastatic breast cancer, lung transplantation, workplace safety, and choroidal thickness measurement.

Therefore, the output is an empty array:

[]
2024-08-06 22:48:44,360 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:48:44,361 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:48:45,572 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:48:50,677 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided match this patient's profile with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:\n\n1. Hepatitis C in hemodialysis patients\n2. Melanoma and Akt inhibition\n3. Ischemic heart failure\n4. Left ventricular heart failure and LVAD support\n\nThese conditions and treatments are not relevant to the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 22:48:50,678 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided match this patient's profile with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:\n\n1. Hepatitis C in hemodialysis patients\n2. Melanoma and Akt inhibition\n3. Ischemic heart failure\n4. Left ventricular heart failure and LVAD support\n\nThese conditions and treatments are not relevant to the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 22:48:50,678 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided match this patient's profile with a compatibility score of 70 or higher. Therefore, the result is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:

1. Hepatitis C in hemodialysis patients
2. Melanoma and Akt inhibition
3. Ischemic heart failure
4. Left ventricular heart failure and LVAD support

These conditions and treatments are not relevant to the patient's profile, resulting in low compatibility scores (below 70) for all trials.
2024-08-06 22:48:50,678 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:48:50,678 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:48:51,853 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:48:56,405 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is about sepsis, which is not related to the patient's conditions (depression and anxiety).\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has medical conditions.\n3. The third trial (NCT00228579) is focused on obesity in women, while the patient is male and obesity is not mentioned in his profile.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-06 22:48:56,405 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is about sepsis, which is not related to the patient's conditions (depression and anxiety).\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has medical conditions.\n3. The third trial (NCT00228579) is focused on obesity in women, while the patient is male and obesity is not mentioned in his profile.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-06 22:48:56,406 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT06289179) is about sepsis, which is not related to the patient's conditions (depression and anxiety).
2. The second trial (NCT03221179) is for healthy volunteers, and the patient has medical conditions.
3. The third trial (NCT00228579) is focused on obesity in women, while the patient is male and obesity is not mentioned in his profile.

None of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.
2024-08-06 22:48:56,406 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:48:56,407 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:48:57,612 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:49:01,125 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the given clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe provided trials focus on conditions like coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not mentioned in the patient's profile. Additionally, the patient's age, gender, and medical conditions do not meet the specific inclusion criteria for these trials.", type='text')]
2024-08-06 22:49:01,125 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the given clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe provided trials focus on conditions like coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not mentioned in the patient's profile. Additionally, the patient's age, gender, and medical conditions do not meet the specific inclusion criteria for these trials.", type='text')]
2024-08-06 22:49:01,126 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the given clinical trials. Therefore, the output is an empty array:

[]

The provided trials focus on conditions like coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not mentioned in the patient's profile. Additionally, the patient's age, gender, and medical conditions do not meet the specific inclusion criteria for these trials.
2024-08-06 22:49:01,126 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:49:01,126 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:49:02,342 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:53:21,809 - app - INFO - Initializing Flask app...
2024-08-06 22:53:21,810 - app - INFO - Configuring app...
2024-08-06 22:53:21,811 - app - INFO - Setting up CORS...
2024-08-06 22:53:21,811 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:53:21,992 - app - INFO - Initializing JWT manager...
2024-08-06 22:53:21,992 - app - INFO - Setting up rate limiting...
2024-08-06 22:53:21,993 - app - INFO - Setting up database...
2024-08-06 22:53:21,993 - app - INFO - Starting database setup...
2024-08-06 22:53:22,590 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:53:22,590 - app - INFO - Database setup completed successfully
2024-08-06 22:53:22,591 - app - INFO - Registering error handler...
2024-08-06 22:53:22,591 - app - INFO - Initializing CLI commands...
2024-08-06 22:53:22,591 - app - INFO - Registering routes...
2024-08-06 22:53:22,600 - app - INFO - Initializing services...
2024-08-06 22:53:22,616 - app - INFO - Initializing email service...
2024-08-06 22:53:22,616 - app - INFO - Setting up scheduler...
2024-08-06 22:53:22,620 - app - INFO - Initializing scheduler...
2024-08-06 22:53:22,621 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:53:22,621 - app - INFO - Application initialized successfully
2024-08-06 22:53:24,138 - app - INFO - Initializing Flask app...
2024-08-06 22:53:24,139 - app - INFO - Configuring app...
2024-08-06 22:53:24,139 - app - INFO - Setting up CORS...
2024-08-06 22:53:24,140 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:53:24,367 - app - INFO - Initializing JWT manager...
2024-08-06 22:53:24,367 - app - INFO - Setting up rate limiting...
2024-08-06 22:53:24,368 - app - INFO - Setting up database...
2024-08-06 22:53:24,368 - app - INFO - Starting database setup...
2024-08-06 22:53:25,067 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:53:25,067 - app - INFO - Database setup completed successfully
2024-08-06 22:53:25,068 - app - INFO - Registering error handler...
2024-08-06 22:53:25,068 - app - INFO - Initializing CLI commands...
2024-08-06 22:53:25,068 - app - INFO - Registering routes...
2024-08-06 22:53:25,074 - app - INFO - Initializing services...
2024-08-06 22:53:25,084 - app - INFO - Initializing email service...
2024-08-06 22:53:25,084 - app - INFO - Setting up scheduler...
2024-08-06 22:53:25,088 - app - INFO - Initializing scheduler...
2024-08-06 22:53:25,088 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:53:25,089 - app - INFO - Application initialized successfully
2024-08-06 22:54:38,107 - app - INFO - Initializing Flask app...
2024-08-06 22:54:38,108 - app - INFO - Configuring app...
2024-08-06 22:54:38,109 - app - INFO - Setting up CORS...
2024-08-06 22:54:38,109 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:54:38,279 - app - INFO - Initializing JWT manager...
2024-08-06 22:54:38,279 - app - INFO - Setting up rate limiting...
2024-08-06 22:54:38,280 - app - INFO - Setting up database...
2024-08-06 22:54:38,280 - app - INFO - Starting database setup...
2024-08-06 22:54:39,018 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:54:39,019 - app - INFO - Database setup completed successfully
2024-08-06 22:54:39,019 - app - INFO - Registering error handler...
2024-08-06 22:54:39,020 - app - INFO - Initializing CLI commands...
2024-08-06 22:54:39,020 - app - INFO - Registering routes...
2024-08-06 22:54:39,026 - app - INFO - Initializing services...
2024-08-06 22:54:39,034 - app - INFO - Initializing email service...
2024-08-06 22:54:39,034 - app - INFO - Setting up scheduler...
2024-08-06 22:54:39,037 - app - INFO - Initializing scheduler...
2024-08-06 22:54:39,038 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:54:39,038 - app - INFO - Application initialized successfully
2024-08-06 22:54:40,590 - app - INFO - Initializing Flask app...
2024-08-06 22:54:40,591 - app - INFO - Configuring app...
2024-08-06 22:54:40,591 - app - INFO - Setting up CORS...
2024-08-06 22:54:40,592 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:54:40,797 - app - INFO - Initializing JWT manager...
2024-08-06 22:54:40,797 - app - INFO - Setting up rate limiting...
2024-08-06 22:54:40,798 - app - INFO - Setting up database...
2024-08-06 22:54:40,798 - app - INFO - Starting database setup...
2024-08-06 22:54:42,128 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:54:42,129 - app - INFO - Database setup completed successfully
2024-08-06 22:54:42,129 - app - INFO - Registering error handler...
2024-08-06 22:54:42,129 - app - INFO - Initializing CLI commands...
2024-08-06 22:54:42,130 - app - INFO - Registering routes...
2024-08-06 22:54:42,135 - app - INFO - Initializing services...
2024-08-06 22:54:42,146 - app - INFO - Initializing email service...
2024-08-06 22:54:42,146 - app - INFO - Setting up scheduler...
2024-08-06 22:54:42,150 - app - INFO - Initializing scheduler...
2024-08-06 22:54:42,151 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:54:42,151 - app - INFO - Application initialized successfully
2024-08-06 22:54:51,606 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:54:52,193 - app.database - INFO - Database connection established successfully
2024-08-06 22:54:52,477 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 22:54:52,478 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:54:53,103 - app.database - INFO - Database connection established successfully
2024-08-06 22:54:53,142 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 22:54:53,148 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:54:53,682 - app.database - INFO - Database connection established successfully
2024-08-06 22:54:53,721 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:54:53,726 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 22:54:53,726 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:54:54,325 - app.database - INFO - Database connection established successfully
2024-08-06 22:54:54,387 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 22:54:54,394 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:54:54,961 - app.database - INFO - Database connection established successfully
2024-08-06 22:54:55,017 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:54:55,716 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:54:56,329 - app.database - INFO - Database connection established successfully
2024-08-06 22:54:56,388 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:54:56,395 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:54:56,922 - app.database - INFO - Database connection established successfully
2024-08-06 22:54:56,961 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 22:54:57,710 - app.database - INFO - Attempting to establish database connection...
2024-08-06 22:54:58,299 - app.database - INFO - Database connection established successfully
2024-08-06 22:54:58,519 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:55:05,317 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is about alcohol abuse, which could potentially be related to depression and anxiety, the patient's profile doesn't mention any alcohol-related issues. Additionally, this trial has been withdrawn.\n\nGiven that none of the trials match the patient's profile with a score of 70 or higher, the output in the requested JSON format would be an empty array:\n\n[]\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications, which is why there are no suitable matches.", type='text')]
2024-08-06 22:55:05,318 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is about alcohol abuse, which could potentially be related to depression and anxiety, the patient's profile doesn't mention any alcohol-related issues. Additionally, this trial has been withdrawn.\n\nGiven that none of the trials match the patient's profile with a score of 70 or higher, the output in the requested JSON format would be an empty array:\n\n[]\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications, which is why there are no suitable matches.", type='text')]
2024-08-06 22:55:05,318 - app.services.anthropic_service - INFO - Parsing response: After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: While this trial is about alcohol abuse, which could potentially be related to depression and anxiety, the patient's profile doesn't mention any alcohol-related issues. Additionally, this trial has been withdrawn.

Given that none of the trials match the patient's profile with a score of 70 or higher, the output in the requested JSON format would be an empty array:

[]

The patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications, which is why there are no suitable matches.
2024-08-06 22:55:05,319 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:55:05,319 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:55:06,547 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:55:11,171 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial information provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align well with the focus of the provided clinical trial. Here's why:\n\n1. The patient's primary medical conditions are depression and anxiety, while the clinical trial focuses on sarcopenia, sarcopenic obesity, and incisional hernia.\n\n2. The patient's age (31 years old) doesn't match the typical profile for sarcopenia or obesity-related studies, which often target older populations.\n\n3. There's no mention of abdominal surgery or hernia in the patient's profile, which are key aspects of the clinical trial.\n\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.\n\nGiven these factors, the compatibility score would be well below 70. Therefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:55:11,171 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial information provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align well with the focus of the provided clinical trial. Here's why:\n\n1. The patient's primary medical conditions are depression and anxiety, while the clinical trial focuses on sarcopenia, sarcopenic obesity, and incisional hernia.\n\n2. The patient's age (31 years old) doesn't match the typical profile for sarcopenia or obesity-related studies, which often target older populations.\n\n3. There's no mention of abdominal surgery or hernia in the patient's profile, which are key aspects of the clinical trial.\n\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.\n\nGiven these factors, the compatibility score would be well below 70. Therefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 22:55:11,172 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial information provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align well with the focus of the provided clinical trial. Here's why:

1. The patient's primary medical conditions are depression and anxiety, while the clinical trial focuses on sarcopenia, sarcopenic obesity, and incisional hernia.

2. The patient's age (31 years old) doesn't match the typical profile for sarcopenia or obesity-related studies, which often target older populations.

3. There's no mention of abdominal surgery or hernia in the patient's profile, which are key aspects of the clinical trial.

4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.

Given these factors, the compatibility score would be well below 70. Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 22:55:11,172 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:55:11,172 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:55:12,513 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:55:18,356 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:\n\n1. Heart disease risk factors and aging\n2. Diabetes prevention in Korean and South Asian Americans\n3. PTSD in military veterans\n4. Virtual reality for children with hemiparesis\n\nThese trials don't align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 22:55:18,357 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:\n\n1. Heart disease risk factors and aging\n2. Diabetes prevention in Korean and South Asian Americans\n3. PTSD in military veterans\n4. Virtual reality for children with hemiparesis\n\nThese trials don't align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 22:55:18,357 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:

1. Heart disease risk factors and aging
2. Diabetes prevention in Korean and South Asian Americans
3. PTSD in military veterans
4. Virtual reality for children with hemiparesis

These trials don't align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.
2024-08-06 22:55:18,357 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:55:18,358 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:55:19,626 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:55:23,652 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications.\n\nThe first trial (NCT02244879) is for Type 2 Diabetes Mellitus and related conditions, which the patient does not have.\n\nThe second trial (NCT02841579) is for Non-Small Cell Lung Cancer with specific genetic mutations, which is also not applicable to the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:55:23,652 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications.\n\nThe first trial (NCT02244879) is for Type 2 Diabetes Mellitus and related conditions, which the patient does not have.\n\nThe second trial (NCT02841579) is for Non-Small Cell Lung Cancer with specific genetic mutations, which is also not applicable to the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:55:23,652 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications.

The first trial (NCT02244879) is for Type 2 Diabetes Mellitus and related conditions, which the patient does not have.

The second trial (NCT02841579) is for Non-Small Cell Lung Cancer with specific genetic mutations, which is also not applicable to the patient's profile.

Therefore, the output is an empty array:

[]
2024-08-06 22:55:23,652 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:55:23,653 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:55:24,870 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:55:31,000 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for systemic sclerosis and Raynaud's phenomenon, which are not conditions the patient has.\n\n2. The second trial (NCT00293579) is for head and neck cancer patients, which does not match the patient's profile.\n\n3. The third trial (NCT04491279) is for stroke patients, which also does not match the patient's conditions.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:55:31,001 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for systemic sclerosis and Raynaud's phenomenon, which are not conditions the patient has.\n\n2. The second trial (NCT00293579) is for head and neck cancer patients, which does not match the patient's profile.\n\n3. The third trial (NCT04491279) is for stroke patients, which also does not match the patient's conditions.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 22:55:31,001 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for systemic sclerosis and Raynaud's phenomenon, which are not conditions the patient has.

2. The second trial (NCT00293579) is for head and neck cancer patients, which does not match the patient's profile.

3. The third trial (NCT04491279) is for stroke patients, which also does not match the patient's conditions.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 22:55:31,001 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:55:31,002 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:55:32,217 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:55:36,822 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have evaluated the compatibility. Unfortunately, none of the trials match with a score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not compatible with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 22:55:36,823 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have evaluated the compatibility. Unfortunately, none of the trials match with a score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not compatible with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 22:55:36,823 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have evaluated the compatibility. Unfortunately, none of the trials match with a score of 70 or higher for this patient. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The trials focus on:

1. Scalp cooling for metastatic breast cancer patients
2. Extracorporeal photopheresis for lung transplant patients
3. Health and safety training in the workplace
4. Choroidal thickness measurements related to refractive errors

These trials are not compatible with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.
2024-08-06 22:55:36,823 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:55:36,825 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:55:38,013 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:55:41,719 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the conditions or eligibility criteria of the provided clinical trials, which focus on conditions such as chronic kidney disease, hepatitis C, melanoma, and heart failure.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:55:41,719 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the conditions or eligibility criteria of the provided clinical trials, which focus on conditions such as chronic kidney disease, hepatitis C, melanoma, and heart failure.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 22:55:41,719 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the conditions or eligibility criteria of the provided clinical trials, which focus on conditions such as chronic kidney disease, hepatitis C, melanoma, and heart failure.

Therefore, the output is an empty array:

[]
2024-08-06 22:55:41,720 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:55:41,720 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:55:42,898 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:55:49,222 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, has medical conditions of depression and anxiety, and is taking Escitalopram.\n2. The first clinical trial (NCT06289179) is focused on sepsis, which is not related to the patient's conditions.\n3. The second trial (NCT03221179) is for healthy volunteers, which doesn't match the patient's profile due to his existing medical conditions.\n4. The third trial (NCT00228579) is focused on obesity and limited to female participants, which doesn't match the patient's gender or reported conditions.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-06 22:55:49,223 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, has medical conditions of depression and anxiety, and is taking Escitalopram.\n2. The first clinical trial (NCT06289179) is focused on sepsis, which is not related to the patient's conditions.\n3. The second trial (NCT03221179) is for healthy volunteers, which doesn't match the patient's profile due to his existing medical conditions.\n4. The third trial (NCT00228579) is focused on obesity and limited to female participants, which doesn't match the patient's gender or reported conditions.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-06 22:55:49,225 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, has medical conditions of depression and anxiety, and is taking Escitalopram.
2. The first clinical trial (NCT06289179) is focused on sepsis, which is not related to the patient's conditions.
3. The second trial (NCT03221179) is for healthy volunteers, which doesn't match the patient's profile due to his existing medical conditions.
4. The third trial (NCT00228579) is focused on obesity and limited to female participants, which doesn't match the patient's gender or reported conditions.

None of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.
2024-08-06 22:55:49,225 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:55:49,226 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:55:50,408 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:55:55,195 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions. The trials focus on:\n\n1. Coronary artery disease\n2. B-cell Acute Lymphoblastic Leukemia\n3. Gynecologic cancers\n4. Atrial fibrillation\n\nThese conditions and their eligibility criteria do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 22:55:55,195 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions. The trials focus on:\n\n1. Coronary artery disease\n2. B-cell Acute Lymphoblastic Leukemia\n3. Gynecologic cancers\n4. Atrial fibrillation\n\nThese conditions and their eligibility criteria do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 22:55:55,196 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions. The trials focus on:

1. Coronary artery disease
2. B-cell Acute Lymphoblastic Leukemia
3. Gynecologic cancers
4. Atrial fibrillation

These conditions and their eligibility criteria do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.
2024-08-06 22:55:55,196 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 22:55:55,196 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 22:55:56,435 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 22:58:46,621 - app - INFO - Initializing Flask app...
2024-08-06 22:58:46,623 - app - INFO - Configuring app...
2024-08-06 22:58:46,623 - app - INFO - Setting up CORS...
2024-08-06 22:58:46,623 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:58:46,802 - app - INFO - Initializing JWT manager...
2024-08-06 22:58:46,802 - app - INFO - Setting up rate limiting...
2024-08-06 22:58:46,803 - app - INFO - Setting up database...
2024-08-06 22:58:46,803 - app - INFO - Starting database setup...
2024-08-06 22:58:47,491 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:58:47,492 - app - INFO - Database setup completed successfully
2024-08-06 22:58:47,492 - app - INFO - Registering error handler...
2024-08-06 22:58:47,492 - app - INFO - Initializing CLI commands...
2024-08-06 22:58:47,492 - app - INFO - Registering routes...
2024-08-06 22:58:47,498 - app - INFO - Initializing services...
2024-08-06 22:58:47,506 - app - INFO - Initializing email service...
2024-08-06 22:58:47,507 - app - INFO - Setting up scheduler...
2024-08-06 22:58:47,511 - app - INFO - Initializing scheduler...
2024-08-06 22:58:47,511 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:58:47,511 - app - INFO - Application initialized successfully
2024-08-06 22:58:49,136 - app - INFO - Initializing Flask app...
2024-08-06 22:58:49,137 - app - INFO - Configuring app...
2024-08-06 22:58:49,137 - app - INFO - Setting up CORS...
2024-08-06 22:58:49,138 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 22:58:49,375 - app - INFO - Initializing JWT manager...
2024-08-06 22:58:49,376 - app - INFO - Setting up rate limiting...
2024-08-06 22:58:49,377 - app - INFO - Setting up database...
2024-08-06 22:58:49,377 - app - INFO - Starting database setup...
2024-08-06 22:58:49,938 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 22:58:49,939 - app - INFO - Database setup completed successfully
2024-08-06 22:58:49,939 - app - INFO - Registering error handler...
2024-08-06 22:58:49,939 - app - INFO - Initializing CLI commands...
2024-08-06 22:58:49,939 - app - INFO - Registering routes...
2024-08-06 22:58:49,946 - app - INFO - Initializing services...
2024-08-06 22:58:49,960 - app - INFO - Initializing email service...
2024-08-06 22:58:49,960 - app - INFO - Setting up scheduler...
2024-08-06 22:58:49,963 - app - INFO - Initializing scheduler...
2024-08-06 22:58:49,963 - app.scheduler - INFO - Scheduler initialized
2024-08-06 22:58:49,964 - app - INFO - Application initialized successfully
2024-08-06 23:01:11,001 - app - INFO - Initializing Flask app...
2024-08-06 23:01:11,002 - app - INFO - Configuring app...
2024-08-06 23:01:11,003 - app - INFO - Setting up CORS...
2024-08-06 23:01:11,003 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:01:11,187 - app - INFO - Initializing JWT manager...
2024-08-06 23:01:11,187 - app - INFO - Setting up rate limiting...
2024-08-06 23:01:11,189 - app - INFO - Setting up database...
2024-08-06 23:01:11,189 - app - INFO - Starting database setup...
2024-08-06 23:01:11,940 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:01:11,940 - app - INFO - Database setup completed successfully
2024-08-06 23:01:11,941 - app - INFO - Registering error handler...
2024-08-06 23:01:11,941 - app - INFO - Initializing CLI commands...
2024-08-06 23:01:11,941 - app - INFO - Registering routes...
2024-08-06 23:01:11,947 - app - INFO - Initializing services...
2024-08-06 23:01:11,955 - app - INFO - Initializing email service...
2024-08-06 23:01:11,956 - app - INFO - Setting up scheduler...
2024-08-06 23:01:11,959 - app - INFO - Initializing scheduler...
2024-08-06 23:01:11,959 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:01:11,959 - app - INFO - Application initialized successfully
2024-08-06 23:01:13,679 - app - INFO - Initializing Flask app...
2024-08-06 23:01:13,681 - app - INFO - Configuring app...
2024-08-06 23:01:13,681 - app - INFO - Setting up CORS...
2024-08-06 23:01:13,681 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:01:13,931 - app - INFO - Initializing JWT manager...
2024-08-06 23:01:13,931 - app - INFO - Setting up rate limiting...
2024-08-06 23:01:13,932 - app - INFO - Setting up database...
2024-08-06 23:01:13,932 - app - INFO - Starting database setup...
2024-08-06 23:01:14,562 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:01:14,562 - app - INFO - Database setup completed successfully
2024-08-06 23:01:14,563 - app - INFO - Registering error handler...
2024-08-06 23:01:14,563 - app - INFO - Initializing CLI commands...
2024-08-06 23:01:14,563 - app - INFO - Registering routes...
2024-08-06 23:01:14,569 - app - INFO - Initializing services...
2024-08-06 23:01:14,580 - app - INFO - Initializing email service...
2024-08-06 23:01:14,580 - app - INFO - Setting up scheduler...
2024-08-06 23:01:14,583 - app - INFO - Initializing scheduler...
2024-08-06 23:01:14,584 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:01:14,584 - app - INFO - Application initialized successfully
2024-08-06 23:02:07,499 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:02:08,067 - app.database - INFO - Database connection established successfully
2024-08-06 23:02:08,376 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:02:08,377 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:02:09,063 - app.database - INFO - Database connection established successfully
2024-08-06 23:02:09,128 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:02:09,133 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:02:09,915 - app.database - INFO - Database connection established successfully
2024-08-06 23:02:09,977 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:02:09,982 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:02:09,982 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:02:10,792 - app.database - INFO - Database connection established successfully
2024-08-06 23:02:10,859 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:02:10,865 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:02:11,547 - app.database - INFO - Database connection established successfully
2024-08-06 23:02:11,590 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:02:11,661 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:02:12,294 - app.database - INFO - Database connection established successfully
2024-08-06 23:02:12,342 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:02:12,348 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:02:13,756 - app.database - INFO - Database connection established successfully
2024-08-06 23:02:13,807 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:02:13,817 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:02:14,449 - app.database - INFO - Database connection established successfully
2024-08-06 23:02:14,660 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:02:21,207 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This study is about smoking, which is not mentioned in the patient's profile.\n\n4. NCT01511679: While this study involves adolescents and young adults (12-21 years), it's specifically about alcohol abuse, which is not mentioned in the patient's profile. Additionally, the patient is now 31 years old, which is outside the age range for this study.\n\nNone of these trials match the patient's profile of depression and anxiety, nor do they align with the patient's age or current medications.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 23:02:21,207 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This study is about smoking, which is not mentioned in the patient's profile.\n\n4. NCT01511679: While this study involves adolescents and young adults (12-21 years), it's specifically about alcohol abuse, which is not mentioned in the patient's profile. Additionally, the patient is now 31 years old, which is outside the age range for this study.\n\nNone of these trials match the patient's profile of depression and anxiety, nor do they align with the patient's age or current medications.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 23:02:21,209 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.

3. NCT00812279: This study is about smoking, which is not mentioned in the patient's profile.

4. NCT01511679: While this study involves adolescents and young adults (12-21 years), it's specifically about alcohol abuse, which is not mentioned in the patient's profile. Additionally, the patient is now 31 years old, which is outside the age range for this study.

None of these trials match the patient's profile of depression and anxiety, nor do they align with the patient's age or current medications.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 23:02:21,210 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:02:21,210 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:02:22,407 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:02:28,817 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThe reasons for no match include:\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The trial is focused on complex abdominal wall surgery, which is not mentioned in the patient's profile.\n3. The patient's age (31) and lack of mentioned surgical history do not align with the trial's focus on sarcopenia, which is more common in older adults or those with specific medical conditions.\n4. The trial's inclusion criteria require patients to have had an incisional hernia operation, which is not mentioned in the patient's profile.", type='text')]
2024-08-06 23:02:28,818 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThe reasons for no match include:\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The trial is focused on complex abdominal wall surgery, which is not mentioned in the patient's profile.\n3. The patient's age (31) and lack of mentioned surgical history do not align with the trial's focus on sarcopenia, which is more common in older adults or those with specific medical conditions.\n4. The trial's inclusion criteria require patients to have had an incisional hernia operation, which is not mentioned in the patient's profile.", type='text')]
2024-08-06 23:02:28,818 - app.services.anthropic_service - INFO - Parsing response: Based on the given patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output in the requested JSON format is an empty array:

[]

The reasons for no match include:
1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The trial is focused on complex abdominal wall surgery, which is not mentioned in the patient's profile.
3. The patient's age (31) and lack of mentioned surgical history do not align with the trial's focus on sarcopenia, which is more common in older adults or those with specific medical conditions.
4. The trial's inclusion criteria require patients to have had an incisional hernia operation, which is not mentioned in the patient's profile.
2024-08-06 23:02:28,818 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:02:28,819 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:02:30,011 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:02:36,281 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely align with the specific conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT00626379 focuses on heart disease risk factors and aging, which doesn't match the patient's profile.\n2. NCT03530579 is about diabetes prevention in Korean and South Asian Americans, which doesn't apply to this patient.\n3. NCT05900479 is for veterans with PTSD, which doesn't match the patient's profile.\n4. NCT04679779 is for children with cerebral palsy, which doesn't apply to this adult patient.\n\nNone of these trials are sufficiently relevant to the patient's age, conditions (depression and anxiety), or other characteristics to warrant a compatibility score of 70 or higher.", type='text')]
2024-08-06 23:02:36,282 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely align with the specific conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT00626379 focuses on heart disease risk factors and aging, which doesn't match the patient's profile.\n2. NCT03530579 is about diabetes prevention in Korean and South Asian Americans, which doesn't apply to this patient.\n3. NCT05900479 is for veterans with PTSD, which doesn't match the patient's profile.\n4. NCT04679779 is for children with cerebral palsy, which doesn't apply to this adult patient.\n\nNone of these trials are sufficiently relevant to the patient's age, conditions (depression and anxiety), or other characteristics to warrant a compatibility score of 70 or higher.", type='text')]
2024-08-06 23:02:36,282 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely align with the specific conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:

[]

Explanation:
1. NCT00626379 focuses on heart disease risk factors and aging, which doesn't match the patient's profile.
2. NCT03530579 is about diabetes prevention in Korean and South Asian Americans, which doesn't apply to this patient.
3. NCT05900479 is for veterans with PTSD, which doesn't match the patient's profile.
4. NCT04679779 is for children with cerebral palsy, which doesn't apply to this adult patient.

None of these trials are sufficiently relevant to the patient's age, conditions (depression and anxiety), or other characteristics to warrant a compatibility score of 70 or higher.
2024-08-06 23:02:36,282 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:02:36,283 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:02:37,458 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:02:43,466 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02244879) is focused on Type 2 Diabetes Mellitus, inflammation, insulin resistance, and bone disorders. The patient's profile does not mention any of these conditions, so this trial is not a match.\n\n2. The second trial (NCT02841579) is for patients with Non-Small Cell Lung Cancer (NSCLC) with specific EGFR mutations. The patient's profile does not mention any lung cancer or related conditions, so this trial is also not a match.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 23:02:43,467 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02244879) is focused on Type 2 Diabetes Mellitus, inflammation, insulin resistance, and bone disorders. The patient's profile does not mention any of these conditions, so this trial is not a match.\n\n2. The second trial (NCT02841579) is for patients with Non-Small Cell Lung Cancer (NSCLC) with specific EGFR mutations. The patient's profile does not mention any lung cancer or related conditions, so this trial is also not a match.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 23:02:43,467 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT02244879) is focused on Type 2 Diabetes Mellitus, inflammation, insulin resistance, and bone disorders. The patient's profile does not mention any of these conditions, so this trial is not a match.

2. The second trial (NCT02841579) is for patients with Non-Small Cell Lung Cancer (NSCLC) with specific EGFR mutations. The patient's profile does not mention any lung cancer or related conditions, so this trial is also not a match.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 23:02:43,467 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:02:43,468 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:02:44,685 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:02:50,275 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not mentioned in the patient's medical conditions.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not relevant to the patient's profile.\n\n3. The third trial (NCT04491279) is for chronic stroke patients, which is also not applicable to this patient.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 23:02:50,276 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not mentioned in the patient's medical conditions.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not relevant to the patient's profile.\n\n3. The third trial (NCT04491279) is for chronic stroke patients, which is also not applicable to this patient.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 23:02:50,278 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not mentioned in the patient's medical conditions.

2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not relevant to the patient's profile.

3. The third trial (NCT04491279) is for chronic stroke patients, which is also not applicable to this patient.

The patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 23:02:50,278 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:02:50,278 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:02:51,454 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:02:55,778 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements in relation to refractive errors\n\nThese trials are not suitable for the patient's current medical conditions and profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 23:02:55,779 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements in relation to refractive errors\n\nThese trials are not suitable for the patient's current medical conditions and profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 23:02:55,779 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:

1. Scalp cooling for metastatic breast cancer patients
2. Extracorporeal photopheresis for lung transplant patients
3. Health and safety training in the workplace
4. Choroidal thickness measurements in relation to refractive errors

These trials are not suitable for the patient's current medical conditions and profile, resulting in low compatibility scores (below 70) for all trials.
2024-08-06 23:02:55,779 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:02:55,779 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:02:56,975 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:03:00,221 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely align with the specific conditions and eligibility criteria of the provided clinical trials, which focus on conditions such as hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and advanced left ventricular heart failure.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:03:00,222 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely align with the specific conditions and eligibility criteria of the provided clinical trials, which focus on conditions such as hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and advanced left ventricular heart failure.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:03:00,222 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely align with the specific conditions and eligibility criteria of the provided clinical trials, which focus on conditions such as hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and advanced left ventricular heart failure.

Therefore, the output is an empty array:

[]
2024-08-06 23:03:00,222 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:03:00,222 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:03:01,460 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:03:07,519 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is about thyroid and cortisol hormone response to sepsis, which is not related to the patient's conditions (depression and anxiety).\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has medical conditions, so they are not eligible.\n\n3. The third trial (NCT00228579) is focused on obesity in females, which doesn't match the patient's profile (male with depression and anxiety).\n\nNone of these trials are suitable for the patient's specific conditions (depression and anxiety) or demographics (male, born in 1992), resulting in compatibility scores below 70 for all trials.", type='text')]
2024-08-06 23:03:07,519 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is about thyroid and cortisol hormone response to sepsis, which is not related to the patient's conditions (depression and anxiety).\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has medical conditions, so they are not eligible.\n\n3. The third trial (NCT00228579) is focused on obesity in females, which doesn't match the patient's profile (male with depression and anxiety).\n\nNone of these trials are suitable for the patient's specific conditions (depression and anxiety) or demographics (male, born in 1992), resulting in compatibility scores below 70 for all trials.", type='text')]
2024-08-06 23:03:07,520 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT06289179) is about thyroid and cortisol hormone response to sepsis, which is not related to the patient's conditions (depression and anxiety).

2. The second trial (NCT03221179) is for healthy volunteers, and the patient has medical conditions, so they are not eligible.

3. The third trial (NCT00228579) is focused on obesity in females, which doesn't match the patient's profile (male with depression and anxiety).

None of these trials are suitable for the patient's specific conditions (depression and anxiety) or demographics (male, born in 1992), resulting in compatibility scores below 70 for all trials.
2024-08-06 23:03:07,520 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:03:07,520 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:03:08,771 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:03:11,042 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (29-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the provided clinical trials. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:03:11,042 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (29-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the provided clinical trials. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:03:11,043 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (29-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the provided clinical trials. Therefore, the output is an empty array:

[]
2024-08-06 23:03:11,043 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:03:11,043 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:03:12,284 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:03:19,047 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The first trial (NCT05315479) is focused on postoperative pain in children aged 2 to 17 years. The patient, Ethan Brush, is 31 years old (born in 1992) and does not have postoperative pain listed as a condition. This trial is not compatible.\n\n2. The second trial (NCT02052479) is for female adolescents with Polycystic Ovary Syndrome (PCOS). The patient is male and does not have PCOS listed as a condition. This trial is also not compatible.\n\nNeither of these trials matches the patient's profile in terms of age, gender, or medical conditions. The patient's listed conditions (depression and anxiety) are not addressed by either trial. Therefore, no trials meet the minimum compatibility score of 70 or higher.", type='text')]
2024-08-06 23:03:19,047 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The first trial (NCT05315479) is focused on postoperative pain in children aged 2 to 17 years. The patient, Ethan Brush, is 31 years old (born in 1992) and does not have postoperative pain listed as a condition. This trial is not compatible.\n\n2. The second trial (NCT02052479) is for female adolescents with Polycystic Ovary Syndrome (PCOS). The patient is male and does not have PCOS listed as a condition. This trial is also not compatible.\n\nNeither of these trials matches the patient's profile in terms of age, gender, or medical conditions. The patient's listed conditions (depression and anxiety) are not addressed by either trial. Therefore, no trials meet the minimum compatibility score of 70 or higher.", type='text')]
2024-08-06 23:03:19,047 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. The first trial (NCT05315479) is focused on postoperative pain in children aged 2 to 17 years. The patient, Ethan Brush, is 31 years old (born in 1992) and does not have postoperative pain listed as a condition. This trial is not compatible.

2. The second trial (NCT02052479) is for female adolescents with Polycystic Ovary Syndrome (PCOS). The patient is male and does not have PCOS listed as a condition. This trial is also not compatible.

Neither of these trials matches the patient's profile in terms of age, gender, or medical conditions. The patient's listed conditions (depression and anxiety) are not addressed by either trial. Therefore, no trials meet the minimum compatibility score of 70 or higher.
2024-08-06 23:03:19,047 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:03:19,048 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:03:20,261 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:03:24,222 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After reviewing the patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe provided trials focus on influenza vaccines, postpartum perineal tears, colorectal cancer with liver metastases, and oncologist satisfaction with cytotoxic agents. None of these trials are directly relevant to the patient's reported conditions of depression and anxiety, nor do they match the patient's age group or other characteristics.", type='text')]
2024-08-06 23:03:24,223 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After reviewing the patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe provided trials focus on influenza vaccines, postpartum perineal tears, colorectal cancer with liver metastases, and oncologist satisfaction with cytotoxic agents. None of these trials are directly relevant to the patient's reported conditions of depression and anxiety, nor do they match the patient's age group or other characteristics.", type='text')]
2024-08-06 23:03:24,223 - app.services.anthropic_service - INFO - Parsing response: After reviewing the patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:

[]

The provided trials focus on influenza vaccines, postpartum perineal tears, colorectal cancer with liver metastases, and oncologist satisfaction with cytotoxic agents. None of these trials are directly relevant to the patient's reported conditions of depression and anxiety, nor do they match the patient's age group or other characteristics.
2024-08-06 23:03:24,223 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:03:24,223 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:03:25,440 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:03:33,993 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNeither of the provided clinical trials appears to be a suitable match for the patient with a compatibility score of 70 or higher. Here's why:\n\n1. Trial NCT06378879 (Propofol during Gastroscopy):\n   - This trial is focused on anesthesia methods during endoscopy.\n   - The patient's profile does not indicate any conditions or need for endoscopy.\n   - The trial is not related to the patient's listed conditions (depression and anxiety).\n\n2. Trial NCT02710279 (Response to Social Rejection in Suicidal Behavior):\n   - While this trial is related to depression, which the patient has, there are several mismatches:\n     - The trial is specifically for females, but the patient is male.\n     - The trial requires participants to have a major depressive episode, which is not explicitly stated in the patient's profile.\n     - The trial involves patients with and without a history of suicide attempts, which is not mentioned in the patient's profile.\n   - The compatibility score would be below 70 due to these mismatches.\n\nTherefore, neither trial meets the criteria for inclusion in the output (compatibility score of 70 or higher), resulting in an empty array.", type='text')]
2024-08-06 23:03:33,993 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNeither of the provided clinical trials appears to be a suitable match for the patient with a compatibility score of 70 or higher. Here's why:\n\n1. Trial NCT06378879 (Propofol during Gastroscopy):\n   - This trial is focused on anesthesia methods during endoscopy.\n   - The patient's profile does not indicate any conditions or need for endoscopy.\n   - The trial is not related to the patient's listed conditions (depression and anxiety).\n\n2. Trial NCT02710279 (Response to Social Rejection in Suicidal Behavior):\n   - While this trial is related to depression, which the patient has, there are several mismatches:\n     - The trial is specifically for females, but the patient is male.\n     - The trial requires participants to have a major depressive episode, which is not explicitly stated in the patient's profile.\n     - The trial involves patients with and without a history of suicide attempts, which is not mentioned in the patient's profile.\n   - The compatibility score would be below 70 due to these mismatches.\n\nTherefore, neither trial meets the criteria for inclusion in the output (compatibility score of 70 or higher), resulting in an empty array.", type='text')]
2024-08-06 23:03:33,994 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:

[]

Explanation:
Neither of the provided clinical trials appears to be a suitable match for the patient with a compatibility score of 70 or higher. Here's why:

1. Trial NCT06378879 (Propofol during Gastroscopy):
   - This trial is focused on anesthesia methods during endoscopy.
   - The patient's profile does not indicate any conditions or need for endoscopy.
   - The trial is not related to the patient's listed conditions (depression and anxiety).

2. Trial NCT02710279 (Response to Social Rejection in Suicidal Behavior):
   - While this trial is related to depression, which the patient has, there are several mismatches:
     - The trial is specifically for females, but the patient is male.
     - The trial requires participants to have a major depressive episode, which is not explicitly stated in the patient's profile.
     - The trial involves patients with and without a history of suicide attempts, which is not mentioned in the patient's profile.
   - The compatibility score would be below 70 due to these mismatches.

Therefore, neither trial meets the criteria for inclusion in the output (compatibility score of 70 or higher), resulting in an empty array.
2024-08-06 23:03:33,994 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:03:33,995 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:03:35,280 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:03:42,693 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05463679) is for Vascular Ehlers-Danlos Syndrome, which the patient doesn't have.\n2. The second trial (NCT03137979) is for Periodontitis, which is not listed in the patient's medical conditions.\n3. The third trial (NCT01733979) is for Anemia, which is also not listed in the patient's medical conditions.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 23:03:42,693 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05463679) is for Vascular Ehlers-Danlos Syndrome, which the patient doesn't have.\n2. The second trial (NCT03137979) is for Periodontitis, which is not listed in the patient's medical conditions.\n3. The third trial (NCT01733979) is for Anemia, which is also not listed in the patient's medical conditions.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 23:03:42,693 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT05463679) is for Vascular Ehlers-Danlos Syndrome, which the patient doesn't have.
2. The second trial (NCT03137979) is for Periodontitis, which is not listed in the patient's medical conditions.
3. The third trial (NCT01733979) is for Anemia, which is also not listed in the patient's medical conditions.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a score of 70 or higher.
2024-08-06 23:03:42,693 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:03:42,694 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:03:44,060 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:03:49,726 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials have a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on:\n\n1. Coronary artery bypass grafting surgery\n2. ADHD symptoms in children\n3. Atrial fibrillation\n4. Temperature monitoring during general anesthesia\n5. Allergic rhinitis\n\nThese trials are not directly related to the patient's medical conditions (depression and anxiety) or his current medication (Escitalopram). Additionally, some trials have specific inclusion criteria that the patient does not meet (e.g., age restrictions, specific medical conditions). As a result, none of the trials achieve a compatibility score of 70 or higher for this patient.", type='text')]
2024-08-06 23:03:49,727 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials have a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on:\n\n1. Coronary artery bypass grafting surgery\n2. ADHD symptoms in children\n3. Atrial fibrillation\n4. Temperature monitoring during general anesthesia\n5. Allergic rhinitis\n\nThese trials are not directly related to the patient's medical conditions (depression and anxiety) or his current medication (Escitalopram). Additionally, some trials have specific inclusion criteria that the patient does not meet (e.g., age restrictions, specific medical conditions). As a result, none of the trials achieve a compatibility score of 70 or higher for this patient.", type='text')]
2024-08-06 23:03:49,727 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials have a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on:

1. Coronary artery bypass grafting surgery
2. ADHD symptoms in children
3. Atrial fibrillation
4. Temperature monitoring during general anesthesia
5. Allergic rhinitis

These trials are not directly related to the patient's medical conditions (depression and anxiety) or his current medication (Escitalopram). Additionally, some trials have specific inclusion criteria that the patient does not meet (e.g., age restrictions, specific medical conditions). As a result, none of the trials achieve a compatibility score of 70 or higher for this patient.
2024-08-06 23:03:49,727 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:03:49,727 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:03:50,906 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:07:01,068 - app - INFO - Initializing Flask app...
2024-08-06 23:07:01,069 - app - INFO - Configuring app...
2024-08-06 23:07:01,070 - app - INFO - Setting up CORS...
2024-08-06 23:07:01,070 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:07:01,243 - app - INFO - Initializing JWT manager...
2024-08-06 23:07:01,243 - app - INFO - Setting up rate limiting...
2024-08-06 23:07:01,244 - app - INFO - Setting up database...
2024-08-06 23:07:01,245 - app - INFO - Starting database setup...
2024-08-06 23:07:01,917 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:07:01,917 - app - INFO - Database setup completed successfully
2024-08-06 23:07:01,917 - app - INFO - Registering error handler...
2024-08-06 23:07:01,918 - app - INFO - Initializing CLI commands...
2024-08-06 23:07:01,918 - app - INFO - Registering routes...
2024-08-06 23:07:01,923 - app - INFO - Initializing services...
2024-08-06 23:07:01,932 - app - INFO - Initializing email service...
2024-08-06 23:07:01,933 - app - INFO - Setting up scheduler...
2024-08-06 23:07:01,935 - app - INFO - Initializing scheduler...
2024-08-06 23:07:01,936 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:07:01,936 - app - INFO - Application initialized successfully
2024-08-06 23:07:03,441 - app - INFO - Initializing Flask app...
2024-08-06 23:07:03,443 - app - INFO - Configuring app...
2024-08-06 23:07:03,443 - app - INFO - Setting up CORS...
2024-08-06 23:07:03,444 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:07:03,674 - app - INFO - Initializing JWT manager...
2024-08-06 23:07:03,675 - app - INFO - Setting up rate limiting...
2024-08-06 23:07:03,675 - app - INFO - Setting up database...
2024-08-06 23:07:03,676 - app - INFO - Starting database setup...
2024-08-06 23:07:04,522 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:07:04,523 - app - INFO - Database setup completed successfully
2024-08-06 23:07:04,523 - app - INFO - Registering error handler...
2024-08-06 23:07:04,524 - app - INFO - Initializing CLI commands...
2024-08-06 23:07:04,524 - app - INFO - Registering routes...
2024-08-06 23:07:04,531 - app - INFO - Initializing services...
2024-08-06 23:07:04,543 - app - INFO - Initializing email service...
2024-08-06 23:07:04,543 - app - INFO - Setting up scheduler...
2024-08-06 23:07:04,547 - app - INFO - Initializing scheduler...
2024-08-06 23:07:04,547 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:07:04,548 - app - INFO - Application initialized successfully
2024-08-06 23:07:14,610 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:07:15,141 - app.database - INFO - Database connection established successfully
2024-08-06 23:07:15,384 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:07:15,384 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:07:15,966 - app.database - INFO - Database connection established successfully
2024-08-06 23:07:16,003 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:07:16,009 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:07:16,519 - app.database - INFO - Database connection established successfully
2024-08-06 23:07:16,558 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:07:16,565 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:07:16,566 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:07:17,101 - app.database - INFO - Database connection established successfully
2024-08-06 23:07:17,162 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:07:17,170 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:07:17,704 - app.database - INFO - Database connection established successfully
2024-08-06 23:07:17,744 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:07:18,351 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:07:18,924 - app.database - INFO - Database connection established successfully
2024-08-06 23:07:18,973 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:07:18,979 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:07:19,614 - app.database - INFO - Database connection established successfully
2024-08-06 23:07:19,652 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:07:19,663 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:07:20,187 - app.database - INFO - Database connection established successfully
2024-08-06 23:07:20,387 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:07:26,415 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: This trial is for adolescents aged 12-21 to study alcohol use effects on the brain. The patient is 31 years old and outside the age range. Additionally, there's no mention of alcohol abuse in the patient's profile.\n\nNone of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 23:07:26,416 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: This trial is for adolescents aged 12-21 to study alcohol use effects on the brain. The patient is 31 years old and outside the age range. Additionally, there's no mention of alcohol abuse in the patient's profile.\n\nNone of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 23:07:26,418 - app.services.anthropic_service - INFO - Parsing response: After reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: This trial is for adolescents aged 12-21 to study alcohol use effects on the brain. The patient is 31 years old and outside the age range. Additionally, there's no mention of alcohol abuse in the patient's profile.

None of these trials align with the patient's age, gender, or medical conditions (depression and anxiety). Therefore, the output in the requested JSON format would be an empty array:

[]
2024-08-06 23:07:26,418 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:07:26,418 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:07:27,604 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:07:32,673 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no match include:\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31 years old) doesn't align with the trial's focus, which seems to be more oriented towards older populations at risk of sarcopenia.\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are central to the clinical trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]
2024-08-06 23:07:32,674 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no match include:\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31 years old) doesn't align with the trial's focus, which seems to be more oriented towards older populations at risk of sarcopenia.\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are central to the clinical trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]
2024-08-06 23:07:32,675 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The reasons for no match include:
1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (31 years old) doesn't align with the trial's focus, which seems to be more oriented towards older populations at risk of sarcopenia.
3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are central to the clinical trial.
4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.
2024-08-06 23:07:32,675 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:07:32,676 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:07:33,849 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:07:39,554 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I've determined that none of the provided trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. None of the provided clinical trials specifically target depression or anxiety.\n3. The trials focus on heart disease, diabetes prevention, PTSD in military veterans, and cerebral palsy in children, which don't align with the patient's profile.\n4. The patient's age (31) also excludes him from trials targeting specific age groups (e.g., 65-84 years old, 7-11 years old).\n5. The patient doesn't meet the specific inclusion criteria for any of the trials (e.g., being a military veteran, having cerebral palsy, or being at risk for diabetes).\n\nGiven these factors, there are no suitable matches with a compatibility score of 70 or higher among the provided clinical trials for this patient.", type='text')]
2024-08-06 23:07:39,555 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I've determined that none of the provided trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. None of the provided clinical trials specifically target depression or anxiety.\n3. The trials focus on heart disease, diabetes prevention, PTSD in military veterans, and cerebral palsy in children, which don't align with the patient's profile.\n4. The patient's age (31) also excludes him from trials targeting specific age groups (e.g., 65-84 years old, 7-11 years old).\n5. The patient doesn't meet the specific inclusion criteria for any of the trials (e.g., being a military veteran, having cerebral palsy, or being at risk for diabetes).\n\nGiven these factors, there are no suitable matches with a compatibility score of 70 or higher among the provided clinical trials for this patient.", type='text')]
2024-08-06 23:07:39,556 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I've determined that none of the provided trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. None of the provided clinical trials specifically target depression or anxiety.
3. The trials focus on heart disease, diabetes prevention, PTSD in military veterans, and cerebral palsy in children, which don't align with the patient's profile.
4. The patient's age (31) also excludes him [SQL REDACTED] trials targeting specific age groups (e.g., 65-84 years old, 7-11 years old).
5. The patient doesn't meet the specific inclusion criteria for any of the trials (e.g., being a military veteran, having cerebral palsy, or being at risk for diabetes).

Given these factors, there are no suitable matches with a compatibility score of 70 or higher among the provided clinical trials for this patient.
2024-08-06 23:07:39,556 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 3 column 1 (char 4)
2024-08-06 23:07:39,556 - app.services.anthropic_service - ERROR - Response content: After analyzing the patient profile and clinical trial data, I've determined that none of the provided trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. None of the provided clinical trials specifically target depression or anxiety.
3. The trials focus on heart disease, diabetes prevention, PTSD in military veterans, and cerebral palsy in children, which don't align with the patient's profile.
4. The patient's age (31) also excludes him [SQL REDACTED] trials targeting specific age groups (e.g., 65-84 years old, 7-11 years old).
5. The patient doesn't meet the specific inclusion criteria for any of the trials (e.g., being a military veteran, having cerebral palsy, or being at risk for diabetes).

Given these factors, there are no suitable matches with a compatibility score of 70 or higher among the provided clinical trials for this patient.
2024-08-06 23:07:39,557 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:07:40,752 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:07:44,647 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications.\n\nThe first trial (NCT02244879) is for Type 2 Diabetes Mellitus, which the patient doesn't have. The second trial (NCT02841579) is for Non-Small Cell Lung Cancer, which is also not applicable to this patient.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 23:07:44,647 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications.\n\nThe first trial (NCT02244879) is for Type 2 Diabetes Mellitus, which the patient doesn't have. The second trial (NCT02841579) is for Non-Small Cell Lung Cancer, which is also not applicable to this patient.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 23:07:44,648 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications.

The first trial (NCT02244879) is for Type 2 Diabetes Mellitus, which the patient doesn't have. The second trial (NCT02841579) is for Non-Small Cell Lung Cancer, which is also not applicable to this patient.

Therefore, the output in the requested JSON format would be an empty array:

[]
2024-08-06 23:07:44,649 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:07:44,649 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:07:45,834 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:07:51,490 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Here's the explanation:\n\n1. NCT03059979 (Methylprednisolone for Early Systemic Sclerosis): This trial is specifically for patients with systemic sclerosis and Raynaud's phenomenon, which the patient does not have. The patient's conditions (depression and anxiety) do not match the trial's focus.\n\n2. NCT00293579 (Pemetrexed for Head and Neck Cancer): This trial is for patients with advanced head and neck cancer, which the patient does not have. The patient's conditions are unrelated to this trial's focus.\n\n3. NCT04491279 (Neuropilates for Chronic Stroke): This trial is for patients who have had a stroke, which the patient has not experienced. The patient's conditions (depression and anxiety) are not relevant to this study.\n\nGiven that none of the trials are related to the patient's conditions (depression and anxiety) or current medication (Escitalopram), there are no suitable matches with a compatibility score of 70 or higher.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 23:07:51,490 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Here's the explanation:\n\n1. NCT03059979 (Methylprednisolone for Early Systemic Sclerosis): This trial is specifically for patients with systemic sclerosis and Raynaud's phenomenon, which the patient does not have. The patient's conditions (depression and anxiety) do not match the trial's focus.\n\n2. NCT00293579 (Pemetrexed for Head and Neck Cancer): This trial is for patients with advanced head and neck cancer, which the patient does not have. The patient's conditions are unrelated to this trial's focus.\n\n3. NCT04491279 (Neuropilates for Chronic Stroke): This trial is for patients who have had a stroke, which the patient has not experienced. The patient's conditions (depression and anxiety) are not relevant to this study.\n\nGiven that none of the trials are related to the patient's conditions (depression and anxiety) or current medication (Escitalopram), there are no suitable matches with a compatibility score of 70 or higher.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 23:07:51,492 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. Here's the explanation:

1. NCT03059979 (Methylprednisolone for Early Systemic Sclerosis): This trial is specifically for patients with systemic sclerosis and Raynaud's phenomenon, which the patient does not have. The patient's conditions (depression and anxiety) do not match the trial's focus.

2. NCT00293579 (Pemetrexed for Head and Neck Cancer): This trial is for patients with advanced head and neck cancer, which the patient does not have. The patient's conditions are unrelated to this trial's focus.

3. NCT04491279 (Neuropilates for Chronic Stroke): This trial is for patients who have had a stroke, which the patient has not experienced. The patient's conditions (depression and anxiety) are not relevant to this study.

Given that none of the trials are related to the patient's conditions (depression and anxiety) or current medication (Escitalopram), there are no suitable matches with a compatibility score of 70 or higher.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 23:07:51,492 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:07:51,493 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:07:52,689 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:07:55,433 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the conditions or eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:07:55,434 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the conditions or eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:07:55,435 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the conditions or eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.

Therefore, the output is an empty array:

[]
2024-08-06 23:07:55,435 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:07:55,435 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:07:56,625 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:08:01,354 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match the patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT01272479: This trial is for hemodialysis patients with hepatitis C, which doesn't match Ethan's profile.\n\n2. NCT01593579: This trial is for patients with melanoma, which is not mentioned in Ethan's medical conditions.\n\n3. NCT01709279: This trial is for patients with ischemic heart failure, which doesn't match Ethan's profile.\n\n4. NCT03982979: This trial is for patients with advanced refractory left ventricular heart failure, which is not part of Ethan's medical history.\n\nNone of these trials are related to depression or anxiety, which are Ethan's primary medical conditions. Therefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 23:08:01,354 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match the patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT01272479: This trial is for hemodialysis patients with hepatitis C, which doesn't match Ethan's profile.\n\n2. NCT01593579: This trial is for patients with melanoma, which is not mentioned in Ethan's medical conditions.\n\n3. NCT01709279: This trial is for patients with ischemic heart failure, which doesn't match Ethan's profile.\n\n4. NCT03982979: This trial is for patients with advanced refractory left ventricular heart failure, which is not part of Ethan's medical history.\n\nNone of these trials are related to depression or anxiety, which are Ethan's primary medical conditions. Therefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 23:08:01,355 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match the patient's profile with a compatibility score of 70 or higher. Here's why:

1. NCT01272479: This trial is for hemodialysis patients with hepatitis C, which doesn't match Ethan's profile.

2. NCT01593579: This trial is for patients with melanoma, which is not mentioned in Ethan's medical conditions.

3. NCT01709279: This trial is for patients with ischemic heart failure, which doesn't match Ethan's profile.

4. NCT03982979: This trial is for patients with advanced refractory left ventricular heart failure, which is not part of Ethan's medical history.

None of these trials are related to depression or anxiety, which are Ethan's primary medical conditions. Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 23:08:01,355 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:08:01,355 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:08:02,617 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:08:07,505 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's conditions of depression and anxiety.\n\n2. The second trial (NCT03221179) is for healthy volunteers, and this patient has existing medical conditions.\n\n3. The third trial (NCT00228579) is focused on obesity in women, while this patient is male and obesity is not mentioned in his profile.\n\nNone of these trials align with the patient's profile of a 31-year-old male with depression and anxiety, taking Escitalopram. The patient's conditions and characteristics do not meet the inclusion criteria or match the focus of any of the provided clinical trials.", type='text')]
2024-08-06 23:08:07,505 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's conditions of depression and anxiety.\n\n2. The second trial (NCT03221179) is for healthy volunteers, and this patient has existing medical conditions.\n\n3. The third trial (NCT00228579) is focused on obesity in women, while this patient is male and obesity is not mentioned in his profile.\n\nNone of these trials align with the patient's profile of a 31-year-old male with depression and anxiety, taking Escitalopram. The patient's conditions and characteristics do not meet the inclusion criteria or match the focus of any of the provided clinical trials.", type='text')]
2024-08-06 23:08:07,505 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's conditions of depression and anxiety.

2. The second trial (NCT03221179) is for healthy volunteers, and this patient has existing medical conditions.

3. The third trial (NCT00228579) is focused on obesity in women, while this patient is male and obesity is not mentioned in his profile.

None of these trials align with the patient's profile of a 31-year-old male with depression and anxiety, taking Escitalopram. The patient's conditions and characteristics do not meet the inclusion criteria or match the focus of any of the provided clinical trials.
2024-08-06 23:08:07,505 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:08:07,506 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:08:08,668 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:08:13,759 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match with a score of 70 or higher for this patient. Here's why:\n\n1. NCT03901079: This trial is for coronary artery disease (CAD), which the patient does not have.\n\n2. NCT05639179: This trial is for B-cell Acute Lymphoblastic Leukemia (B-ALL), which the patient does not have.\n\n3. NCT00383279: This trial is for gynecologic cancers in women, which doesn't apply to this male patient.\n\n4. NCT01928979: This trial is for atrial fibrillation, which the patient does not have.\n\nThe patient's profile indicates depression and anxiety as medical conditions, which are not targeted by any of the provided clinical trials. Additionally, the patient's age (31 years old) and current medication (Escitalopram) are not specifically relevant to any of these trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 23:08:13,761 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match with a score of 70 or higher for this patient. Here's why:\n\n1. NCT03901079: This trial is for coronary artery disease (CAD), which the patient does not have.\n\n2. NCT05639179: This trial is for B-cell Acute Lymphoblastic Leukemia (B-ALL), which the patient does not have.\n\n3. NCT00383279: This trial is for gynecologic cancers in women, which doesn't apply to this male patient.\n\n4. NCT01928979: This trial is for atrial fibrillation, which the patient does not have.\n\nThe patient's profile indicates depression and anxiety as medical conditions, which are not targeted by any of the provided clinical trials. Additionally, the patient's age (31 years old) and current medication (Escitalopram) are not specifically relevant to any of these trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 23:08:13,761 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match with a score of 70 or higher for this patient. Here's why:

1. NCT03901079: This trial is for coronary artery disease (CAD), which the patient does not have.

2. NCT05639179: This trial is for B-cell Acute Lymphoblastic Leukemia (B-ALL), which the patient does not have.

3. NCT00383279: This trial is for gynecologic cancers in women, which doesn't apply to this male patient.

4. NCT01928979: This trial is for atrial fibrillation, which the patient does not have.

The patient's profile indicates depression and anxiety as medical conditions, which are not targeted by any of the provided clinical trials. Additionally, the patient's age (31 years old) and current medication (Escitalopram) are not specifically relevant to any of these trials.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 23:08:13,762 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:08:13,762 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:08:14,925 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:08:20,480 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05315479) is for pediatric patients aged 2 to <17 years undergoing surgery for post-operative pain. The patient, Ethan Brush, is 31 years old (born in 1992) and does not have post-operative pain listed in his medical conditions.\n\n2. The second trial (NCT02052479) is for female adolescents aged 12-18 with Polycystic Ovary Syndrome (PCOS). The patient is male and 31 years old, and does not have PCOS listed in his medical conditions.\n\nNeither of these trials are suitable for the patient based on age, gender, and medical conditions. Therefore, no trials meet the minimum compatibility score of 70 or higher.', type='text')]
2024-08-06 23:08:20,480 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05315479) is for pediatric patients aged 2 to <17 years undergoing surgery for post-operative pain. The patient, Ethan Brush, is 31 years old (born in 1992) and does not have post-operative pain listed in his medical conditions.\n\n2. The second trial (NCT02052479) is for female adolescents aged 12-18 with Polycystic Ovary Syndrome (PCOS). The patient is male and 31 years old, and does not have PCOS listed in his medical conditions.\n\nNeither of these trials are suitable for the patient based on age, gender, and medical conditions. Therefore, no trials meet the minimum compatibility score of 70 or higher.', type='text')]
2024-08-06 23:08:20,481 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT05315479) is for pediatric patients aged 2 to <17 years undergoing surgery for post-operative pain. The patient, Ethan Brush, is 31 years old (born in 1992) and does not have post-operative pain listed in his medical conditions.

2. The second trial (NCT02052479) is for female adolescents aged 12-18 with Polycystic Ovary Syndrome (PCOS). The patient is male and 31 years old, and does not have PCOS listed in his medical conditions.

Neither of these trials are suitable for the patient based on age, gender, and medical conditions. Therefore, no trials meet the minimum compatibility score of 70 or higher.
2024-08-06 23:08:20,481 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:08:20,481 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:08:21,654 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:08:26,297 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After reviewing the patient profile and the clinical trials provided, I couldn't find any trials that match the patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient's primary medical conditions are depression and anxiety.\n2. The patient is taking Escitalopram, which is an antidepressant.\n3. None of the provided clinical trials are related to depression, anxiety, or mental health conditions.\n4. The trials provided focus on influenza vaccines, postpartum perineal tears, colorectal cancer, and oncologist satisfaction with cytotoxic agents.\n5. The patient's age (31 years old) and gender (male) don't specifically match any of the trial requirements.\n\nGiven these factors, there are no suitable matches among the provided trials for this patient. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:08:26,297 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After reviewing the patient profile and the clinical trials provided, I couldn't find any trials that match the patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient's primary medical conditions are depression and anxiety.\n2. The patient is taking Escitalopram, which is an antidepressant.\n3. None of the provided clinical trials are related to depression, anxiety, or mental health conditions.\n4. The trials provided focus on influenza vaccines, postpartum perineal tears, colorectal cancer, and oncologist satisfaction with cytotoxic agents.\n5. The patient's age (31 years old) and gender (male) don't specifically match any of the trial requirements.\n\nGiven these factors, there are no suitable matches among the provided trials for this patient. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:08:26,298 - app.services.anthropic_service - INFO - Parsing response: After reviewing the patient profile and the clinical trials provided, I couldn't find any trials that match the patient with a compatibility score of 70 or higher. Here's why:

1. The patient's primary medical conditions are depression and anxiety.
2. The patient is taking Escitalopram, which is an antidepressant.
3. None of the provided clinical trials are related to depression, anxiety, or mental health conditions.
4. The trials provided focus on influenza vaccines, postpartum perineal tears, colorectal cancer, and oncologist satisfaction with cytotoxic agents.
5. The patient's age (31 years old) and gender (male) don't specifically match any of the trial requirements.

Given these factors, there are no suitable matches among the provided trials for this patient. Therefore, the output is an empty array:

[]
2024-08-06 23:08:26,298 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:08:26,298 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:08:27,493 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:08:33,186 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='After analyzing the patient profile and clinical trial data, I\'ve determined that there are no trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The first trial (NCT06378879) is focused on anesthesia during gastroscopy, which is not relevant to the patient\'s medical conditions (depression and anxiety).\n\n2. The second trial (NCT02710279) is related to unipolar depression, which could be relevant to the patient\'s condition. However, there are several factors that significantly reduce the compatibility:\n\n   - The trial is specifically for female patients, while the patient is male.\n   - The trial status is "TERMINATED", which means it\'s no longer recruiting.\n   - The trial focuses on patients with a history of suicidal behavior, which is not mentioned in the patient\'s profile.\n   - The trial has specific requirements related to age range and other criteria that we don\'t have enough information to confirm for this patient.\n\nGiven these factors, neither trial reaches the threshold of 70 or higher for compatibility, resulting in an empty array as the output.', type='text')]
2024-08-06 23:08:33,187 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='After analyzing the patient profile and clinical trial data, I\'ve determined that there are no trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The first trial (NCT06378879) is focused on anesthesia during gastroscopy, which is not relevant to the patient\'s medical conditions (depression and anxiety).\n\n2. The second trial (NCT02710279) is related to unipolar depression, which could be relevant to the patient\'s condition. However, there are several factors that significantly reduce the compatibility:\n\n   - The trial is specifically for female patients, while the patient is male.\n   - The trial status is "TERMINATED", which means it\'s no longer recruiting.\n   - The trial focuses on patients with a history of suicidal behavior, which is not mentioned in the patient\'s profile.\n   - The trial has specific requirements related to age range and other criteria that we don\'t have enough information to confirm for this patient.\n\nGiven these factors, neither trial reaches the threshold of 70 or higher for compatibility, resulting in an empty array as the output.', type='text')]
2024-08-06 23:08:33,187 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I've determined that there are no trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. The first trial (NCT06378879) is focused on anesthesia during gastroscopy, which is not relevant to the patient's medical conditions (depression and anxiety).

2. The second trial (NCT02710279) is related to unipolar depression, which could be relevant to the patient's condition. However, there are several factors that significantly reduce the compatibility:

   - The trial is specifically for female patients, while the patient is male.
   - The trial status is "TERMINATED", which means it's no longer recruiting.
   - The trial focuses on patients with a history of suicidal behavior, which is not mentioned in the patient's profile.
   - The trial has specific requirements related to age range and other criteria that we don't have enough information to confirm for this patient.

Given these factors, neither trial reaches the threshold of 70 or higher for compatibility, resulting in an empty array as the output.
2024-08-06 23:08:33,188 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:08:33,188 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:08:34,364 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:08:38,312 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe provided trials focus on vascular Ehlers-Danlos Syndrome, chronic periodontitis, and anemia, which are not mentioned in the patient's profile. Additionally, the patient's age (31 years old) and specific medical conditions do not meet the eligibility criteria for these trials.", type='text')]
2024-08-06 23:08:38,313 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe provided trials focus on vascular Ehlers-Danlos Syndrome, chronic periodontitis, and anemia, which are not mentioned in the patient's profile. Additionally, the patient's age (31 years old) and specific medical conditions do not meet the eligibility criteria for these trials.", type='text')]
2024-08-06 23:08:38,313 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and criteria of the provided clinical trials. Therefore, the output is an empty array:

[]

The provided trials focus on vascular Ehlers-Danlos Syndrome, chronic periodontitis, and anemia, which are not mentioned in the patient's profile. Additionally, the patient's age (31 years old) and specific medical conditions do not meet the eligibility criteria for these trials.
2024-08-06 23:08:38,313 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:08:38,314 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:08:39,477 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:08:44,257 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to depression, anxiety, or psychiatric medications. The trials cover various conditions such as coronary artery bypass grafting, ADHD in children, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis. These conditions and study focuses do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 23:08:44,257 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to depression, anxiety, or psychiatric medications. The trials cover various conditions such as coronary artery bypass grafting, ADHD in children, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis. These conditions and study focuses do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 23:08:44,259 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to depression, anxiety, or psychiatric medications. The trials cover various conditions such as coronary artery bypass grafting, ADHD in children, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis. These conditions and study focuses do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials.
2024-08-06 23:08:44,259 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:08:44,260 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:08:45,433 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:08:50,147 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasoning:\n1. NCT02199379: This trial is for renal impairment, which doesn't match the patient's conditions (depression and anxiety).\n2. NCT02407379: This trial is for periodontitis, which is not related to the patient's conditions.\n3. NCT01100879: This trial is for iron-deficiency anemia in multiple myeloma patients, which doesn't match the patient's profile.\n\nNone of these trials are related to depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient's age (31 years old) and medication (Escitalopram) are not specifically relevant to any of the provided trials. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 23:08:50,149 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasoning:\n1. NCT02199379: This trial is for renal impairment, which doesn't match the patient's conditions (depression and anxiety).\n2. NCT02407379: This trial is for periodontitis, which is not related to the patient's conditions.\n3. NCT01100879: This trial is for iron-deficiency anemia in multiple myeloma patients, which doesn't match the patient's profile.\n\nNone of these trials are related to depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient's age (31 years old) and medication (Escitalopram) are not specifically relevant to any of the provided trials. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 23:08:50,149 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasoning:
1. NCT02199379: This trial is for renal impairment, which doesn't match the patient's conditions (depression and anxiety).
2. NCT02407379: This trial is for periodontitis, which is not related to the patient's conditions.
3. NCT01100879: This trial is for iron-deficiency anemia in multiple myeloma patients, which doesn't match the patient's profile.

None of these trials are related to depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient's age (31 years old) and medication (Escitalopram) are not specifically relevant to any of the provided trials. Therefore, there are no suitable matches with a score of 70 or higher.
2024-08-06 23:08:50,149 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:08:50,149 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:08:51,341 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:09:00,407 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT06207279",\n        "compatibility_score": 75,\n        "reasons": [\n            "The patient has depression, which is one of the conditions studied in this trial",\n            "The patient\'s age (31) falls within the trial\'s inclusion criteria of 18-60 years old",\n            "The trial includes healthy subjects as well as those with depression, making it potentially suitable for this patient",\n            "The patient\'s medication (Escitalopram) is not listed as an exclusion criterion"\n        ]\n    }\n]\n\nExplanation:\nThe second trial (NCT06207279) is a potential match for the patient. While it\'s not a perfect fit, it has several relevant factors that make it suitable:\n\n1. The trial includes depression as one of the conditions being studied, which matches the patient\'s medical condition.\n2. The patient\'s age (31, calculated from the date of birth) falls within the trial\'s inclusion criteria of 18-60 years old.\n3. The trial includes both healthy subjects and those with depression, making it potentially suitable for this patient.\n4. The patient\'s current medication (Escitalopram) is not explicitly listed as an exclusion criterion.\n\nHowever, there are some factors that prevent it from being a perfect match:\n1. The trial also focuses on other conditions like insomnia and attention disturbances, which the patient doesn\'t have.\n2. The trial has specific criteria about handedness and education level, which we don\'t have information about for this patient.\n\nThe first trial (NCT04931979) is not suitable for this patient as it focuses on prostate cancer, which is not mentioned in the patient\'s profile.\n\nGiven these factors, I\'ve assigned a compatibility score of 75 to the matching trial, as it meets several key criteria but isn\'t a perfect match.', type='text')]
2024-08-06 23:09:00,408 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT06207279",\n        "compatibility_score": 75,\n        "reasons": [\n            "The patient has depression, which is one of the conditions studied in this trial",\n            "The patient\'s age (31) falls within the trial\'s inclusion criteria of 18-60 years old",\n            "The trial includes healthy subjects as well as those with depression, making it potentially suitable for this patient",\n            "The patient\'s medication (Escitalopram) is not listed as an exclusion criterion"\n        ]\n    }\n]\n\nExplanation:\nThe second trial (NCT06207279) is a potential match for the patient. While it\'s not a perfect fit, it has several relevant factors that make it suitable:\n\n1. The trial includes depression as one of the conditions being studied, which matches the patient\'s medical condition.\n2. The patient\'s age (31, calculated from the date of birth) falls within the trial\'s inclusion criteria of 18-60 years old.\n3. The trial includes both healthy subjects and those with depression, making it potentially suitable for this patient.\n4. The patient\'s current medication (Escitalopram) is not explicitly listed as an exclusion criterion.\n\nHowever, there are some factors that prevent it from being a perfect match:\n1. The trial also focuses on other conditions like insomnia and attention disturbances, which the patient doesn\'t have.\n2. The trial has specific criteria about handedness and education level, which we don\'t have information about for this patient.\n\nThe first trial (NCT04931979) is not suitable for this patient as it focuses on prostate cancer, which is not mentioned in the patient\'s profile.\n\nGiven these factors, I\'ve assigned a compatibility score of 75 to the matching trial, as it meets several key criteria but isn\'t a perfect match.', type='text')]
2024-08-06 23:09:00,408 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT06207279",
        "compatibility_score": 75,
        "reasons": [
            "The patient has depression, which is one of the conditions studied in this trial",
            "The patient's age (31) falls within the trial's inclusion criteria of 18-60 years old",
            "The trial includes healthy subjects as well as those with depression, making it potentially suitable for this patient",
            "The patient's medication (Escitalopram) is not listed as an exclusion criterion"
        ]
    }
]

Explanation:
The second trial (NCT06207279) is a potential match for the patient. While it's not a perfect fit, it has several relevant factors that make it suitable:

1. The trial includes depression as one of the conditions being studied, which matches the patient's medical condition.
2. The patient's age (31, calculated [SQL REDACTED] the date of birth) falls within the trial's inclusion criteria of 18-60 years old.
3. The trial includes both healthy subjects and those with depression, making it potentially suitable for this patient.
4. The patient's current medication (Escitalopram) is not explicitly listed as an exclusion criterion.

However, there are some factors that prevent it [SQL REDACTED] being a perfect match:
1. The trial also focuses on other conditions like insomnia and attention disturbances, which the patient doesn't have.
2. The trial has specific criteria about handedness and education level, which we don't have information about for this patient.

The first trial (NCT04931979) is not suitable for this patient as it focuses on prostate cancer, which is not mentioned in the patient's profile.

Given these factors, I've assigned a compatibility score of 75 to the matching trial, as it meets several key criteria but isn't a perfect match.
2024-08-06 23:09:00,409 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 14 column 1 (char 540)
2024-08-06 23:09:00,409 - app.services.anthropic_service - ERROR - Response content: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT06207279",
        "compatibility_score": 75,
        "reasons": [
            "The patient has depression, which is one of the conditions studied in this trial",
            "The patient's age (31) falls within the trial's inclusion criteria of 18-60 years old",
            "The trial includes healthy subjects as well as those with depression, making it potentially suitable for this patient",
            "The patient's medication (Escitalopram) is not listed as an exclusion criterion"
        ]
    }
]

Explanation:
The second trial (NCT06207279) is a potential match for the patient. While it's not a perfect fit, it has several relevant factors that make it suitable:

1. The trial includes depression as one of the conditions being studied, which matches the patient's medical condition.
2. The patient's age (31, calculated [SQL REDACTED] the date of birth) falls within the trial's inclusion criteria of 18-60 years old.
3. The trial includes both healthy subjects and those with depression, making it potentially suitable for this patient.
4. The patient's current medication (Escitalopram) is not explicitly listed as an exclusion criterion.

However, there are some factors that prevent it [SQL REDACTED] being a perfect match:
1. The trial also focuses on other conditions like insomnia and attention disturbances, which the patient doesn't have.
2. The trial has specific criteria about handedness and education level, which we don't have information about for this patient.

The first trial (NCT04931979) is not suitable for this patient as it focuses on prostate cancer, which is not mentioned in the patient's profile.

Given these factors, I've assigned a compatibility score of 75 to the matching trial, as it meets several key criteria but isn't a perfect match.
2024-08-06 23:09:00,409 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:09:01,624 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:09:04,992 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (32-year-old male with depression and anxiety) does not align well with the specific conditions and eligibility criteria of the given trials, which focus on post-operative pain, popliteal entrapment syndrome, and duodenal atresia surgery.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:09:04,992 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (32-year-old male with depression and anxiety) does not align well with the specific conditions and eligibility criteria of the given trials, which focus on post-operative pain, popliteal entrapment syndrome, and duodenal atresia surgery.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:09:04,993 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (32-year-old male with depression and anxiety) does not align well with the specific conditions and eligibility criteria of the given trials, which focus on post-operative pain, popliteal entrapment syndrome, and duodenal atresia surgery.

Therefore, the output is an empty array:

[]
2024-08-06 23:09:04,993 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:09:04,993 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:09:06,216 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:09:11,347 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I don't find any trials that are suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. NCT05359679 (Value Champions for Dementia):\n   - This trial is focused on patients with dementia who are 65 years or older.\n   - The patient is 31 years old (born in 1992) and does not have dementia.\n   - The trial targets inappropriate prescribing for dementia patients, which is not relevant to this patient's conditions.\n\n2. NCT04527679 (Cholangiocarcinoma Treatment):\n   - This trial is for patients with intrahepatic cholangiocarcinoma (a type of liver cancer).\n   - The patient does not have this condition; their listed medical conditions are depression and anxiety.\n   - The trial involves chemotherapy and targeted therapy, which are not appropriate for the patient's current health status.\n\nGiven these mismatches, neither trial reaches the threshold of 70 or higher for compatibility. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:09:11,348 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I don't find any trials that are suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. NCT05359679 (Value Champions for Dementia):\n   - This trial is focused on patients with dementia who are 65 years or older.\n   - The patient is 31 years old (born in 1992) and does not have dementia.\n   - The trial targets inappropriate prescribing for dementia patients, which is not relevant to this patient's conditions.\n\n2. NCT04527679 (Cholangiocarcinoma Treatment):\n   - This trial is for patients with intrahepatic cholangiocarcinoma (a type of liver cancer).\n   - The patient does not have this condition; their listed medical conditions are depression and anxiety.\n   - The trial involves chemotherapy and targeted therapy, which are not appropriate for the patient's current health status.\n\nGiven these mismatches, neither trial reaches the threshold of 70 or higher for compatibility. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:09:11,348 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, I don't find any trials that are suitable matches with a compatibility score of 70 or higher. Here's why:

1. NCT05359679 (Value Champions for Dementia):
   - This trial is focused on patients with dementia who are 65 years or older.
   - The patient is 31 years old (born in 1992) and does not have dementia.
   - The trial targets inappropriate prescribing for dementia patients, which is not relevant to this patient's conditions.

2. NCT04527679 (Cholangiocarcinoma Treatment):
   - This trial is for patients with intrahepatic cholangiocarcinoma (a type of liver cancer).
   - The patient does not have this condition; their listed medical conditions are depression and anxiety.
   - The trial involves chemotherapy and targeted therapy, which are not appropriate for the patient's current health status.

Given these mismatches, neither trial reaches the threshold of 70 or higher for compatibility. Therefore, the output is an empty array:

[]
2024-08-06 23:09:11,349 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:09:11,349 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:09:12,543 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:10:17,547 - app - INFO - Initializing Flask app...
2024-08-06 23:10:17,549 - app - INFO - Configuring app...
2024-08-06 23:10:17,549 - app - INFO - Setting up CORS...
2024-08-06 23:10:17,549 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:10:17,717 - app - INFO - Initializing JWT manager...
2024-08-06 23:10:17,718 - app - INFO - Setting up rate limiting...
2024-08-06 23:10:17,718 - app - INFO - Setting up database...
2024-08-06 23:10:17,719 - app - INFO - Starting database setup...
2024-08-06 23:10:18,296 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:10:18,296 - app - INFO - Database setup completed successfully
2024-08-06 23:10:18,296 - app - INFO - Registering error handler...
2024-08-06 23:10:18,297 - app - INFO - Initializing CLI commands...
2024-08-06 23:10:18,297 - app - INFO - Registering routes...
2024-08-06 23:10:18,312 - app - INFO - Initializing services...
2024-08-06 23:10:18,321 - app - INFO - Initializing email service...
2024-08-06 23:10:18,321 - app - INFO - Setting up scheduler...
2024-08-06 23:10:18,324 - app - INFO - Initializing scheduler...
2024-08-06 23:10:18,324 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:10:18,325 - app - INFO - Application initialized successfully
2024-08-06 23:10:19,762 - app - INFO - Initializing Flask app...
2024-08-06 23:10:19,765 - app - INFO - Configuring app...
2024-08-06 23:10:19,765 - app - INFO - Setting up CORS...
2024-08-06 23:10:19,766 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:10:19,971 - app - INFO - Initializing JWT manager...
2024-08-06 23:10:19,971 - app - INFO - Setting up rate limiting...
2024-08-06 23:10:19,972 - app - INFO - Setting up database...
2024-08-06 23:10:19,972 - app - INFO - Starting database setup...
2024-08-06 23:10:20,512 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:10:20,512 - app - INFO - Database setup completed successfully
2024-08-06 23:10:20,513 - app - INFO - Registering error handler...
2024-08-06 23:10:20,513 - app - INFO - Initializing CLI commands...
2024-08-06 23:10:20,513 - app - INFO - Registering routes...
2024-08-06 23:10:20,520 - app - INFO - Initializing services...
2024-08-06 23:10:20,529 - app - INFO - Initializing email service...
2024-08-06 23:10:20,529 - app - INFO - Setting up scheduler...
2024-08-06 23:10:20,532 - app - INFO - Initializing scheduler...
2024-08-06 23:10:20,533 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:10:20,533 - app - INFO - Application initialized successfully
2024-08-06 23:12:15,196 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:12:15,735 - app.database - INFO - Database connection established successfully
2024-08-06 23:12:16,016 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:12:16,017 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:12:16,624 - app.database - INFO - Database connection established successfully
2024-08-06 23:12:16,669 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:12:16,675 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:12:17,248 - app.database - INFO - Database connection established successfully
2024-08-06 23:12:17,289 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:12:17,293 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:12:17,295 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:12:17,932 - app.database - INFO - Database connection established successfully
2024-08-06 23:12:17,978 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:12:17,983 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:12:18,514 - app.database - INFO - Database connection established successfully
2024-08-06 23:12:18,557 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:12:19,162 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:12:19,995 - app.database - INFO - Database connection established successfully
2024-08-06 23:12:20,116 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:12:20,122 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:12:20,905 - app.database - INFO - Database connection established successfully
2024-08-06 23:12:20,976 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:18:49,511 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:18:50,167 - app.database - INFO - Database connection established successfully
2024-08-06 23:18:50,411 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:18:56,096 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials are:\n   - NCT00072579: For chronic myelogenous leukemia\n   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia\n   - NCT00812279: For smokers switching to a new smoking article\n   - NCT01511679: For studying alcohol use in adolescents\n\nNone of these trials are related to the patient's conditions (depression and anxiety) or age group. The trials are focused on very different medical conditions or demographics, resulting in low compatibility scores (below 70) for all of them.", type='text')]
2024-08-06 23:18:56,096 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials are:\n   - NCT00072579: For chronic myelogenous leukemia\n   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia\n   - NCT00812279: For smokers switching to a new smoking article\n   - NCT01511679: For studying alcohol use in adolescents\n\nNone of these trials are related to the patient's conditions (depression and anxiety) or age group. The trials are focused on very different medical conditions or demographics, resulting in low compatibility scores (below 70) for all of them.", type='text')]
2024-08-06 23:18:56,097 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.

2. The available clinical trials are:
   - NCT00072579: For chronic myelogenous leukemia
   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia
   - NCT00812279: For smokers switching to a new smoking article
   - NCT01511679: For studying alcohol use in adolescents

None of these trials are related to the patient's conditions (depression and anxiety) or age group. The trials are focused on very different medical conditions or demographics, resulting in low compatibility scores (below 70) for all of them.
2024-08-06 23:18:56,097 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:18:56,097 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:18:57,274 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:19:02,700 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the clinical trial focusing on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe patient's medical conditions (depression and anxiety) and current medication (Escitalopram) are not directly related to the conditions studied in the trial (sarcopenia, obesity, incisional hernia). Additionally, there's no information suggesting that the patient has undergone or requires complex abdominal wall surgery, which is a key focus of the study.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 23:19:02,701 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the clinical trial focusing on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe patient's medical conditions (depression and anxiety) and current medication (Escitalopram) are not directly related to the conditions studied in the trial (sarcopenia, obesity, incisional hernia). Additionally, there's no information suggesting that the patient has undergone or requires complex abdominal wall surgery, which is a key focus of the study.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-06 23:19:02,702 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the clinical trial focusing on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) are not directly related to the conditions studied in the trial (sarcopenia, obesity, incisional hernia). Additionally, there's no information suggesting that the patient has undergone or requires complex abdominal wall surgery, which is a key focus of the study.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-06 23:19:02,703 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:19:02,704 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:19:03,881 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:19:09,532 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:\n\n1. Heart disease risk factors (NCT00626379)\n2. Diabetes prevention in Korean and South Asian Americans (NCT03530579)\n3. PTSD in military veterans (NCT05900479)\n4. Virtual reality for children with cerebral palsy (NCT04679779)\n\nThese trials either have different target conditions, specific demographic requirements, or age ranges that do not match the patient's profile. Therefore, none of the trials reach the threshold of 70% compatibility.", type='text')]
2024-08-06 23:19:09,532 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:\n\n1. Heart disease risk factors (NCT00626379)\n2. Diabetes prevention in Korean and South Asian Americans (NCT03530579)\n3. PTSD in military veterans (NCT05900479)\n4. Virtual reality for children with cerebral palsy (NCT04679779)\n\nThese trials either have different target conditions, specific demographic requirements, or age ranges that do not match the patient's profile. Therefore, none of the trials reach the threshold of 70% compatibility.", type='text')]
2024-08-06 23:19:09,533 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on:

1. Heart disease risk factors (NCT00626379)
2. Diabetes prevention in Korean and South Asian Americans (NCT03530579)
3. PTSD in military veterans (NCT05900479)
4. Virtual reality for children with cerebral palsy (NCT04679779)

These trials either have different target conditions, specific demographic requirements, or age ranges that do not match the patient's profile. Therefore, none of the trials reach the threshold of 70% compatibility.
2024-08-06 23:19:09,533 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:19:09,533 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:19:10,699 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:19:14,310 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align with the conditions and eligibility criteria of the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:19:14,311 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align with the conditions and eligibility criteria of the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:19:14,311 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align with the conditions and eligibility criteria of the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.

Therefore, the output is an empty array:

[]
2024-08-06 23:19:14,311 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:19:14,311 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:19:15,489 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:19:20,769 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions mentioned in the patient's profile.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not relevant to the patient's conditions.\n\n3. The third trial (NCT04491279) is for stroke patients, which is also not applicable to this patient's profile.\n\nThe patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align with the conditions or eligibility criteria of any of the provided clinical trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 23:19:20,769 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions mentioned in the patient's profile.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not relevant to the patient's conditions.\n\n3. The third trial (NCT04491279) is for stroke patients, which is also not applicable to this patient's profile.\n\nThe patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align with the conditions or eligibility criteria of any of the provided clinical trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-06 23:19:20,769 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions mentioned in the patient's profile.

2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not relevant to the patient's conditions.

3. The third trial (NCT04491279) is for stroke patients, which is also not applicable to this patient's profile.

The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align with the conditions or eligibility criteria of any of the provided clinical trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-06 23:19:20,769 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:19:20,771 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:19:21,950 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:19:27,660 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not compatible with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 23:19:27,661 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:\n\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not compatible with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-06 23:19:27,661 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically related to these conditions or medications. The trials focus on:

1. Scalp cooling for metastatic breast cancer patients
2. Extracorporeal photopheresis for lung transplant patients
3. Health and safety training in the workplace
4. Choroidal thickness measurements related to refractive errors

These trials are not compatible with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.
2024-08-06 23:19:27,661 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:19:27,662 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:19:28,921 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:19:32,899 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the provided clinical trials. The trials focus on conditions such as chronic kidney disease, hepatitis C, melanoma, ischemic heart failure, and advanced left ventricular heart failure, which are not present in the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:19:32,900 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the provided clinical trials. The trials focus on conditions such as chronic kidney disease, hepatitis C, melanoma, ischemic heart failure, and advanced left ventricular heart failure, which are not present in the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:19:32,900 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I did not find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the provided clinical trials. The trials focus on conditions such as chronic kidney disease, hepatitis C, melanoma, ischemic heart failure, and advanced left ventricular heart failure, which are not present in the patient's profile.

Therefore, the output is an empty array:

[]
2024-08-06 23:19:32,900 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:19:32,901 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:19:34,068 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:19:40,795 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on:\n\n1. NCT06289179: Thyroid and cortisol hormone response in sepsis patients\n2. NCT03221179: Safety and tolerability study of RO7049665 in healthy volunteers\n3. NCT00228579: Assessment of changes in abdominal fat in obese female patients\n\nThese trials are not compatible with the patient's profile for the following reasons:\n- The patient does not have sepsis (Trial 1)\n- The patient is not a healthy volunteer without any medical conditions (Trial 2)\n- The patient is male and does not have obesity as a listed condition (Trial 3)\n\nTherefore, none of the trials reach the minimum compatibility score of 70, resulting in an empty array as the output.", type='text')]
2024-08-06 23:19:40,795 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on:\n\n1. NCT06289179: Thyroid and cortisol hormone response in sepsis patients\n2. NCT03221179: Safety and tolerability study of RO7049665 in healthy volunteers\n3. NCT00228579: Assessment of changes in abdominal fat in obese female patients\n\nThese trials are not compatible with the patient's profile for the following reasons:\n- The patient does not have sepsis (Trial 1)\n- The patient is not a healthy volunteer without any medical conditions (Trial 2)\n- The patient is male and does not have obesity as a listed condition (Trial 3)\n\nTherefore, none of the trials reach the minimum compatibility score of 70, resulting in an empty array as the output.", type='text')]
2024-08-06 23:19:40,796 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically targeting these conditions or medications. The trials focus on:

1. NCT06289179: Thyroid and cortisol hormone response in sepsis patients
2. NCT03221179: Safety and tolerability study of RO7049665 in healthy volunteers
3. NCT00228579: Assessment of changes in abdominal fat in obese female patients

These trials are not compatible with the patient's profile for the following reasons:
- The patient does not have sepsis (Trial 1)
- The patient is not a healthy volunteer without any medical conditions (Trial 2)
- The patient is male and does not have obesity as a listed condition (Trial 3)

Therefore, none of the trials reach the minimum compatibility score of 70, resulting in an empty array as the output.
2024-08-06 23:19:40,796 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:19:40,797 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:19:42,036 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:23:04,694 - app - INFO - Initializing Flask app...
2024-08-06 23:23:04,695 - app - INFO - Configuring app...
2024-08-06 23:23:04,695 - app - INFO - Setting up CORS...
2024-08-06 23:23:04,695 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:23:04,873 - app - INFO - Initializing JWT manager...
2024-08-06 23:23:04,874 - app - INFO - Setting up rate limiting...
2024-08-06 23:23:04,875 - app - INFO - Setting up database...
2024-08-06 23:23:04,875 - app - INFO - Starting database setup...
2024-08-06 23:23:05,435 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:23:05,435 - app - INFO - Database setup completed successfully
2024-08-06 23:23:05,435 - app - INFO - Registering error handler...
2024-08-06 23:23:05,436 - app - INFO - Initializing CLI commands...
2024-08-06 23:23:05,436 - app - INFO - Registering routes...
2024-08-06 23:23:05,442 - app - INFO - Initializing services...
2024-08-06 23:23:05,451 - app - INFO - Initializing email service...
2024-08-06 23:23:05,452 - app - INFO - Setting up scheduler...
2024-08-06 23:23:05,454 - app - INFO - Initializing scheduler...
2024-08-06 23:23:05,455 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:23:05,455 - app - INFO - Application initialized successfully
2024-08-06 23:23:06,919 - app - INFO - Initializing Flask app...
2024-08-06 23:23:06,920 - app - INFO - Configuring app...
2024-08-06 23:23:06,921 - app - INFO - Setting up CORS...
2024-08-06 23:23:06,921 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:23:07,164 - app - INFO - Initializing JWT manager...
2024-08-06 23:23:07,165 - app - INFO - Setting up rate limiting...
2024-08-06 23:23:07,170 - app - INFO - Setting up database...
2024-08-06 23:23:07,171 - app - INFO - Starting database setup...
2024-08-06 23:23:07,809 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:23:07,810 - app - INFO - Database setup completed successfully
2024-08-06 23:23:07,810 - app - INFO - Registering error handler...
2024-08-06 23:23:07,810 - app - INFO - Initializing CLI commands...
2024-08-06 23:23:07,811 - app - INFO - Registering routes...
2024-08-06 23:23:07,816 - app - INFO - Initializing services...
2024-08-06 23:23:07,825 - app - INFO - Initializing email service...
2024-08-06 23:23:07,826 - app - INFO - Setting up scheduler...
2024-08-06 23:23:07,829 - app - INFO - Initializing scheduler...
2024-08-06 23:23:07,829 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:23:07,829 - app - INFO - Application initialized successfully
2024-08-06 23:23:18,542 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:23:19,062 - app.database - INFO - Database connection established successfully
2024-08-06 23:23:19,332 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:23:19,332 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:23:20,254 - app.database - INFO - Database connection established successfully
2024-08-06 23:23:20,293 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:23:20,299 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:23:20,818 - app.database - INFO - Database connection established successfully
2024-08-06 23:23:20,857 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:23:20,862 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:23:20,864 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:23:21,380 - app.database - INFO - Database connection established successfully
2024-08-06 23:23:21,426 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:23:21,434 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:23:21,964 - app.database - INFO - Database connection established successfully
2024-08-06 23:23:22,007 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:23:22,422 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:23:22,967 - app.database - INFO - Database connection established successfully
2024-08-06 23:23:23,003 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:23:23,011 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:23:23,551 - app.database - INFO - Database connection established successfully
2024-08-06 23:23:23,589 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:23:23,806 - app.utils.error_handlers - ERROR - General error: 'TrialMatchingService' object has no attribute 'match_patient_to_trials'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 67, in start_matching_process
    matches = await trial_matching_service.match_patient_to_trials(current_user)
AttributeError: 'TrialMatchingService' object has no attribute 'match_patient_to_trials'

2024-08-06 23:25:32,501 - app - INFO - Initializing Flask app...
2024-08-06 23:25:32,502 - app - INFO - Configuring app...
2024-08-06 23:25:32,503 - app - INFO - Setting up CORS...
2024-08-06 23:25:32,503 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:25:32,671 - app - INFO - Initializing JWT manager...
2024-08-06 23:25:32,672 - app - INFO - Setting up rate limiting...
2024-08-06 23:25:32,672 - app - INFO - Setting up database...
2024-08-06 23:25:32,673 - app - INFO - Starting database setup...
2024-08-06 23:25:33,273 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:25:33,273 - app - INFO - Database setup completed successfully
2024-08-06 23:25:33,274 - app - INFO - Registering error handler...
2024-08-06 23:25:33,275 - app - INFO - Initializing CLI commands...
2024-08-06 23:25:33,275 - app - INFO - Registering routes...
2024-08-06 23:25:33,282 - app - INFO - Initializing services...
2024-08-06 23:25:33,289 - app - INFO - Initializing email service...
2024-08-06 23:25:33,289 - app - INFO - Setting up scheduler...
2024-08-06 23:25:33,292 - app - INFO - Initializing scheduler...
2024-08-06 23:25:33,293 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:25:33,293 - app - INFO - Application initialized successfully
2024-08-06 23:26:00,916 - app - INFO - Initializing Flask app...
2024-08-06 23:26:00,917 - app - INFO - Configuring app...
2024-08-06 23:26:00,917 - app - INFO - Setting up CORS...
2024-08-06 23:26:00,918 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:26:01,085 - app - INFO - Initializing JWT manager...
2024-08-06 23:26:01,086 - app - INFO - Setting up rate limiting...
2024-08-06 23:26:01,086 - app - INFO - Setting up database...
2024-08-06 23:26:01,087 - app - INFO - Starting database setup...
2024-08-06 23:26:02,041 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:26:02,042 - app - INFO - Database setup completed successfully
2024-08-06 23:26:02,043 - app - INFO - Registering error handler...
2024-08-06 23:26:02,043 - app - INFO - Initializing CLI commands...
2024-08-06 23:26:02,043 - app - INFO - Registering routes...
2024-08-06 23:26:02,048 - app - INFO - Initializing services...
2024-08-06 23:26:02,059 - app - INFO - Initializing email service...
2024-08-06 23:26:02,059 - app - INFO - Setting up scheduler...
2024-08-06 23:26:02,062 - app - INFO - Initializing scheduler...
2024-08-06 23:26:02,062 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:26:02,062 - app - INFO - Application initialized successfully
2024-08-06 23:26:03,634 - app - INFO - Initializing Flask app...
2024-08-06 23:26:03,636 - app - INFO - Configuring app...
2024-08-06 23:26:03,636 - app - INFO - Setting up CORS...
2024-08-06 23:26:03,636 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:26:03,821 - app - INFO - Initializing JWT manager...
2024-08-06 23:26:03,822 - app - INFO - Setting up rate limiting...
2024-08-06 23:26:03,823 - app - INFO - Setting up database...
2024-08-06 23:26:03,823 - app - INFO - Starting database setup...
2024-08-06 23:26:04,353 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:26:04,354 - app - INFO - Database setup completed successfully
2024-08-06 23:26:04,354 - app - INFO - Registering error handler...
2024-08-06 23:26:04,354 - app - INFO - Initializing CLI commands...
2024-08-06 23:26:04,354 - app - INFO - Registering routes...
2024-08-06 23:26:04,360 - app - INFO - Initializing services...
2024-08-06 23:26:04,369 - app - INFO - Initializing email service...
2024-08-06 23:26:04,369 - app - INFO - Setting up scheduler...
2024-08-06 23:26:04,371 - app - INFO - Initializing scheduler...
2024-08-06 23:26:04,373 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:26:04,373 - app - INFO - Application initialized successfully
2024-08-06 23:26:11,954 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:26:12,422 - app.database - INFO - Database connection established successfully
2024-08-06 23:26:12,675 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:26:12,675 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:26:13,193 - app.database - INFO - Database connection established successfully
2024-08-06 23:26:13,234 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:26:13,243 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:26:13,709 - app.database - INFO - Database connection established successfully
2024-08-06 23:26:13,747 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:26:13,755 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:26:13,755 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:26:14,344 - app.database - INFO - Database connection established successfully
2024-08-06 23:26:14,379 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:26:14,385 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:26:14,861 - app.database - INFO - Database connection established successfully
2024-08-06 23:26:14,906 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:26:14,931 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:26:15,416 - app.database - INFO - Database connection established successfully
2024-08-06 23:26:15,457 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:26:15,464 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:26:15,999 - app.database - INFO - Database connection established successfully
2024-08-06 23:26:16,038 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:26:16,258 - app.utils.error_handlers - ERROR - General error: 'TrialMatchingService' object has no attribute 'stop_matching'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 67, in start_matching_process
    matches = await trial_matching_service.match_patient_to_trials(current_user)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 48, in match_patient_to_trials
    self.stop_matching[user_id] = False
AttributeError: 'TrialMatchingService' object has no attribute 'stop_matching'

2024-08-06 23:27:48,816 - app - INFO - Initializing Flask app...
2024-08-06 23:27:48,817 - app - INFO - Configuring app...
2024-08-06 23:27:48,818 - app - INFO - Setting up CORS...
2024-08-06 23:27:48,818 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:27:48,982 - app - INFO - Initializing JWT manager...
2024-08-06 23:27:48,983 - app - INFO - Setting up rate limiting...
2024-08-06 23:27:48,983 - app - INFO - Setting up database...
2024-08-06 23:27:48,984 - app - INFO - Starting database setup...
2024-08-06 23:27:49,639 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:27:49,639 - app - INFO - Database setup completed successfully
2024-08-06 23:27:49,640 - app - INFO - Registering error handler...
2024-08-06 23:27:49,640 - app - INFO - Initializing CLI commands...
2024-08-06 23:27:49,641 - app - INFO - Registering routes...
2024-08-06 23:27:49,647 - app - INFO - Initializing services...
2024-08-06 23:27:49,656 - app - INFO - Initializing email service...
2024-08-06 23:27:49,656 - app - INFO - Setting up scheduler...
2024-08-06 23:27:49,661 - app - INFO - Initializing scheduler...
2024-08-06 23:27:49,661 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:27:49,661 - app - INFO - Application initialized successfully
2024-08-06 23:28:10,647 - app - INFO - Initializing Flask app...
2024-08-06 23:28:10,648 - app - INFO - Configuring app...
2024-08-06 23:28:10,649 - app - INFO - Setting up CORS...
2024-08-06 23:28:10,649 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:28:10,824 - app - INFO - Initializing JWT manager...
2024-08-06 23:28:10,824 - app - INFO - Setting up rate limiting...
2024-08-06 23:28:10,824 - app - INFO - Setting up database...
2024-08-06 23:28:10,825 - app - INFO - Starting database setup...
2024-08-06 23:28:11,331 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:28:11,331 - app - INFO - Database setup completed successfully
2024-08-06 23:28:11,331 - app - INFO - Registering error handler...
2024-08-06 23:28:11,331 - app - INFO - Initializing CLI commands...
2024-08-06 23:28:11,332 - app - INFO - Registering routes...
2024-08-06 23:28:11,337 - app - INFO - Initializing services...
2024-08-06 23:28:11,346 - app - INFO - Initializing email service...
2024-08-06 23:28:11,346 - app - INFO - Setting up scheduler...
2024-08-06 23:28:11,348 - app - INFO - Initializing scheduler...
2024-08-06 23:28:11,349 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:28:11,349 - app - INFO - Application initialized successfully
2024-08-06 23:28:12,722 - app - INFO - Initializing Flask app...
2024-08-06 23:28:12,724 - app - INFO - Configuring app...
2024-08-06 23:28:12,724 - app - INFO - Setting up CORS...
2024-08-06 23:28:12,724 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:28:12,948 - app - INFO - Initializing JWT manager...
2024-08-06 23:28:12,948 - app - INFO - Setting up rate limiting...
2024-08-06 23:28:12,949 - app - INFO - Setting up database...
2024-08-06 23:28:12,949 - app - INFO - Starting database setup...
2024-08-06 23:28:13,452 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:28:13,452 - app - INFO - Database setup completed successfully
2024-08-06 23:28:13,453 - app - INFO - Registering error handler...
2024-08-06 23:28:13,453 - app - INFO - Initializing CLI commands...
2024-08-06 23:28:13,453 - app - INFO - Registering routes...
2024-08-06 23:28:13,460 - app - INFO - Initializing services...
2024-08-06 23:28:13,468 - app - INFO - Initializing email service...
2024-08-06 23:28:13,469 - app - INFO - Setting up scheduler...
2024-08-06 23:28:13,472 - app - INFO - Initializing scheduler...
2024-08-06 23:28:13,473 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:28:13,473 - app - INFO - Application initialized successfully
2024-08-06 23:28:22,290 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:28:22,783 - app.database - INFO - Database connection established successfully
2024-08-06 23:28:23,070 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:28:23,071 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:28:23,550 - app.database - INFO - Database connection established successfully
2024-08-06 23:28:23,587 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:28:23,592 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:28:24,154 - app.database - INFO - Database connection established successfully
2024-08-06 23:28:24,192 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:28:24,198 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:28:24,198 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:28:24,703 - app.database - INFO - Database connection established successfully
2024-08-06 23:28:24,757 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:28:24,761 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:28:25,252 - app.database - INFO - Database connection established successfully
2024-08-06 23:28:25,289 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:28:25,494 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:28:25,962 - app.database - INFO - Database connection established successfully
2024-08-06 23:28:26,000 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:28:26,007 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:28:26,512 - app.database - INFO - Database connection established successfully
2024-08-06 23:28:26,555 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:28:26,725 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:28:27,218 - app.database - INFO - Database connection established successfully
2024-08-06 23:28:27,422 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:28:33,102 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n4. NCT01511679: While this trial is about alcohol abuse in adolescents, the patient is 31 years old (born in 1992) and doesn't have a reported alcohol abuse condition.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided trials are related to these conditions or medications.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 23:28:33,102 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n4. NCT01511679: While this trial is about alcohol abuse in adolescents, the patient is 31 years old (born in 1992) and doesn't have a reported alcohol abuse condition.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided trials are related to these conditions or medications.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-06 23:28:33,103 - app.services.anthropic_service - INFO - Parsing response: After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.
2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions the patient has.
3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.
4. NCT01511679: While this trial is about alcohol abuse in adolescents, the patient is 31 years old (born in 1992) and doesn't have a reported alcohol abuse condition.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided trials are related to these conditions or medications.

Therefore, the output in the requested JSON format would be an empty array:

[]
2024-08-06 23:28:33,103 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:28:33,104 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:28:34,281 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:28:39,511 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align closely with the focus of the given clinical trial. Here's why:\n\n1. The patient's primary medical conditions are depression and anxiety, which are not related to the trial's focus on sarcopenia, sarcopenic obesity, and incisional hernia.\n\n2. The patient is relatively young (born in 1992, making him about 31 years old), while the trial seems to be more focused on older populations where sarcopenia is more prevalent.\n\n3. There's no mention of the patient having any abdominal surgeries or hernias, which are key elements of the trial.\n\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.\n\nGiven these factors, the compatibility score would be well below 70. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:28:39,511 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align closely with the focus of the given clinical trial. Here's why:\n\n1. The patient's primary medical conditions are depression and anxiety, which are not related to the trial's focus on sarcopenia, sarcopenic obesity, and incisional hernia.\n\n2. The patient is relatively young (born in 1992, making him about 31 years old), while the trial seems to be more focused on older populations where sarcopenia is more prevalent.\n\n3. There's no mention of the patient having any abdominal surgeries or hernias, which are key elements of the trial.\n\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.\n\nGiven these factors, the compatibility score would be well below 70. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:28:39,512 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align closely with the focus of the given clinical trial. Here's why:

1. The patient's primary medical conditions are depression and anxiety, which are not related to the trial's focus on sarcopenia, sarcopenic obesity, and incisional hernia.

2. The patient is relatively young (born in 1992, making him about 31 years old), while the trial seems to be more focused on older populations [SQL REDACTED] sarcopenia is more prevalent.

3. There's no mention of the patient having any abdominal surgeries or hernias, which are key elements of the trial.

4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.

Given these factors, the compatibility score would be well below 70. Therefore, the output is an empty array:

[]
2024-08-06 23:28:39,512 - app.services.anthropic_service - ERROR - Error parsing matching response: Expecting value: line 1 column 2 (char 1)
2024-08-06 23:28:39,513 - app.services.anthropic_service - ERROR - Response content: Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align closely with the focus of the given clinical trial. Here's why:

1. The patient's primary medical conditions are depression and anxiety, which are not related to the trial's focus on sarcopenia, sarcopenic obesity, and incisional hernia.

2. The patient is relatively young (born in 1992, making him about 31 years old), while the trial seems to be more focused on older populations [SQL REDACTED] sarcopenia is more prevalent.

3. There's no mention of the patient having any abdominal surgeries or hernias, which are key elements of the trial.

4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.

Given these factors, the compatibility score would be well below 70. Therefore, the output is an empty array:

[]
2024-08-06 23:28:39,513 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:28:40,678 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:28:44,908 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on heart disease, diabetes prevention, PTSD in military veterans, and cerebral palsy in children. These conditions and demographics do not align well with Ethan's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 23:28:44,908 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on heart disease, diabetes prevention, PTSD in military veterans, and cerebral palsy in children. These conditions and demographics do not align well with Ethan's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-06 23:28:44,908 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I did not find any trials that match with a compatibility score of 70 or higher. Therefore, the result is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on heart disease, diabetes prevention, PTSD in military veterans, and cerebral palsy in children. These conditions and demographics do not align well with Ethan's profile, resulting in low compatibility scores (below 70) for all trials.
2024-08-06 23:28:44,909 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:28:44,909 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:28:46,080 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:28:48,352 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align with the focus of the provided clinical trials, which are about type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:28:48,353 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align with the focus of the provided clinical trials, which are about type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:28:48,353 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align with the focus of the provided clinical trials, which are about type 2 diabetes and non-small cell lung cancer.

Therefore, the output is an empty array:

[]
2024-08-06 23:28:48,353 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:28:48,354 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:28:49,523 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:28:53,831 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 23:28:53,832 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-06 23:28:53,832 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.
2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.
3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a score of 70 or higher.
2024-08-06 23:28:53,832 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:28:53,833 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:28:55,006 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:32:46,818 - app - INFO - Initializing Flask app...
2024-08-06 23:32:46,819 - app - INFO - Configuring app...
2024-08-06 23:32:46,820 - app - INFO - Setting up CORS...
2024-08-06 23:32:46,820 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:32:46,998 - app - INFO - Initializing JWT manager...
2024-08-06 23:32:46,998 - app - INFO - Setting up rate limiting...
2024-08-06 23:32:46,999 - app - INFO - Setting up database...
2024-08-06 23:32:46,999 - app - INFO - Starting database setup...
2024-08-06 23:32:47,556 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:32:47,558 - app - INFO - Database setup completed successfully
2024-08-06 23:32:47,558 - app - INFO - Registering error handler...
2024-08-06 23:32:47,558 - app - INFO - Initializing CLI commands...
2024-08-06 23:32:47,558 - app - INFO - Registering routes...
2024-08-06 23:32:47,564 - app - INFO - Initializing services...
2024-08-06 23:32:47,574 - app - INFO - Initializing email service...
2024-08-06 23:32:47,574 - app - INFO - Setting up scheduler...
2024-08-06 23:32:47,578 - app - INFO - Initializing scheduler...
2024-08-06 23:32:47,578 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:32:47,578 - app - INFO - Application initialized successfully
2024-08-06 23:32:49,145 - app - INFO - Initializing Flask app...
2024-08-06 23:32:49,146 - app - INFO - Configuring app...
2024-08-06 23:32:49,146 - app - INFO - Setting up CORS...
2024-08-06 23:32:49,147 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:32:49,383 - app - INFO - Initializing JWT manager...
2024-08-06 23:32:49,383 - app - INFO - Setting up rate limiting...
2024-08-06 23:32:49,384 - app - INFO - Setting up database...
2024-08-06 23:32:49,385 - app - INFO - Starting database setup...
2024-08-06 23:32:50,029 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:32:50,029 - app - INFO - Database setup completed successfully
2024-08-06 23:32:50,029 - app - INFO - Registering error handler...
2024-08-06 23:32:50,029 - app - INFO - Initializing CLI commands...
2024-08-06 23:32:50,030 - app - INFO - Registering routes...
2024-08-06 23:32:50,036 - app - INFO - Initializing services...
2024-08-06 23:32:50,045 - app - INFO - Initializing email service...
2024-08-06 23:32:50,045 - app - INFO - Setting up scheduler...
2024-08-06 23:32:50,050 - app - INFO - Initializing scheduler...
2024-08-06 23:32:50,050 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:32:50,051 - app - INFO - Application initialized successfully
2024-08-06 23:32:59,925 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:33:00,583 - app.database - INFO - Database connection established successfully
2024-08-06 23:33:00,851 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:33:00,852 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:33:01,509 - app.database - INFO - Database connection established successfully
2024-08-06 23:33:01,556 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:33:01,563 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:33:02,151 - app.database - INFO - Database connection established successfully
2024-08-06 23:33:02,197 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:33:02,202 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:33:02,202 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:33:02,752 - app.database - INFO - Database connection established successfully
2024-08-06 23:33:02,801 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:33:02,808 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:33:03,467 - app.database - INFO - Database connection established successfully
2024-08-06 23:33:03,518 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:33:47,366 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:33:48,225 - app.database - INFO - Database connection established successfully
2024-08-06 23:33:48,264 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:33:48,270 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:33:48,879 - app.database - INFO - Database connection established successfully
2024-08-06 23:33:48,918 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:34:00,594 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:34:01,123 - app.database - INFO - Database connection established successfully
2024-08-06 23:34:01,357 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:34:01,358 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:34:01,864 - app.database - INFO - Database connection established successfully
2024-08-06 23:34:01,902 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:34:01,909 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:34:02,430 - app.database - INFO - Database connection established successfully
2024-08-06 23:34:02,468 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:34:02,474 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:34:02,475 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:34:02,990 - app.database - INFO - Database connection established successfully
2024-08-06 23:34:03,031 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:34:03,038 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:34:03,532 - app.database - INFO - Database connection established successfully
2024-08-06 23:34:03,578 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:34:03,769 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:34:04,282 - app.database - INFO - Database connection established successfully
2024-08-06 23:34:04,327 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:34:04,333 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:34:04,804 - app.database - INFO - Database connection established successfully
2024-08-06 23:34:04,840 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:34:05,110 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:34:05,609 - app.database - INFO - Database connection established successfully
2024-08-06 23:34:05,827 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:34:11,951 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The provided clinical trials are focused on:\n   - Chronic Myelogenous Leukemia (NCT00072579)\n   - Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)\n   - Smoking and exposure to smoke constituents (NCT00812279)\n   - Adolescent alcohol use and brain development (NCT01511679)\n\nNone of these trials are related to the patient's conditions (depression and anxiety) or age group. The patient does not have any of the conditions being studied in these trials, and the age range for the adolescent study (12-21 years) does not include the patient's age (31 years).\n\nTherefore, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.", type='text')]
2024-08-06 23:34:11,952 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The provided clinical trials are focused on:\n   - Chronic Myelogenous Leukemia (NCT00072579)\n   - Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)\n   - Smoking and exposure to smoke constituents (NCT00812279)\n   - Adolescent alcohol use and brain development (NCT01511679)\n\nNone of these trials are related to the patient's conditions (depression and anxiety) or age group. The patient does not have any of the conditions being studied in these trials, and the age range for the adolescent study (12-21 years) does not include the patient's age (31 years).\n\nTherefore, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.", type='text')]
2024-08-06 23:34:11,952 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. The provided clinical trials are focused on:
   - Chronic Myelogenous Leukemia (NCT00072579)
   - Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)
   - Smoking and exposure to smoke constituents (NCT00812279)
   - Adolescent alcohol use and brain development (NCT01511679)

None of these trials are related to the patient's conditions (depression and anxiety) or age group. The patient does not have any of the conditions being studied in these trials, and the age range for the adolescent study (12-21 years) does not include the patient's age (31 years).

Therefore, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.
2024-08-06 23:34:11,953 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:34:11,953 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:34:13,125 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:34:18,276 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which includes depression, anxiety, and medication for these conditions, does not align well with the provided clinical trial, which focuses on sarcopenia, obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe main reasons for the lack of compatibility are:\n\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31 years old) does not align with the typical demographic for sarcopenia studies, which often focus on older adults.\n3. There's no indication in the patient profile of any abdominal surgery history or hernia issues, which are key aspects of the clinical trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]
2024-08-06 23:34:18,277 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which includes depression, anxiety, and medication for these conditions, does not align well with the provided clinical trial, which focuses on sarcopenia, obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe main reasons for the lack of compatibility are:\n\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31 years old) does not align with the typical demographic for sarcopenia studies, which often focus on older adults.\n3. There's no indication in the patient profile of any abdominal surgery history or hernia issues, which are key aspects of the clinical trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]
2024-08-06 23:34:18,278 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which includes depression, anxiety, and medication for these conditions, does not align well with the provided clinical trial, which focuses on sarcopenia, obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The main reasons for the lack of compatibility are:

1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (31 years old) does not align with the typical demographic for sarcopenia studies, which often focus on older adults.
3. There's no indication in the patient profile of any abdominal surgery history or hernia issues, which are key aspects of the clinical trial.
4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.
2024-08-06 23:34:18,278 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:34:18,279 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:34:19,475 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:34:28,492 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors in older adults (65-84 years old). The patient is only 31 years old and doesn't have any mentioned cardiovascular conditions.\n\n2. NCT03530579 (Diabetes Prevention Intervention): This trial is specific to Korean and South Asian Americans for diabetes prevention. The patient's ethnicity is not specified, and they don't have any mentioned diabetes risk factors.\n\n3. NCT05900479 (Service Dogs for Veterans with PTSD): This study is for military veterans with PTSD. The patient is not mentioned to be a veteran and does not have PTSD listed as a medical condition.\n\n4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This trial is for children aged 7-11 with cerebral palsy. The patient is an adult and doesn't have cerebral palsy.\n\nNone of these trials align closely with the patient's profile, which includes depression and anxiety as medical conditions and Escitalopram as medication. The patient's age (31 years old) and specific conditions do not match the focus of any of the provided trials.\n\nTherefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a compatibility score of 70 or higher.", type='text')]
2024-08-06 23:34:28,493 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors in older adults (65-84 years old). The patient is only 31 years old and doesn't have any mentioned cardiovascular conditions.\n\n2. NCT03530579 (Diabetes Prevention Intervention): This trial is specific to Korean and South Asian Americans for diabetes prevention. The patient's ethnicity is not specified, and they don't have any mentioned diabetes risk factors.\n\n3. NCT05900479 (Service Dogs for Veterans with PTSD): This study is for military veterans with PTSD. The patient is not mentioned to be a veteran and does not have PTSD listed as a medical condition.\n\n4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This trial is for children aged 7-11 with cerebral palsy. The patient is an adult and doesn't have cerebral palsy.\n\nNone of these trials align closely with the patient's profile, which includes depression and anxiety as medical conditions and Escitalopram as medication. The patient's age (31 years old) and specific conditions do not match the focus of any of the provided trials.\n\nTherefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a compatibility score of 70 or higher.", type='text')]
2024-08-06 23:34:28,494 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches with a compatibility score of 70 or higher. Here's why:

1. NCT00626379 (Chicago Healthy Aging Study): This study focuses on heart disease risk factors in older adults (65-84 years old). The patient is only 31 years old and doesn't have any mentioned cardiovascular conditions.

2. NCT03530579 (Diabetes Prevention Intervention): This trial is specific to Korean and South Asian Americans for diabetes prevention. The patient's ethnicity is not specified, and they don't have any mentioned diabetes risk factors.

3. NCT05900479 (Service Dogs for Veterans with PTSD): This study is for military veterans with PTSD. The patient is not mentioned to be a veteran and does not have PTSD listed as a medical condition.

4. NCT04679779 (Virtual Reality for Children with Hemiparesis): This trial is for children aged 7-11 with cerebral palsy. The patient is an adult and doesn't have cerebral palsy.

None of these trials align closely with the patient's profile, which includes depression and anxiety as medical conditions and Escitalopram as medication. The patient's age (31 years old) and specific conditions do not match the focus of any of the provided trials.

Therefore, the output in the requested JSON format is:

[]

This empty array indicates that no trials match with a compatibility score of 70 or higher.
2024-08-06 23:34:28,494 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:34:28,495 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:34:29,660 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:34:32,362 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:34:32,363 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-06 23:34:32,364 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and current medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.

Therefore, the output is an empty array:

[]
2024-08-06 23:34:32,364 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:34:32,365 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:34:33,531 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:52:57,601 - app - INFO - Initializing Flask app...
2024-08-06 23:52:57,602 - app - INFO - Configuring app...
2024-08-06 23:52:57,602 - app - INFO - Setting up CORS...
2024-08-06 23:52:57,602 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:52:57,789 - app - INFO - Initializing JWT manager...
2024-08-06 23:52:57,790 - app - INFO - Setting up rate limiting...
2024-08-06 23:52:57,790 - app - INFO - Setting up database...
2024-08-06 23:52:57,791 - app - INFO - Starting database setup...
2024-08-06 23:52:58,539 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:52:58,540 - app - INFO - Database setup completed successfully
2024-08-06 23:52:58,540 - app - INFO - Registering error handler...
2024-08-06 23:52:58,540 - app - INFO - Initializing CLI commands...
2024-08-06 23:52:58,540 - app - INFO - Registering routes...
2024-08-06 23:52:58,546 - app - INFO - Initializing services...
2024-08-06 23:52:58,554 - app - INFO - Initializing email service...
2024-08-06 23:52:58,554 - app - INFO - Setting up scheduler...
2024-08-06 23:52:58,557 - app - INFO - Initializing scheduler...
2024-08-06 23:52:58,558 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:52:58,558 - app - INFO - Application initialized successfully
2024-08-06 23:53:00,623 - app - INFO - Initializing Flask app...
2024-08-06 23:53:00,625 - app - INFO - Configuring app...
2024-08-06 23:53:00,625 - app - INFO - Setting up CORS...
2024-08-06 23:53:00,626 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:53:00,885 - app - INFO - Initializing JWT manager...
2024-08-06 23:53:00,885 - app - INFO - Setting up rate limiting...
2024-08-06 23:53:00,886 - app - INFO - Setting up database...
2024-08-06 23:53:00,887 - app - INFO - Starting database setup...
2024-08-06 23:53:01,664 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:53:01,664 - app - INFO - Database setup completed successfully
2024-08-06 23:53:01,664 - app - INFO - Registering error handler...
2024-08-06 23:53:01,665 - app - INFO - Initializing CLI commands...
2024-08-06 23:53:01,665 - app - INFO - Registering routes...
2024-08-06 23:53:01,672 - app - INFO - Initializing services...
2024-08-06 23:53:01,684 - app - INFO - Initializing email service...
2024-08-06 23:53:01,684 - app - INFO - Setting up scheduler...
2024-08-06 23:53:01,687 - app - INFO - Initializing scheduler...
2024-08-06 23:53:01,688 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:53:01,689 - app - INFO - Application initialized successfully
2024-08-06 23:53:14,700 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:53:15,624 - app.database - INFO - Database connection established successfully
2024-08-06 23:53:15,838 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:53:15,838 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:53:16,469 - app.database - INFO - Database connection established successfully
2024-08-06 23:53:16,549 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:53:16,555 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:53:17,389 - app.database - INFO - Database connection established successfully
2024-08-06 23:53:17,448 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:53:17,454 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:53:17,454 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:53:18,202 - app.database - INFO - Database connection established successfully
2024-08-06 23:53:18,264 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:53:18,269 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:53:18,973 - app.database - INFO - Database connection established successfully
2024-08-06 23:53:19,038 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:53:19,048 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:53:20,122 - app.database - INFO - Database connection established successfully
2024-08-06 23:53:20,221 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:53:20,229 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:53:21,103 - app.database - INFO - Database connection established successfully
2024-08-06 23:53:21,143 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:53:21,153 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:53:21,907 - app.database - INFO - Database connection established successfully
2024-08-06 23:53:22,171 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:53:28,067 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions listed for the patient.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: This trial is for alcohol abuse in adolescents, which doesn't match the patient's profile (he's 31 years old and has no mentioned alcohol issues).\n\nThe patient's profile indicates depression and anxiety, which are not the focus of any of the provided clinical trials. Additionally, the patient's age (31 years old) and specific medical conditions do not align with the eligibility criteria of the given trials.", type='text')]
2024-08-06 23:53:28,067 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions listed for the patient.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: This trial is for alcohol abuse in adolescents, which doesn't match the patient's profile (he's 31 years old and has no mentioned alcohol issues).\n\nThe patient's profile indicates depression and anxiety, which are not the focus of any of the provided clinical trials. Additionally, the patient's age (31 years old) and specific medical conditions do not align with the eligibility criteria of the given trials.", type='text')]
2024-08-06 23:53:28,067 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the clinical trial data provided, I have determined that none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia, which are not conditions listed for the patient.

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: This trial is for alcohol abuse in adolescents, which doesn't match the patient's profile (he's 31 years old and has no mentioned alcohol issues).

The patient's profile indicates depression and anxiety, which are not the focus of any of the provided clinical trials. Additionally, the patient's age (31 years old) and specific medical conditions do not align with the eligibility criteria of the given trials.
2024-08-06 23:53:28,067 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:53:28,069 - app.services.trial_matching_service - ERROR - Error in match_patient_to_trials for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 74, in matching_task
    await self.socketio.emit('matching_progress', {'progress': progress}, room=user_id)
TypeError: object NoneType can't be used in 'await' expression
2024-08-06 23:53:28,069 - app.utils.error_handlers - ERROR - General error: object NoneType can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 74, in matching_task
    await self.socketio.emit('matching_progress', {'progress': progress}, room=user_id)
TypeError: object NoneType can't be used in 'await' expression

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 87, in matching_task
    await self.socketio.emit('matching_error', {'message': str(e)}, room=user_id)
TypeError: object NoneType can't be used in 'await' expression

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 67, in start_matching_process
    matches = await trial_matching_service.match_patient_to_trials(current_user)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 99, in match_patient_to_trials
    await self.matching_tasks[user_id]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 93, in matching_task
    await self.socketio.emit('matching_complete', {'matches': matches}, room=user_id)
TypeError: object NoneType can't be used in 'await' expression

2024-08-06 23:53:28,083 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-06 23:53:29,104 - app.routes.trial_matching - ERROR - Error stopping matching process for user 66af0d2d118d8e248b49a856: 'TrialMatchingService' object has no attribute 'is_matching'
2024-08-06 23:54:48,778 - app - INFO - Initializing Flask app...
2024-08-06 23:54:48,779 - app - INFO - Configuring app...
2024-08-06 23:54:48,779 - app - INFO - Setting up CORS...
2024-08-06 23:54:48,780 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:54:48,943 - app - INFO - Initializing JWT manager...
2024-08-06 23:54:48,943 - app - INFO - Setting up rate limiting...
2024-08-06 23:54:48,944 - app - INFO - Setting up database...
2024-08-06 23:54:48,945 - app - INFO - Starting database setup...
2024-08-06 23:54:49,816 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:54:49,816 - app - INFO - Database setup completed successfully
2024-08-06 23:54:49,816 - app - INFO - Registering error handler...
2024-08-06 23:54:49,817 - app - INFO - Initializing CLI commands...
2024-08-06 23:54:49,817 - app - INFO - Registering routes...
2024-08-06 23:54:49,823 - app - INFO - Initializing services...
2024-08-06 23:54:49,832 - app - INFO - Initializing email service...
2024-08-06 23:54:49,832 - app - INFO - Setting up scheduler...
2024-08-06 23:54:49,836 - app - INFO - Initializing scheduler...
2024-08-06 23:54:49,836 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:54:49,836 - app - INFO - Application initialized successfully
2024-08-06 23:54:51,492 - app - INFO - Initializing Flask app...
2024-08-06 23:54:51,494 - app - INFO - Configuring app...
2024-08-06 23:54:51,494 - app - INFO - Setting up CORS...
2024-08-06 23:54:51,494 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-06 23:54:51,685 - app - INFO - Initializing JWT manager...
2024-08-06 23:54:51,685 - app - INFO - Setting up rate limiting...
2024-08-06 23:54:51,686 - app - INFO - Setting up database...
2024-08-06 23:54:51,686 - app - INFO - Starting database setup...
2024-08-06 23:54:52,260 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-06 23:54:52,260 - app - INFO - Database setup completed successfully
2024-08-06 23:54:52,260 - app - INFO - Registering error handler...
2024-08-06 23:54:52,261 - app - INFO - Initializing CLI commands...
2024-08-06 23:54:52,261 - app - INFO - Registering routes...
2024-08-06 23:54:52,267 - app - INFO - Initializing services...
2024-08-06 23:54:52,275 - app - INFO - Initializing email service...
2024-08-06 23:54:52,275 - app - INFO - Setting up scheduler...
2024-08-06 23:54:52,279 - app - INFO - Initializing scheduler...
2024-08-06 23:54:52,280 - app.scheduler - INFO - Scheduler initialized
2024-08-06 23:54:52,280 - app - INFO - Application initialized successfully
2024-08-06 23:55:01,180 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:55:01,825 - app.database - INFO - Database connection established successfully
2024-08-06 23:55:02,107 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:55:02,108 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:55:02,809 - app.database - INFO - Database connection established successfully
2024-08-06 23:55:02,859 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:55:02,865 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:55:03,607 - app.database - INFO - Database connection established successfully
2024-08-06 23:55:03,800 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:55:03,806 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-06 23:55:03,806 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:55:04,547 - app.database - INFO - Database connection established successfully
2024-08-06 23:55:04,609 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-06 23:55:04,614 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:55:05,405 - app.database - INFO - Database connection established successfully
2024-08-06 23:55:05,484 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:55:05,504 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:55:06,144 - app.database - INFO - Database connection established successfully
2024-08-06 23:55:06,238 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:55:06,245 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:55:07,173 - app.database - INFO - Database connection established successfully
2024-08-06 23:55:07,284 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-06 23:55:07,296 - app.database - INFO - Attempting to establish database connection...
2024-08-06 23:55:08,069 - app.database - INFO - Database connection established successfully
2024-08-06 23:55:08,410 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:55:16,441 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\n1. NCT00072579 is for chronic myelogenous leukemia, which the patient doesn't have.\n2. NCT00517179 is for erectile dysfunction and benign prostatic hyperplasia, which are not mentioned in the patient's profile.\n3. NCT00812279 is for smokers, and there's no indication that the patient smokes.\n4. NCT01511679 is for adolescents studying alcohol abuse, but the patient is 31 years old and doesn't have a mentioned alcohol problem.\n\nThe patient's primary conditions (depression and anxiety) are not addressed by any of these trials, resulting in low compatibility scores across the board.", type='text')]
2024-08-06 23:55:16,441 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\n1. NCT00072579 is for chronic myelogenous leukemia, which the patient doesn't have.\n2. NCT00517179 is for erectile dysfunction and benign prostatic hyperplasia, which are not mentioned in the patient's profile.\n3. NCT00812279 is for smokers, and there's no indication that the patient smokes.\n4. NCT01511679 is for adolescents studying alcohol abuse, but the patient is 31 years old and doesn't have a mentioned alcohol problem.\n\nThe patient's primary conditions (depression and anxiety) are not addressed by any of these trials, resulting in low compatibility scores across the board.", type='text')]
2024-08-06 23:55:16,442 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the result is an empty array:

[]

Explanation:
1. NCT00072579 is for chronic myelogenous leukemia, which the patient doesn't have.
2. NCT00517179 is for erectile dysfunction and benign prostatic hyperplasia, which are not mentioned in the patient's profile.
3. NCT00812279 is for smokers, and there's no indication that the patient smokes.
4. NCT01511679 is for adolescents studying alcohol abuse, but the patient is 31 years old and doesn't have a mentioned alcohol problem.

The patient's primary conditions (depression and anxiety) are not addressed by any of these trials, resulting in low compatibility scores across the board.
2024-08-06 23:55:16,443 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-06 23:55:16,443 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:55:17,675 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-06 23:55:23,248 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no match include:\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31) doesn't align with the trial's focus, which seems to be more oriented towards older populations where sarcopenia is more prevalent.\n3. There's no indication in the patient profile of any abdominal surgeries or hernias, which are key aspects of the clinical trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]
2024-08-06 23:55:23,249 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no match include:\n1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (31) doesn't align with the trial's focus, which seems to be more oriented towards older populations where sarcopenia is more prevalent.\n3. There's no indication in the patient profile of any abdominal surgeries or hernias, which are key aspects of the clinical trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]
2024-08-06 23:55:23,249 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The reasons for no match include:
1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (31) doesn't align with the trial's focus, which seems to be more oriented towards older populations [SQL REDACTED] sarcopenia is more prevalent.
3. There's no indication in the patient profile of any abdominal surgeries or hernias, which are key aspects of the clinical trial.
4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.
2024-08-06 23:55:23,249 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 3 column 1 (char 4)
2024-08-06 23:55:23,249 - app.services.anthropic_service - ERROR - Response content: Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The reasons for no match include:
1. The patient's medical conditions (depression and anxiety) are not related to the conditions studied in the trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (31) doesn't align with the trial's focus, which seems to be more oriented towards older populations [SQL REDACTED] sarcopenia is more prevalent.
3. There's no indication in the patient profile of any abdominal surgeries or hernias, which are key aspects of the clinical trial.
4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.
2024-08-06 23:55:23,250 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-06 23:55:24,560 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 00:06:03,740 - app - INFO - Initializing Flask app...
2024-08-07 00:06:03,741 - app - INFO - Configuring app...
2024-08-07 00:06:03,741 - app - INFO - Setting up CORS...
2024-08-07 00:06:03,741 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 00:06:03,921 - app - INFO - Initializing JWT manager...
2024-08-07 00:06:03,921 - app - INFO - Setting up rate limiting...
2024-08-07 00:06:03,922 - app - INFO - Setting up database...
2024-08-07 00:06:03,923 - app - INFO - Starting database setup...
2024-08-07 00:06:04,469 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 00:06:04,470 - app - INFO - Database setup completed successfully
2024-08-07 00:06:04,470 - app - INFO - Registering error handler...
2024-08-07 00:06:04,470 - app - INFO - Initializing CLI commands...
2024-08-07 00:06:04,470 - app - INFO - Registering routes...
2024-08-07 00:06:04,475 - app - INFO - Initializing services...
2024-08-07 00:06:04,484 - app - INFO - Initializing email service...
2024-08-07 00:06:04,485 - app - INFO - Setting up scheduler...
2024-08-07 00:06:04,487 - app - INFO - Initializing scheduler...
2024-08-07 00:06:04,488 - app.scheduler - INFO - Scheduler initialized
2024-08-07 00:06:04,488 - app - INFO - Application initialized successfully
2024-08-07 00:06:05,932 - app - INFO - Initializing Flask app...
2024-08-07 00:06:05,933 - app - INFO - Configuring app...
2024-08-07 00:06:05,934 - app - INFO - Setting up CORS...
2024-08-07 00:06:05,934 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 00:06:06,145 - app - INFO - Initializing JWT manager...
2024-08-07 00:06:06,145 - app - INFO - Setting up rate limiting...
2024-08-07 00:06:06,146 - app - INFO - Setting up database...
2024-08-07 00:06:06,147 - app - INFO - Starting database setup...
2024-08-07 00:06:06,659 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 00:06:06,659 - app - INFO - Database setup completed successfully
2024-08-07 00:06:06,660 - app - INFO - Registering error handler...
2024-08-07 00:06:06,660 - app - INFO - Initializing CLI commands...
2024-08-07 00:06:06,660 - app - INFO - Registering routes...
2024-08-07 00:06:06,666 - app - INFO - Initializing services...
2024-08-07 00:06:06,675 - app - INFO - Initializing email service...
2024-08-07 00:06:06,676 - app - INFO - Setting up scheduler...
2024-08-07 00:06:06,679 - app - INFO - Initializing scheduler...
2024-08-07 00:06:06,679 - app.scheduler - INFO - Scheduler initialized
2024-08-07 00:06:06,680 - app - INFO - Application initialized successfully
2024-08-07 00:16:56,763 - app - INFO - Initializing Flask app...
2024-08-07 00:16:56,764 - app - INFO - Configuring app...
2024-08-07 00:16:56,764 - app - INFO - Setting up CORS...
2024-08-07 00:16:56,764 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 00:16:56,941 - app - INFO - Initializing JWT manager...
2024-08-07 00:16:56,942 - app - INFO - Setting up rate limiting...
2024-08-07 00:16:56,947 - app - INFO - Setting up database...
2024-08-07 00:16:56,947 - app - INFO - Starting database setup...
2024-08-07 00:16:57,441 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 00:16:57,442 - app - INFO - Database setup completed successfully
2024-08-07 00:16:57,442 - app - INFO - Registering error handler...
2024-08-07 00:16:57,443 - app - INFO - Initializing CLI commands...
2024-08-07 00:16:57,443 - app - INFO - Registering routes...
2024-08-07 00:16:57,451 - app - INFO - Initializing services...
2024-08-07 00:16:57,460 - app - INFO - Initializing email service...
2024-08-07 00:16:57,460 - app - INFO - Setting up scheduler...
2024-08-07 00:16:57,464 - app - INFO - Initializing scheduler...
2024-08-07 00:16:57,465 - app.scheduler - INFO - Scheduler initialized
2024-08-07 00:16:57,465 - app - INFO - Application initialized successfully
2024-08-07 00:16:58,954 - app - INFO - Initializing Flask app...
2024-08-07 00:16:58,955 - app - INFO - Configuring app...
2024-08-07 00:16:58,956 - app - INFO - Setting up CORS...
2024-08-07 00:16:58,956 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 00:16:59,231 - app - INFO - Initializing JWT manager...
2024-08-07 00:16:59,231 - app - INFO - Setting up rate limiting...
2024-08-07 00:16:59,232 - app - INFO - Setting up database...
2024-08-07 00:16:59,233 - app - INFO - Starting database setup...
2024-08-07 00:16:59,716 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 00:16:59,716 - app - INFO - Database setup completed successfully
2024-08-07 00:16:59,717 - app - INFO - Registering error handler...
2024-08-07 00:16:59,717 - app - INFO - Initializing CLI commands...
2024-08-07 00:16:59,717 - app - INFO - Registering routes...
2024-08-07 00:16:59,726 - app - INFO - Initializing services...
2024-08-07 00:16:59,738 - app - INFO - Initializing email service...
2024-08-07 00:16:59,738 - app - INFO - Setting up scheduler...
2024-08-07 00:16:59,743 - app - INFO - Initializing scheduler...
2024-08-07 00:16:59,744 - app.scheduler - INFO - Scheduler initialized
2024-08-07 00:16:59,744 - app - INFO - Application initialized successfully
2024-08-07 00:17:20,637 - app.database - INFO - Attempting to establish database connection...
2024-08-07 00:17:21,449 - app.database - INFO - Database connection established successfully
2024-08-07 00:17:21,690 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 00:17:21,690 - app.database - INFO - Attempting to establish database connection...
2024-08-07 00:17:22,198 - app.database - INFO - Database connection established successfully
2024-08-07 00:17:22,238 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 00:17:22,244 - app.database - INFO - Attempting to establish database connection...
2024-08-07 00:17:22,728 - app.database - INFO - Database connection established successfully
2024-08-07 00:17:22,770 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 00:17:22,777 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 00:17:22,777 - app.database - INFO - Attempting to establish database connection...
2024-08-07 00:17:23,648 - app.database - INFO - Database connection established successfully
2024-08-07 00:17:23,683 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 00:17:23,689 - app.database - INFO - Attempting to establish database connection...
2024-08-07 00:17:24,222 - app.database - INFO - Database connection established successfully
2024-08-07 00:17:24,261 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 00:17:24,267 - app.database - INFO - Attempting to establish database connection...
2024-08-07 00:17:24,740 - app.database - INFO - Database connection established successfully
2024-08-07 00:17:24,777 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 00:17:24,784 - app.database - INFO - Attempting to establish database connection...
2024-08-07 00:17:25,336 - app.database - INFO - Database connection established successfully
2024-08-07 00:17:25,380 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 00:17:26,387 - app.database - INFO - Attempting to establish database connection...
2024-08-07 00:17:26,950 - app.database - INFO - Database connection established successfully
2024-08-07 00:17:27,146 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 00:17:34,574 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's the analysis:\n\n1. NCT00072579 (Sargramostim for Chronic Myelogenous Leukemia):\n   - The patient doesn't have leukemia, which is the primary condition for this trial.\n   - Compatibility score would be very low, well below 70.\n\n2. NCT00517179 (Vardenafil for Erectile Dysfunction and BPH):\n   - The patient doesn't have erectile dysfunction or benign prostatic hyperplasia.\n   - The patient is younger than the age range (50-80 years) specified in the inclusion criteria.\n   - Compatibility score would be very low, well below 70.\n\n3. NCT00812279 (Smoking Study):\n   - The patient's profile doesn't mention smoking status.\n   - The trial is specifically for smokers, which doesn't match the given patient profile.\n   - Compatibility score would be very low, well below 70.\n\n4. NCT01511679 (Brain-imaging and Adolescent Neuroscience Consortium):\n   - While the patient's age (31 years old) is close to the upper limit of the study's age range (12-21 years), he is still outside of it.\n   - The study focuses on alcohol abuse, which is not mentioned in the patient's profile.\n   - Compatibility score would be low, below 70.\n\nGiven that none of the trials match the patient's profile with a score of 70 or higher, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-07 00:17:34,574 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's the analysis:\n\n1. NCT00072579 (Sargramostim for Chronic Myelogenous Leukemia):\n   - The patient doesn't have leukemia, which is the primary condition for this trial.\n   - Compatibility score would be very low, well below 70.\n\n2. NCT00517179 (Vardenafil for Erectile Dysfunction and BPH):\n   - The patient doesn't have erectile dysfunction or benign prostatic hyperplasia.\n   - The patient is younger than the age range (50-80 years) specified in the inclusion criteria.\n   - Compatibility score would be very low, well below 70.\n\n3. NCT00812279 (Smoking Study):\n   - The patient's profile doesn't mention smoking status.\n   - The trial is specifically for smokers, which doesn't match the given patient profile.\n   - Compatibility score would be very low, well below 70.\n\n4. NCT01511679 (Brain-imaging and Adolescent Neuroscience Consortium):\n   - While the patient's age (31 years old) is close to the upper limit of the study's age range (12-21 years), he is still outside of it.\n   - The study focuses on alcohol abuse, which is not mentioned in the patient's profile.\n   - Compatibility score would be low, below 70.\n\nGiven that none of the trials match the patient's profile with a score of 70 or higher, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-07 00:17:34,574 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's the analysis:

1. NCT00072579 (Sargramostim for Chronic Myelogenous Leukemia):
   - The patient doesn't have leukemia, which is the primary condition for this trial.
   - Compatibility score would be very low, well below 70.

2. NCT00517179 (Vardenafil for Erectile Dysfunction and BPH):
   - The patient doesn't have erectile dysfunction or benign prostatic hyperplasia.
   - The patient is younger than the age range (50-80 years) specified in the inclusion criteria.
   - Compatibility score would be very low, well below 70.

3. NCT00812279 (Smoking Study):
   - The patient's profile doesn't mention smoking status.
   - The trial is specifically for smokers, which doesn't match the given patient profile.
   - Compatibility score would be very low, well below 70.

4. NCT01511679 (Brain-imaging and Adolescent Neuroscience Consortium):
   - While the patient's age (31 years old) is close to the upper limit of the study's age range (12-21 years), he is still outside of it.
   - The study focuses on alcohol abuse, which is not mentioned in the patient's profile.
   - Compatibility score would be low, below 70.

Given that none of the trials match the patient's profile with a score of 70 or higher, the output in the requested JSON format would be an empty array:

[]
2024-08-07 00:17:34,575 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 00:17:34,575 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 00:17:35,754 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 00:17:39,492 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the clinical trial focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe patient does not have any of the conditions mentioned in the trial (sarcopenia, obesity, or incisional hernia), and the trial's focus is not related to the patient's listed medical conditions (depression and anxiety).\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-07 00:17:39,492 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the clinical trial focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe patient does not have any of the conditions mentioned in the trial (sarcopenia, obesity, or incisional hernia), and the trial's focus is not related to the patient's listed medical conditions (depression and anxiety).\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-07 00:17:39,492 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the clinical trial focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

The patient does not have any of the conditions mentioned in the trial (sarcopenia, obesity, or incisional hernia), and the trial's focus is not related to the patient's listed medical conditions (depression and anxiety).

Therefore, the output in the requested JSON format would be an empty array:

[]
2024-08-07 00:17:39,493 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 00:17:39,493 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 00:17:40,684 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 00:17:44,284 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, which do not align with the patient's profile. Thus, there are no high-compatibility matches for this patient among the given trials.", type='text')]
2024-08-07 00:17:44,285 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, which do not align with the patient's profile. Thus, there are no high-compatibility matches for this patient among the given trials.", type='text')]
2024-08-07 00:17:44,286 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target these conditions or medications. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, which do not align with the patient's profile. Thus, there are no high-compatibility matches for this patient among the given trials.
2024-08-07 00:17:44,286 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 00:17:44,286 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 00:17:45,458 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 00:17:49,765 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications.\n\nThe first trial (NCT02244879) is for Type 2 Diabetes Mellitus, which the patient does not have. The second trial (NCT02841579) is for Non-Small Cell Lung Cancer, which is also not applicable to this patient.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]', type='text')]
2024-08-07 00:17:49,765 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications.\n\nThe first trial (NCT02244879) is for Type 2 Diabetes Mellitus, which the patient does not have. The second trial (NCT02841579) is for Non-Small Cell Lung Cancer, which is also not applicable to this patient.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]', type='text')]
2024-08-07 00:17:49,765 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications.

The first trial (NCT02244879) is for Type 2 Diabetes Mellitus, which the patient does not have. The second trial (NCT02841579) is for Non-Small Cell Lung Cancer, which is also not applicable to this patient.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-07 00:17:49,765 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 00:17:49,766 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 00:17:50,940 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 00:18:01,527 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 00:18:01,527 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 00:18:01,527 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.
2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.
3. The third trial (NCT04491279) is for stroke patients, which is not a condition the patient has.

The patient's profile indicates they have depression and anxiety, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-07 00:18:01,527 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 00:18:01,528 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 00:18:02,696 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 00:18:06,169 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the given clinical trials, which focus on metastatic breast cancer, lung transplantation, workplace safety, and choroidal thickness measurement.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 00:18:06,169 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the given clinical trials, which focus on metastatic breast cancer, lung transplantation, workplace safety, and choroidal thickness measurement.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 00:18:06,169 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the given clinical trials, which focus on metastatic breast cancer, lung transplantation, workplace safety, and choroidal thickness measurement.

Therefore, the output is an empty array:

[]
2024-08-07 00:18:06,170 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 00:18:06,170 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 00:18:07,357 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 00:18:17,610 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the specific conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe reasons for no matches include:\n\n1. The patient's medical conditions (depression and anxiety) are not directly related to the conditions targeted in the provided clinical trials, which focus on renal failure, hepatitis C, melanoma, heart failure, and left ventricular assist devices.\n\n2. The patient's age (31 years old) and overall health profile do not match the specific eligibility criteria of the provided trials, which are mostly focused on more severe medical conditions.\n\n3. The medication listed (Escitalopram) is not relevant to the treatments being studied in these trials.\n\n4. The patient does not have any of the specific conditions required for enrollment in these trials, such as chronic kidney disease, hepatitis C, melanoma, or heart failure.\n\nGiven these factors, none of the provided clinical trials are suitable matches for this patient with a compatibility score of 70 or higher.", type='text')]
2024-08-07 00:18:17,611 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the specific conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe reasons for no matches include:\n\n1. The patient's medical conditions (depression and anxiety) are not directly related to the conditions targeted in the provided clinical trials, which focus on renal failure, hepatitis C, melanoma, heart failure, and left ventricular assist devices.\n\n2. The patient's age (31 years old) and overall health profile do not match the specific eligibility criteria of the provided trials, which are mostly focused on more severe medical conditions.\n\n3. The medication listed (Escitalopram) is not relevant to the treatments being studied in these trials.\n\n4. The patient does not have any of the specific conditions required for enrollment in these trials, such as chronic kidney disease, hepatitis C, melanoma, or heart failure.\n\nGiven these factors, none of the provided clinical trials are suitable matches for this patient with a compatibility score of 70 or higher.", type='text')]
2024-08-07 00:18:17,611 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile, which includes depression and anxiety as medical conditions, does not align closely with the specific conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:

[]

The reasons for no matches include:

1. The patient's medical conditions (depression and anxiety) are not directly related to the conditions targeted in the provided clinical trials, which focus on renal failure, hepatitis C, melanoma, heart failure, and left ventricular assist devices.

2. The patient's age (31 years old) and overall health profile do not match the specific eligibility criteria of the provided trials, which are mostly focused on more severe medical conditions.

3. The medication listed (Escitalopram) is not relevant to the treatments being studied in these trials.

4. The patient does not have any of the specific conditions required for enrollment in these trials, such as chronic kidney disease, hepatitis C, melanoma, or heart failure.

Given these factors, none of the provided clinical trials are suitable matches for this patient with a compatibility score of 70 or higher.
2024-08-07 00:18:17,612 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 00:18:17,612 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 00:18:18,860 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 00:18:23,233 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's medical conditions (depression and anxiety).\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions, so they would not qualify.\n\n3. The third trial (NCT00228579) is focused on obesity in females, while the patient is male and obesity is not mentioned in their profile.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-07 00:18:23,234 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's medical conditions (depression and anxiety).\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions, so they would not qualify.\n\n3. The third trial (NCT00228579) is focused on obesity in females, while the patient is male and obesity is not mentioned in their profile.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-07 00:18:23,234 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's medical conditions (depression and anxiety).

2. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions, so they would not qualify.

3. The third trial (NCT00228579) is focused on obesity in females, while the patient is male and obesity is not mentioned in their profile.

None of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.
2024-08-07 00:18:23,234 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 00:18:23,235 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 00:18:24,400 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 00:18:27,129 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 00:18:27,129 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 00:18:27,129 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's medical conditions (depression and anxiety) and medication (Escitalopram) do not align closely with the conditions and eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:

[]
2024-08-07 00:18:27,129 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 00:18:27,130 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 00:18:28,300 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:30:11,952 - app - INFO - Initializing Flask app...
2024-08-07 10:30:11,954 - app - INFO - Configuring app...
2024-08-07 10:30:11,954 - app - INFO - Setting up CORS...
2024-08-07 10:30:11,954 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 10:30:12,295 - app - INFO - Initializing JWT manager...
2024-08-07 10:30:12,295 - app - INFO - Setting up rate limiting...
2024-08-07 10:30:12,296 - app - INFO - Setting up database...
2024-08-07 10:30:12,297 - app - INFO - Starting database setup...
2024-08-07 10:30:12,962 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 10:30:12,962 - app - INFO - Database setup completed successfully
2024-08-07 10:30:12,962 - app - INFO - Registering error handler...
2024-08-07 10:30:12,963 - app - INFO - Initializing CLI commands...
2024-08-07 10:30:12,963 - app - INFO - Registering routes...
2024-08-07 10:30:12,971 - app - INFO - Initializing services...
2024-08-07 10:30:12,985 - app - INFO - Initializing email service...
2024-08-07 10:30:12,985 - app - INFO - Setting up scheduler...
2024-08-07 10:30:12,991 - app - INFO - Initializing scheduler...
2024-08-07 10:30:12,992 - app.scheduler - INFO - Scheduler initialized
2024-08-07 10:30:12,993 - app - INFO - Application initialized successfully
2024-08-07 10:30:15,723 - app - INFO - Initializing Flask app...
2024-08-07 10:30:15,725 - app - INFO - Configuring app...
2024-08-07 10:30:15,725 - app - INFO - Setting up CORS...
2024-08-07 10:30:15,726 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 10:30:16,124 - app - INFO - Initializing JWT manager...
2024-08-07 10:30:16,124 - app - INFO - Setting up rate limiting...
2024-08-07 10:30:16,125 - app - INFO - Setting up database...
2024-08-07 10:30:16,126 - app - INFO - Starting database setup...
2024-08-07 10:30:16,714 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 10:30:16,715 - app - INFO - Database setup completed successfully
2024-08-07 10:30:16,715 - app - INFO - Registering error handler...
2024-08-07 10:30:16,715 - app - INFO - Initializing CLI commands...
2024-08-07 10:30:16,716 - app - INFO - Registering routes...
2024-08-07 10:30:16,728 - app - INFO - Initializing services...
2024-08-07 10:30:16,743 - app - INFO - Initializing email service...
2024-08-07 10:30:16,744 - app - INFO - Setting up scheduler...
2024-08-07 10:30:16,748 - app - INFO - Initializing scheduler...
2024-08-07 10:30:16,749 - app.scheduler - INFO - Scheduler initialized
2024-08-07 10:30:16,750 - app - INFO - Application initialized successfully
2024-08-07 10:30:27,112 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:30:27,618 - app.database - INFO - Database connection established successfully
2024-08-07 10:30:28,145 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:30:28,701 - app.database - INFO - Database connection established successfully
2024-08-07 10:30:28,745 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 10:30:28,767 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 10:30:28,769 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:30:29,344 - app.database - INFO - Database connection established successfully
2024-08-07 10:30:29,383 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 10:30:29,439 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:30:30,043 - app.database - INFO - Database connection established successfully
2024-08-07 10:30:30,095 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 10:30:30,108 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 10:30:30,108 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:30:30,645 - app.database - INFO - Database connection established successfully
2024-08-07 10:30:30,682 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 10:30:31,436 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:30:31,959 - app.database - INFO - Database connection established successfully
2024-08-07 10:30:31,999 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 10:30:32,018 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:30:32,625 - app.database - INFO - Database connection established successfully
2024-08-07 10:30:32,664 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 10:30:32,950 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:30:33,474 - app.database - INFO - Database connection established successfully
2024-08-07 10:30:33,690 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:30:40,305 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in any of the provided clinical trials.\n\n2. The first trial (NCT00072579) is for chronic myelogenous leukemia, which the patient does not have.\n\n3. The second trial (NCT00517179) is for erectile dysfunction and benign prostatic hyperplasia, which are not mentioned in the patient's profile.\n\n4. The third trial (NCT00812279) is related to smoking, which is not mentioned in the patient's profile.\n\n5. The fourth trial (NCT01511679) is for studying alcohol abuse in adolescents, but the patient is 31 years old and doesn't have a mentioned history of alcohol abuse.\n\nNone of these trials are sufficiently relevant to the patient's documented conditions to warrant a compatibility score of 70 or higher.", type='text')]
2024-08-07 10:30:40,306 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in any of the provided clinical trials.\n\n2. The first trial (NCT00072579) is for chronic myelogenous leukemia, which the patient does not have.\n\n3. The second trial (NCT00517179) is for erectile dysfunction and benign prostatic hyperplasia, which are not mentioned in the patient's profile.\n\n4. The third trial (NCT00812279) is related to smoking, which is not mentioned in the patient's profile.\n\n5. The fourth trial (NCT01511679) is for studying alcohol abuse in adolescents, but the patient is 31 years old and doesn't have a mentioned history of alcohol abuse.\n\nNone of these trials are sufficiently relevant to the patient's documented conditions to warrant a compatibility score of 70 or higher.", type='text')]
2024-08-07 10:30:40,307 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in any of the provided clinical trials.

2. The first trial (NCT00072579) is for chronic myelogenous leukemia, which the patient does not have.

3. The second trial (NCT00517179) is for erectile dysfunction and benign prostatic hyperplasia, which are not mentioned in the patient's profile.

4. The third trial (NCT00812279) is related to smoking, which is not mentioned in the patient's profile.

5. The fourth trial (NCT01511679) is for studying alcohol abuse in adolescents, but the patient is 31 years old and doesn't have a mentioned history of alcohol abuse.

None of these trials are sufficiently relevant to the patient's documented conditions to warrant a compatibility score of 70 or higher.
2024-08-07 10:30:40,308 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:30:40,309 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:30:41,512 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:30:45,727 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the criteria or focus of the provided clinical trial, which is about sarcopenia and sarcopenic obesity in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 10:30:45,727 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the criteria or focus of the provided clinical trial, which is about sarcopenia and sarcopenic obesity in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 10:30:45,728 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the criteria or focus of the provided clinical trial, which is about sarcopenia and sarcopenic obesity in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]
2024-08-07 10:30:45,728 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:30:45,728 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:30:46,930 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:30:53,718 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials provided have a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT00626379 (Heart Disease Risk Factors): Not relevant to the patient's conditions (depression and anxiety).\n2. NCT03530579 (Diabetes Prevention): Not relevant to the patient's conditions and focused on specific ethnic groups.\n3. NCT05900479 (PTSD in Military Veterans): Not relevant to the patient's conditions and specifically for military veterans.\n4. NCT04679779 (Virtual Reality for Cerebral Palsy): Not relevant to the patient's conditions and specifically for children with cerebral palsy.\n\nThe patient's profile (depression and anxiety) does not align closely with any of the provided clinical trials, which focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children.", type='text')]
2024-08-07 10:30:53,720 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials provided have a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT00626379 (Heart Disease Risk Factors): Not relevant to the patient's conditions (depression and anxiety).\n2. NCT03530579 (Diabetes Prevention): Not relevant to the patient's conditions and focused on specific ethnic groups.\n3. NCT05900479 (PTSD in Military Veterans): Not relevant to the patient's conditions and specifically for military veterans.\n4. NCT04679779 (Virtual Reality for Cerebral Palsy): Not relevant to the patient's conditions and specifically for children with cerebral palsy.\n\nThe patient's profile (depression and anxiety) does not align closely with any of the provided clinical trials, which focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children.", type='text')]
2024-08-07 10:30:53,720 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials provided have a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:

[]

Explanation:
1. NCT00626379 (Heart Disease Risk Factors): Not relevant to the patient's conditions (depression and anxiety).
2. NCT03530579 (Diabetes Prevention): Not relevant to the patient's conditions and focused on specific ethnic groups.
3. NCT05900479 (PTSD in Military Veterans): Not relevant to the patient's conditions and specifically for military veterans.
4. NCT04679779 (Virtual Reality for Cerebral Palsy): Not relevant to the patient's conditions and specifically for children with cerebral palsy.

The patient's profile (depression and anxiety) does not align closely with any of the provided clinical trials, which focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children.
2024-08-07 10:30:53,721 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:30:53,722 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:30:54,984 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:30:59,247 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (male, 31 years old, with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the two provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer respectively.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 10:30:59,248 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (male, 31 years old, with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the two provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer respectively.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 10:30:59,248 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (male, 31 years old, with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the two provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer respectively.

Therefore, the output is an empty array:

[]
2024-08-07 10:30:59,249 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:30:59,250 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:31:00,492 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:31:06,208 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is about systemic sclerosis and Raynaud's phenomenon, which are not conditions mentioned in the patient's profile.\n\n2. The second trial (NCT00293579) is for head and neck cancer patients, which doesn't match the patient's profile.\n\n3. The third trial (NCT04491279) is for stroke patients, which also doesn't align with the patient's conditions.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 10:31:06,209 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is about systemic sclerosis and Raynaud's phenomenon, which are not conditions mentioned in the patient's profile.\n\n2. The second trial (NCT00293579) is for head and neck cancer patients, which doesn't match the patient's profile.\n\n3. The third trial (NCT04491279) is for stroke patients, which also doesn't align with the patient's conditions.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 10:31:06,210 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is about systemic sclerosis and Raynaud's phenomenon, which are not conditions mentioned in the patient's profile.

2. The second trial (NCT00293579) is for head and neck cancer patients, which doesn't match the patient's profile.

3. The third trial (NCT04491279) is for stroke patients, which also doesn't align with the patient's conditions.

The patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-07 10:31:06,210 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:31:06,211 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:31:07,448 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:31:12,356 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by any of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe provided trials focus on:\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in workplaces\n4. Choroidal thickness measurements in relation to refractive errors\n\nNone of these trials are suitable for the patient's specific medical conditions (depression and anxiety) or demographic characteristics.", type='text')]
2024-08-07 10:31:12,357 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by any of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nThe provided trials focus on:\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in workplaces\n4. Choroidal thickness measurements in relation to refractive errors\n\nNone of these trials are suitable for the patient's specific medical conditions (depression and anxiety) or demographic characteristics.", type='text')]
2024-08-07 10:31:12,357 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by any of the provided clinical trials. Therefore, the output is an empty array:

[]

The provided trials focus on:
1. Scalp cooling for metastatic breast cancer patients
2. Extracorporeal photopheresis for lung transplant patients
3. Health and safety training in workplaces
4. Choroidal thickness measurements in relation to refractive errors

None of these trials are suitable for the patient's specific medical conditions (depression and anxiety) or demographic characteristics.
2024-08-07 10:31:12,358 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:31:12,358 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:31:13,564 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:31:19,368 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT01272479: This trial is for hemodialysis patients with hepatitis C, which doesn't match the patient's profile.\n\n2. NCT01593579: This trial is for patients with melanoma, which is not part of the patient's medical conditions.\n\n3. NCT01709279: This trial is for patients with ischemic heart failure, which doesn't match the patient's profile.\n\n4. NCT03982979: This trial is for patients with advanced refractory left ventricular heart failure, which is not part of the patient's medical conditions.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 10:31:19,369 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT01272479: This trial is for hemodialysis patients with hepatitis C, which doesn't match the patient's profile.\n\n2. NCT01593579: This trial is for patients with melanoma, which is not part of the patient's medical conditions.\n\n3. NCT01709279: This trial is for patients with ischemic heart failure, which doesn't match the patient's profile.\n\n4. NCT03982979: This trial is for patients with advanced refractory left ventricular heart failure, which is not part of the patient's medical conditions.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 10:31:19,369 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Here's why:

1. NCT01272479: This trial is for hemodialysis patients with hepatitis C, which doesn't match the patient's profile.

2. NCT01593579: This trial is for patients with melanoma, which is not part of the patient's medical conditions.

3. NCT01709279: This trial is for patients with ischemic heart failure, which doesn't match the patient's profile.

4. NCT03982979: This trial is for patients with advanced refractory left ventricular heart failure, which is not part of the patient's medical conditions.

The patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-07 10:31:19,370 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:31:19,370 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:31:20,589 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:31:26,073 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's medical conditions (depression and anxiety).\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions, so they do not qualify.\n\n3. The third trial (NCT00228579) is focused on obesity in women, while the patient is male and obesity is not mentioned in their profile.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-07 10:31:26,074 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's medical conditions (depression and anxiety).\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions, so they do not qualify.\n\n3. The third trial (NCT00228579) is focused on obesity in women, while the patient is male and obesity is not mentioned in their profile.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-07 10:31:26,074 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT06289179) is focused on sepsis, which is not related to the patient's medical conditions (depression and anxiety).

2. The second trial (NCT03221179) is for healthy volunteers, and the patient has existing medical conditions, so they do not qualify.

3. The third trial (NCT00228579) is focused on obesity in women, while the patient is male and obesity is not mentioned in their profile.

None of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.
2024-08-07 10:31:26,075 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:31:26,076 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:31:27,289 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:31:30,418 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (29-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by any of the provided clinical trials. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 10:31:30,419 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (29-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by any of the provided clinical trials. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 10:31:30,419 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (29-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by any of the provided clinical trials. Therefore, the output is an empty array:

[]
2024-08-07 10:31:30,420 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:31:30,420 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:31:31,642 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:31:37,543 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05315479) is for pediatric patients aged 2 to <17 years undergoing surgery for post-operative pain. The patient, Ethan Brush, is 31 years old and does not have post-operative pain listed as a condition.\n\n2. The second trial (NCT02052479) is for female adolescents aged 12-18 with Polycystic Ovary Syndrome (PCOS). The patient is a 31-year-old male with depression and anxiety.\n\nNeither of these trials are compatible with the patient's profile, resulting in compatibility scores well below 70. Therefore, no trials are returned in the output.", type='text')]
2024-08-07 10:31:37,543 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05315479) is for pediatric patients aged 2 to <17 years undergoing surgery for post-operative pain. The patient, Ethan Brush, is 31 years old and does not have post-operative pain listed as a condition.\n\n2. The second trial (NCT02052479) is for female adolescents aged 12-18 with Polycystic Ovary Syndrome (PCOS). The patient is a 31-year-old male with depression and anxiety.\n\nNeither of these trials are compatible with the patient's profile, resulting in compatibility scores well below 70. Therefore, no trials are returned in the output.", type='text')]
2024-08-07 10:31:37,544 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT05315479) is for pediatric patients aged 2 to <17 years undergoing surgery for post-operative pain. The patient, Ethan Brush, is 31 years old and does not have post-operative pain listed as a condition.

2. The second trial (NCT02052479) is for female adolescents aged 12-18 with Polycystic Ovary Syndrome (PCOS). The patient is a 31-year-old male with depression and anxiety.

Neither of these trials are compatible with the patient's profile, resulting in compatibility scores well below 70. Therefore, no trials are returned in the output.
2024-08-07 10:31:37,544 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:31:37,545 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:31:38,723 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:31:44,273 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the given trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. The provided clinical trials are focused on:\n\n1. Influenza vaccine in children\n2. Pain relief during postpartum perineal tear repair\n3. Colorectal cancer and liver metastases treatment\n4. Oncologist satisfaction with cytotoxic agents\n\nNone of these trials are related to depression, anxiety, or psychiatric medications. They also don't match the patient's age group or medical conditions. Therefore, there are no suitable matches with a score of 70 or higher for this patient among the given trials.", type='text')]
2024-08-07 10:31:44,273 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the given trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. The provided clinical trials are focused on:\n\n1. Influenza vaccine in children\n2. Pain relief during postpartum perineal tear repair\n3. Colorectal cancer and liver metastases treatment\n4. Oncologist satisfaction with cytotoxic agents\n\nNone of these trials are related to depression, anxiety, or psychiatric medications. They also don't match the patient's age group or medical conditions. Therefore, there are no suitable matches with a score of 70 or higher for this patient among the given trials.", type='text')]
2024-08-07 10:31:44,274 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the given trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. The provided clinical trials are focused on:

1. Influenza vaccine in children
2. Pain relief during postpartum perineal tear repair
3. Colorectal cancer and liver metastases treatment
4. Oncologist satisfaction with cytotoxic agents

None of these trials are related to depression, anxiety, or psychiatric medications. They also don't match the patient's age group or medical conditions. Therefore, there are no suitable matches with a score of 70 or higher for this patient among the given trials.
2024-08-07 10:31:44,274 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:31:44,275 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:31:45,481 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:31:52,698 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='After analyzing the patient profile and clinical trial data, I\'ve determined that none of the provided trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06378879) is focused on anesthesia during endoscopy, which is not related to the patient\'s conditions (depression and anxiety).\n\n2. The second trial (NCT02710279), while related to depression, has several factors that make it incompatible with the patient:\n   - It\'s specifically for female patients, while the patient is male.\n   - It\'s for patients with unipolar depression, and we don\'t have enough information to confirm if the patient\'s depression is unipolar.\n   - The trial status is "TERMINATED", which means it\'s no longer active.\n   - The trial involves patients with and without a history of suicidal behavior, which is not mentioned in the patient\'s profile.\n\nGiven these factors, neither trial reaches the threshold of 70 or higher for compatibility with the patient\'s profile.', type='text')]
2024-08-07 10:31:52,699 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='After analyzing the patient profile and clinical trial data, I\'ve determined that none of the provided trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06378879) is focused on anesthesia during endoscopy, which is not related to the patient\'s conditions (depression and anxiety).\n\n2. The second trial (NCT02710279), while related to depression, has several factors that make it incompatible with the patient:\n   - It\'s specifically for female patients, while the patient is male.\n   - It\'s for patients with unipolar depression, and we don\'t have enough information to confirm if the patient\'s depression is unipolar.\n   - The trial status is "TERMINATED", which means it\'s no longer active.\n   - The trial involves patients with and without a history of suicidal behavior, which is not mentioned in the patient\'s profile.\n\nGiven these factors, neither trial reaches the threshold of 70 or higher for compatibility with the patient\'s profile.', type='text')]
2024-08-07 10:31:52,699 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I've determined that none of the provided trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT06378879) is focused on anesthesia during endoscopy, which is not related to the patient's conditions (depression and anxiety).

2. The second trial (NCT02710279), while related to depression, has several factors that make it incompatible with the patient:
   - It's specifically for female patients, while the patient is male.
   - It's for patients with unipolar depression, and we don't have enough information to confirm if the patient's depression is unipolar.
   - The trial status is "TERMINATED", which means it's no longer active.
   - The trial involves patients with and without a history of suicidal behavior, which is not mentioned in the patient's profile.

Given these factors, neither trial reaches the threshold of 70 or higher for compatibility with the patient's profile.
2024-08-07 10:31:52,700 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:31:52,701 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:31:53,912 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:32:01,917 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT05463679 (Vascular Ehlers-Danlos Syndrome study):\n   - The patient doesn't have Vascular Ehlers-Danlos Syndrome.\n   - The age range (18-60) matches, but the condition doesn't.\n\n2. NCT03137979 (Periodontitis study):\n   - The patient doesn't have periodontitis.\n   - The age range (35-60) doesn't match the patient's age (31).\n\n3. NCT01733979 (Anemia study):\n   - The patient doesn't have anemia.\n   - While the age range (19-60) matches, the condition doesn't.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided trials are related to these conditions or medications.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that there are no suitable trials with a compatibility score of 70 or higher for this patient based on the given information.", type='text')]
2024-08-07 10:32:01,918 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT05463679 (Vascular Ehlers-Danlos Syndrome study):\n   - The patient doesn't have Vascular Ehlers-Danlos Syndrome.\n   - The age range (18-60) matches, but the condition doesn't.\n\n2. NCT03137979 (Periodontitis study):\n   - The patient doesn't have periodontitis.\n   - The age range (35-60) doesn't match the patient's age (31).\n\n3. NCT01733979 (Anemia study):\n   - The patient doesn't have anemia.\n   - While the age range (19-60) matches, the condition doesn't.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided trials are related to these conditions or medications.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that there are no suitable trials with a compatibility score of 70 or higher for this patient based on the given information.", type='text')]
2024-08-07 10:32:01,919 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient's profile with a compatibility score of 70 or higher. Here's why:

1. NCT05463679 (Vascular Ehlers-Danlos Syndrome study):
   - The patient doesn't have Vascular Ehlers-Danlos Syndrome.
   - The age range (18-60) matches, but the condition doesn't.

2. NCT03137979 (Periodontitis study):
   - The patient doesn't have periodontitis.
   - The age range (35-60) doesn't match the patient's age (31).

3. NCT01733979 (Anemia study):
   - The patient doesn't have anemia.
   - While the age range (19-60) matches, the condition doesn't.

The patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided trials are related to these conditions or medications.

Therefore, the output in the requested JSON format is an empty array:

[]

This indicates that there are no suitable trials with a compatibility score of 70 or higher for this patient based on the given information.
2024-08-07 10:32:01,919 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:32:01,920 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:32:03,131 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:48:31,810 - app - INFO - Initializing Flask app...
2024-08-07 10:48:31,811 - app - INFO - Configuring app...
2024-08-07 10:48:31,812 - app - INFO - Setting up CORS...
2024-08-07 10:48:31,812 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 10:48:32,167 - app - INFO - Initializing JWT manager...
2024-08-07 10:48:32,168 - app - INFO - Setting up rate limiting...
2024-08-07 10:48:32,169 - app - INFO - Setting up database...
2024-08-07 10:48:32,170 - app - INFO - Starting database setup...
2024-08-07 10:48:32,795 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 10:48:32,795 - app - INFO - Database setup completed successfully
2024-08-07 10:48:32,796 - app - INFO - Registering error handler...
2024-08-07 10:48:32,796 - app - INFO - Initializing CLI commands...
2024-08-07 10:48:32,796 - app - INFO - Registering routes...
2024-08-07 10:48:32,806 - app - INFO - Initializing services...
2024-08-07 10:48:32,819 - app - INFO - Initializing email service...
2024-08-07 10:48:32,820 - app - INFO - Setting up scheduler...
2024-08-07 10:48:32,826 - app - INFO - Initializing scheduler...
2024-08-07 10:48:32,827 - app.scheduler - INFO - Scheduler initialized
2024-08-07 10:48:32,828 - app - INFO - Application initialized successfully
2024-08-07 10:48:35,468 - app - INFO - Initializing Flask app...
2024-08-07 10:48:35,470 - app - INFO - Configuring app...
2024-08-07 10:48:35,471 - app - INFO - Setting up CORS...
2024-08-07 10:48:35,471 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 10:48:35,798 - app - INFO - Initializing JWT manager...
2024-08-07 10:48:35,798 - app - INFO - Setting up rate limiting...
2024-08-07 10:48:35,799 - app - INFO - Setting up database...
2024-08-07 10:48:35,800 - app - INFO - Starting database setup...
2024-08-07 10:48:36,320 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 10:48:36,320 - app - INFO - Database setup completed successfully
2024-08-07 10:48:36,321 - app - INFO - Registering error handler...
2024-08-07 10:48:36,321 - app - INFO - Initializing CLI commands...
2024-08-07 10:48:36,322 - app - INFO - Registering routes...
2024-08-07 10:48:36,329 - app - INFO - Initializing services...
2024-08-07 10:48:36,344 - app - INFO - Initializing email service...
2024-08-07 10:48:36,344 - app - INFO - Setting up scheduler...
2024-08-07 10:48:36,349 - app - INFO - Initializing scheduler...
2024-08-07 10:48:36,350 - app.scheduler - INFO - Scheduler initialized
2024-08-07 10:48:36,350 - app - INFO - Application initialized successfully
2024-08-07 10:48:54,985 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:48:55,997 - app.database - INFO - Database connection established successfully
2024-08-07 10:48:56,858 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 10:48:56,858 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:48:57,641 - app.database - INFO - Database connection established successfully
2024-08-07 10:48:57,681 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 10:48:57,697 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:48:58,298 - app.database - INFO - Database connection established successfully
2024-08-07 10:48:58,346 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 10:48:58,361 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 10:48:58,362 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:48:58,905 - app.database - INFO - Database connection established successfully
2024-08-07 10:48:58,945 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 10:48:58,959 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:48:59,658 - app.database - INFO - Database connection established successfully
2024-08-07 10:48:59,702 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 10:49:00,455 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:49:01,159 - app.database - INFO - Database connection established successfully
2024-08-07 10:49:01,208 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 10:49:01,224 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:49:01,892 - app.database - INFO - Database connection established successfully
2024-08-07 10:49:01,955 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 10:49:01,981 - app.database - INFO - Attempting to establish database connection...
2024-08-07 10:49:02,636 - app.database - INFO - Database connection established successfully
2024-08-07 10:49:02,941 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:49:06,861 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the provided clinical trials.\n\nHere's the empty array as requested for cases where no trials match with a score of 70 or higher:\n\n[]", type='text')]
2024-08-07 10:49:06,862 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the provided clinical trials.\n\nHere's the empty array as requested for cases where no trials match with a score of 70 or higher:\n\n[]", type='text')]
2024-08-07 10:49:06,864 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the provided clinical trials.

Here's the empty array as requested for cases [SQL REDACTED] no trials match with a score of 70 or higher:

[]
2024-08-07 10:49:06,865 - app.services.anthropic_service - ERROR - Error parsing matching response: Expecting value: line 1 column 2 (char 1)
2024-08-07 10:49:06,865 - app.services.anthropic_service - ERROR - Response content: Based on the patient profile and the clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by the provided clinical trials.

Here's the empty array as requested for cases [SQL REDACTED] no trials match with a score of 70 or higher:

[]
2024-08-07 10:49:06,866 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:49:08,064 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:49:12,694 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the clinical trial focusing on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe patient does not have any of the conditions mentioned in the trial (sarcopenia, sarcopenic obesity, or incisional hernia), and the trial's focus is not related to the patient's documented medical conditions (depression and anxiety).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 10:49:12,694 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the clinical trial focusing on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe patient does not have any of the conditions mentioned in the trial (sarcopenia, sarcopenic obesity, or incisional hernia), and the trial's focus is not related to the patient's documented medical conditions (depression and anxiety).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 10:49:12,695 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align well with the clinical trial focusing on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

The patient does not have any of the conditions mentioned in the trial (sarcopenia, sarcopenic obesity, or incisional hernia), and the trial's focus is not related to the patient's documented medical conditions (depression and anxiety).

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-07 10:49:12,695 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:49:12,696 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:49:13,978 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:49:21,490 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not closely align with the specific conditions or eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT00626379 focuses on heart disease risk factors and aging, which doesn't match the patient's profile.\n2. NCT03530579 is for diabetes prevention among Korean and South Asian Americans, which doesn't apply to this patient.\n3. NCT05900479 is for veterans with PTSD, which doesn't match the patient's profile.\n4. NCT04679779 is for children with cerebral palsy, which doesn't apply to this adult patient.\n\nNone of these trials are sufficiently relevant to the patient's age, conditions (depression and anxiety), or other characteristics to warrant a compatibility score of 70 or higher.", type='text')]
2024-08-07 10:49:21,490 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not closely align with the specific conditions or eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT00626379 focuses on heart disease risk factors and aging, which doesn't match the patient's profile.\n2. NCT03530579 is for diabetes prevention among Korean and South Asian Americans, which doesn't apply to this patient.\n3. NCT05900479 is for veterans with PTSD, which doesn't match the patient's profile.\n4. NCT04679779 is for children with cerebral palsy, which doesn't apply to this adult patient.\n\nNone of these trials are sufficiently relevant to the patient's age, conditions (depression and anxiety), or other characteristics to warrant a compatibility score of 70 or higher.", type='text')]
2024-08-07 10:49:21,491 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (30-year-old male with depression and anxiety) does not closely align with the specific conditions or eligibility criteria of the provided clinical trials. Therefore, the output is an empty array:

[]

Explanation:
1. NCT00626379 focuses on heart disease risk factors and aging, which doesn't match the patient's profile.
2. NCT03530579 is for diabetes prevention among Korean and South Asian Americans, which doesn't apply to this patient.
3. NCT05900479 is for veterans with PTSD, which doesn't match the patient's profile.
4. NCT04679779 is for children with cerebral palsy, which doesn't apply to this adult patient.

None of these trials are sufficiently relevant to the patient's age, conditions (depression and anxiety), or other characteristics to warrant a compatibility score of 70 or higher.
2024-08-07 10:49:21,491 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:49:21,491 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:49:22,789 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:49:27,811 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted in the two provided clinical trials.\n\nThe first trial (NCT02244879) is focused on type 2 diabetes patients, which the patient does not have. The second trial (NCT02841579) is for non-small cell lung cancer patients with specific EGFR mutations, which also does not apply to this patient.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 10:49:27,812 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted in the two provided clinical trials.\n\nThe first trial (NCT02244879) is focused on type 2 diabetes patients, which the patient does not have. The second trial (NCT02841579) is for non-small cell lung cancer patients with specific EGFR mutations, which also does not apply to this patient.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 10:49:27,812 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted in the two provided clinical trials.

The first trial (NCT02244879) is focused on type 2 diabetes patients, which the patient does not have. The second trial (NCT02841579) is for non-small cell lung cancer patients with specific EGFR mutations, which also does not apply to this patient.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-07 10:49:27,812 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:49:27,813 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:49:29,093 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:49:47,805 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result in the requested JSON format:\n\n[]\n\nExplanation:\nNone of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT03059979 (Systemic Sclerosis trial):\n   - The patient doesn't have systemic sclerosis or Raynaud's phenomenon.\n   - The trial is focused on a specific autoimmune condition that the patient doesn't have.\n\n2. NCT00293579 (Head and Neck Cancer trial):\n   - The patient doesn't have head and neck cancer.\n   - The trial is specifically for cancer patients, which doesn't match the patient's profile.\n\n3. NCT04491279 (Stroke trial):\n   - The patient doesn't have a history of stroke.\n   - The trial is specifically for post-stroke patients, which doesn't apply to this patient.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 10:49:47,806 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result in the requested JSON format:\n\n[]\n\nExplanation:\nNone of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT03059979 (Systemic Sclerosis trial):\n   - The patient doesn't have systemic sclerosis or Raynaud's phenomenon.\n   - The trial is focused on a specific autoimmune condition that the patient doesn't have.\n\n2. NCT00293579 (Head and Neck Cancer trial):\n   - The patient doesn't have head and neck cancer.\n   - The trial is specifically for cancer patients, which doesn't match the patient's profile.\n\n3. NCT04491279 (Stroke trial):\n   - The patient doesn't have a history of stroke.\n   - The trial is specifically for post-stroke patients, which doesn't apply to this patient.\n\nThe patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 10:49:47,806 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result in the requested JSON format:

[]

Explanation:
None of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Here's why:

1. NCT03059979 (Systemic Sclerosis trial):
   - The patient doesn't have systemic sclerosis or Raynaud's phenomenon.
   - The trial is focused on a specific autoimmune condition that the patient doesn't have.

2. NCT00293579 (Head and Neck Cancer trial):
   - The patient doesn't have head and neck cancer.
   - The trial is specifically for cancer patients, which doesn't match the patient's profile.

3. NCT04491279 (Stroke trial):
   - The patient doesn't have a history of stroke.
   - The trial is specifically for post-stroke patients, which doesn't apply to this patient.

The patient's profile indicates depression and anxiety as medical conditions, and they are taking Escitalopram. None of the provided trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-07 10:49:47,806 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:49:47,807 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:49:49,041 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 10:49:57,026 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 10:49:57,026 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 10:49:57,026 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.

Therefore, the output is an empty array:

[]
2024-08-07 10:49:57,026 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 10:49:57,027 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 10:49:58,212 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:12:07,761 - app - INFO - Initializing Flask app...
2024-08-07 11:12:07,762 - app - INFO - Configuring app...
2024-08-07 11:12:07,763 - app - INFO - Setting up CORS...
2024-08-07 11:12:07,763 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:12:08,118 - app - INFO - Initializing JWT manager...
2024-08-07 11:12:08,118 - app - INFO - Setting up rate limiting...
2024-08-07 11:12:08,120 - app - INFO - Setting up database...
2024-08-07 11:12:08,121 - app - INFO - Starting database setup...
2024-08-07 11:12:08,766 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:12:08,767 - app - INFO - Database setup completed successfully
2024-08-07 11:12:08,767 - app - INFO - Registering error handler...
2024-08-07 11:12:08,767 - app - INFO - Initializing CLI commands...
2024-08-07 11:12:08,768 - app - INFO - Registering routes...
2024-08-07 11:12:08,875 - app - INFO - Initializing services...
2024-08-07 11:12:08,889 - app - INFO - Initializing email service...
2024-08-07 11:12:08,890 - app - INFO - Setting up scheduler...
2024-08-07 11:12:08,896 - app - INFO - Initializing scheduler...
2024-08-07 11:12:08,897 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:12:08,897 - app - INFO - Application initialized successfully
2024-08-07 11:12:12,360 - app - INFO - Initializing Flask app...
2024-08-07 11:12:12,362 - app - INFO - Configuring app...
2024-08-07 11:12:12,363 - app - INFO - Setting up CORS...
2024-08-07 11:12:12,364 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:12:12,862 - app - INFO - Initializing JWT manager...
2024-08-07 11:12:12,862 - app - INFO - Setting up rate limiting...
2024-08-07 11:12:12,864 - app - INFO - Setting up database...
2024-08-07 11:12:12,865 - app - INFO - Starting database setup...
2024-08-07 11:12:13,378 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:12:13,378 - app - INFO - Database setup completed successfully
2024-08-07 11:12:13,378 - app - INFO - Registering error handler...
2024-08-07 11:12:13,379 - app - INFO - Initializing CLI commands...
2024-08-07 11:12:13,379 - app - INFO - Registering routes...
2024-08-07 11:12:13,390 - app - INFO - Initializing services...
2024-08-07 11:12:13,410 - app - INFO - Initializing email service...
2024-08-07 11:12:13,410 - app - INFO - Setting up scheduler...
2024-08-07 11:12:13,417 - app - INFO - Initializing scheduler...
2024-08-07 11:12:13,421 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:12:13,422 - app - INFO - Application initialized successfully
2024-08-07 11:12:46,963 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:12:47,543 - app.database - INFO - Database connection established successfully
2024-08-07 11:12:48,089 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:12:48,090 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:12:49,122 - app.database - INFO - Database connection established successfully
2024-08-07 11:12:49,166 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:12:49,186 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:12:49,809 - app.database - INFO - Database connection established successfully
2024-08-07 11:12:49,857 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:12:49,879 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:12:49,879 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:12:50,416 - app.database - INFO - Database connection established successfully
2024-08-07 11:12:50,460 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:12:50,472 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:12:51,020 - app.database - INFO - Database connection established successfully
2024-08-07 11:12:51,063 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:12:51,173 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:12:51,744 - app.database - INFO - Database connection established successfully
2024-08-07 11:12:51,786 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:12:51,809 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:12:52,345 - app.database - INFO - Database connection established successfully
2024-08-07 11:12:52,387 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:13:37,368 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 11:13:37,368 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 11:13:38,372 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 11:14:14,776 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:14:15,370 - app.database - INFO - Database connection established successfully
2024-08-07 11:14:15,415 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:15:15,252 - app - INFO - Initializing Flask app...
2024-08-07 11:15:15,254 - app - INFO - Configuring app...
2024-08-07 11:15:15,254 - app - INFO - Setting up CORS...
2024-08-07 11:15:15,255 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:15:16,072 - app - INFO - Initializing JWT manager...
2024-08-07 11:15:16,073 - app - INFO - Setting up rate limiting...
2024-08-07 11:15:16,076 - app - INFO - Setting up database...
2024-08-07 11:15:16,077 - app - INFO - Starting database setup...
2024-08-07 11:15:16,753 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:15:16,753 - app - INFO - Database setup completed successfully
2024-08-07 11:15:16,754 - app - INFO - Registering error handler...
2024-08-07 11:15:16,755 - app - INFO - Initializing CLI commands...
2024-08-07 11:15:16,757 - app - INFO - Registering routes...
2024-08-07 11:15:16,817 - app - INFO - Initializing services...
2024-08-07 11:15:16,831 - app - INFO - Initializing email service...
2024-08-07 11:15:16,831 - app - INFO - Setting up scheduler...
2024-08-07 11:15:16,838 - app - INFO - Initializing scheduler...
2024-08-07 11:15:16,840 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:15:16,842 - app - INFO - Application initialized successfully
2024-08-07 11:15:31,568 - app - INFO - Initializing Flask app...
2024-08-07 11:15:31,570 - app - INFO - Configuring app...
2024-08-07 11:15:31,571 - app - INFO - Setting up CORS...
2024-08-07 11:15:31,572 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:15:31,932 - app - INFO - Initializing JWT manager...
2024-08-07 11:15:31,932 - app - INFO - Setting up rate limiting...
2024-08-07 11:15:31,933 - app - INFO - Setting up database...
2024-08-07 11:15:31,935 - app - INFO - Starting database setup...
2024-08-07 11:15:32,580 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:15:32,581 - app - INFO - Database setup completed successfully
2024-08-07 11:15:32,581 - app - INFO - Registering error handler...
2024-08-07 11:15:32,582 - app - INFO - Initializing CLI commands...
2024-08-07 11:15:32,582 - app - INFO - Registering routes...
2024-08-07 11:15:32,591 - app - INFO - Initializing services...
2024-08-07 11:15:32,608 - app - INFO - Initializing email service...
2024-08-07 11:15:32,609 - app - INFO - Setting up scheduler...
2024-08-07 11:15:32,615 - app - INFO - Initializing scheduler...
2024-08-07 11:15:32,616 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:15:32,617 - app - INFO - Application initialized successfully
2024-08-07 11:15:35,874 - app - INFO - Initializing Flask app...
2024-08-07 11:15:35,876 - app - INFO - Configuring app...
2024-08-07 11:15:35,876 - app - INFO - Setting up CORS...
2024-08-07 11:15:35,879 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:15:36,458 - app - INFO - Initializing JWT manager...
2024-08-07 11:15:36,460 - app - INFO - Setting up rate limiting...
2024-08-07 11:15:36,463 - app - INFO - Setting up database...
2024-08-07 11:15:36,464 - app - INFO - Starting database setup...
2024-08-07 11:15:37,080 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:15:37,081 - app - INFO - Database setup completed successfully
2024-08-07 11:15:37,081 - app - INFO - Registering error handler...
2024-08-07 11:15:37,082 - app - INFO - Initializing CLI commands...
2024-08-07 11:15:37,082 - app - INFO - Registering routes...
2024-08-07 11:15:37,096 - app - INFO - Initializing services...
2024-08-07 11:15:37,113 - app - INFO - Initializing email service...
2024-08-07 11:15:37,114 - app - INFO - Setting up scheduler...
2024-08-07 11:15:37,123 - app - INFO - Initializing scheduler...
2024-08-07 11:15:37,125 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:15:37,126 - app - INFO - Application initialized successfully
2024-08-07 11:15:48,431 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:15:49,507 - app.database - INFO - Database connection established successfully
2024-08-07 11:15:50,033 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:15:50,034 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:15:50,708 - app.database - INFO - Database connection established successfully
2024-08-07 11:15:50,748 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:15:50,767 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:15:51,302 - app.database - INFO - Database connection established successfully
2024-08-07 11:15:51,362 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:15:51,376 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:15:51,376 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:15:51,933 - app.database - INFO - Database connection established successfully
2024-08-07 11:15:51,984 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:15:52,089 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:15:52,668 - app.database - INFO - Database connection established successfully
2024-08-07 11:15:52,711 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:15:52,740 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:15:53,550 - app.database - INFO - Database connection established successfully
2024-08-07 11:15:53,616 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:15:53,635 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:15:54,245 - app.database - INFO - Database connection established successfully
2024-08-07 11:15:54,288 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:15:54,323 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:15:54,886 - app.database - INFO - Database connection established successfully
2024-08-07 11:15:55,122 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:16:02,225 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I found that none of the trials are suitable matches for the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The available clinical trials focus on:\n   - Chronic Myelogenous Leukemia (NCT00072579)\n   - Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)\n   - Smoking and exposure to smoke constituents (NCT00812279)\n   - Adolescent alcohol use and brain development (NCT01511679)\n\nNone of these trials are related to the patient's conditions (depression and anxiety) or age group. The patient also doesn't meet the specific eligibility criteria for any of the trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:16:02,225 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I found that none of the trials are suitable matches for the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The available clinical trials focus on:\n   - Chronic Myelogenous Leukemia (NCT00072579)\n   - Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)\n   - Smoking and exposure to smoke constituents (NCT00812279)\n   - Adolescent alcohol use and brain development (NCT01511679)\n\nNone of these trials are related to the patient's conditions (depression and anxiety) or age group. The patient also doesn't meet the specific eligibility criteria for any of the trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:16:02,226 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I found that none of the trials are suitable matches for the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. The available clinical trials focus on:
   - Chronic Myelogenous Leukemia (NCT00072579)
   - Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)
   - Smoking and exposure to smoke constituents (NCT00812279)
   - Adolescent alcohol use and brain development (NCT01511679)

None of these trials are related to the patient's conditions (depression and anxiety) or age group. The patient also doesn't meet the specific eligibility criteria for any of the trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-07 11:16:02,226 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:16:02,226 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:16:03,424 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:16:08,573 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align closely with the eligibility criteria or focus of the given clinical trial. \n\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. The clinical trial (NCT04690179) focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery. These conditions and the study's focus do not match the patient's reported medical conditions or characteristics.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:16:08,574 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align closely with the eligibility criteria or focus of the given clinical trial. \n\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. The clinical trial (NCT04690179) focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery. These conditions and the study's focus do not match the patient's reported medical conditions or characteristics.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:16:08,575 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trial, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align closely with the eligibility criteria or focus of the given clinical trial. 

The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. The clinical trial (NCT04690179) focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery. These conditions and the study's focus do not match the patient's reported medical conditions or characteristics.

Therefore, the output is an empty array:

[]
2024-08-07 11:16:08,575 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:16:08,576 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:16:09,790 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:16:16,869 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The provided clinical trials focus on:\n   - Heart disease risk factors and aging (NCT00626379)\n   - Diabetes prevention in Korean and South Asian Americans (NCT03530579)\n   - PTSD in military veterans (NCT05900479)\n   - Virtual reality for children with cerebral palsy (NCT04679779)\n\nNone of these trials align closely with the patient's profile, age, or medical conditions. The patient's primary conditions (depression and anxiety) are not the focus of any of the listed trials, and he doesn't meet the specific demographic or health criteria required for these studies. Therefore, no trials can be recommended with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:16:16,869 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The provided clinical trials focus on:\n   - Heart disease risk factors and aging (NCT00626379)\n   - Diabetes prevention in Korean and South Asian Americans (NCT03530579)\n   - PTSD in military veterans (NCT05900479)\n   - Virtual reality for children with cerebral palsy (NCT04679779)\n\nNone of these trials align closely with the patient's profile, age, or medical conditions. The patient's primary conditions (depression and anxiety) are not the focus of any of the listed trials, and he doesn't meet the specific demographic or health criteria required for these studies. Therefore, no trials can be recommended with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:16:16,871 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. The provided clinical trials focus on:
   - Heart disease risk factors and aging (NCT00626379)
   - Diabetes prevention in Korean and South Asian Americans (NCT03530579)
   - PTSD in military veterans (NCT05900479)
   - Virtual reality for children with cerebral palsy (NCT04679779)

None of these trials align closely with the patient's profile, age, or medical conditions. The patient's primary conditions (depression and anxiety) are not the focus of any of the listed trials, and he doesn't meet the specific demographic or health criteria required for these studies. Therefore, no trials can be recommended with a compatibility score of 70 or higher.
2024-08-07 11:16:16,871 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:16:16,872 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:16:18,088 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:16:21,781 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the provided clinical trials (which focus on type 2 diabetes and non-small cell lung cancer).\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:16:21,782 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the provided clinical trials (which focus on type 2 diabetes and non-small cell lung cancer).\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:16:21,782 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not closely match the eligibility criteria or conditions targeted by the provided clinical trials (which focus on type 2 diabetes and non-small cell lung cancer).

Therefore, the output is an empty array:

[]
2024-08-07 11:16:21,782 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:16:21,783 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:16:23,036 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:16:29,465 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:16:29,466 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:16:29,466 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.
2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.
3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-07 11:16:29,467 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:16:29,467 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:16:30,657 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:16:39,281 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (depression, anxiety, and taking Escitalopram) does not closely align with the conditions and eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:16:39,282 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (depression, anxiety, and taking Escitalopram) does not closely align with the conditions and eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:16:39,283 - app.services.anthropic_service - INFO - Parsing response: Based on the given patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's profile (depression, anxiety, and taking Escitalopram) does not closely align with the conditions and eligibility criteria of the provided clinical trials, which focus on breast cancer, lung transplantation, workplace safety, and eye-related studies.

Therefore, the output is an empty array:

[]
2024-08-07 11:16:39,284 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:16:39,285 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:16:40,506 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:16:51,172 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials are focused on:\n   - Hepatitis C in hemodialysis patients\n   - Akt inhibition in melanoma patients\n   - Stem cell therapy for ischemic heart failure\n   - Left ventricular assist devices for heart failure\n\nNone of these trials are related to the patient's conditions (depression and anxiety) or demographic profile. The patient doesn't have any of the conditions targeted by these trials (hepatitis C, renal failure, melanoma, or heart failure).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:16:51,173 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials are focused on:\n   - Hepatitis C in hemodialysis patients\n   - Akt inhibition in melanoma patients\n   - Stem cell therapy for ischemic heart failure\n   - Left ventricular assist devices for heart failure\n\nNone of these trials are related to the patient's conditions (depression and anxiety) or demographic profile. The patient doesn't have any of the conditions targeted by these trials (hepatitis C, renal failure, melanoma, or heart failure).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:16:51,173 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. The patient is a 31-year-old male with depression and anxiety, taking Escitalopram.

2. The available clinical trials are focused on:
   - Hepatitis C in hemodialysis patients
   - Akt inhibition in melanoma patients
   - Stem cell therapy for ischemic heart failure
   - Left ventricular assist devices for heart failure

None of these trials are related to the patient's conditions (depression and anxiety) or demographic profile. The patient doesn't have any of the conditions targeted by these trials (hepatitis C, renal failure, melanoma, or heart failure).

Therefore, the output in the requested JSON format is an empty array:

[]

This indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.
2024-08-07 11:16:51,174 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:16:51,175 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:16:52,401 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:17:00,287 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I've determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram.\n\n2. The provided clinical trials are:\n   - NCT06289179: Focused on thyroid and cortisol hormone response in sepsis patients.\n   - NCT03221179: A study for healthy volunteers to test a new drug.\n   - NCT00228579: A study on obesity and weight loss.\n\n3. None of these trials are directly related to depression or anxiety, which are the patient's primary medical conditions.\n\n4. The patient doesn't meet the specific criteria for any of these trials:\n   - He doesn't have sepsis (NCT06289179)\n   - He's not a healthy volunteer without any medical conditions (NCT03221179)\n   - The obesity study (NCT00228579) is specifically for females, and there's no indication that the patient is obese.\n\nGiven these factors, none of the trials reach the threshold of 70 or higher for compatibility with this patient's profile.", type='text')]
2024-08-07 11:17:00,287 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I've determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram.\n\n2. The provided clinical trials are:\n   - NCT06289179: Focused on thyroid and cortisol hormone response in sepsis patients.\n   - NCT03221179: A study for healthy volunteers to test a new drug.\n   - NCT00228579: A study on obesity and weight loss.\n\n3. None of these trials are directly related to depression or anxiety, which are the patient's primary medical conditions.\n\n4. The patient doesn't meet the specific criteria for any of these trials:\n   - He doesn't have sepsis (NCT06289179)\n   - He's not a healthy volunteer without any medical conditions (NCT03221179)\n   - The obesity study (NCT00228579) is specifically for females, and there's no indication that the patient is obese.\n\nGiven these factors, none of the trials reach the threshold of 70 or higher for compatibility with this patient's profile.", type='text')]
2024-08-07 11:17:00,288 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the clinical trial data provided, I've determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram.

2. The provided clinical trials are:
   - NCT06289179: Focused on thyroid and cortisol hormone response in sepsis patients.
   - NCT03221179: A study for healthy volunteers to test a new drug.
   - NCT00228579: A study on obesity and weight loss.

3. None of these trials are directly related to depression or anxiety, which are the patient's primary medical conditions.

4. The patient doesn't meet the specific criteria for any of these trials:
   - He doesn't have sepsis (NCT06289179)
   - He's not a healthy volunteer without any medical conditions (NCT03221179)
   - The obesity study (NCT00228579) is specifically for females, and there's no indication that the patient is obese.

Given these factors, none of the trials reach the threshold of 70 or higher for compatibility with this patient's profile.
2024-08-07 11:17:00,290 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:17:00,290 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:17:01,522 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:17:09,819 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically focused on mental health conditions or related medications. The trials cover conditions such as coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not relevant to the patient's profile. As a result, there are no high-compatibility matches between the patient and the given clinical trials.", type='text')]
2024-08-07 11:17:09,820 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically focused on mental health conditions or related medications. The trials cover conditions such as coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not relevant to the patient's profile. As a result, there are no high-compatibility matches between the patient and the given clinical trials.", type='text')]
2024-08-07 11:17:09,821 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are specifically focused on mental health conditions or related medications. The trials cover conditions such as coronary artery disease, B-cell acute lymphoblastic leukemia, gynecologic cancers, and atrial fibrillation, which are not relevant to the patient's profile. As a result, there are no high-compatibility matches between the patient and the given clinical trials.
2024-08-07 11:17:09,822 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:17:09,822 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:17:11,153 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:23:55,857 - app - INFO - Initializing Flask app...
2024-08-07 11:23:55,859 - app - INFO - Configuring app...
2024-08-07 11:23:55,859 - app - INFO - Setting up CORS...
2024-08-07 11:23:55,860 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:23:56,172 - app - INFO - Initializing JWT manager...
2024-08-07 11:23:56,173 - app - INFO - Setting up rate limiting...
2024-08-07 11:23:56,175 - app - INFO - Setting up database...
2024-08-07 11:23:56,176 - app - INFO - Starting database setup...
2024-08-07 11:23:56,786 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:23:56,788 - app - INFO - Database setup completed successfully
2024-08-07 11:23:56,789 - app - INFO - Registering error handler...
2024-08-07 11:23:56,789 - app - INFO - Initializing CLI commands...
2024-08-07 11:23:56,790 - app - INFO - Registering routes...
2024-08-07 11:23:56,797 - app - INFO - Initializing services...
2024-08-07 11:23:56,809 - app - INFO - Initializing email service...
2024-08-07 11:23:56,809 - app - INFO - Setting up scheduler...
2024-08-07 11:23:56,813 - app - INFO - Initializing scheduler...
2024-08-07 11:23:56,814 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:23:56,814 - app - INFO - Application initialized successfully
2024-08-07 11:23:59,643 - app - INFO - Initializing Flask app...
2024-08-07 11:23:59,645 - app - INFO - Configuring app...
2024-08-07 11:23:59,645 - app - INFO - Setting up CORS...
2024-08-07 11:23:59,646 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:24:00,072 - app - INFO - Initializing JWT manager...
2024-08-07 11:24:00,072 - app - INFO - Setting up rate limiting...
2024-08-07 11:24:00,074 - app - INFO - Setting up database...
2024-08-07 11:24:00,075 - app - INFO - Starting database setup...
2024-08-07 11:24:00,673 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:24:00,673 - app - INFO - Database setup completed successfully
2024-08-07 11:24:00,674 - app - INFO - Registering error handler...
2024-08-07 11:24:00,674 - app - INFO - Initializing CLI commands...
2024-08-07 11:24:00,675 - app - INFO - Registering routes...
2024-08-07 11:24:00,686 - app - INFO - Initializing services...
2024-08-07 11:24:00,704 - app - INFO - Initializing email service...
2024-08-07 11:24:00,705 - app - INFO - Setting up scheduler...
2024-08-07 11:24:00,712 - app - INFO - Initializing scheduler...
2024-08-07 11:24:00,714 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:24:00,716 - app - INFO - Application initialized successfully
2024-08-07 11:32:43,316 - app - INFO - Initializing Flask app...
2024-08-07 11:32:43,317 - app - INFO - Configuring app...
2024-08-07 11:32:43,317 - app - INFO - Setting up CORS...
2024-08-07 11:32:43,318 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:32:43,528 - app - INFO - Initializing JWT manager...
2024-08-07 11:32:43,529 - app - INFO - Setting up rate limiting...
2024-08-07 11:32:43,530 - app - INFO - Setting up database...
2024-08-07 11:32:43,531 - app - INFO - Starting database setup...
2024-08-07 11:32:44,244 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:32:44,244 - app - INFO - Database setup completed successfully
2024-08-07 11:32:44,245 - app - INFO - Registering error handler...
2024-08-07 11:32:44,246 - app - INFO - Initializing CLI commands...
2024-08-07 11:32:44,247 - app - INFO - Registering routes...
2024-08-07 11:32:44,294 - app - INFO - Initializing services...
2024-08-07 11:32:44,307 - app - INFO - Initializing email service...
2024-08-07 11:32:44,307 - app - INFO - Setting up scheduler...
2024-08-07 11:32:44,312 - app - INFO - Initializing scheduler...
2024-08-07 11:32:44,314 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:32:44,314 - app - INFO - Application initialized successfully
2024-08-07 11:32:44,503 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:32:45,400 - app.database - INFO - Database connection established successfully
2024-08-07 11:32:45,560 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:32:59,865 - app - INFO - Initializing Flask app...
2024-08-07 11:32:59,867 - app - INFO - Configuring app...
2024-08-07 11:32:59,868 - app - INFO - Setting up CORS...
2024-08-07 11:32:59,869 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:33:00,245 - app - INFO - Initializing JWT manager...
2024-08-07 11:33:00,246 - app - INFO - Setting up rate limiting...
2024-08-07 11:33:00,247 - app - INFO - Setting up database...
2024-08-07 11:33:00,248 - app - INFO - Starting database setup...
2024-08-07 11:33:01,159 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:33:01,159 - app - INFO - Database setup completed successfully
2024-08-07 11:33:01,160 - app - INFO - Registering error handler...
2024-08-07 11:33:01,160 - app - INFO - Initializing CLI commands...
2024-08-07 11:33:01,160 - app - INFO - Registering routes...
2024-08-07 11:33:01,170 - app - INFO - Initializing services...
2024-08-07 11:33:01,185 - app - INFO - Initializing email service...
2024-08-07 11:33:01,187 - app - INFO - Setting up scheduler...
2024-08-07 11:33:01,193 - app - INFO - Initializing scheduler...
2024-08-07 11:33:01,194 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:33:01,194 - app - INFO - Application initialized successfully
2024-08-07 11:33:04,106 - app - INFO - Initializing Flask app...
2024-08-07 11:33:04,109 - app - INFO - Configuring app...
2024-08-07 11:33:04,110 - app - INFO - Setting up CORS...
2024-08-07 11:33:04,110 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:33:04,470 - app - INFO - Initializing JWT manager...
2024-08-07 11:33:04,470 - app - INFO - Setting up rate limiting...
2024-08-07 11:33:04,473 - app - INFO - Setting up database...
2024-08-07 11:33:04,474 - app - INFO - Starting database setup...
2024-08-07 11:33:05,465 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:33:05,466 - app - INFO - Database setup completed successfully
2024-08-07 11:33:05,466 - app - INFO - Registering error handler...
2024-08-07 11:33:05,467 - app - INFO - Initializing CLI commands...
2024-08-07 11:33:05,467 - app - INFO - Registering routes...
2024-08-07 11:33:05,474 - app - INFO - Initializing services...
2024-08-07 11:33:05,520 - app - INFO - Initializing email service...
2024-08-07 11:33:05,521 - app - INFO - Setting up scheduler...
2024-08-07 11:33:05,526 - app - INFO - Initializing scheduler...
2024-08-07 11:33:05,527 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:33:05,527 - app - INFO - Application initialized successfully
2024-08-07 11:33:19,973 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:33:20,504 - app.database - INFO - Database connection established successfully
2024-08-07 11:33:21,022 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:33:21,023 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:33:21,666 - app.database - INFO - Database connection established successfully
2024-08-07 11:33:21,709 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:33:21,727 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:33:22,383 - app.database - INFO - Database connection established successfully
2024-08-07 11:33:22,424 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:33:22,443 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:33:22,444 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:33:23,206 - app.database - INFO - Database connection established successfully
2024-08-07 11:33:23,246 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:33:23,262 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:33:24,143 - app.database - INFO - Database connection established successfully
2024-08-07 11:33:24,229 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:33:24,271 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:33:25,060 - app.database - INFO - Database connection established successfully
2024-08-07 11:33:25,102 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:33:25,138 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:33:25,784 - app.database - INFO - Database connection established successfully
2024-08-07 11:33:25,827 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:33:25,869 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:33:26,535 - app.database - INFO - Database connection established successfully
2024-08-07 11:33:26,850 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:33:39,727 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials are:\n   - NCT00072579: Focused on chronic myelogenous leukemia\n   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia\n   - NCT00812279: Smoking-related study\n   - NCT01511679: Study on adolescent alcohol use (withdrawn)\n\nNone of these trials align with the patient's medical conditions (depression and anxiety) or age group. The patient doesn't have leukemia, erectile dysfunction, prostatic hyperplasia, or issues related to smoking or alcohol use. Additionally, he is outside the age range for the adolescent study.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:33:39,728 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available clinical trials are:\n   - NCT00072579: Focused on chronic myelogenous leukemia\n   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia\n   - NCT00812279: Smoking-related study\n   - NCT01511679: Study on adolescent alcohol use (withdrawn)\n\nNone of these trials align with the patient's medical conditions (depression and anxiety) or age group. The patient doesn't have leukemia, erectile dysfunction, prostatic hyperplasia, or issues related to smoking or alcohol use. Additionally, he is outside the age range for the adolescent study.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:33:39,729 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.

2. The available clinical trials are:
   - NCT00072579: Focused on chronic myelogenous leukemia
   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia
   - NCT00812279: Smoking-related study
   - NCT01511679: Study on adolescent alcohol use (withdrawn)

None of these trials align with the patient's medical conditions (depression and anxiety) or age group. The patient doesn't have leukemia, erectile dysfunction, prostatic hyperplasia, or issues related to smoking or alcohol use. Additionally, he is outside the age range for the adolescent study.

Therefore, the output in the requested JSON format is an empty array:

[]

This indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.
2024-08-07 11:33:39,730 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:33:39,731 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:33:40,961 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:33:44,975 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or focus of the single clinical trial provided (NCT04690179, which is about sarcopenia and sarcopenic obesity in complex abdominal wall surgery).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that no trials match the patient's profile with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:33:44,975 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or focus of the single clinical trial provided (NCT04690179, which is about sarcopenia and sarcopenic obesity in complex abdominal wall surgery).\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that no trials match the patient's profile with a compatibility score of 70 or higher.", type='text')]
2024-08-07 11:33:44,976 - app.services.anthropic_service - INFO - Parsing response: Based on the provided patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or focus of the single clinical trial provided (NCT04690179, which is about sarcopenia and sarcopenic obesity in complex abdominal wall surgery).

Therefore, the output in the requested JSON format is an empty array:

[]

This indicates that no trials match the patient's profile with a compatibility score of 70 or higher.
2024-08-07 11:33:44,976 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:33:44,976 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:33:46,175 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:33:50,182 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children. These conditions and target populations do not align well with the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-07 11:33:50,183 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children. These conditions and target populations do not align well with the patient's profile, resulting in low compatibility scores (below 70) for all trials.", type='text')]
2024-08-07 11:33:50,183 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children. These conditions and target populations do not align well with the patient's profile, resulting in low compatibility scores (below 70) for all trials.
2024-08-07 11:33:50,183 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:33:50,184 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:33:51,414 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:33:56,778 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not align well with the eligibility criteria or conditions targeted by the two clinical trials provided.\n\nThe first trial (NCT02244879) focuses on type 2 diabetes and inflammation, which are not part of the patient's medical conditions. The second trial (NCT02841579) is for non-small cell lung cancer patients with specific EGFR mutations, which also doesn't match the patient's profile.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 11:33:56,778 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not align well with the eligibility criteria or conditions targeted by the two clinical trials provided.\n\nThe first trial (NCT02244879) focuses on type 2 diabetes and inflammation, which are not part of the patient's medical conditions. The second trial (NCT02841579) is for non-small cell lung cancer patients with specific EGFR mutations, which also doesn't match the patient's profile.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 11:33:56,779 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) does not align well with the eligibility criteria or conditions targeted by the two clinical trials provided.

The first trial (NCT02244879) focuses on type 2 diabetes and inflammation, which are not part of the patient's medical conditions. The second trial (NCT02841579) is for non-small cell lung cancer patients with specific EGFR mutations, which also doesn't match the patient's profile.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-07 11:33:56,780 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:33:56,780 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:33:58,012 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:34:01,634 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) doesn't align closely with the specific conditions and eligibility criteria of the provided clinical trials, which focus on systemic sclerosis, head and neck cancer, and stroke.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:34:01,635 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) doesn't align closely with the specific conditions and eligibility criteria of the provided clinical trials, which focus on systemic sclerosis, head and neck cancer, and stroke.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:34:01,635 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I couldn't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31-year-old male with depression and anxiety) doesn't align closely with the specific conditions and eligibility criteria of the provided clinical trials, which focus on systemic sclerosis, head and neck cancer, and stroke.

Therefore, the output is an empty array:

[]
2024-08-07 11:34:01,636 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:34:01,636 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:34:02,834 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:34:13,309 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications.\n\nThe trials provided are focused on:\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not suitable for the patient's profile, as they target different conditions and demographics. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:34:13,310 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications.\n\nThe trials provided are focused on:\n1. Scalp cooling for metastatic breast cancer patients\n2. Extracorporeal photopheresis for lung transplant patients\n3. Health and safety training in the workplace\n4. Choroidal thickness measurements related to refractive errors\n\nThese trials are not suitable for the patient's profile, as they target different conditions and demographics. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:34:13,311 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications.

The trials provided are focused on:
1. Scalp cooling for metastatic breast cancer patients
2. Extracorporeal photopheresis for lung transplant patients
3. Health and safety training in the workplace
4. Choroidal thickness measurements related to refractive errors

These trials are not suitable for the patient's profile, as they target different conditions and demographics. Therefore, the output is an empty array:

[]
2024-08-07 11:34:13,311 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:34:13,312 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:34:14,609 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:34:18,017 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the provided clinical trials, which focus on renal failure, hepatitis C, melanoma, heart failure, and left ventricular assist devices.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:34:18,018 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the provided clinical trials, which focus on renal failure, hepatitis C, melanoma, heart failure, and left ventricular assist devices.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 11:34:18,019 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) does not closely align with the eligibility criteria or conditions targeted by the provided clinical trials, which focus on renal failure, hepatitis C, melanoma, heart failure, and left ventricular assist devices.

Therefore, the output is an empty array:

[]
2024-08-07 11:34:18,019 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:34:18,019 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:34:19,281 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 11:34:26,006 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is about thyroid and cortisol hormone response to sepsis, which is not related to the patient's conditions of depression and anxiety.\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has medical conditions, so they don't qualify.\n\n3. The third trial (NCT00228579) is focused on obesity and related metabolic issues, which are not mentioned in the patient's profile.\n\nNone of these trials are specifically targeted towards depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient's age (31 years old) and gender (male) don't particularly align with any of the trial's specific requirements. Therefore, no trial reaches the threshold of 70 or higher for compatibility.", type='text')]
2024-08-07 11:34:26,007 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06289179) is about thyroid and cortisol hormone response to sepsis, which is not related to the patient's conditions of depression and anxiety.\n\n2. The second trial (NCT03221179) is for healthy volunteers, and the patient has medical conditions, so they don't qualify.\n\n3. The third trial (NCT00228579) is focused on obesity and related metabolic issues, which are not mentioned in the patient's profile.\n\nNone of these trials are specifically targeted towards depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient's age (31 years old) and gender (male) don't particularly align with any of the trial's specific requirements. Therefore, no trial reaches the threshold of 70 or higher for compatibility.", type='text')]
2024-08-07 11:34:26,008 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT06289179) is about thyroid and cortisol hormone response to sepsis, which is not related to the patient's conditions of depression and anxiety.

2. The second trial (NCT03221179) is for healthy volunteers, and the patient has medical conditions, so they don't qualify.

3. The third trial (NCT00228579) is focused on obesity and related metabolic issues, which are not mentioned in the patient's profile.

None of these trials are specifically targeted towards depression or anxiety, which are the patient's primary medical conditions. Additionally, the patient's age (31 years old) and gender (male) don't particularly align with any of the trial's specific requirements. Therefore, no trial reaches the threshold of 70 or higher for compatibility.
2024-08-07 11:34:26,009 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 11:34:26,009 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 11:35:35,576 - app - INFO - Initializing Flask app...
2024-08-07 11:35:35,577 - app - INFO - Configuring app...
2024-08-07 11:35:35,578 - app - INFO - Setting up CORS...
2024-08-07 11:35:35,578 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:35:35,878 - app - INFO - Initializing JWT manager...
2024-08-07 11:35:35,878 - app - INFO - Setting up rate limiting...
2024-08-07 11:35:35,880 - app - INFO - Setting up database...
2024-08-07 11:35:35,880 - app - INFO - Starting database setup...
2024-08-07 11:35:36,905 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:35:36,906 - app - INFO - Database setup completed successfully
2024-08-07 11:35:36,906 - app - INFO - Registering error handler...
2024-08-07 11:35:36,906 - app - INFO - Initializing CLI commands...
2024-08-07 11:35:36,907 - app - INFO - Registering routes...
2024-08-07 11:35:36,917 - app - INFO - Initializing services...
2024-08-07 11:35:36,932 - app - INFO - Initializing email service...
2024-08-07 11:35:36,933 - app - INFO - Setting up scheduler...
2024-08-07 11:35:36,940 - app - INFO - Initializing scheduler...
2024-08-07 11:35:36,941 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:35:36,942 - app - INFO - Application initialized successfully
2024-08-07 11:35:40,379 - app - INFO - Initializing Flask app...
2024-08-07 11:35:40,382 - app - INFO - Configuring app...
2024-08-07 11:35:40,383 - app - INFO - Setting up CORS...
2024-08-07 11:35:40,383 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:35:40,892 - app - INFO - Initializing JWT manager...
2024-08-07 11:35:40,893 - app - INFO - Setting up rate limiting...
2024-08-07 11:35:40,895 - app - INFO - Setting up database...
2024-08-07 11:35:40,897 - app - INFO - Starting database setup...
2024-08-07 11:35:41,506 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:35:41,507 - app - INFO - Database setup completed successfully
2024-08-07 11:35:41,507 - app - INFO - Registering error handler...
2024-08-07 11:35:41,508 - app - INFO - Initializing CLI commands...
2024-08-07 11:35:41,509 - app - INFO - Registering routes...
2024-08-07 11:35:41,524 - app - INFO - Initializing services...
2024-08-07 11:35:41,551 - app - INFO - Initializing email service...
2024-08-07 11:35:41,551 - app - INFO - Setting up scheduler...
2024-08-07 11:35:41,558 - app - INFO - Initializing scheduler...
2024-08-07 11:35:41,559 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:35:41,560 - app - INFO - Application initialized successfully
2024-08-07 11:36:17,126 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:36:17,699 - app.database - INFO - Database connection established successfully
2024-08-07 11:36:18,234 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:36:18,234 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:36:18,808 - app.database - INFO - Database connection established successfully
2024-08-07 11:36:18,851 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:36:18,866 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:36:19,456 - app.database - INFO - Database connection established successfully
2024-08-07 11:36:19,498 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:36:19,514 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:36:19,515 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:36:20,122 - app.database - INFO - Database connection established successfully
2024-08-07 11:36:20,172 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:36:20,188 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:36:20,745 - app.database - INFO - Database connection established successfully
2024-08-07 11:36:20,786 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:36:21,484 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:36:21,995 - app.database - INFO - Database connection established successfully
2024-08-07 11:36:22,035 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:36:22,053 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:36:22,594 - app.database - INFO - Database connection established successfully
2024-08-07 11:36:22,741 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:36:50,620 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 11:36:50,620 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 11:36:51,626 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 11:38:00,387 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:38:00,980 - app.database - INFO - Database connection established successfully
2024-08-07 11:38:01,022 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:38:11,091 - app - INFO - Initializing Flask app...
2024-08-07 11:38:11,093 - app - INFO - Configuring app...
2024-08-07 11:38:11,093 - app - INFO - Setting up CORS...
2024-08-07 11:38:11,094 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:38:11,413 - app - INFO - Initializing JWT manager...
2024-08-07 11:38:11,413 - app - INFO - Setting up rate limiting...
2024-08-07 11:38:11,414 - app - INFO - Setting up database...
2024-08-07 11:38:11,415 - app - INFO - Starting database setup...
2024-08-07 11:38:12,886 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:38:12,886 - app - INFO - Database setup completed successfully
2024-08-07 11:38:12,887 - app - INFO - Registering error handler...
2024-08-07 11:38:12,887 - app - INFO - Initializing CLI commands...
2024-08-07 11:38:12,888 - app - INFO - Registering routes...
2024-08-07 11:38:12,899 - app - INFO - Initializing services...
2024-08-07 11:38:12,917 - app - INFO - Initializing email service...
2024-08-07 11:38:12,918 - app - INFO - Setting up scheduler...
2024-08-07 11:38:12,929 - app - INFO - Initializing scheduler...
2024-08-07 11:38:12,933 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:38:12,934 - app - INFO - Application initialized successfully
2024-08-07 11:38:16,101 - app - INFO - Initializing Flask app...
2024-08-07 11:38:16,104 - app - INFO - Configuring app...
2024-08-07 11:38:16,105 - app - INFO - Setting up CORS...
2024-08-07 11:38:16,105 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:38:16,585 - app - INFO - Initializing JWT manager...
2024-08-07 11:38:16,586 - app - INFO - Setting up rate limiting...
2024-08-07 11:38:16,587 - app - INFO - Setting up database...
2024-08-07 11:38:16,588 - app - INFO - Starting database setup...
2024-08-07 11:38:17,534 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:38:17,534 - app - INFO - Database setup completed successfully
2024-08-07 11:38:17,535 - app - INFO - Registering error handler...
2024-08-07 11:38:17,536 - app - INFO - Initializing CLI commands...
2024-08-07 11:38:17,536 - app - INFO - Registering routes...
2024-08-07 11:38:17,551 - app - INFO - Initializing services...
2024-08-07 11:38:17,567 - app - INFO - Initializing email service...
2024-08-07 11:38:17,567 - app - INFO - Setting up scheduler...
2024-08-07 11:38:17,576 - app - INFO - Initializing scheduler...
2024-08-07 11:38:17,578 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:38:17,579 - app - INFO - Application initialized successfully
2024-08-07 11:38:32,016 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:38:32,590 - app.database - INFO - Database connection established successfully
2024-08-07 11:38:33,129 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:38:33,131 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:38:33,773 - app.database - INFO - Database connection established successfully
2024-08-07 11:38:33,819 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:38:33,837 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:38:34,634 - app.database - INFO - Database connection established successfully
2024-08-07 11:38:34,675 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:38:34,693 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:38:34,696 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:38:35,240 - app.database - INFO - Database connection established successfully
2024-08-07 11:38:35,282 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:38:35,300 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:38:35,964 - app.database - INFO - Database connection established successfully
2024-08-07 11:38:36,022 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:38:37,644 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:38:38,218 - app.database - INFO - Database connection established successfully
2024-08-07 11:38:38,275 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:38:38,298 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:38:38,984 - app.database - INFO - Database connection established successfully
2024-08-07 11:38:39,026 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:39:13,243 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 11:39:13,244 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 11:39:14,252 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 11:45:54,411 - app - INFO - Initializing Flask app...
2024-08-07 11:45:54,413 - app - INFO - Configuring app...
2024-08-07 11:45:54,413 - app - INFO - Setting up CORS...
2024-08-07 11:45:54,414 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:45:54,745 - app - INFO - Initializing JWT manager...
2024-08-07 11:45:54,746 - app - INFO - Setting up rate limiting...
2024-08-07 11:45:54,747 - app - INFO - Setting up database...
2024-08-07 11:45:54,748 - app - INFO - Starting database setup...
2024-08-07 11:45:55,383 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:45:55,384 - app - INFO - Database setup completed successfully
2024-08-07 11:45:55,385 - app - INFO - Registering error handler...
2024-08-07 11:45:55,385 - app - INFO - Initializing CLI commands...
2024-08-07 11:45:55,385 - app - INFO - Registering routes...
2024-08-07 11:45:55,395 - app - INFO - Initializing services...
2024-08-07 11:45:55,411 - app - INFO - Initializing email service...
2024-08-07 11:45:55,412 - app - INFO - Setting up scheduler...
2024-08-07 11:45:55,418 - app - INFO - Initializing scheduler...
2024-08-07 11:45:55,419 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:45:55,419 - app - INFO - Application initialized successfully
2024-08-07 11:45:58,363 - app - INFO - Initializing Flask app...
2024-08-07 11:45:58,366 - app - INFO - Configuring app...
2024-08-07 11:45:58,366 - app - INFO - Setting up CORS...
2024-08-07 11:45:58,367 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:45:58,872 - app - INFO - Initializing JWT manager...
2024-08-07 11:45:58,873 - app - INFO - Setting up rate limiting...
2024-08-07 11:45:58,875 - app - INFO - Setting up database...
2024-08-07 11:45:58,876 - app - INFO - Starting database setup...
2024-08-07 11:45:59,433 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:45:59,433 - app - INFO - Database setup completed successfully
2024-08-07 11:45:59,434 - app - INFO - Registering error handler...
2024-08-07 11:45:59,434 - app - INFO - Initializing CLI commands...
2024-08-07 11:45:59,435 - app - INFO - Registering routes...
2024-08-07 11:45:59,445 - app - INFO - Initializing services...
2024-08-07 11:45:59,462 - app - INFO - Initializing email service...
2024-08-07 11:45:59,463 - app - INFO - Setting up scheduler...
2024-08-07 11:45:59,469 - app - INFO - Initializing scheduler...
2024-08-07 11:45:59,470 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:45:59,471 - app - INFO - Application initialized successfully
2024-08-07 11:46:10,614 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:46:11,305 - app.database - INFO - Database connection established successfully
2024-08-07 11:46:11,858 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:46:11,860 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:46:12,506 - app.database - INFO - Database connection established successfully
2024-08-07 11:46:12,598 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:46:12,630 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:46:13,160 - app.database - INFO - Database connection established successfully
2024-08-07 11:46:13,201 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:46:13,227 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:46:13,228 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:46:13,803 - app.database - INFO - Database connection established successfully
2024-08-07 11:46:13,850 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:46:13,868 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:46:15,035 - app.database - INFO - Database connection established successfully
2024-08-07 11:46:15,077 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:46:15,120 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:46:15,783 - app.database - INFO - Database connection established successfully
2024-08-07 11:46:15,826 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:46:15,853 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:46:16,404 - app.database - INFO - Database connection established successfully
2024-08-07 11:46:16,452 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:46:55,272 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 11:46:55,273 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 11:46:56,278 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 11:49:03,160 - app - INFO - Initializing Flask app...
2024-08-07 11:49:03,162 - app - INFO - Configuring app...
2024-08-07 11:49:03,162 - app - INFO - Setting up CORS...
2024-08-07 11:49:03,163 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:49:03,456 - app - INFO - Initializing JWT manager...
2024-08-07 11:49:03,457 - app - INFO - Setting up rate limiting...
2024-08-07 11:49:03,458 - app - INFO - Setting up database...
2024-08-07 11:49:03,459 - app - INFO - Starting database setup...
2024-08-07 11:49:05,435 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:49:05,436 - app - INFO - Database setup completed successfully
2024-08-07 11:49:05,436 - app - INFO - Registering error handler...
2024-08-07 11:49:05,437 - app - INFO - Initializing CLI commands...
2024-08-07 11:49:05,437 - app - INFO - Registering routes...
2024-08-07 11:49:05,447 - app - INFO - Initializing services...
2024-08-07 11:49:05,463 - app - INFO - Initializing email service...
2024-08-07 11:49:05,465 - app - INFO - Setting up scheduler...
2024-08-07 11:49:05,471 - app - INFO - Initializing scheduler...
2024-08-07 11:49:05,472 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:49:05,472 - app - INFO - Application initialized successfully
2024-08-07 11:49:08,342 - app - INFO - Initializing Flask app...
2024-08-07 11:49:08,345 - app - INFO - Configuring app...
2024-08-07 11:49:08,345 - app - INFO - Setting up CORS...
2024-08-07 11:49:08,346 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 11:49:08,816 - app - INFO - Initializing JWT manager...
2024-08-07 11:49:08,817 - app - INFO - Setting up rate limiting...
2024-08-07 11:49:08,818 - app - INFO - Setting up database...
2024-08-07 11:49:08,819 - app - INFO - Starting database setup...
2024-08-07 11:49:09,415 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 11:49:09,416 - app - INFO - Database setup completed successfully
2024-08-07 11:49:09,417 - app - INFO - Registering error handler...
2024-08-07 11:49:09,418 - app - INFO - Initializing CLI commands...
2024-08-07 11:49:09,418 - app - INFO - Registering routes...
2024-08-07 11:49:09,452 - app - INFO - Initializing services...
2024-08-07 11:49:09,500 - app - INFO - Initializing email service...
2024-08-07 11:49:09,502 - app - INFO - Setting up scheduler...
2024-08-07 11:49:09,510 - app - INFO - Initializing scheduler...
2024-08-07 11:49:09,510 - app.scheduler - INFO - Scheduler initialized
2024-08-07 11:49:09,511 - app - INFO - Application initialized successfully
2024-08-07 11:49:19,364 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:49:19,993 - app.database - INFO - Database connection established successfully
2024-08-07 11:49:20,463 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:49:20,464 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:49:21,090 - app.database - INFO - Database connection established successfully
2024-08-07 11:49:21,145 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:49:21,163 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:49:21,710 - app.database - INFO - Database connection established successfully
2024-08-07 11:49:21,753 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:49:21,774 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 11:49:21,775 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:49:22,326 - app.database - INFO - Database connection established successfully
2024-08-07 11:49:22,382 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 11:49:22,400 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:49:22,963 - app.database - INFO - Database connection established successfully
2024-08-07 11:49:23,028 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:49:27,382 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:49:27,975 - app.database - INFO - Database connection established successfully
2024-08-07 11:49:28,016 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:49:28,031 - app.database - INFO - Attempting to establish database connection...
2024-08-07 11:49:28,541 - app.database - INFO - Database connection established successfully
2024-08-07 11:49:28,582 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 11:49:41,114 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 11:49:41,115 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 11:49:42,129 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 12:01:08,123 - app - INFO - Initializing Flask app...
2024-08-07 12:01:08,125 - app - INFO - Configuring app...
2024-08-07 12:01:08,126 - app - INFO - Setting up CORS...
2024-08-07 12:01:08,126 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 12:01:08,455 - app - INFO - Initializing JWT manager...
2024-08-07 12:01:08,455 - app - INFO - Setting up rate limiting...
2024-08-07 12:01:08,456 - app - INFO - Setting up database...
2024-08-07 12:01:08,457 - app - INFO - Starting database setup...
2024-08-07 12:01:09,251 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 12:01:09,251 - app - INFO - Database setup completed successfully
2024-08-07 12:01:09,251 - app - INFO - Registering error handler...
2024-08-07 12:01:09,252 - app - INFO - Initializing CLI commands...
2024-08-07 12:01:09,252 - app - INFO - Registering routes...
2024-08-07 12:02:11,431 - app - INFO - Initializing Flask app...
2024-08-07 12:02:11,432 - app - INFO - Configuring app...
2024-08-07 12:02:11,433 - app - INFO - Setting up CORS...
2024-08-07 12:02:11,433 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 12:02:11,757 - app - INFO - Initializing JWT manager...
2024-08-07 12:02:11,758 - app - INFO - Setting up rate limiting...
2024-08-07 12:02:11,759 - app - INFO - Setting up database...
2024-08-07 12:02:11,760 - app - INFO - Starting database setup...
2024-08-07 12:02:12,434 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 12:02:12,434 - app - INFO - Database setup completed successfully
2024-08-07 12:02:12,435 - app - INFO - Registering error handler...
2024-08-07 12:02:12,435 - app - INFO - Initializing CLI commands...
2024-08-07 12:02:12,436 - app - INFO - Registering routes...
2024-08-07 12:02:12,461 - app - INFO - Initializing services...
2024-08-07 12:02:12,478 - app - INFO - Initializing email service...
2024-08-07 12:02:12,479 - app - INFO - Setting up scheduler...
2024-08-07 12:02:12,488 - app - INFO - Initializing scheduler...
2024-08-07 12:02:12,489 - app.scheduler - INFO - Scheduler initialized
2024-08-07 12:02:12,490 - app - INFO - Application initialized successfully
2024-08-07 12:02:15,269 - app - INFO - Initializing Flask app...
2024-08-07 12:02:15,272 - app - INFO - Configuring app...
2024-08-07 12:02:15,273 - app - INFO - Setting up CORS...
2024-08-07 12:02:15,273 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 12:02:15,679 - app - INFO - Initializing JWT manager...
2024-08-07 12:02:15,679 - app - INFO - Setting up rate limiting...
2024-08-07 12:02:15,681 - app - INFO - Setting up database...
2024-08-07 12:02:15,683 - app - INFO - Starting database setup...
2024-08-07 12:02:16,344 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 12:02:16,345 - app - INFO - Database setup completed successfully
2024-08-07 12:02:16,346 - app - INFO - Registering error handler...
2024-08-07 12:02:16,346 - app - INFO - Initializing CLI commands...
2024-08-07 12:02:16,346 - app - INFO - Registering routes...
2024-08-07 12:02:16,358 - app - INFO - Initializing services...
2024-08-07 12:02:16,379 - app - INFO - Initializing email service...
2024-08-07 12:02:16,379 - app - INFO - Setting up scheduler...
2024-08-07 12:02:16,385 - app - INFO - Initializing scheduler...
2024-08-07 12:02:16,386 - app.scheduler - INFO - Scheduler initialized
2024-08-07 12:02:16,386 - app - INFO - Application initialized successfully
2024-08-07 12:04:07,836 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:04:08,779 - app.database - INFO - Database connection established successfully
2024-08-07 12:04:09,169 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 12:04:09,170 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:04:09,802 - app.database - INFO - Database connection established successfully
2024-08-07 12:04:09,844 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 12:04:09,862 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:04:10,461 - app.database - INFO - Database connection established successfully
2024-08-07 12:04:10,514 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:04:10,534 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 12:04:10,536 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:04:11,112 - app.database - INFO - Database connection established successfully
2024-08-07 12:04:11,151 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 12:04:11,165 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:04:11,741 - app.database - INFO - Database connection established successfully
2024-08-07 12:04:11,785 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:04:13,067 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:04:14,514 - app.database - INFO - Database connection established successfully
2024-08-07 12:04:14,556 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:04:14,568 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:04:15,223 - app.database - INFO - Database connection established successfully
2024-08-07 12:04:15,295 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:04:30,305 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 12:04:30,305 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 12:04:31,321 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 12:05:25,969 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:05:26,732 - app.database - INFO - Database connection established successfully
2024-08-07 12:05:27,131 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 12:05:27,131 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:05:27,697 - app.database - INFO - Database connection established successfully
2024-08-07 12:05:27,738 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 12:05:27,756 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:05:28,434 - app.database - INFO - Database connection established successfully
2024-08-07 12:05:28,480 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:05:28,511 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 12:05:28,513 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:05:29,225 - app.database - INFO - Database connection established successfully
2024-08-07 12:05:29,277 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 12:05:29,287 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:05:30,151 - app.database - INFO - Database connection established successfully
2024-08-07 12:05:30,214 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:05:30,251 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:05:30,916 - app.database - INFO - Database connection established successfully
2024-08-07 12:05:30,967 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:05:30,985 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:05:31,619 - app.database - INFO - Database connection established successfully
2024-08-07 12:05:31,685 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:05:36,998 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 12:05:36,999 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 12:05:38,012 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 12:05:42,555 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:05:43,141 - app.database - INFO - Database connection established successfully
2024-08-07 12:05:43,182 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:05:53,359 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 12:05:53,360 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 12:05:54,378 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 12:38:57,568 - app - INFO - Initializing Flask app...
2024-08-07 12:38:57,569 - app - INFO - Configuring app...
2024-08-07 12:38:57,569 - app - INFO - Setting up CORS...
2024-08-07 12:38:57,569 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 12:38:57,784 - app - INFO - Initializing JWT manager...
2024-08-07 12:38:57,784 - app - INFO - Setting up rate limiting...
2024-08-07 12:38:57,785 - app - INFO - Setting up database...
2024-08-07 12:38:57,785 - app - INFO - Starting database setup...
2024-08-07 12:38:58,333 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 12:38:58,334 - app - INFO - Database setup completed successfully
2024-08-07 12:38:58,334 - app - INFO - Registering error handler...
2024-08-07 12:38:58,334 - app - INFO - Initializing CLI commands...
2024-08-07 12:38:58,335 - app - INFO - Registering routes...
2024-08-07 12:38:58,341 - app - INFO - Initializing services...
2024-08-07 12:38:58,350 - app - INFO - Initializing email service...
2024-08-07 12:38:58,350 - app - INFO - Setting up scheduler...
2024-08-07 12:38:58,357 - app - INFO - Initializing scheduler...
2024-08-07 12:38:58,358 - app.scheduler - INFO - Scheduler initialized
2024-08-07 12:38:58,358 - app - INFO - Application initialized successfully
2024-08-07 12:38:59,525 - app - INFO - Initializing Flask app...
2024-08-07 12:38:59,526 - app - INFO - Configuring app...
2024-08-07 12:38:59,526 - app - INFO - Setting up CORS...
2024-08-07 12:38:59,527 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 12:38:59,687 - app - INFO - Initializing JWT manager...
2024-08-07 12:38:59,688 - app - INFO - Setting up rate limiting...
2024-08-07 12:38:59,689 - app - INFO - Setting up database...
2024-08-07 12:38:59,689 - app - INFO - Starting database setup...
2024-08-07 12:39:00,203 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 12:39:00,203 - app - INFO - Database setup completed successfully
2024-08-07 12:39:00,204 - app - INFO - Registering error handler...
2024-08-07 12:39:00,204 - app - INFO - Initializing CLI commands...
2024-08-07 12:39:00,204 - app - INFO - Registering routes...
2024-08-07 12:39:00,211 - app - INFO - Initializing services...
2024-08-07 12:39:00,220 - app - INFO - Initializing email service...
2024-08-07 12:39:00,221 - app - INFO - Setting up scheduler...
2024-08-07 12:39:00,226 - app - INFO - Initializing scheduler...
2024-08-07 12:39:00,227 - app.scheduler - INFO - Scheduler initialized
2024-08-07 12:39:00,227 - app - INFO - Application initialized successfully
2024-08-07 12:39:11,672 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:12,210 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:12,432 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 12:39:12,433 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:12,909 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:12,949 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 12:39:12,954 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:13,457 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:13,527 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:39:13,533 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 12:39:13,533 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:14,064 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:14,111 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 12:39:14,116 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:14,650 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:14,696 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:39:15,182 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:15,734 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:15,771 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:39:15,777 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:16,278 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:16,319 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:39:48,729 - app - INFO - Initializing Flask app...
2024-08-07 12:39:48,730 - app - INFO - Configuring app...
2024-08-07 12:39:48,730 - app - INFO - Setting up CORS...
2024-08-07 12:39:48,730 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 12:39:48,888 - app - INFO - Initializing JWT manager...
2024-08-07 12:39:48,889 - app - INFO - Setting up rate limiting...
2024-08-07 12:39:48,889 - app - INFO - Setting up database...
2024-08-07 12:39:48,889 - app - INFO - Starting database setup...
2024-08-07 12:39:49,390 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 12:39:49,390 - app - INFO - Database setup completed successfully
2024-08-07 12:39:49,390 - app - INFO - Registering error handler...
2024-08-07 12:39:49,391 - app - INFO - Initializing CLI commands...
2024-08-07 12:39:49,391 - app - INFO - Registering routes...
2024-08-07 12:39:49,411 - app - INFO - Initializing services...
2024-08-07 12:39:49,420 - app - INFO - Initializing email service...
2024-08-07 12:39:49,420 - app - INFO - Setting up scheduler...
2024-08-07 12:39:49,423 - app - INFO - Initializing scheduler...
2024-08-07 12:39:49,424 - app.scheduler - INFO - Scheduler initialized
2024-08-07 12:39:49,424 - app - INFO - Application initialized successfully
2024-08-07 12:39:49,657 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:50,180 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:50,224 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:39:50,230 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:50,775 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:50,812 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:39:50,819 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:51,299 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:51,349 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:39:51,355 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:51,922 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:51,964 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:39:56,452 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:39:56,998 - app.database - INFO - Database connection established successfully
2024-08-07 12:39:57,205 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 12:40:03,963 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: This trial is for adolescents aged 12-21 studying alcohol abuse. The patient is 31 years old and doesn't have a mentioned alcohol abuse problem.\n\nNone of these trials match the patient's profile of a 31-year-old male with depression and anxiety. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 12:40:03,963 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: This trial is for adolescents aged 12-21 studying alcohol abuse. The patient is 31 years old and doesn't have a mentioned alcohol abuse problem.\n\nNone of these trials match the patient's profile of a 31-year-old male with depression and anxiety. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 12:40:03,964 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient doesn't have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older men (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: This trial is for adolescents aged 12-21 studying alcohol abuse. The patient is 31 years old and doesn't have a mentioned alcohol abuse problem.

None of these trials match the patient's profile of a 31-year-old male with depression and anxiety. Therefore, the output is an empty array:

[]
2024-08-07 12:40:03,964 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 12:40:03,965 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 12:40:05,148 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 12:40:10,931 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trial, I've determined that there are no suitable matches with a compatibility score of 70 or higher. The reasons for this are:\n\n1. The patient's medical conditions (depression and anxiety) do not align with the conditions being studied in the clinical trial (Sarcopenia, Sarcopenic Obesity, Incisional Hernia).\n\n2. The trial focuses on complex abdominal wall surgery, which is not mentioned in the patient's profile.\n\n3. The patient's age (31 years old) does not seem to be a primary target for this study, which appears to focus more on older populations at risk for sarcopenia.\n\n4. The trial's inclusion criteria specifically mention patients with incisional hernias, which is not part of the patient's medical history.\n\nGiven these factors, the compatibility score would be well below the 70 threshold. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-07 12:40:10,931 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trial, I've determined that there are no suitable matches with a compatibility score of 70 or higher. The reasons for this are:\n\n1. The patient's medical conditions (depression and anxiety) do not align with the conditions being studied in the clinical trial (Sarcopenia, Sarcopenic Obesity, Incisional Hernia).\n\n2. The trial focuses on complex abdominal wall surgery, which is not mentioned in the patient's profile.\n\n3. The patient's age (31 years old) does not seem to be a primary target for this study, which appears to focus more on older populations at risk for sarcopenia.\n\n4. The trial's inclusion criteria specifically mention patients with incisional hernias, which is not part of the patient's medical history.\n\nGiven these factors, the compatibility score would be well below the 70 threshold. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-07 12:40:10,932 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trial, I've determined that there are no suitable matches with a compatibility score of 70 or higher. The reasons for this are:

1. The patient's medical conditions (depression and anxiety) do not align with the conditions being studied in the clinical trial (Sarcopenia, Sarcopenic Obesity, Incisional Hernia).

2. The trial focuses on complex abdominal wall surgery, which is not mentioned in the patient's profile.

3. The patient's age (31 years old) does not seem to be a primary target for this study, which appears to focus more on older populations at risk for sarcopenia.

4. The trial's inclusion criteria specifically mention patients with incisional hernias, which is not part of the patient's medical history.

Given these factors, the compatibility score would be well below the 70 threshold. Therefore, the output in the requested JSON format is:

[]

This empty array indicates that no trials match with a score of 70 or higher for this patient.
2024-08-07 12:40:10,932 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 12:40:10,932 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 12:40:12,126 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 12:40:17,322 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on:\n\n1. Heart disease risk factors and healthy aging\n2. Diabetes prevention in Korean and South Asian Americans\n3. PTSD in military veterans\n4. Virtual reality for children with cerebral palsy\n\nThese trials do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-07 12:40:17,322 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on:\n\n1. Heart disease risk factors and healthy aging\n2. Diabetes prevention in Korean and South Asian Americans\n3. PTSD in military veterans\n4. Virtual reality for children with cerebral palsy\n\nThese trials do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.", type='text')]
2024-08-07 12:40:17,322 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials specifically target depression or anxiety. The trials focus on:

1. Heart disease risk factors and healthy aging
2. Diabetes prevention in Korean and South Asian Americans
3. PTSD in military veterans
4. Virtual reality for children with cerebral palsy

These trials do not align closely with the patient's profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are included in the output.
2024-08-07 12:40:17,322 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 12:40:17,322 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 12:40:18,500 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 12:40:21,764 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) doesn't align closely with the eligibility criteria or conditions targeted in the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 12:40:21,764 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) doesn't align closely with the eligibility criteria or conditions targeted in the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 12:40:21,764 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) doesn't align closely with the eligibility criteria or conditions targeted in the provided clinical trials, which focus on type 2 diabetes and non-small cell lung cancer.

Therefore, the output is an empty array:

[]
2024-08-07 12:40:21,764 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 12:40:21,765 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 12:40:22,938 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 12:40:28,912 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 12:40:28,912 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 12:40:28,913 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.

2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.

3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-07 12:40:28,913 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 12:40:28,913 - app.services.trial_matching_service - ERROR - Error processing batch for user 66af0d2d118d8e248b49a856: object NoneType can't be used in 'await' expression
2024-08-07 12:40:30,124 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 12:45:10,130 - app - INFO - Initializing Flask app...
2024-08-07 12:45:10,131 - app - INFO - Configuring app...
2024-08-07 12:45:10,132 - app - INFO - Setting up CORS...
2024-08-07 12:45:10,132 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 12:45:10,396 - app - INFO - Initializing JWT manager...
2024-08-07 12:45:10,396 - app - INFO - Setting up rate limiting...
2024-08-07 12:45:10,397 - app - INFO - Setting up database...
2024-08-07 12:45:10,398 - app - INFO - Starting database setup...
2024-08-07 12:45:11,040 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 12:45:11,040 - app - INFO - Database setup completed successfully
2024-08-07 12:45:11,041 - app - INFO - Registering error handler...
2024-08-07 12:45:11,041 - app - INFO - Initializing CLI commands...
2024-08-07 12:45:11,041 - app - INFO - Registering routes...
2024-08-07 12:45:11,048 - app - INFO - Initializing services...
2024-08-07 12:45:11,058 - app - INFO - Initializing email service...
2024-08-07 12:45:11,058 - app - INFO - Setting up scheduler...
2024-08-07 12:45:11,073 - app - INFO - Initializing scheduler...
2024-08-07 12:45:11,074 - app.scheduler - INFO - Scheduler initialized
2024-08-07 12:45:11,075 - app - INFO - Application initialized successfully
2024-08-07 12:45:12,705 - app - INFO - Initializing Flask app...
2024-08-07 12:45:12,707 - app - INFO - Configuring app...
2024-08-07 12:45:12,708 - app - INFO - Setting up CORS...
2024-08-07 12:45:12,708 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 12:45:12,959 - app - INFO - Initializing JWT manager...
2024-08-07 12:45:12,960 - app - INFO - Setting up rate limiting...
2024-08-07 12:45:12,960 - app - INFO - Setting up database...
2024-08-07 12:45:12,961 - app - INFO - Starting database setup...
2024-08-07 12:45:13,542 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 12:45:13,542 - app - INFO - Database setup completed successfully
2024-08-07 12:45:13,543 - app - INFO - Registering error handler...
2024-08-07 12:45:13,543 - app - INFO - Initializing CLI commands...
2024-08-07 12:45:13,543 - app - INFO - Registering routes...
2024-08-07 12:45:13,550 - app - INFO - Initializing services...
2024-08-07 12:45:13,559 - app - INFO - Initializing email service...
2024-08-07 12:45:13,560 - app - INFO - Setting up scheduler...
2024-08-07 12:45:13,563 - app - INFO - Initializing scheduler...
2024-08-07 12:45:13,563 - app.scheduler - INFO - Scheduler initialized
2024-08-07 12:45:13,564 - app - INFO - Application initialized successfully
2024-08-07 12:45:22,999 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:45:23,579 - app.database - INFO - Database connection established successfully
2024-08-07 12:45:23,850 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 12:45:23,851 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:45:24,381 - app.database - INFO - Database connection established successfully
2024-08-07 12:45:24,421 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 12:45:24,427 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:45:25,011 - app.database - INFO - Database connection established successfully
2024-08-07 12:45:25,052 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:45:25,059 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 12:45:25,059 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:45:25,671 - app.database - INFO - Database connection established successfully
2024-08-07 12:45:25,706 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 12:45:25,712 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:45:26,226 - app.database - INFO - Database connection established successfully
2024-08-07 12:45:26,272 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:45:27,260 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:45:27,856 - app.database - INFO - Database connection established successfully
2024-08-07 12:45:27,898 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:45:27,905 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:45:28,541 - app.database - INFO - Database connection established successfully
2024-08-07 12:45:28,580 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 12:46:20,928 - app.database - INFO - Attempting to establish database connection...
2024-08-07 12:46:21,508 - app.database - INFO - Database connection established successfully
2024-08-07 12:46:21,727 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-07 13:16:18,315 - app - INFO - Initializing Flask app...
2024-08-07 13:16:18,317 - app - INFO - Configuring app...
2024-08-07 13:16:18,317 - app - INFO - Setting up CORS...
2024-08-07 13:16:18,317 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 13:16:18,496 - app - INFO - Initializing JWT manager...
2024-08-07 13:16:18,496 - app - INFO - Setting up rate limiting...
2024-08-07 13:16:18,497 - app - INFO - Setting up database...
2024-08-07 13:16:18,497 - app - INFO - Starting database setup...
2024-08-07 13:16:20,190 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 13:16:20,191 - app - INFO - Database setup completed successfully
2024-08-07 13:16:20,191 - app - INFO - Registering error handler...
2024-08-07 13:16:20,191 - app - INFO - Initializing CLI commands...
2024-08-07 13:16:20,192 - app - INFO - Registering routes...
2024-08-07 13:20:32,260 - app - INFO - Initializing Flask app...
2024-08-07 13:20:32,262 - app - INFO - Configuring app...
2024-08-07 13:20:32,262 - app - INFO - Setting up CORS...
2024-08-07 13:20:32,262 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 13:20:32,438 - app - INFO - Initializing JWT manager...
2024-08-07 13:20:32,438 - app - INFO - Setting up rate limiting...
2024-08-07 13:20:32,439 - app - INFO - Setting up database...
2024-08-07 13:20:32,440 - app - INFO - Starting database setup...
2024-08-07 13:20:33,877 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 13:20:33,877 - app - INFO - Database setup completed successfully
2024-08-07 13:20:33,878 - app - INFO - Registering error handler...
2024-08-07 13:20:33,878 - app - INFO - Initializing CLI commands...
2024-08-07 13:20:33,879 - app - INFO - Registering routes...
2024-08-07 13:20:56,590 - app - INFO - Initializing Flask app...
2024-08-07 13:20:56,591 - app - INFO - Configuring app...
2024-08-07 13:20:56,591 - app - INFO - Setting up CORS...
2024-08-07 13:20:56,591 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 13:20:56,766 - app - INFO - Initializing JWT manager...
2024-08-07 13:20:56,767 - app - INFO - Setting up rate limiting...
2024-08-07 13:20:56,767 - app - INFO - Setting up database...
2024-08-07 13:20:56,768 - app - INFO - Starting database setup...
2024-08-07 13:20:58,289 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 13:20:58,289 - app - INFO - Database setup completed successfully
2024-08-07 13:20:58,290 - app - INFO - Registering error handler...
2024-08-07 13:20:58,290 - app - INFO - Initializing CLI commands...
2024-08-07 13:20:58,290 - app - INFO - Registering routes...
2024-08-07 13:20:58,320 - app - INFO - Initializing services...
2024-08-07 13:20:58,330 - app - INFO - Initializing email service...
2024-08-07 13:20:58,331 - app - INFO - Setting up scheduler...
2024-08-07 13:20:58,338 - app - INFO - Initializing scheduler...
2024-08-07 13:20:58,339 - app.scheduler - INFO - Scheduler initialized
2024-08-07 13:20:58,339 - app - INFO - Application initialized successfully
2024-08-07 13:20:59,851 - app - INFO - Initializing Flask app...
2024-08-07 13:20:59,852 - app - INFO - Configuring app...
2024-08-07 13:20:59,853 - app - INFO - Setting up CORS...
2024-08-07 13:20:59,853 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 13:21:00,059 - app - INFO - Initializing JWT manager...
2024-08-07 13:21:00,060 - app - INFO - Setting up rate limiting...
2024-08-07 13:21:00,060 - app - INFO - Setting up database...
2024-08-07 13:21:00,061 - app - INFO - Starting database setup...
2024-08-07 13:21:00,726 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 13:21:00,726 - app - INFO - Database setup completed successfully
2024-08-07 13:21:00,727 - app - INFO - Registering error handler...
2024-08-07 13:21:00,727 - app - INFO - Initializing CLI commands...
2024-08-07 13:21:00,727 - app - INFO - Registering routes...
2024-08-07 13:21:00,733 - app - INFO - Initializing services...
2024-08-07 13:21:00,743 - app - INFO - Initializing email service...
2024-08-07 13:21:00,743 - app - INFO - Setting up scheduler...
2024-08-07 13:21:00,747 - app - INFO - Initializing scheduler...
2024-08-07 13:21:00,748 - app.scheduler - INFO - Scheduler initialized
2024-08-07 13:21:00,748 - app - INFO - Application initialized successfully
2024-08-07 13:21:09,801 - app.database - INFO - Attempting to establish database connection...
2024-08-07 13:21:10,347 - app.database - INFO - Database connection established successfully
2024-08-07 13:21:10,673 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 13:21:10,673 - app.database - INFO - Attempting to establish database connection...
2024-08-07 13:21:11,213 - app.database - INFO - Database connection established successfully
2024-08-07 13:21:11,264 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 13:21:11,270 - app.database - INFO - Attempting to establish database connection...
2024-08-07 13:21:11,990 - app.database - INFO - Database connection established successfully
2024-08-07 13:21:12,042 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 13:21:12,048 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 13:21:12,048 - app.database - INFO - Attempting to establish database connection...
2024-08-07 13:21:12,819 - app.database - INFO - Database connection established successfully
2024-08-07 13:21:12,868 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 13:21:12,875 - app.database - INFO - Attempting to establish database connection...
2024-08-07 13:21:13,600 - app.database - INFO - Database connection established successfully
2024-08-07 13:21:13,727 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 13:21:13,744 - app.database - INFO - Attempting to establish database connection...
2024-08-07 13:21:14,518 - app.database - INFO - Database connection established successfully
2024-08-07 13:21:14,599 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 13:21:14,605 - app.database - INFO - Attempting to establish database connection...
2024-08-07 13:21:15,339 - app.database - INFO - Database connection established successfully
2024-08-07 13:21:15,418 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:04:23,401 - app - INFO - Initializing Flask app...
2024-08-07 14:04:23,403 - app - INFO - Configuring app...
2024-08-07 14:04:23,404 - app - INFO - Setting up CORS...
2024-08-07 14:04:23,405 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:04:23,805 - app - INFO - Initializing JWT manager...
2024-08-07 14:04:23,805 - app - INFO - Setting up rate limiting...
2024-08-07 14:04:23,806 - app - INFO - Setting up database...
2024-08-07 14:04:23,807 - app - INFO - Starting database setup...
2024-08-07 14:04:24,418 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:04:24,419 - app - INFO - Database setup completed successfully
2024-08-07 14:04:24,419 - app - INFO - Registering error handler...
2024-08-07 14:04:24,419 - app - INFO - Initializing CLI commands...
2024-08-07 14:04:24,419 - app - INFO - Registering routes...
2024-08-07 14:04:48,935 - app - INFO - Initializing Flask app...
2024-08-07 14:04:48,937 - app - INFO - Configuring app...
2024-08-07 14:04:48,937 - app - INFO - Setting up CORS...
2024-08-07 14:04:48,937 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:04:49,259 - app - INFO - Initializing JWT manager...
2024-08-07 14:04:49,259 - app - INFO - Setting up rate limiting...
2024-08-07 14:04:49,260 - app - INFO - Setting up database...
2024-08-07 14:04:49,261 - app - INFO - Starting database setup...
2024-08-07 14:04:49,752 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:04:49,752 - app - INFO - Database setup completed successfully
2024-08-07 14:04:49,753 - app - INFO - Registering error handler...
2024-08-07 14:04:49,753 - app - INFO - Initializing CLI commands...
2024-08-07 14:04:49,754 - app - INFO - Registering routes...
2024-08-07 14:11:28,893 - app - INFO - Initializing Flask app...
2024-08-07 14:11:28,895 - app - INFO - Configuring app...
2024-08-07 14:11:28,896 - app - INFO - Setting up CORS...
2024-08-07 14:11:28,896 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:11:29,310 - app - INFO - Initializing JWT manager...
2024-08-07 14:11:29,311 - app - INFO - Setting up rate limiting...
2024-08-07 14:11:29,311 - app - INFO - Setting up database...
2024-08-07 14:11:29,312 - app - INFO - Starting database setup...
2024-08-07 14:11:29,880 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:11:29,880 - app - INFO - Database setup completed successfully
2024-08-07 14:11:29,881 - app - INFO - Registering error handler...
2024-08-07 14:11:29,881 - app - INFO - Initializing CLI commands...
2024-08-07 14:11:29,881 - app - INFO - Registering routes...
2024-08-07 14:13:45,705 - app - INFO - Initializing Flask app...
2024-08-07 14:13:45,707 - app - INFO - Configuring app...
2024-08-07 14:13:45,707 - app - INFO - Setting up CORS...
2024-08-07 14:13:45,708 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:13:46,044 - app - INFO - Initializing JWT manager...
2024-08-07 14:13:46,045 - app - INFO - Setting up rate limiting...
2024-08-07 14:13:46,045 - app - INFO - Setting up database...
2024-08-07 14:13:46,046 - app - INFO - Starting database setup...
2024-08-07 14:13:46,918 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:13:46,919 - app - INFO - Database setup completed successfully
2024-08-07 14:13:46,919 - app - INFO - Registering error handler...
2024-08-07 14:13:46,919 - app - INFO - Initializing CLI commands...
2024-08-07 14:13:46,920 - app - INFO - Registering routes...
2024-08-07 14:16:11,342 - app - INFO - Initializing Flask app...
2024-08-07 14:16:11,344 - app - INFO - Configuring app...
2024-08-07 14:16:11,344 - app - INFO - Setting up CORS...
2024-08-07 14:16:11,344 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:16:11,672 - app - INFO - Initializing JWT manager...
2024-08-07 14:16:11,672 - app - INFO - Setting up rate limiting...
2024-08-07 14:16:11,673 - app - INFO - Setting up database...
2024-08-07 14:16:11,674 - app - INFO - Starting database setup...
2024-08-07 14:16:12,311 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:16:12,311 - app - INFO - Database setup completed successfully
2024-08-07 14:16:12,312 - app - INFO - Registering error handler...
2024-08-07 14:16:12,312 - app - INFO - Initializing CLI commands...
2024-08-07 14:16:12,312 - app - INFO - Registering routes...
2024-08-07 14:16:12,315 - app - INFO - Initializing services...
2024-08-07 14:16:12,330 - app - INFO - Initializing email service...
2024-08-07 14:16:12,330 - app - INFO - Setting up scheduler...
2024-08-07 14:16:12,346 - app - INFO - Initializing scheduler...
2024-08-07 14:16:12,347 - app.scheduler - INFO - Scheduler initialized
2024-08-07 14:16:12,347 - app - INFO - Application initialized successfully
2024-08-07 14:16:14,963 - app - INFO - Initializing Flask app...
2024-08-07 14:16:14,965 - app - INFO - Configuring app...
2024-08-07 14:16:14,966 - app - INFO - Setting up CORS...
2024-08-07 14:16:14,966 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:16:15,280 - app - INFO - Initializing JWT manager...
2024-08-07 14:16:15,281 - app - INFO - Setting up rate limiting...
2024-08-07 14:16:15,282 - app - INFO - Setting up database...
2024-08-07 14:16:15,283 - app - INFO - Starting database setup...
2024-08-07 14:16:15,885 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:16:15,886 - app - INFO - Database setup completed successfully
2024-08-07 14:16:15,887 - app - INFO - Registering error handler...
2024-08-07 14:16:15,887 - app - INFO - Initializing CLI commands...
2024-08-07 14:16:15,888 - app - INFO - Registering routes...
2024-08-07 14:16:15,892 - app - INFO - Initializing services...
2024-08-07 14:16:15,906 - app - INFO - Initializing email service...
2024-08-07 14:16:15,907 - app - INFO - Setting up scheduler...
2024-08-07 14:16:15,914 - app - INFO - Initializing scheduler...
2024-08-07 14:16:15,915 - app.scheduler - INFO - Scheduler initialized
2024-08-07 14:16:15,915 - app - INFO - Application initialized successfully
2024-08-07 14:16:16,295 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:16:16,310 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:16:16,320 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:16:16,333 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:16:16,350 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:16:17,900 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:16:18,956 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:16:19,876 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:16:31,183 - app.routes.trial_matching - INFO - Client disconnected
2024-08-07 14:16:31,488 - app.routes.trial_matching - INFO - Client disconnected
2024-08-07 14:16:32,537 - app.routes.trial_matching - INFO - Client disconnected
2024-08-07 14:16:32,973 - app.routes.trial_matching - INFO - Client disconnected
2024-08-07 14:16:33,356 - app.routes.trial_matching - INFO - Client disconnected
2024-08-07 14:16:33,789 - app.routes.trial_matching - INFO - Client disconnected
2024-08-07 14:16:52,528 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:16:53,072 - app.database - INFO - Database connection established successfully
2024-08-07 14:16:53,580 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:16:53,581 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:16:54,135 - app.database - INFO - Database connection established successfully
2024-08-07 14:16:54,177 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:16:54,193 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:16:54,848 - app.database - INFO - Database connection established successfully
2024-08-07 14:16:54,893 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:16:54,915 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:16:54,916 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:16:55,483 - app.database - INFO - Database connection established successfully
2024-08-07 14:16:55,527 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:16:55,542 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:16:56,157 - app.database - INFO - Database connection established successfully
2024-08-07 14:16:56,202 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:16:56,326 - app.routes.trial_matching - INFO - Client disconnected
2024-08-07 14:16:56,373 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:16:56,897 - app.database - INFO - Database connection established successfully
2024-08-07 14:16:56,937 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:16:56,956 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:16:57,504 - app.database - INFO - Database connection established successfully
2024-08-07 14:16:57,543 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:16:57,553 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:20:19,606 - app.routes.trial_matching - INFO - Client disconnected
2024-08-07 14:20:19,635 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:20:20,198 - app.database - INFO - Database connection established successfully
2024-08-07 14:20:20,242 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:20:20,317 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:20:33,139 - app - INFO - Initializing Flask app...
2024-08-07 14:20:33,140 - app - INFO - Configuring app...
2024-08-07 14:20:33,141 - app - INFO - Setting up CORS...
2024-08-07 14:20:33,142 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:20:33,461 - app - INFO - Initializing JWT manager...
2024-08-07 14:20:33,462 - app - INFO - Setting up rate limiting...
2024-08-07 14:20:33,462 - app - INFO - Setting up database...
2024-08-07 14:20:33,463 - app - INFO - Starting database setup...
2024-08-07 14:20:33,996 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:20:33,996 - app - INFO - Database setup completed successfully
2024-08-07 14:20:33,996 - app - INFO - Registering error handler...
2024-08-07 14:20:33,997 - app - INFO - Initializing CLI commands...
2024-08-07 14:20:33,997 - app - INFO - Registering routes...
2024-08-07 14:20:33,999 - app - INFO - Initializing services...
2024-08-07 14:20:34,009 - app - INFO - Initializing email service...
2024-08-07 14:20:34,009 - app - INFO - Setting up scheduler...
2024-08-07 14:20:34,014 - app - INFO - Initializing scheduler...
2024-08-07 14:20:34,015 - app.scheduler - INFO - Scheduler initialized
2024-08-07 14:20:34,016 - app - INFO - Application initialized successfully
2024-08-07 14:20:36,491 - app - INFO - Initializing Flask app...
2024-08-07 14:20:36,493 - app - INFO - Configuring app...
2024-08-07 14:20:36,494 - app - INFO - Setting up CORS...
2024-08-07 14:20:36,494 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:20:36,848 - app - INFO - Initializing JWT manager...
2024-08-07 14:20:36,849 - app - INFO - Setting up rate limiting...
2024-08-07 14:20:36,850 - app - INFO - Setting up database...
2024-08-07 14:20:36,851 - app - INFO - Starting database setup...
2024-08-07 14:20:37,398 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:20:37,398 - app - INFO - Database setup completed successfully
2024-08-07 14:20:37,399 - app - INFO - Registering error handler...
2024-08-07 14:20:37,399 - app - INFO - Initializing CLI commands...
2024-08-07 14:20:37,399 - app - INFO - Registering routes...
2024-08-07 14:20:37,402 - app - INFO - Initializing services...
2024-08-07 14:20:37,416 - app - INFO - Initializing email service...
2024-08-07 14:20:37,417 - app - INFO - Setting up scheduler...
2024-08-07 14:20:37,422 - app - INFO - Initializing scheduler...
2024-08-07 14:20:37,424 - app.scheduler - INFO - Scheduler initialized
2024-08-07 14:20:37,424 - app - INFO - Application initialized successfully
2024-08-07 14:20:38,061 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:20:42,514 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:20:48,742 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:20:49,280 - app.database - INFO - Database connection established successfully
2024-08-07 14:20:49,796 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:20:49,797 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:20:50,317 - app.database - INFO - Database connection established successfully
2024-08-07 14:20:50,359 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:20:50,375 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:20:50,907 - app.database - INFO - Database connection established successfully
2024-08-07 14:20:50,948 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:20:50,958 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:20:50,958 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:20:51,477 - app.database - INFO - Database connection established successfully
2024-08-07 14:20:51,515 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:20:51,533 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:20:52,117 - app.database - INFO - Database connection established successfully
2024-08-07 14:20:52,164 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:20:52,181 - app.routes.trial_matching - INFO - Client disconnected
2024-08-07 14:20:52,214 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:20:52,809 - app.database - INFO - Database connection established successfully
2024-08-07 14:20:52,851 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:20:52,871 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:20:53,411 - app.database - INFO - Database connection established successfully
2024-08-07 14:20:53,476 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:20:53,484 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:24:46,698 - app - INFO - Initializing Flask app...
2024-08-07 14:24:46,699 - app - INFO - Configuring app...
2024-08-07 14:24:46,700 - app - INFO - Setting up CORS...
2024-08-07 14:24:46,700 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:24:46,998 - app - INFO - Initializing JWT manager...
2024-08-07 14:24:46,999 - app - INFO - Setting up rate limiting...
2024-08-07 14:24:47,011 - app - INFO - Setting up database...
2024-08-07 14:24:47,011 - app - INFO - Starting database setup...
2024-08-07 14:24:47,720 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:24:47,720 - app - INFO - Database setup completed successfully
2024-08-07 14:24:47,721 - app - INFO - Registering error handler...
2024-08-07 14:24:47,721 - app - INFO - Initializing CLI commands...
2024-08-07 14:24:47,721 - app - INFO - Registering routes...
2024-08-07 14:24:47,724 - app - INFO - Initializing services...
2024-08-07 14:24:47,735 - app - INFO - Initializing email service...
2024-08-07 14:24:47,735 - app - INFO - Setting up scheduler...
2024-08-07 14:24:47,739 - app - INFO - Initializing scheduler...
2024-08-07 14:24:47,740 - app.scheduler - INFO - Scheduler initialized
2024-08-07 14:24:47,740 - app - INFO - Application initialized successfully
2024-08-07 14:24:50,242 - app - INFO - Initializing Flask app...
2024-08-07 14:24:50,244 - app - INFO - Configuring app...
2024-08-07 14:24:50,244 - app - INFO - Setting up CORS...
2024-08-07 14:24:50,245 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:24:50,585 - app - INFO - Initializing JWT manager...
2024-08-07 14:24:50,586 - app - INFO - Setting up rate limiting...
2024-08-07 14:24:50,587 - app - INFO - Setting up database...
2024-08-07 14:24:50,588 - app - INFO - Starting database setup...
2024-08-07 14:24:51,119 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:24:51,120 - app - INFO - Database setup completed successfully
2024-08-07 14:24:51,121 - app - INFO - Registering error handler...
2024-08-07 14:24:51,121 - app - INFO - Initializing CLI commands...
2024-08-07 14:24:51,121 - app - INFO - Registering routes...
2024-08-07 14:24:51,123 - app - INFO - Initializing services...
2024-08-07 14:24:51,136 - app - INFO - Initializing email service...
2024-08-07 14:24:51,136 - app - INFO - Setting up scheduler...
2024-08-07 14:24:51,142 - app - INFO - Initializing scheduler...
2024-08-07 14:24:51,143 - app.scheduler - INFO - Scheduler initialized
2024-08-07 14:24:51,144 - app - INFO - Application initialized successfully
2024-08-07 14:24:52,267 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:24:54,176 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:24:54,882 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:25:01,341 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:25:01,902 - app.database - INFO - Database connection established successfully
2024-08-07 14:25:02,404 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:25:02,406 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:25:02,957 - app.database - INFO - Database connection established successfully
2024-08-07 14:25:02,996 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:25:03,012 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:25:03,599 - app.database - INFO - Database connection established successfully
2024-08-07 14:25:03,651 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:25:03,669 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:25:03,671 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:25:04,231 - app.database - INFO - Database connection established successfully
2024-08-07 14:25:04,280 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:25:04,297 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:25:04,823 - app.database - INFO - Database connection established successfully
2024-08-07 14:25:04,870 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:25:04,875 - app.routes.trial_matching - INFO - Client disconnected
2024-08-07 14:25:04,912 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:25:05,514 - app.database - INFO - Database connection established successfully
2024-08-07 14:25:05,560 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:25:05,574 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:25:06,172 - app.database - INFO - Database connection established successfully
2024-08-07 14:25:06,214 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 14:25:06,226 - app.routes.trial_matching - INFO - Client connected
2024-08-07 14:25:32,762 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 14:25:32,781 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 14:25:32,781 - app.routes.trial_matching - ERROR - Error stopping matching process for user 66af0d2d118d8e248b49a856: 'TrialMatchingService' object has no attribute 'stop_matching'
2024-08-07 14:43:18,247 - app - INFO - Initializing Flask app...
2024-08-07 14:43:18,248 - app - INFO - Configuring app...
2024-08-07 14:43:18,249 - app - INFO - Setting up CORS...
2024-08-07 14:43:18,249 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:43:18,608 - app - INFO - Initializing JWT manager...
2024-08-07 14:43:18,608 - app - INFO - Setting up rate limiting...
2024-08-07 14:43:18,609 - app - INFO - Setting up database...
2024-08-07 14:43:18,609 - app - INFO - Starting database setup...
2024-08-07 14:43:19,134 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:43:19,134 - app - INFO - Database setup completed successfully
2024-08-07 14:43:19,135 - app - INFO - Registering error handler...
2024-08-07 14:43:19,135 - app - INFO - Initializing CLI commands...
2024-08-07 14:43:19,135 - app - INFO - Registering routes...
2024-08-07 14:43:19,152 - app - INFO - Initializing services...
2024-08-07 14:43:19,165 - app - INFO - Initializing email service...
2024-08-07 14:43:19,165 - app - INFO - Setting up scheduler...
2024-08-07 14:43:19,171 - app - INFO - Initializing scheduler...
2024-08-07 14:43:19,172 - app.scheduler - INFO - Scheduler initialized
2024-08-07 14:43:19,172 - app - INFO - Application initialized successfully
2024-08-07 14:43:21,455 - app - INFO - Initializing Flask app...
2024-08-07 14:43:21,459 - app - INFO - Configuring app...
2024-08-07 14:43:21,461 - app - INFO - Setting up CORS...
2024-08-07 14:43:21,463 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:43:21,795 - app - INFO - Initializing JWT manager...
2024-08-07 14:43:21,795 - app - INFO - Setting up rate limiting...
2024-08-07 14:43:21,796 - app - INFO - Setting up database...
2024-08-07 14:43:21,797 - app - INFO - Starting database setup...
2024-08-07 14:43:22,314 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:43:22,315 - app - INFO - Database setup completed successfully
2024-08-07 14:43:22,315 - app - INFO - Registering error handler...
2024-08-07 14:43:22,316 - app - INFO - Initializing CLI commands...
2024-08-07 14:43:22,316 - app - INFO - Registering routes...
2024-08-07 14:43:22,323 - app - INFO - Initializing services...
2024-08-07 14:43:22,366 - app - INFO - Initializing email service...
2024-08-07 14:43:22,366 - app - INFO - Setting up scheduler...
2024-08-07 14:43:22,389 - app - INFO - Initializing scheduler...
2024-08-07 14:43:22,389 - app.scheduler - INFO - Scheduler initialized
2024-08-07 14:43:22,390 - app - INFO - Application initialized successfully
2024-08-07 14:43:34,026 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:43:34,653 - app.database - INFO - Database connection established successfully
2024-08-07 14:43:35,260 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 14:43:35,280 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 14:43:35,298 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:43:35,299 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:43:36,297 - app.database - INFO - Database connection established successfully
2024-08-07 14:43:36,340 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:43:36,354 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:43:36,355 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:43:36,994 - app.database - INFO - Database connection established successfully
2024-08-07 14:43:37,036 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:55:46,411 - app - INFO - Initializing Flask app...
2024-08-07 14:55:46,413 - app - INFO - Configuring app...
2024-08-07 14:55:46,414 - app - INFO - Setting up CORS...
2024-08-07 14:55:46,414 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:55:46,608 - app - INFO - Initializing JWT manager...
2024-08-07 14:55:46,609 - app - INFO - Setting up rate limiting...
2024-08-07 14:55:46,609 - app - INFO - Setting up database...
2024-08-07 14:55:46,610 - app - INFO - Starting database setup...
2024-08-07 14:55:47,201 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:55:47,201 - app - INFO - Database setup completed successfully
2024-08-07 14:55:47,202 - app - INFO - Registering error handler...
2024-08-07 14:55:47,202 - app - INFO - Initializing CLI commands...
2024-08-07 14:55:47,202 - app - INFO - Registering routes...
2024-08-07 14:55:47,206 - app - INFO - Initializing services...
2024-08-07 14:55:47,219 - app - INFO - Initializing email service...
2024-08-07 14:55:47,220 - app - INFO - Setting up scheduler...
2024-08-07 14:55:47,222 - app - INFO - Initializing scheduler...
2024-08-07 14:55:47,223 - app.scheduler - INFO - Scheduler initialized
2024-08-07 14:55:47,223 - app - INFO - Application initialized successfully
2024-08-07 14:56:02,331 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:56:02,871 - app.database - INFO - Database connection established successfully
2024-08-07 14:56:03,365 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 14:56:03,383 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 14:56:03,399 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:56:03,400 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:56:03,993 - app.database - INFO - Database connection established successfully
2024-08-07 14:56:04,032 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:56:04,054 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:56:04,056 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:56:04,637 - app.database - INFO - Database connection established successfully
2024-08-07 14:56:04,676 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:56:27,310 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 14:56:27,333 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 14:57:38,019 - app - INFO - Initializing Flask app...
2024-08-07 14:57:38,023 - app - INFO - Configuring app...
2024-08-07 14:57:38,023 - app - INFO - Setting up CORS...
2024-08-07 14:57:38,023 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:57:38,334 - app - INFO - Initializing JWT manager...
2024-08-07 14:57:38,334 - app - INFO - Setting up rate limiting...
2024-08-07 14:57:38,335 - app - INFO - Setting up database...
2024-08-07 14:57:38,336 - app - INFO - Starting database setup...
2024-08-07 14:57:38,904 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:57:38,905 - app - INFO - Database setup completed successfully
2024-08-07 14:57:38,905 - app - INFO - Registering error handler...
2024-08-07 14:57:38,906 - app - INFO - Initializing CLI commands...
2024-08-07 14:57:38,906 - app - INFO - Registering routes...
2024-08-07 14:57:38,913 - app - INFO - Initializing services...
2024-08-07 14:57:38,927 - app - INFO - Initializing email service...
2024-08-07 14:57:38,927 - app - INFO - Setting up scheduler...
2024-08-07 14:57:38,932 - app - INFO - Initializing scheduler...
2024-08-07 14:57:38,933 - app.scheduler - INFO - Scheduler initialized
2024-08-07 14:57:38,934 - app - INFO - Application initialized successfully
2024-08-07 14:57:41,469 - app - INFO - Initializing Flask app...
2024-08-07 14:57:41,472 - app - INFO - Configuring app...
2024-08-07 14:57:41,473 - app - INFO - Setting up CORS...
2024-08-07 14:57:41,474 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 14:57:41,886 - app - INFO - Initializing JWT manager...
2024-08-07 14:57:41,886 - app - INFO - Setting up rate limiting...
2024-08-07 14:57:41,887 - app - INFO - Setting up database...
2024-08-07 14:57:41,888 - app - INFO - Starting database setup...
2024-08-07 14:57:42,443 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 14:57:42,443 - app - INFO - Database setup completed successfully
2024-08-07 14:57:42,444 - app - INFO - Registering error handler...
2024-08-07 14:57:42,445 - app - INFO - Initializing CLI commands...
2024-08-07 14:57:42,445 - app - INFO - Registering routes...
2024-08-07 14:57:42,451 - app - INFO - Initializing services...
2024-08-07 14:57:42,466 - app - INFO - Initializing email service...
2024-08-07 14:57:42,467 - app - INFO - Setting up scheduler...
2024-08-07 14:57:42,474 - app - INFO - Initializing scheduler...
2024-08-07 14:57:42,474 - app.scheduler - INFO - Scheduler initialized
2024-08-07 14:57:42,475 - app - INFO - Application initialized successfully
2024-08-07 14:57:51,509 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:57:52,096 - app.database - INFO - Database connection established successfully
2024-08-07 14:57:52,581 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 14:57:52,598 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 14:57:52,608 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:57:52,609 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:57:53,208 - app.database - INFO - Database connection established successfully
2024-08-07 14:57:53,249 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:57:53,269 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 14:57:53,269 - app.database - INFO - Attempting to establish database connection...
2024-08-07 14:57:53,852 - app.database - INFO - Database connection established successfully
2024-08-07 14:57:53,891 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 14:57:55,405 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 14:57:55,423 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:03:01,028 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:03:01,539 - app.database - INFO - Database connection established successfully
2024-08-07 15:03:01,792 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:03:01,793 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:03:02,322 - app.database - INFO - Database connection established successfully
2024-08-07 15:03:02,365 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:03:02,376 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:03:02,394 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:03:02,395 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:03:02,983 - app.database - INFO - Database connection established successfully
2024-08-07 15:03:03,022 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:03:03,027 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:03:12,494 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:03:12,507 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:03:14,731 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:04:51,564 - app - INFO - Initializing Flask app...
2024-08-07 15:04:51,568 - app - INFO - Configuring app...
2024-08-07 15:04:51,568 - app - INFO - Setting up CORS...
2024-08-07 15:04:51,570 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:04:52,164 - app - INFO - Initializing JWT manager...
2024-08-07 15:04:52,165 - app - INFO - Setting up rate limiting...
2024-08-07 15:04:52,166 - app - INFO - Setting up database...
2024-08-07 15:04:52,167 - app - INFO - Starting database setup...
2024-08-07 15:04:53,148 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:04:53,148 - app - INFO - Database setup completed successfully
2024-08-07 15:04:53,149 - app - INFO - Registering error handler...
2024-08-07 15:04:53,149 - app - INFO - Initializing CLI commands...
2024-08-07 15:04:53,151 - app - INFO - Registering routes...
2024-08-07 15:04:53,161 - app - INFO - Initializing services...
2024-08-07 15:04:53,180 - app - INFO - Initializing email service...
2024-08-07 15:04:53,180 - app - INFO - Setting up scheduler...
2024-08-07 15:04:53,185 - app - INFO - Initializing scheduler...
2024-08-07 15:04:53,186 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:04:53,188 - app - INFO - Application initialized successfully
2024-08-07 15:04:57,337 - app - INFO - Initializing Flask app...
2024-08-07 15:04:57,342 - app - INFO - Configuring app...
2024-08-07 15:04:57,343 - app - INFO - Setting up CORS...
2024-08-07 15:04:57,344 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:04:57,959 - app - INFO - Initializing JWT manager...
2024-08-07 15:04:57,959 - app - INFO - Setting up rate limiting...
2024-08-07 15:04:57,962 - app - INFO - Setting up database...
2024-08-07 15:04:57,963 - app - INFO - Starting database setup...
2024-08-07 15:04:58,545 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:04:58,545 - app - INFO - Database setup completed successfully
2024-08-07 15:04:58,547 - app - INFO - Registering error handler...
2024-08-07 15:04:58,548 - app - INFO - Initializing CLI commands...
2024-08-07 15:04:58,549 - app - INFO - Registering routes...
2024-08-07 15:04:58,574 - app - INFO - Initializing services...
2024-08-07 15:04:58,614 - app - INFO - Initializing email service...
2024-08-07 15:04:58,615 - app - INFO - Setting up scheduler...
2024-08-07 15:04:58,628 - app - INFO - Initializing scheduler...
2024-08-07 15:04:58,631 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:04:58,632 - app - INFO - Application initialized successfully
2024-08-07 15:05:13,018 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:05:13,636 - app.database - INFO - Database connection established successfully
2024-08-07 15:05:13,895 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:05:13,897 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:05:14,428 - app.database - INFO - Database connection established successfully
2024-08-07 15:05:14,479 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:05:14,489 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:05:14,506 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:05:14,506 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:05:15,092 - app.database - INFO - Database connection established successfully
2024-08-07 15:05:15,147 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:05:15,157 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:05:18,408 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:05:18,426 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:09:39,424 - app - INFO - Initializing Flask app...
2024-08-07 15:09:39,426 - app - INFO - Configuring app...
2024-08-07 15:09:39,426 - app - INFO - Setting up CORS...
2024-08-07 15:09:39,427 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:09:39,632 - app - INFO - Initializing JWT manager...
2024-08-07 15:09:39,632 - app - INFO - Setting up rate limiting...
2024-08-07 15:09:39,634 - app - INFO - Setting up database...
2024-08-07 15:09:39,634 - app - INFO - Starting database setup...
2024-08-07 15:09:40,245 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:09:40,246 - app - INFO - Database setup completed successfully
2024-08-07 15:09:40,246 - app - INFO - Registering error handler...
2024-08-07 15:09:40,247 - app - INFO - Initializing CLI commands...
2024-08-07 15:09:40,248 - app - INFO - Registering routes...
2024-08-07 15:09:40,275 - app - INFO - Initializing services...
2024-08-07 15:09:40,290 - app - INFO - Initializing email service...
2024-08-07 15:09:40,291 - app - INFO - Setting up scheduler...
2024-08-07 15:09:40,297 - app - INFO - Initializing scheduler...
2024-08-07 15:09:40,298 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:09:40,299 - app - INFO - Application initialized successfully
2024-08-07 15:09:51,772 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:09:52,341 - app.database - INFO - Database connection established successfully
2024-08-07 15:09:52,870 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:09:52,871 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:09:53,409 - app.database - INFO - Database connection established successfully
2024-08-07 15:09:53,451 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:09:53,468 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:09:53,507 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:09:53,508 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:09:54,049 - app.database - INFO - Database connection established successfully
2024-08-07 15:09:54,089 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:09:54,103 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:09:57,130 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:09:57,775 - app.database - INFO - Database connection established successfully
2024-08-07 15:09:57,777 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: limit must be an integer
2024-08-07 15:09:57,834 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 18, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 144, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=limit)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-07 15:09:57,872 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:09:58,420 - app.database - INFO - Database connection established successfully
2024-08-07 15:09:58,421 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: limit must be an integer
2024-08-07 15:09:58,422 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 18, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 144, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=limit)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-07 15:10:04,185 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:10:04,910 - app.database - INFO - Database connection established successfully
2024-08-07 15:10:04,911 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: limit must be an integer
2024-08-07 15:10:04,912 - app.utils.error_handlers - ERROR - General error: limit must be an integer
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 18, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 144, in get_recent_matches
    ).sort('timestamp', -1).limit(limit).to_list(length=limit)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\motor\metaprogramming.py", line 257, in return_clone
    cursor_method(self.delegate, *args, **kwargs)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\pymongo\cursor.py", line 572, in limit
    raise TypeError("limit must be an integer")
TypeError: limit must be an integer

2024-08-07 15:21:03,099 - app - INFO - Initializing Flask app...
2024-08-07 15:21:03,101 - app - INFO - Configuring app...
2024-08-07 15:21:03,102 - app - INFO - Setting up CORS...
2024-08-07 15:21:03,102 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:21:03,485 - app - INFO - Initializing JWT manager...
2024-08-07 15:21:03,485 - app - INFO - Setting up rate limiting...
2024-08-07 15:21:03,486 - app - INFO - Setting up database...
2024-08-07 15:21:03,487 - app - INFO - Starting database setup...
2024-08-07 15:21:04,067 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:21:04,067 - app - INFO - Database setup completed successfully
2024-08-07 15:21:04,068 - app - INFO - Registering error handler...
2024-08-07 15:21:04,068 - app - INFO - Initializing CLI commands...
2024-08-07 15:21:04,068 - app - INFO - Registering routes...
2024-08-07 15:21:04,114 - app - INFO - Initializing services...
2024-08-07 15:21:04,130 - app - INFO - Initializing email service...
2024-08-07 15:21:04,130 - app - INFO - Setting up scheduler...
2024-08-07 15:21:04,136 - app - INFO - Initializing scheduler...
2024-08-07 15:21:04,137 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:21:04,138 - app - INFO - Application initialized successfully
2024-08-07 15:21:07,571 - app - INFO - Initializing Flask app...
2024-08-07 15:21:07,576 - app - INFO - Configuring app...
2024-08-07 15:21:07,577 - app - INFO - Setting up CORS...
2024-08-07 15:21:07,578 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:21:08,074 - app - INFO - Initializing JWT manager...
2024-08-07 15:21:08,074 - app - INFO - Setting up rate limiting...
2024-08-07 15:21:08,076 - app - INFO - Setting up database...
2024-08-07 15:21:08,076 - app - INFO - Starting database setup...
2024-08-07 15:21:08,630 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:21:08,631 - app - INFO - Database setup completed successfully
2024-08-07 15:21:08,631 - app - INFO - Registering error handler...
2024-08-07 15:21:08,633 - app - INFO - Initializing CLI commands...
2024-08-07 15:21:08,634 - app - INFO - Registering routes...
2024-08-07 15:21:08,647 - app - INFO - Initializing services...
2024-08-07 15:21:08,668 - app - INFO - Initializing email service...
2024-08-07 15:21:08,670 - app - INFO - Setting up scheduler...
2024-08-07 15:21:08,679 - app - INFO - Initializing scheduler...
2024-08-07 15:21:08,680 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:21:08,681 - app - INFO - Application initialized successfully
2024-08-07 15:21:36,891 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:21:37,462 - app.database - INFO - Database connection established successfully
2024-08-07 15:21:37,940 - app.routes.auth - ERROR - Login error: name 'create_refresh_token' is not defined
2024-08-07 15:21:53,272 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:21:53,832 - app.database - INFO - Database connection established successfully
2024-08-07 15:21:54,259 - app.routes.auth - ERROR - Login error: name 'create_refresh_token' is not defined
2024-08-07 15:22:57,725 - app - INFO - Initializing Flask app...
2024-08-07 15:22:57,728 - app - INFO - Configuring app...
2024-08-07 15:22:57,728 - app - INFO - Setting up CORS...
2024-08-07 15:22:57,728 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:22:57,941 - app - INFO - Initializing JWT manager...
2024-08-07 15:22:57,941 - app - INFO - Setting up rate limiting...
2024-08-07 15:22:57,944 - app - INFO - Setting up database...
2024-08-07 15:22:57,945 - app - INFO - Starting database setup...
2024-08-07 15:22:58,568 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:22:58,585 - app - INFO - Database setup completed successfully
2024-08-07 15:22:58,585 - app - INFO - Registering error handler...
2024-08-07 15:22:58,586 - app - INFO - Initializing CLI commands...
2024-08-07 15:22:58,587 - app - INFO - Registering routes...
2024-08-07 15:22:58,617 - app - INFO - Initializing services...
2024-08-07 15:22:58,631 - app - INFO - Initializing email service...
2024-08-07 15:22:58,631 - app - INFO - Setting up scheduler...
2024-08-07 15:22:58,639 - app - INFO - Initializing scheduler...
2024-08-07 15:22:58,641 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:22:58,642 - app - INFO - Application initialized successfully
2024-08-07 15:23:04,895 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:23:05,860 - app.database - INFO - Database connection established successfully
2024-08-07 15:23:06,206 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:23:06,206 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:23:06,745 - app.database - INFO - Database connection established successfully
2024-08-07 15:23:06,791 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:23:06,800 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:23:06,820 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:23:06,820 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:23:07,694 - app.database - INFO - Database connection established successfully
2024-08-07 15:23:07,747 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:23:07,760 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:23:12,169 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:23:13,146 - app.database - INFO - Database connection established successfully
2024-08-07 15:23:13,204 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:23:13,228 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:23:14,051 - app.database - INFO - Database connection established successfully
2024-08-07 15:23:14,102 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:27:16,281 - app - INFO - Initializing Flask app...
2024-08-07 15:27:16,283 - app - INFO - Configuring app...
2024-08-07 15:27:16,284 - app - INFO - Setting up CORS...
2024-08-07 15:27:16,284 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:27:16,512 - app - INFO - Initializing JWT manager...
2024-08-07 15:27:16,513 - app - INFO - Setting up rate limiting...
2024-08-07 15:27:16,514 - app - INFO - Setting up database...
2024-08-07 15:27:16,514 - app - INFO - Starting database setup...
2024-08-07 15:27:17,208 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:27:17,208 - app - INFO - Database setup completed successfully
2024-08-07 15:27:17,209 - app - INFO - Registering error handler...
2024-08-07 15:27:17,210 - app - INFO - Initializing CLI commands...
2024-08-07 15:27:17,210 - app - INFO - Registering routes...
2024-08-07 15:27:17,221 - app - INFO - Initializing services...
2024-08-07 15:27:17,237 - app - INFO - Initializing email service...
2024-08-07 15:27:17,238 - app - INFO - Setting up scheduler...
2024-08-07 15:27:17,245 - app - INFO - Initializing scheduler...
2024-08-07 15:27:17,246 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:27:17,247 - app - INFO - Application initialized successfully
2024-08-07 15:27:27,573 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:27:28,108 - app.database - INFO - Database connection established successfully
2024-08-07 15:27:28,594 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:27:28,596 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:27:29,135 - app.database - INFO - Database connection established successfully
2024-08-07 15:27:29,175 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:27:29,190 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:27:29,213 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:27:29,214 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:27:30,130 - app.database - INFO - Database connection established successfully
2024-08-07 15:27:30,173 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:27:30,185 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:27:32,794 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-07 15:27:32,797 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 18, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 158, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-07 15:27:32,822 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-07 15:27:32,823 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 18, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 158, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-07 15:32:24,678 - app - INFO - Initializing Flask app...
2024-08-07 15:32:24,680 - app - INFO - Configuring app...
2024-08-07 15:32:24,680 - app - INFO - Setting up CORS...
2024-08-07 15:32:24,681 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:32:24,898 - app - INFO - Initializing JWT manager...
2024-08-07 15:32:24,898 - app - INFO - Setting up rate limiting...
2024-08-07 15:32:24,899 - app - INFO - Setting up database...
2024-08-07 15:32:24,899 - app - INFO - Starting database setup...
2024-08-07 15:32:25,669 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:32:25,670 - app - INFO - Database setup completed successfully
2024-08-07 15:32:25,670 - app - INFO - Registering error handler...
2024-08-07 15:32:25,671 - app - INFO - Initializing CLI commands...
2024-08-07 15:32:25,671 - app - INFO - Registering routes...
2024-08-07 15:32:25,678 - app - INFO - Initializing services...
2024-08-07 15:32:25,686 - app - INFO - Initializing email service...
2024-08-07 15:32:25,687 - app - INFO - Setting up scheduler...
2024-08-07 15:32:25,690 - app - INFO - Initializing scheduler...
2024-08-07 15:32:25,690 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:32:25,691 - app - INFO - Application initialized successfully
2024-08-07 15:32:27,345 - app - INFO - Initializing Flask app...
2024-08-07 15:32:27,347 - app - INFO - Configuring app...
2024-08-07 15:32:27,347 - app - INFO - Setting up CORS...
2024-08-07 15:32:27,348 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:32:27,556 - app - INFO - Initializing JWT manager...
2024-08-07 15:32:27,556 - app - INFO - Setting up rate limiting...
2024-08-07 15:32:27,557 - app - INFO - Setting up database...
2024-08-07 15:32:27,558 - app - INFO - Starting database setup...
2024-08-07 15:32:28,237 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:32:28,237 - app - INFO - Database setup completed successfully
2024-08-07 15:32:28,237 - app - INFO - Registering error handler...
2024-08-07 15:32:28,238 - app - INFO - Initializing CLI commands...
2024-08-07 15:32:28,238 - app - INFO - Registering routes...
2024-08-07 15:32:28,244 - app - INFO - Initializing services...
2024-08-07 15:32:28,253 - app - INFO - Initializing email service...
2024-08-07 15:32:28,253 - app - INFO - Setting up scheduler...
2024-08-07 15:32:28,257 - app - INFO - Initializing scheduler...
2024-08-07 15:32:28,258 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:32:28,259 - app - INFO - Application initialized successfully
2024-08-07 15:32:31,842 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:32:32,462 - app.database - INFO - Database connection established successfully
2024-08-07 15:32:32,666 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:32:32,667 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:32:33,287 - app.database - INFO - Database connection established successfully
2024-08-07 15:32:33,340 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:32:33,346 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:32:33,356 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:32:33,356 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:32:34,030 - app.database - INFO - Database connection established successfully
2024-08-07 15:32:34,081 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:32:34,086 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:32:36,328 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-07 15:32:36,330 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 18, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 158, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-07 15:32:36,338 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-07 15:32:36,339 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 18, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 158, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-07 15:42:36,266 - app - INFO - Initializing Flask app...
2024-08-07 15:42:36,268 - app - INFO - Configuring app...
2024-08-07 15:42:36,269 - app - INFO - Setting up CORS...
2024-08-07 15:42:36,269 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:42:36,517 - app - INFO - Initializing JWT manager...
2024-08-07 15:42:36,517 - app - INFO - Setting up rate limiting...
2024-08-07 15:42:36,518 - app - INFO - Setting up database...
2024-08-07 15:42:36,519 - app - INFO - Starting database setup...
2024-08-07 15:42:37,108 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:42:37,108 - app - INFO - Database setup completed successfully
2024-08-07 15:42:37,109 - app - INFO - Registering error handler...
2024-08-07 15:42:37,109 - app - INFO - Initializing CLI commands...
2024-08-07 15:42:37,110 - app - INFO - Registering routes...
2024-08-07 15:42:37,114 - app - INFO - Initializing services...
2024-08-07 15:42:37,122 - app - INFO - Initializing email service...
2024-08-07 15:42:37,123 - app - INFO - Setting up scheduler...
2024-08-07 15:42:37,128 - app - INFO - Initializing scheduler...
2024-08-07 15:42:37,128 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:42:37,128 - app - INFO - Application initialized successfully
2024-08-07 15:42:38,879 - app - INFO - Initializing Flask app...
2024-08-07 15:42:38,881 - app - INFO - Configuring app...
2024-08-07 15:42:38,882 - app - INFO - Setting up CORS...
2024-08-07 15:42:38,882 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:42:39,197 - app - INFO - Initializing JWT manager...
2024-08-07 15:42:39,198 - app - INFO - Setting up rate limiting...
2024-08-07 15:42:39,199 - app - INFO - Setting up database...
2024-08-07 15:42:39,200 - app - INFO - Starting database setup...
2024-08-07 15:42:39,735 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:42:39,735 - app - INFO - Database setup completed successfully
2024-08-07 15:42:39,736 - app - INFO - Registering error handler...
2024-08-07 15:42:39,736 - app - INFO - Initializing CLI commands...
2024-08-07 15:42:39,737 - app - INFO - Registering routes...
2024-08-07 15:42:39,745 - app - INFO - Initializing services...
2024-08-07 15:42:39,754 - app - INFO - Initializing email service...
2024-08-07 15:42:39,754 - app - INFO - Setting up scheduler...
2024-08-07 15:42:39,759 - app - INFO - Initializing scheduler...
2024-08-07 15:42:39,759 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:42:39,760 - app - INFO - Application initialized successfully
2024-08-07 15:42:48,312 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:42:48,794 - app.database - INFO - Database connection established successfully
2024-08-07 15:42:48,983 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:42:48,984 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:42:49,505 - app.database - INFO - Database connection established successfully
2024-08-07 15:42:49,542 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:42:49,547 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:42:49,552 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:42:49,553 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:42:50,134 - app.database - INFO - Database connection established successfully
2024-08-07 15:42:50,193 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:42:50,200 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:42:52,242 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-07 15:42:52,243 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 18, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 158, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-07 15:42:52,252 - app.services.trial_matching_service - ERROR - Error fetching recent matches for user 66af0d2d118d8e248b49a856: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
2024-08-07 15:42:52,252 - app.utils.error_handlers - ERROR - General error: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 18, in get_matches
    matches = await trial_matching_service.get_recent_matches(current_user, limit=None)  # Get all matches
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 158, in get_recent_matches
    safe_limit = min(int(sanitize_input(limit)), 100)  # Cap the limit at 100 for performance reasons
TypeError: int() argument must be a string, a bytes-like object or a real number, not 'NoneType'

2024-08-07 15:47:24,772 - app - INFO - Initializing Flask app...
2024-08-07 15:47:24,774 - app - INFO - Configuring app...
2024-08-07 15:47:24,775 - app - INFO - Setting up CORS...
2024-08-07 15:47:24,775 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:47:24,981 - app - INFO - Initializing JWT manager...
2024-08-07 15:47:24,981 - app - INFO - Setting up rate limiting...
2024-08-07 15:47:24,982 - app - INFO - Setting up database...
2024-08-07 15:47:24,983 - app - INFO - Starting database setup...
2024-08-07 15:47:25,573 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:47:25,574 - app - INFO - Database setup completed successfully
2024-08-07 15:47:25,574 - app - INFO - Registering error handler...
2024-08-07 15:47:25,574 - app - INFO - Initializing CLI commands...
2024-08-07 15:47:25,575 - app - INFO - Registering routes...
2024-08-07 15:47:25,579 - app - INFO - Initializing services...
2024-08-07 15:47:25,588 - app - INFO - Initializing email service...
2024-08-07 15:47:25,589 - app - INFO - Setting up scheduler...
2024-08-07 15:47:25,593 - app - INFO - Initializing scheduler...
2024-08-07 15:47:25,594 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:47:25,594 - app - INFO - Application initialized successfully
2024-08-07 15:47:32,056 - app - INFO - Initializing Flask app...
2024-08-07 15:47:32,058 - app - INFO - Configuring app...
2024-08-07 15:47:32,058 - app - INFO - Setting up CORS...
2024-08-07 15:47:32,059 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:47:32,252 - app - INFO - Initializing JWT manager...
2024-08-07 15:47:32,252 - app - INFO - Setting up rate limiting...
2024-08-07 15:47:32,253 - app - INFO - Setting up database...
2024-08-07 15:47:32,254 - app - INFO - Starting database setup...
2024-08-07 15:47:32,839 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:47:32,839 - app - INFO - Database setup completed successfully
2024-08-07 15:47:32,839 - app - INFO - Registering error handler...
2024-08-07 15:47:32,839 - app - INFO - Initializing CLI commands...
2024-08-07 15:47:32,839 - app - INFO - Registering routes...
2024-08-07 15:47:32,845 - app - INFO - Initializing services...
2024-08-07 15:47:32,853 - app - INFO - Initializing email service...
2024-08-07 15:47:32,853 - app - INFO - Setting up scheduler...
2024-08-07 15:47:32,858 - app - INFO - Initializing scheduler...
2024-08-07 15:47:32,858 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:47:32,859 - app - INFO - Application initialized successfully
2024-08-07 15:47:34,521 - app - INFO - Initializing Flask app...
2024-08-07 15:47:34,524 - app - INFO - Configuring app...
2024-08-07 15:47:34,525 - app - INFO - Setting up CORS...
2024-08-07 15:47:34,525 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:47:34,826 - app - INFO - Initializing JWT manager...
2024-08-07 15:47:34,826 - app - INFO - Setting up rate limiting...
2024-08-07 15:47:34,827 - app - INFO - Setting up database...
2024-08-07 15:47:34,827 - app - INFO - Starting database setup...
2024-08-07 15:47:35,410 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:47:35,411 - app - INFO - Database setup completed successfully
2024-08-07 15:47:35,412 - app - INFO - Registering error handler...
2024-08-07 15:47:35,414 - app - INFO - Initializing CLI commands...
2024-08-07 15:47:35,414 - app - INFO - Registering routes...
2024-08-07 15:47:35,422 - app - INFO - Initializing services...
2024-08-07 15:47:35,439 - app - INFO - Initializing email service...
2024-08-07 15:47:35,440 - app - INFO - Setting up scheduler...
2024-08-07 15:47:35,445 - app - INFO - Initializing scheduler...
2024-08-07 15:47:35,446 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:47:35,446 - app - INFO - Application initialized successfully
2024-08-07 15:47:58,565 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:47:59,135 - app.database - INFO - Database connection established successfully
2024-08-07 15:47:59,365 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:47:59,365 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:47:59,864 - app.database - INFO - Database connection established successfully
2024-08-07 15:47:59,906 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:47:59,912 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:47:59,920 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:47:59,921 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:48:00,432 - app.database - INFO - Database connection established successfully
2024-08-07 15:48:00,469 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:48:00,476 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:48:11,540 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:48:11,540 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:48:12,043 - app.database - INFO - Database connection established successfully
2024-08-07 15:48:12,081 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:48:12,088 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:48:12,089 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:48:12,578 - app.database - INFO - Database connection established successfully
2024-08-07 15:48:12,615 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:48:12,900 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:48:13,387 - app.database - INFO - Database connection established successfully
2024-08-07 15:48:13,429 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:48:13,438 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:48:13,957 - app.database - INFO - Database connection established successfully
2024-08-07 15:48:13,994 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:48:16,110 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:48:16,110 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:48:16,589 - app.database - INFO - Database connection established successfully
2024-08-07 15:48:16,661 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:48:16,668 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:48:16,677 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:48:16,678 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:48:17,216 - app.database - INFO - Database connection established successfully
2024-08-07 15:48:17,261 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:48:17,276 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:48:22,334 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:48:22,853 - app.database - INFO - Database connection established successfully
2024-08-07 15:48:22,889 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:48:22,898 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:48:23,376 - app.database - INFO - Database connection established successfully
2024-08-07 15:48:23,419 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:50:30,577 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:50:31,095 - app.database - INFO - Database connection established successfully
2024-08-07 15:50:31,134 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:50:31,141 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:50:31,652 - app.database - INFO - Database connection established successfully
2024-08-07 15:50:31,691 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:50:40,587 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:50:41,105 - app.database - INFO - Database connection established successfully
2024-08-07 15:50:41,349 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:50:41,349 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:50:42,463 - app.database - INFO - Database connection established successfully
2024-08-07 15:50:42,502 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:50:42,507 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:50:42,516 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:50:42,516 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:50:43,088 - app.database - INFO - Database connection established successfully
2024-08-07 15:50:43,125 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:50:43,131 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:50:44,227 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:50:44,726 - app.database - INFO - Database connection established successfully
2024-08-07 15:50:44,774 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:50:44,784 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:50:45,313 - app.database - INFO - Database connection established successfully
2024-08-07 15:50:45,352 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:51:04,577 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:05,058 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:05,097 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:51:05,105 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:05,632 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:05,671 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:51:19,963 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:20,463 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:20,664 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:20,664 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:21,113 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:21,170 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:21,175 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:51:21,183 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:21,183 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:21,732 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:21,780 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:21,786 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:51:25,638 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:26,154 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:26,193 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:51:26,202 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:26,721 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:26,767 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:51:28,972 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:28,972 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:29,501 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:29,551 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:29,556 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:51:29,563 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:29,563 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:30,115 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:30,155 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:30,160 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:51:39,419 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:39,419 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:39,940 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:39,976 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:39,984 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:39,985 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:40,539 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:40,594 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 15:51:40,924 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:41,424 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:41,465 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:51:41,474 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:51:41,990 - app.database - INFO - Database connection established successfully
2024-08-07 15:51:42,029 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:51:46,683 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 15:51:46,684 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 15:51:47,691 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 15:52:46,908 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 15:52:46,908 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 15:52:47,913 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 15:52:56,310 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:52:56,900 - app.database - INFO - Database connection established successfully
2024-08-07 15:52:56,961 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 15:53:05,449 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:53:05,958 - app.database - INFO - Database connection established successfully
2024-08-07 15:53:06,174 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 15:53:06,175 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:53:06,781 - app.database - INFO - Database connection established successfully
2024-08-07 15:53:06,821 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 15:53:06,828 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:53:06,834 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 15:53:06,835 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:53:07,313 - app.database - INFO - Database connection established successfully
2024-08-07 15:53:07,350 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 15:53:07,356 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:53:08,257 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:53:08,863 - app.database - INFO - Database connection established successfully
2024-08-07 15:53:08,957 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 15:53:08,965 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:53:09,505 - app.database - INFO - Database connection established successfully
2024-08-07 15:53:09,596 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 15:56:28,727 - app - INFO - Initializing Flask app...
2024-08-07 15:56:28,730 - app - INFO - Configuring app...
2024-08-07 15:56:28,730 - app - INFO - Setting up CORS...
2024-08-07 15:56:28,731 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:56:29,003 - app - INFO - Initializing JWT manager...
2024-08-07 15:56:29,004 - app - INFO - Setting up rate limiting...
2024-08-07 15:56:29,007 - app - INFO - Setting up database...
2024-08-07 15:56:29,007 - app - INFO - Starting database setup...
2024-08-07 15:56:29,639 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:56:29,640 - app - INFO - Database setup completed successfully
2024-08-07 15:56:29,645 - app - INFO - Registering error handler...
2024-08-07 15:56:29,651 - app - INFO - Initializing CLI commands...
2024-08-07 15:56:29,652 - app - INFO - Registering routes...
2024-08-07 15:56:29,659 - app - INFO - Initializing services...
2024-08-07 15:56:29,673 - app - INFO - Initializing email service...
2024-08-07 15:56:29,674 - app - INFO - Setting up scheduler...
2024-08-07 15:56:29,681 - app - INFO - Initializing scheduler...
2024-08-07 15:56:29,682 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:56:29,682 - app - INFO - Application initialized successfully
2024-08-07 15:56:31,650 - app - INFO - Initializing Flask app...
2024-08-07 15:56:31,654 - app - INFO - Configuring app...
2024-08-07 15:56:31,655 - app - INFO - Setting up CORS...
2024-08-07 15:56:31,655 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 15:56:32,085 - app - INFO - Initializing JWT manager...
2024-08-07 15:56:32,086 - app - INFO - Setting up rate limiting...
2024-08-07 15:56:32,087 - app - INFO - Setting up database...
2024-08-07 15:56:32,088 - app - INFO - Starting database setup...
2024-08-07 15:56:32,627 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 15:56:32,627 - app - INFO - Database setup completed successfully
2024-08-07 15:56:32,628 - app - INFO - Registering error handler...
2024-08-07 15:56:32,628 - app - INFO - Initializing CLI commands...
2024-08-07 15:56:32,628 - app - INFO - Registering routes...
2024-08-07 15:56:32,635 - app - INFO - Initializing services...
2024-08-07 15:56:32,652 - app - INFO - Initializing email service...
2024-08-07 15:56:32,652 - app - INFO - Setting up scheduler...
2024-08-07 15:56:32,659 - app - INFO - Initializing scheduler...
2024-08-07 15:56:32,661 - app.scheduler - INFO - Scheduler initialized
2024-08-07 15:56:32,662 - app - INFO - Application initialized successfully
2024-08-07 15:56:46,469 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:56:47,053 - app.database - INFO - Database connection established successfully
2024-08-07 15:56:47,326 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 15:56:47,327 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:56:48,030 - app.database - INFO - Database connection established successfully
2024-08-07 15:56:48,126 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 15:56:48,156 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:56:48,191 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 15:56:48,194 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:56:48,967 - app.database - INFO - Database connection established successfully
2024-08-07 15:56:49,028 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 15:56:49,035 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:56:50,104 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:56:50,590 - app.database - INFO - Database connection established successfully
2024-08-07 15:56:50,676 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 15:56:50,691 - app.database - INFO - Attempting to establish database connection...
2024-08-07 15:56:51,184 - app.database - INFO - Database connection established successfully
2024-08-07 15:56:51,269 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 15:56:53,719 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 15:56:55,889 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 16:02:35,521 - app - INFO - Initializing Flask app...
2024-08-07 16:02:35,523 - app - INFO - Configuring app...
2024-08-07 16:02:35,523 - app - INFO - Setting up CORS...
2024-08-07 16:02:35,523 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 16:02:35,883 - app - INFO - Initializing JWT manager...
2024-08-07 16:02:35,883 - app - INFO - Setting up rate limiting...
2024-08-07 16:02:35,885 - app - INFO - Setting up database...
2024-08-07 16:02:35,885 - app - INFO - Starting database setup...
2024-08-07 16:02:36,866 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 16:02:36,867 - app - INFO - Database setup completed successfully
2024-08-07 16:02:36,867 - app - INFO - Registering error handler...
2024-08-07 16:02:36,868 - app - INFO - Initializing CLI commands...
2024-08-07 16:02:36,868 - app - INFO - Registering routes...
2024-08-07 16:02:36,915 - app - INFO - Initializing services...
2024-08-07 16:02:36,928 - app - INFO - Initializing email service...
2024-08-07 16:02:36,928 - app - INFO - Setting up scheduler...
2024-08-07 16:02:36,933 - app - INFO - Initializing scheduler...
2024-08-07 16:02:36,934 - app.scheduler - INFO - Scheduler initialized
2024-08-07 16:02:36,935 - app - INFO - Application initialized successfully
2024-08-07 16:02:39,648 - app - INFO - Initializing Flask app...
2024-08-07 16:02:39,650 - app - INFO - Configuring app...
2024-08-07 16:02:39,651 - app - INFO - Setting up CORS...
2024-08-07 16:02:39,652 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 16:02:40,017 - app - INFO - Initializing JWT manager...
2024-08-07 16:02:40,018 - app - INFO - Setting up rate limiting...
2024-08-07 16:02:40,020 - app - INFO - Setting up database...
2024-08-07 16:02:40,021 - app - INFO - Starting database setup...
2024-08-07 16:02:41,220 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 16:02:41,221 - app - INFO - Database setup completed successfully
2024-08-07 16:02:41,221 - app - INFO - Registering error handler...
2024-08-07 16:02:41,222 - app - INFO - Initializing CLI commands...
2024-08-07 16:02:41,222 - app - INFO - Registering routes...
2024-08-07 16:02:41,234 - app - INFO - Initializing services...
2024-08-07 16:02:41,249 - app - INFO - Initializing email service...
2024-08-07 16:02:41,249 - app - INFO - Setting up scheduler...
2024-08-07 16:02:41,255 - app - INFO - Initializing scheduler...
2024-08-07 16:02:41,256 - app.scheduler - INFO - Scheduler initialized
2024-08-07 16:02:41,257 - app - INFO - Application initialized successfully
2024-08-07 16:03:03,466 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:03:04,084 - app.database - INFO - Database connection established successfully
2024-08-07 16:03:04,577 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:04,578 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:03:05,226 - app.database - INFO - Database connection established successfully
2024-08-07 16:03:05,284 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:05,299 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:03:06,657 - app.database - INFO - Database connection established successfully
2024-08-07 16:03:06,702 - app.services.trial_matching_service - INFO - Retrieved 5 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:06,715 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:06,716 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:03:07,400 - app.database - INFO - Database connection established successfully
2024-08-07 16:03:07,446 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:07,465 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:03:08,022 - app.database - INFO - Database connection established successfully
2024-08-07 16:03:08,066 - app.services.trial_matching_service - INFO - Retrieved 5 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:21,879 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:03:22,487 - app.database - INFO - Database connection established successfully
2024-08-07 16:03:22,589 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:22,608 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:03:23,593 - app.database - INFO - Database connection established successfully
2024-08-07 16:03:23,691 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:30,621 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:03:31,203 - app.database - INFO - Database connection established successfully
2024-08-07 16:03:31,439 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:39,994 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, I\'ve analyzed the compatibility and here\'s the result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 80,\n        "reasons": [\n            "The patient has leukemia, which matches the trial\'s condition",\n            "The trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",\n            "The patient\'s age (24 years old) doesn\'t exclude them from the trial",\n            "The trial is in Phase 2, which is generally suitable for patients who have already undergone initial treatment"\n        ]\n    }\n]\n\nExplanation:\n1. NCT00072579 is the only trial that has a high compatibility score (80) for this patient.\n\n2. The other trials (NCT00517179, NCT00812279, and NCT01511679) are not suitable for this patient as they focus on different conditions (erectile dysfunction, smoking, and alcohol abuse respectively) and have very low compatibility scores.\n\n3. While the match isn\'t perfect (we don\'t know if the patient has chronic myelogenous leukemia specifically, or if they\'re not in complete cytogenetic remission), the overall condition and age make this trial potentially suitable.\n\n4. The patient\'s current medications suggest they are undergoing treatment for leukemia, which aligns with the trial\'s focus on patients who have undergone initial therapy.\n\n5. More detailed medical information would be needed to determine if the patient meets all the specific eligibility criteria for the trial.', type='text')]
2024-08-07 16:03:39,994 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, I\'ve analyzed the compatibility and here\'s the result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 80,\n        "reasons": [\n            "The patient has leukemia, which matches the trial\'s condition",\n            "The trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",\n            "The patient\'s age (24 years old) doesn\'t exclude them from the trial",\n            "The trial is in Phase 2, which is generally suitable for patients who have already undergone initial treatment"\n        ]\n    }\n]\n\nExplanation:\n1. NCT00072579 is the only trial that has a high compatibility score (80) for this patient.\n\n2. The other trials (NCT00517179, NCT00812279, and NCT01511679) are not suitable for this patient as they focus on different conditions (erectile dysfunction, smoking, and alcohol abuse respectively) and have very low compatibility scores.\n\n3. While the match isn\'t perfect (we don\'t know if the patient has chronic myelogenous leukemia specifically, or if they\'re not in complete cytogenetic remission), the overall condition and age make this trial potentially suitable.\n\n4. The patient\'s current medications suggest they are undergoing treatment for leukemia, which aligns with the trial\'s focus on patients who have undergone initial therapy.\n\n5. More detailed medical information would be needed to determine if the patient meets all the specific eligibility criteria for the trial.', type='text')]
2024-08-07 16:03:39,996 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility and here's the result:

[
    {
        "nct_id": "NCT00072579",
        "compatibility_score": 80,
        "reasons": [
            "The patient has leukemia, which matches the trial's condition",
            "The trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",
            "The patient's age (24 years old) doesn't exclude them [SQL REDACTED] the trial",
            "The trial is in Phase 2, which is generally suitable for patients who have already undergone initial treatment"
        ]
    }
]

Explanation:
1. NCT00072579 is the only trial that has a high compatibility score (80) for this patient.

2. The other trials (NCT00517179, NCT00812279, and NCT01511679) are not suitable for this patient as they focus on different conditions (erectile dysfunction, smoking, and alcohol abuse respectively) and have very low compatibility scores.

3. While the match isn't perfect (we don't know if the patient has chronic myelogenous leukemia specifically, or if they're not in complete cytogenetic remission), the overall condition and age make this trial potentially suitable.

4. The patient's current medications suggest they are undergoing treatment for leukemia, which aligns with the trial's focus on patients who have undergone initial therapy.

5. More detailed medical information would be needed to determine if the patient meets all the specific eligibility criteria for the trial.
2024-08-07 16:03:39,997 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-07 16:03:40,042 - app.services.trial_matching_service - INFO - Trial NCT00072579 already matched for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:40,043 - app.services.trial_matching_service - INFO - Emitted 0 trial matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:40,043 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:03:41,238 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:47,734 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (a young male with leukemia) does not match well with the provided clinical trial, which is focused on sarcopenia and sarcopenic obesity in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for this lack of compatibility include:\n\n1. The patient's primary medical condition (leukemia) is not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n\n2. The patient's age (24 years old) does not align with the typical demographic for sarcopenia and sarcopenic obesity, which are more common in older adults.\n\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are the focus of the clinical trial.\n\n4. The medications the patient is taking are primarily related to leukemia treatment and are not relevant to the clinical trial's focus.\n\nGiven these factors, the compatibility score would be well below 70, hence the empty array as the output.", type='text')]
2024-08-07 16:03:47,735 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (a young male with leukemia) does not match well with the provided clinical trial, which is focused on sarcopenia and sarcopenic obesity in complex abdominal wall surgery.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for this lack of compatibility include:\n\n1. The patient's primary medical condition (leukemia) is not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n\n2. The patient's age (24 years old) does not align with the typical demographic for sarcopenia and sarcopenic obesity, which are more common in older adults.\n\n3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are the focus of the clinical trial.\n\n4. The medications the patient is taking are primarily related to leukemia treatment and are not relevant to the clinical trial's focus.\n\nGiven these factors, the compatibility score would be well below 70, hence the empty array as the output.", type='text')]
2024-08-07 16:03:47,735 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (a young male with leukemia) does not match well with the provided clinical trial, which is focused on sarcopenia and sarcopenic obesity in complex abdominal wall surgery.

Therefore, the output is an empty array:

[]

The reasons for this lack of compatibility include:

1. The patient's primary medical condition (leukemia) is not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).

2. The patient's age (24 years old) does not align with the typical demographic for sarcopenia and sarcopenic obesity, which are more common in older adults.

3. There's no indication in the patient profile of any abdominal wall issues or surgeries, which are the focus of the clinical trial.

4. The medications the patient is taking are primarily related to leukemia treatment and are not relevant to the clinical trial's focus.

Given these factors, the compatibility score would be well below 70, hence the empty array as the output.
2024-08-07 16:03:47,735 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:03:47,736 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:03:48,938 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:03:54,493 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia as their primary medical condition.\n2. All of the provided clinical trials focus on different conditions:\n   - NCT00626379: Heart disease and cardiovascular risk factors\n   - NCT03530579: Diabetes prevention\n   - NCT05900479: PTSD in military veterans\n   - NCT04679779: Cerebral palsy in children\n\n3. The patient's age (24 years old) and specific condition (leukemia) do not align with the target populations or conditions of these trials.\n4. The medications the patient is taking are specific to leukemia treatment and are not relevant to the conditions studied in these trials.\n\nGiven these factors, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:03:54,494 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia as their primary medical condition.\n2. All of the provided clinical trials focus on different conditions:\n   - NCT00626379: Heart disease and cardiovascular risk factors\n   - NCT03530579: Diabetes prevention\n   - NCT05900479: PTSD in military veterans\n   - NCT04679779: Cerebral palsy in children\n\n3. The patient's age (24 years old) and specific condition (leukemia) do not align with the target populations or conditions of these trials.\n4. The medications the patient is taking are specific to leukemia treatment and are not relevant to the conditions studied in these trials.\n\nGiven these factors, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:03:54,495 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. The patient has leukemia as their primary medical condition.
2. All of the provided clinical trials focus on different conditions:
   - NCT00626379: Heart disease and cardiovascular risk factors
   - NCT03530579: Diabetes prevention
   - NCT05900479: PTSD in military veterans
   - NCT04679779: Cerebral palsy in children

3. The patient's age (24 years old) and specific condition (leukemia) do not align with the target populations or conditions of these trials.
4. The medications the patient is taking are specific to leukemia treatment and are not relevant to the conditions studied in these trials.

Given these factors, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]
2024-08-07 16:03:54,495 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:03:54,497 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:03:55,740 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:00,735 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Jimmy Oldman, has leukemia as his primary medical condition.\n\n2. The first clinical trial (NCT02244879) is for patients with Type 2 Diabetes Mellitus, which Jimmy does not have.\n\n3. The second clinical trial (NCT02841579) is for patients with Non-Small Cell Lung Cancer (NSCLC) with specific EGFR mutations, which also doesn't match Jimmy's condition.\n\nNeither of these trials is suitable for a patient with leukemia. Therefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nTo find suitable trials for Jimmy, we would need to look for clinical trials specifically targeting leukemia or related hematological conditions.", type='text')]
2024-08-07 16:04:00,736 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Jimmy Oldman, has leukemia as his primary medical condition.\n\n2. The first clinical trial (NCT02244879) is for patients with Type 2 Diabetes Mellitus, which Jimmy does not have.\n\n3. The second clinical trial (NCT02841579) is for patients with Non-Small Cell Lung Cancer (NSCLC) with specific EGFR mutations, which also doesn't match Jimmy's condition.\n\nNeither of these trials is suitable for a patient with leukemia. Therefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nTo find suitable trials for Jimmy, we would need to look for clinical trials specifically targeting leukemia or related hematological conditions.", type='text')]
2024-08-07 16:04:00,736 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:

1. The patient, Jimmy Oldman, has leukemia as his primary medical condition.

2. The first clinical trial (NCT02244879) is for patients with Type 2 Diabetes Mellitus, which Jimmy does not have.

3. The second clinical trial (NCT02841579) is for patients with Non-Small Cell Lung Cancer (NSCLC) with specific EGFR mutations, which also doesn't match Jimmy's condition.

Neither of these trials is suitable for a patient with leukemia. Therefore, the output in the requested JSON format would be an empty array:

[]

To find suitable trials for Jimmy, we would need to look for clinical trials specifically targeting leukemia or related hematological conditions.
2024-08-07 16:04:00,736 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:04:00,736 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:04:01,923 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:05,249 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's primary condition is leukemia, which is not addressed in any of the given clinical trials. The trials focus on systemic sclerosis, head and neck cancer, and stroke rehabilitation, none of which are relevant to the patient's condition.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:04:05,250 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's primary condition is leukemia, which is not addressed in any of the given clinical trials. The trials focus on systemic sclerosis, head and neck cancer, and stroke rehabilitation, none of which are relevant to the patient's condition.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:04:05,251 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. The patient's primary condition is leukemia, which is not addressed in any of the given clinical trials. The trials focus on systemic sclerosis, head and neck cancer, and stroke rehabilitation, none of which are relevant to the patient's condition.

Therefore, the output is an empty array:

[]
2024-08-07 16:04:05,251 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:04:05,252 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:04:06,545 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:12,235 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not specifically addressed in any of the given trials.\n\n2. The first trial (NCT04986579) is for metastatic breast cancer and specifically excludes patients with hematological malignancies like leukemia.\n\n3. The second trial (NCT05721079) is for lung transplant patients, which doesn't apply to this patient.\n\n4. The third trial (NCT06060379) is about workplace safety and not related to the patient's medical condition.\n\n5. The fourth trial (NCT03906279) is about refractive errors and choroidal thickness, which is not relevant to the patient's leukemia diagnosis.\n\nGiven these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:04:12,236 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not specifically addressed in any of the given trials.\n\n2. The first trial (NCT04986579) is for metastatic breast cancer and specifically excludes patients with hematological malignancies like leukemia.\n\n3. The second trial (NCT05721079) is for lung transplant patients, which doesn't apply to this patient.\n\n4. The third trial (NCT06060379) is about workplace safety and not related to the patient's medical condition.\n\n5. The fourth trial (NCT03906279) is about refractive errors and choroidal thickness, which is not relevant to the patient's leukemia diagnosis.\n\nGiven these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:04:12,237 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. The patient has leukemia, which is not specifically addressed in any of the given trials.

2. The first trial (NCT04986579) is for metastatic breast cancer and specifically excludes patients with hematological malignancies like leukemia.

3. The second trial (NCT05721079) is for lung transplant patients, which doesn't apply to this patient.

4. The third trial (NCT06060379) is about workplace safety and not related to the patient's medical condition.

5. The fourth trial (NCT03906279) is about refractive errors and choroidal thickness, which is not relevant to the patient's leukemia diagnosis.

Given these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:

[]
2024-08-07 16:04:12,237 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:04:12,238 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:04:13,443 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:16,405 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by any of the given trials. The trials focus on conditions such as chronic hepatitis C, melanoma, ischemic heart failure, and advanced refractory left ventricular heart failure, none of which align with the patient's profile.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 16:04:16,405 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by any of the given trials. The trials focus on conditions such as chronic hepatitis C, melanoma, ischemic heart failure, and advanced refractory left ventricular heart failure, none of which align with the patient's profile.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 16:04:16,406 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by any of the given trials. The trials focus on conditions such as chronic hepatitis C, melanoma, ischemic heart failure, and advanced refractory left ventricular heart failure, none of which align with the patient's profile.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-07 16:04:16,406 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:04:16,406 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:04:17,598 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:23,474 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient has leukemia as their primary medical condition.\n2. None of the provided clinical trials are specifically targeting leukemia or related blood disorders.\n3. The first trial (NCT06289179) is for sepsis, which is not directly related to the patient's condition.\n4. The second trial (NCT03221179) is for healthy volunteers, which excludes the patient due to their leukemia diagnosis.\n5. The third trial (NCT00228579) is for obesity, which is not mentioned in the patient's profile.\n\nGiven these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-07 16:04:23,474 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient has leukemia as their primary medical condition.\n2. None of the provided clinical trials are specifically targeting leukemia or related blood disorders.\n3. The first trial (NCT06289179) is for sepsis, which is not directly related to the patient's condition.\n4. The second trial (NCT03221179) is for healthy volunteers, which excludes the patient due to their leukemia diagnosis.\n5. The third trial (NCT00228579) is for obesity, which is not mentioned in the patient's profile.\n\nGiven these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.", type='text')]
2024-08-07 16:04:23,474 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient has leukemia as their primary medical condition.
2. None of the provided clinical trials are specifically targeting leukemia or related blood disorders.
3. The first trial (NCT06289179) is for sepsis, which is not directly related to the patient's condition.
4. The second trial (NCT03221179) is for healthy volunteers, which excludes the patient due to their leukemia diagnosis.
5. The third trial (NCT00228579) is for obesity, which is not mentioned in the patient's profile.

Given these factors, none of the trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher.
2024-08-07 16:04:23,474 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:04:23,475 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:04:24,654 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:29,947 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here is the matching result:\n\n[\n    {\n        "nct_id": "NCT05639179",\n        "compatibility_score": 85,\n        "reasons": [\n            "The patient has leukemia, which matches the trial\'s focus on B-cell Acute Lymphoblastic Leukemia (B-ALL)",\n            "The patient\'s age (24 years) falls within the trial\'s age range (2-75 years)",\n            "The trial is specifically for relapsed/refractory B-ALL, which may apply to the patient\'s condition",\n            "The patient is currently on medications commonly used for leukemia treatment, suggesting they might be a candidate for this novel CAR-T cell therapy",\n            "The trial is in the recruiting phase, making it potentially available for the patient"\n        ]\n    }\n]', type='text')]
2024-08-07 16:04:29,948 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here is the matching result:\n\n[\n    {\n        "nct_id": "NCT05639179",\n        "compatibility_score": 85,\n        "reasons": [\n            "The patient has leukemia, which matches the trial\'s focus on B-cell Acute Lymphoblastic Leukemia (B-ALL)",\n            "The patient\'s age (24 years) falls within the trial\'s age range (2-75 years)",\n            "The trial is specifically for relapsed/refractory B-ALL, which may apply to the patient\'s condition",\n            "The patient is currently on medications commonly used for leukemia treatment, suggesting they might be a candidate for this novel CAR-T cell therapy",\n            "The trial is in the recruiting phase, making it potentially available for the patient"\n        ]\n    }\n]', type='text')]
2024-08-07 16:04:29,949 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here is the matching result:

[
    {
        "nct_id": "NCT05639179",
        "compatibility_score": 85,
        "reasons": [
            "The patient has leukemia, which matches the trial's focus on B-cell Acute Lymphoblastic Leukemia (B-ALL)",
            "The patient's age (24 years) falls within the trial's age range (2-75 years)",
            "The trial is specifically for relapsed/refractory B-ALL, which may apply to the patient's condition",
            "The patient is currently on medications commonly used for leukemia treatment, suggesting they might be a candidate for this novel CAR-T cell therapy",
            "The trial is in the recruiting phase, making it potentially available for the patient"
        ]
    }
]
2024-08-07 16:04:29,949 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-07 16:04:29,990 - app.services.trial_matching_service - INFO - Trial NCT05639179 already matched for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:29,991 - app.services.trial_matching_service - INFO - Emitted 0 trial matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:29,991 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:04:31,174 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:35,040 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 24-year-old male with leukemia) does not align well with the eligibility criteria of the two provided clinical trials.\n\nThe first trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years, which does not match the patient's age or medical condition.\n\nThe second trial (NCT02052479) is for adolescent females with Polycystic Ovary Syndrome (PCOS), which does not match the patient's gender or medical condition.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:04:35,040 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 24-year-old male with leukemia) does not align well with the eligibility criteria of the two provided clinical trials.\n\nThe first trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years, which does not match the patient's age or medical condition.\n\nThe second trial (NCT02052479) is for adolescent females with Polycystic Ovary Syndrome (PCOS), which does not match the patient's gender or medical condition.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:04:35,040 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (a 24-year-old male with leukemia) does not align well with the eligibility criteria of the two provided clinical trials.

The first trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years, which does not match the patient's age or medical condition.

The second trial (NCT02052479) is for adolescent females with Polycystic Ovary Syndrome (PCOS), which does not match the patient's gender or medical condition.

Therefore, the output is an empty array:

[]
2024-08-07 16:04:35,040 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:04:35,041 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:04:36,234 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:41,892 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After reviewing the patient profile and clinical trial data, I have determined that none of the provided clinical trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical condition is leukemia, but none of the trials are specifically for leukemia treatment.\n\n2. The patient's age (24 years old) does not match the age criteria for the trials that specify age ranges.\n\n3. The medications the patient is taking are not directly related to any of the interventions being studied in these trials.\n\n4. The conditions being studied in the trials (influenza, postpartum perineal tears, colorectal cancer with liver metastases, and physician satisfaction with cytotoxic agents) do not align with the patient's reported medical condition.\n\n5. Some trials have specific exclusion criteria that would likely rule out this patient, such as ongoing cancer treatment.\n\nGiven these factors, none of the provided clinical trials reach the threshold of 70% compatibility with this patient's profile.", type='text')]
2024-08-07 16:04:41,892 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After reviewing the patient profile and clinical trial data, I have determined that none of the provided clinical trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical condition is leukemia, but none of the trials are specifically for leukemia treatment.\n\n2. The patient's age (24 years old) does not match the age criteria for the trials that specify age ranges.\n\n3. The medications the patient is taking are not directly related to any of the interventions being studied in these trials.\n\n4. The conditions being studied in the trials (influenza, postpartum perineal tears, colorectal cancer with liver metastases, and physician satisfaction with cytotoxic agents) do not align with the patient's reported medical condition.\n\n5. Some trials have specific exclusion criteria that would likely rule out this patient, such as ongoing cancer treatment.\n\nGiven these factors, none of the provided clinical trials reach the threshold of 70% compatibility with this patient's profile.", type='text')]
2024-08-07 16:04:41,893 - app.services.anthropic_service - INFO - Parsing response: After reviewing the patient profile and clinical trial data, I have determined that none of the provided clinical trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. The patient's primary medical condition is leukemia, but none of the trials are specifically for leukemia treatment.

2. The patient's age (24 years old) does not match the age criteria for the trials that specify age ranges.

3. The medications the patient is taking are not directly related to any of the interventions being studied in these trials.

4. The conditions being studied in the trials (influenza, postpartum perineal tears, colorectal cancer with liver metastases, and physician satisfaction with cytotoxic agents) do not align with the patient's reported medical condition.

5. Some trials have specific exclusion criteria that would likely rule out this patient, such as ongoing cancer treatment.

Given these factors, none of the provided clinical trials reach the threshold of 70% compatibility with this patient's profile.
2024-08-07 16:04:41,893 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:04:41,893 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:04:43,098 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:47,242 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06378879) is about anesthesia during gastroscopy, which is not related to the patient's condition (leukemia).\n\n2. The second trial (NCT02710279) is focused on depression and suicidal behavior, which also doesn't match the patient's profile.\n\nNeither of these trials is suitable for a patient with leukemia, so they don't meet the minimum compatibility score of 70. As a result, no trials are recommended for this patient based on the given information.", type='text')]
2024-08-07 16:04:47,242 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06378879) is about anesthesia during gastroscopy, which is not related to the patient's condition (leukemia).\n\n2. The second trial (NCT02710279) is focused on depression and suicidal behavior, which also doesn't match the patient's profile.\n\nNeither of these trials is suitable for a patient with leukemia, so they don't meet the minimum compatibility score of 70. As a result, no trials are recommended for this patient based on the given information.", type='text')]
2024-08-07 16:04:47,242 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT06378879) is about anesthesia during gastroscopy, which is not related to the patient's condition (leukemia).

2. The second trial (NCT02710279) is focused on depression and suicidal behavior, which also doesn't match the patient's profile.

Neither of these trials is suitable for a patient with leukemia, so they don't meet the minimum compatibility score of 70. As a result, no trials are recommended for this patient based on the given information.
2024-08-07 16:04:47,244 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:04:47,244 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:04:48,428 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:04:55,624 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's the reasoning:\n\n1. NCT05463679: This trial is for patients with Vascular Ehlers-Danlos Syndrome, which the patient doesn't have. The patient has leukemia, which is not related to this trial.\n\n2. NCT03137979: This trial is for chronic adult periodontitis, which is unrelated to the patient's condition of leukemia.\n\n3. NCT01733979: This trial is for anemia. While anemia can be associated with leukemia, the trial specifically excludes individuals with other medical conditions that could interfere with the study. The patient's leukemia and current medications would likely disqualify them.\n\nGiven that none of the trials are suitable for this patient's specific condition (leukemia) and current medical status, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-07 16:04:55,625 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's the reasoning:\n\n1. NCT05463679: This trial is for patients with Vascular Ehlers-Danlos Syndrome, which the patient doesn't have. The patient has leukemia, which is not related to this trial.\n\n2. NCT03137979: This trial is for chronic adult periodontitis, which is unrelated to the patient's condition of leukemia.\n\n3. NCT01733979: This trial is for anemia. While anemia can be associated with leukemia, the trial specifically excludes individuals with other medical conditions that could interfere with the study. The patient's leukemia and current medications would likely disqualify them.\n\nGiven that none of the trials are suitable for this patient's specific condition (leukemia) and current medical status, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-07 16:04:55,626 - app.services.anthropic_service - INFO - Parsing response: After carefully analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's the reasoning:

1. NCT05463679: This trial is for patients with Vascular Ehlers-Danlos Syndrome, which the patient doesn't have. The patient has leukemia, which is not related to this trial.

2. NCT03137979: This trial is for chronic adult periodontitis, which is unrelated to the patient's condition of leukemia.

3. NCT01733979: This trial is for anemia. While anemia can be associated with leukemia, the trial specifically excludes individuals with other medical conditions that could interfere with the study. The patient's leukemia and current medications would likely disqualify them.

Given that none of the trials are suitable for this patient's specific condition (leukemia) and current medical status, the output in the requested JSON format would be an empty array:

[]
2024-08-07 16:04:55,627 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:04:55,627 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:04:56,853 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:05:04,985 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, and none of the provided clinical trials are specifically targeting leukemia or related blood disorders. Additionally, the patient's age and specific medical history don't align closely with the eligibility criteria of the given trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 16:05:04,986 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, and none of the provided clinical trials are specifically targeting leukemia or related blood disorders. Additionally, the patient's age and specific medical history don't align closely with the eligibility criteria of the given trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 16:05:04,986 - app.services.anthropic_service - INFO - Parsing response: Based on the provided patient profile and clinical trial data, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, and none of the provided clinical trials are specifically targeting leukemia or related blood disorders. Additionally, the patient's age and specific medical history don't align closely with the eligibility criteria of the given trials.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-07 16:05:04,987 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:05:04,987 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:05:06,211 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:25,532 - app - INFO - Initializing Flask app...
2024-08-07 16:27:25,533 - app - INFO - Configuring app...
2024-08-07 16:27:25,534 - app - INFO - Setting up CORS...
2024-08-07 16:27:25,534 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 16:27:25,791 - app - INFO - Initializing JWT manager...
2024-08-07 16:27:25,791 - app - INFO - Setting up rate limiting...
2024-08-07 16:27:25,792 - app - INFO - Setting up database...
2024-08-07 16:27:25,793 - app - INFO - Starting database setup...
2024-08-07 16:27:26,368 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 16:27:26,368 - app - INFO - Database setup completed successfully
2024-08-07 16:27:26,369 - app - INFO - Registering error handler...
2024-08-07 16:27:26,369 - app - INFO - Initializing CLI commands...
2024-08-07 16:27:26,369 - app - INFO - Registering routes...
2024-08-07 16:27:26,377 - app - INFO - Initializing services...
2024-08-07 16:27:26,389 - app - INFO - Initializing email service...
2024-08-07 16:27:26,389 - app - INFO - Setting up scheduler...
2024-08-07 16:27:26,395 - app - INFO - Initializing scheduler...
2024-08-07 16:27:26,396 - app.scheduler - INFO - Scheduler initialized
2024-08-07 16:27:26,396 - app - INFO - Application initialized successfully
2024-08-07 16:27:28,775 - app - INFO - Initializing Flask app...
2024-08-07 16:27:28,778 - app - INFO - Configuring app...
2024-08-07 16:27:28,780 - app - INFO - Setting up CORS...
2024-08-07 16:27:28,781 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 16:27:29,111 - app - INFO - Initializing JWT manager...
2024-08-07 16:27:29,112 - app - INFO - Setting up rate limiting...
2024-08-07 16:27:29,113 - app - INFO - Setting up database...
2024-08-07 16:27:29,114 - app - INFO - Starting database setup...
2024-08-07 16:27:29,706 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 16:27:29,707 - app - INFO - Database setup completed successfully
2024-08-07 16:27:29,707 - app - INFO - Registering error handler...
2024-08-07 16:27:29,707 - app - INFO - Initializing CLI commands...
2024-08-07 16:27:29,708 - app - INFO - Registering routes...
2024-08-07 16:27:29,715 - app - INFO - Initializing services...
2024-08-07 16:27:29,728 - app - INFO - Initializing email service...
2024-08-07 16:27:29,729 - app - INFO - Setting up scheduler...
2024-08-07 16:27:29,735 - app - INFO - Initializing scheduler...
2024-08-07 16:27:29,737 - app.scheduler - INFO - Scheduler initialized
2024-08-07 16:27:29,738 - app - INFO - Application initialized successfully
2024-08-07 16:27:43,536 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:27:44,129 - app.database - INFO - Database connection established successfully
2024-08-07 16:27:44,425 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:44,426 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:27:45,025 - app.database - INFO - Database connection established successfully
2024-08-07 16:27:45,071 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:45,089 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:27:45,655 - app.database - INFO - Database connection established successfully
2024-08-07 16:27:45,703 - app.services.trial_matching_service - INFO - Retrieved 5 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:45,728 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:45,729 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:27:46,350 - app.database - INFO - Database connection established successfully
2024-08-07 16:27:46,389 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:46,400 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:27:46,973 - app.database - INFO - Database connection established successfully
2024-08-07 16:27:47,013 - app.services.trial_matching_service - INFO - Retrieved 5 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:50,973 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:50,973 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:27:51,511 - app.database - INFO - Database connection established successfully
2024-08-07 16:27:51,547 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:51,561 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:51,561 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:27:52,109 - app.database - INFO - Database connection established successfully
2024-08-07 16:27:52,147 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:52,923 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:27:53,461 - app.database - INFO - Database connection established successfully
2024-08-07 16:27:53,539 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:53,578 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:27:54,210 - app.database - INFO - Database connection established successfully
2024-08-07 16:27:54,293 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:27:54,795 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:27:55,429 - app.database - INFO - Database connection established successfully
2024-08-07 16:27:55,652 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:03,290 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 85,\n        "reasons": [\n            "Patient has leukemia, which matches the trial\'s condition",\n            "Trial is specifically for leukemia patients",\n            "Patient\'s age (24 years old) falls within the typical age range for adult trials",\n            "Trial is in Phase 2, which is suitable for patients with established diagnoses",\n            "Patient is currently on treatment, which aligns with the trial\'s requirement of prior therapy"\n        ]\n    }\n]\n\nExplanation:\n1. The trial NCT00072579 is the only one that closely matches the patient\'s profile.\n2. The compatibility score is 85 because:\n   - The trial is specifically for leukemia patients, which matches the patient\'s condition.\n   - The patient\'s age is suitable for an adult trial.\n   - The trial is in Phase 2, which is appropriate for patients with established diagnoses.\n   - The patient is currently on treatment, which aligns with the trial\'s requirement of prior therapy.\n3. The score is not 100 because:\n   - The trial specifically mentions chronic myelogenous leukemia, while the patient\'s profile doesn\'t specify the type of leukemia.\n   - The trial has specific criteria about cytogenetic remission and prior treatments that we can\'t confirm from the patient\'s profile.\n\nThe other trials in the list are not related to leukemia or the patient\'s condition, so they are not included in the match results.', type='text')]
2024-08-07 16:28:03,290 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 85,\n        "reasons": [\n            "Patient has leukemia, which matches the trial\'s condition",\n            "Trial is specifically for leukemia patients",\n            "Patient\'s age (24 years old) falls within the typical age range for adult trials",\n            "Trial is in Phase 2, which is suitable for patients with established diagnoses",\n            "Patient is currently on treatment, which aligns with the trial\'s requirement of prior therapy"\n        ]\n    }\n]\n\nExplanation:\n1. The trial NCT00072579 is the only one that closely matches the patient\'s profile.\n2. The compatibility score is 85 because:\n   - The trial is specifically for leukemia patients, which matches the patient\'s condition.\n   - The patient\'s age is suitable for an adult trial.\n   - The trial is in Phase 2, which is appropriate for patients with established diagnoses.\n   - The patient is currently on treatment, which aligns with the trial\'s requirement of prior therapy.\n3. The score is not 100 because:\n   - The trial specifically mentions chronic myelogenous leukemia, while the patient\'s profile doesn\'t specify the type of leukemia.\n   - The trial has specific criteria about cytogenetic remission and prior treatments that we can\'t confirm from the patient\'s profile.\n\nThe other trials in the list are not related to leukemia or the patient\'s condition, so they are not included in the match results.', type='text')]
2024-08-07 16:28:03,293 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT00072579",
        "compatibility_score": 85,
        "reasons": [
            "Patient has leukemia, which matches the trial's condition",
            "Trial is specifically for leukemia patients",
            "Patient's age (24 years old) falls within the typical age range for adult trials",
            "Trial is in Phase 2, which is suitable for patients with established diagnoses",
            "Patient is currently on treatment, which aligns with the trial's requirement of prior therapy"
        ]
    }
]

Explanation:
1. The trial NCT00072579 is the only one that closely matches the patient's profile.
2. The compatibility score is 85 because:
   - The trial is specifically for leukemia patients, which matches the patient's condition.
   - The patient's age is suitable for an adult trial.
   - The trial is in Phase 2, which is appropriate for patients with established diagnoses.
   - The patient is currently on treatment, which aligns with the trial's requirement of prior therapy.
3. The score is not 100 because:
   - The trial specifically mentions chronic myelogenous leukemia, while the patient's profile doesn't specify the type of leukemia.
   - The trial has specific criteria about cytogenetic remission and prior treatments that we can't confirm [SQL REDACTED] the patient's profile.

The other trials in the list are not related to leukemia or the patient's condition, so they are not included in the match results.
2024-08-07 16:28:03,293 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 15 column 1 (char 546)
2024-08-07 16:28:03,293 - app.services.anthropic_service - ERROR - Response content: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT00072579",
        "compatibility_score": 85,
        "reasons": [
            "Patient has leukemia, which matches the trial's condition",
            "Trial is specifically for leukemia patients",
            "Patient's age (24 years old) falls within the typical age range for adult trials",
            "Trial is in Phase 2, which is suitable for patients with established diagnoses",
            "Patient is currently on treatment, which aligns with the trial's requirement of prior therapy"
        ]
    }
]

Explanation:
1. The trial NCT00072579 is the only one that closely matches the patient's profile.
2. The compatibility score is 85 because:
   - The trial is specifically for leukemia patients, which matches the patient's condition.
   - The patient's age is suitable for an adult trial.
   - The trial is in Phase 2, which is appropriate for patients with established diagnoses.
   - The patient is currently on treatment, which aligns with the trial's requirement of prior therapy.
3. The score is not 100 because:
   - The trial specifically mentions chronic myelogenous leukemia, while the patient's profile doesn't specify the type of leukemia.
   - The trial has specific criteria about cytogenetic remission and prior treatments that we can't confirm [SQL REDACTED] the patient's profile.

The other trials in the list are not related to leukemia or the patient's condition, so they are not included in the match results.
2024-08-07 16:28:03,294 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:28:03,464 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:08,378 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trial, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. The provided clinical trial (NCT04690179) is focused on sarcopenia and sarcopenic obesity in complex abdominal wall surgery, particularly for patients with incisional hernias. The trial's conditions (Sarcopenia, Sarcopenic Obesity, Incisional Hernia) and focus do not match the patient's medical condition (leukemia). Additionally, the patient's age and specific medical condition are not relevant to the trial's objectives. Therefore, the compatibility score would be well below the required threshold of 70, resulting in no suitable matches for this patient.", type='text')]
2024-08-07 16:28:08,378 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trial, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. The provided clinical trial (NCT04690179) is focused on sarcopenia and sarcopenic obesity in complex abdominal wall surgery, particularly for patients with incisional hernias. The trial's conditions (Sarcopenia, Sarcopenic Obesity, Incisional Hernia) and focus do not match the patient's medical condition (leukemia). Additionally, the patient's age and specific medical condition are not relevant to the trial's objectives. Therefore, the compatibility score would be well below the required threshold of 70, resulting in no suitable matches for this patient.", type='text')]
2024-08-07 16:28:08,380 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trial, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Jimmy Oldman, is a 24-year-old male with leukemia. The provided clinical trial (NCT04690179) is focused on sarcopenia and sarcopenic obesity in complex abdominal wall surgery, particularly for patients with incisional hernias. The trial's conditions (Sarcopenia, Sarcopenic Obesity, Incisional Hernia) and focus do not match the patient's medical condition (leukemia). Additionally, the patient's age and specific medical condition are not relevant to the trial's objectives. Therefore, the compatibility score would be well below the required threshold of 70, resulting in no suitable matches for this patient.
2024-08-07 16:28:08,380 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:28:08,380 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:28:08,596 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:17,390 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not specifically addressed in any of the provided clinical trials. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, none of which align with the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:28:17,391 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not specifically addressed in any of the provided clinical trials. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, none of which align with the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:28:17,391 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not specifically addressed in any of the provided clinical trials. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, none of which align with the patient's profile.

Therefore, the output is an empty array:

[]
2024-08-07 16:28:17,392 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:28:17,392 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:28:17,611 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:20,359 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not the focus of either of the provided clinical trials. One trial is for Type 2 Diabetes Mellitus, and the other is for Non-Small Cell Lung Cancer. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:28:20,360 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not the focus of either of the provided clinical trials. One trial is for Type 2 Diabetes Mellitus, and the other is for Non-Small Cell Lung Cancer. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:28:20,360 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not the focus of either of the provided clinical trials. One trial is for Type 2 Diabetes Mellitus, and the other is for Non-Small Cell Lung Cancer. Therefore, the output is an empty array:

[]
2024-08-07 16:28:20,361 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:28:20,362 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:28:20,557 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:24,902 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient's primary condition is leukemia, which is not addressed in any of the provided clinical trials.\n2. The first trial (NCT03059979) is for systemic sclerosis and Raynaud's phenomenon, which the patient does not have.\n3. The second trial (NCT00293579) is for head and neck cancer, which is not relevant to the patient's condition.\n4. The third trial (NCT04491279) is for stroke patients, which does not match the patient's profile.\n\nGiven that none of the trials are related to leukemia or any of the patient's other medical conditions, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 16:28:24,904 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient's primary condition is leukemia, which is not addressed in any of the provided clinical trials.\n2. The first trial (NCT03059979) is for systemic sclerosis and Raynaud's phenomenon, which the patient does not have.\n3. The second trial (NCT00293579) is for head and neck cancer, which is not relevant to the patient's condition.\n4. The third trial (NCT04491279) is for stroke patients, which does not match the patient's profile.\n\nGiven that none of the trials are related to leukemia or any of the patient's other medical conditions, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 16:28:24,904 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the clinical trial data provided, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient's primary condition is leukemia, which is not addressed in any of the provided clinical trials.
2. The first trial (NCT03059979) is for systemic sclerosis and Raynaud's phenomenon, which the patient does not have.
3. The second trial (NCT00293579) is for head and neck cancer, which is not relevant to the patient's condition.
4. The third trial (NCT04491279) is for stroke patients, which does not match the patient's profile.

Given that none of the trials are related to leukemia or any of the patient's other medical conditions, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-07 16:28:24,905 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:28:24,905 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:28:25,119 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:29,480 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the given clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not the focus of any of the provided trials.\n2. The patient's age (24 years old) and gender (male) don't specifically match the criteria for the given trials.\n3. The medications the patient is taking are not relevant to the conditions being studied in these trials.\n4. The trials focus on breast cancer, lung transplantation, workplace safety, and choroidal thickness, which are not related to the patient's condition of leukemia.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.", type='text')]
2024-08-07 16:28:29,480 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the given clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not the focus of any of the provided trials.\n2. The patient's age (24 years old) and gender (male) don't specifically match the criteria for the given trials.\n3. The medications the patient is taking are not relevant to the conditions being studied in these trials.\n4. The trials focus on breast cancer, lung transplantation, workplace safety, and choroidal thickness, which are not related to the patient's condition of leukemia.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.", type='text')]
2024-08-07 16:28:29,481 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the given clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. The patient has leukemia, which is not the focus of any of the provided trials.
2. The patient's age (24 years old) and gender (male) don't specifically match the criteria for the given trials.
3. The medications the patient is taking are not relevant to the conditions being studied in these trials.
4. The trials focus on breast cancer, lung transplantation, workplace safety, and choroidal thickness, which are not related to the patient's condition of leukemia.

Therefore, the output in the requested JSON format would be an empty array:

[]

This indicates that there are no suitable trials for this patient among the provided options with a compatibility score of 70 or higher.
2024-08-07 16:28:29,482 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:28:29,483 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:28:29,682 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:34,676 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a score of 70 or higher. Here's why:\n\n1. NCT01272479: This trial is for hemodialysis patients with hepatitis C. The patient has leukemia, not renal failure or hepatitis C.\n\n2. NCT01593579: This trial is for melanoma patients. The patient has leukemia, not melanoma.\n\n3. NCT01709279: This trial is for ischemic heart failure patients. The patient has leukemia, not heart failure.\n\n4. NCT03982979: This trial is for patients with advanced refractory left ventricular heart failure. The patient has leukemia, not heart failure.\n\nNone of these trials are suitable for a patient with leukemia, which is the primary medical condition listed in the patient profile. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:28:34,677 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a score of 70 or higher. Here's why:\n\n1. NCT01272479: This trial is for hemodialysis patients with hepatitis C. The patient has leukemia, not renal failure or hepatitis C.\n\n2. NCT01593579: This trial is for melanoma patients. The patient has leukemia, not melanoma.\n\n3. NCT01709279: This trial is for ischemic heart failure patients. The patient has leukemia, not heart failure.\n\n4. NCT03982979: This trial is for patients with advanced refractory left ventricular heart failure. The patient has leukemia, not heart failure.\n\nNone of these trials are suitable for a patient with leukemia, which is the primary medical condition listed in the patient profile. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:28:34,678 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Unfortunately, none of the trials match this patient with a score of 70 or higher. Here's why:

1. NCT01272479: This trial is for hemodialysis patients with hepatitis C. The patient has leukemia, not renal failure or hepatitis C.

2. NCT01593579: This trial is for melanoma patients. The patient has leukemia, not melanoma.

3. NCT01709279: This trial is for ischemic heart failure patients. The patient has leukemia, not heart failure.

4. NCT03982979: This trial is for patients with advanced refractory left ventricular heart failure. The patient has leukemia, not heart failure.

None of these trials are suitable for a patient with leukemia, which is the primary medical condition listed in the patient profile. Therefore, the output is an empty array:

[]
2024-08-07 16:28:34,678 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:28:34,679 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:28:34,855 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:42,125 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Here's why:\n\n1. NCT06289179 (Thyroid and Cortisol Hormone Response to Sepsis):\n   - This trial is for patients with sepsis, which the patient doesn't have.\n   - The patient's primary condition is leukemia, which is not related to this study.\n\n2. NCT03221179 (Safety, Tolerability, Pharmacokinetics, and Pharmacodynamics of RO7049665 in Healthy Volunteers):\n   - This trial is for healthy volunteers.\n   - The patient has leukemia and is on multiple medications, so they don't qualify as a healthy volunteer.\n\n3. NCT00228579 (Assessment of Changes in Abdominal Fat):\n   - This trial is for severely obese patients, which is not mentioned in the patient's profile.\n   - The study is specifically looking at females, while the patient is male.\n   - The patient's primary condition (leukemia) is not related to this study.\n\nNone of these trials are suitable for a leukemia patient, which is the primary medical condition listed in the patient's profile. Therefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-07 16:28:42,126 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Here's why:\n\n1. NCT06289179 (Thyroid and Cortisol Hormone Response to Sepsis):\n   - This trial is for patients with sepsis, which the patient doesn't have.\n   - The patient's primary condition is leukemia, which is not related to this study.\n\n2. NCT03221179 (Safety, Tolerability, Pharmacokinetics, and Pharmacodynamics of RO7049665 in Healthy Volunteers):\n   - This trial is for healthy volunteers.\n   - The patient has leukemia and is on multiple medications, so they don't qualify as a healthy volunteer.\n\n3. NCT00228579 (Assessment of Changes in Abdominal Fat):\n   - This trial is for severely obese patients, which is not mentioned in the patient's profile.\n   - The study is specifically looking at females, while the patient is male.\n   - The patient's primary condition (leukemia) is not related to this study.\n\nNone of these trials are suitable for a leukemia patient, which is the primary medical condition listed in the patient's profile. Therefore, the output in the requested JSON format would be an empty array:\n\n[]", type='text')]
2024-08-07 16:28:42,126 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. Here's why:

1. NCT06289179 (Thyroid and Cortisol Hormone Response to Sepsis):
   - This trial is for patients with sepsis, which the patient doesn't have.
   - The patient's primary condition is leukemia, which is not related to this study.

2. NCT03221179 (Safety, Tolerability, Pharmacokinetics, and Pharmacodynamics of RO7049665 in Healthy Volunteers):
   - This trial is for healthy volunteers.
   - The patient has leukemia and is on multiple medications, so they don't qualify as a healthy volunteer.

3. NCT00228579 (Assessment of Changes in Abdominal Fat):
   - This trial is for severely obese patients, which is not mentioned in the patient's profile.
   - The study is specifically looking at females, while the patient is male.
   - The patient's primary condition (leukemia) is not related to this study.

None of these trials are suitable for a leukemia patient, which is the primary medical condition listed in the patient's profile. Therefore, the output in the requested JSON format would be an empty array:

[]
2024-08-07 16:28:42,127 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:28:42,127 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:28:42,294 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:47,222 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here is the matching result:\n\n[\n    {\n        "nct_id": "NCT05639179",\n        "compatibility_score": 90,\n        "reasons": [\n            "The trial is specifically for B-cell Acute Lymphoblastic Leukemia (B-ALL), which is a type of leukemia matching the patient\'s medical condition",\n            "The trial is in Phase 1/2 and recruiting, making it potentially accessible",\n            "The patient\'s age (24 years) falls within the trial\'s age range (2-75 years)",\n            "The trial is for relapsed/refractory B-ALL, which may be relevant given the patient\'s current medications suggesting ongoing treatment"\n        ]\n    }\n]', type='text')]
2024-08-07 16:28:47,222 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here is the matching result:\n\n[\n    {\n        "nct_id": "NCT05639179",\n        "compatibility_score": 90,\n        "reasons": [\n            "The trial is specifically for B-cell Acute Lymphoblastic Leukemia (B-ALL), which is a type of leukemia matching the patient\'s medical condition",\n            "The trial is in Phase 1/2 and recruiting, making it potentially accessible",\n            "The patient\'s age (24 years) falls within the trial\'s age range (2-75 years)",\n            "The trial is for relapsed/refractory B-ALL, which may be relevant given the patient\'s current medications suggesting ongoing treatment"\n        ]\n    }\n]', type='text')]
2024-08-07 16:28:47,223 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here is the matching result:

[
    {
        "nct_id": "NCT05639179",
        "compatibility_score": 90,
        "reasons": [
            "The trial is specifically for B-cell Acute Lymphoblastic Leukemia (B-ALL), which is a type of leukemia matching the patient's medical condition",
            "The trial is in Phase 1/2 and recruiting, making it potentially accessible",
            "The patient's age (24 years) falls within the trial's age range (2-75 years)",
            "The trial is for relapsed/refractory B-ALL, which may be relevant given the patient's current medications suggesting ongoing treatment"
        ]
    }
]
2024-08-07 16:28:47,223 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-07 16:28:47,260 - app.services.trial_matching_service - INFO - Trial NCT05639179 already matched for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:47,261 - app.services.trial_matching_service - INFO - Emitted 0 trial matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:47,261 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:28:47,431 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:52,862 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Jimmy Oldman, is a 24-year-old male with leukemia.\n\n2. The first clinical trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years. This doesn't match the patient's age or medical condition.\n\n3. The second clinical trial (NCT02052479) is for female adolescents with Polycystic Ovary Syndrome (PCOS). This doesn't match the patient's gender, age, or medical condition.\n\nNeither of these trials is suitable for a male adult with leukemia. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-07 16:28:52,863 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Jimmy Oldman, is a 24-year-old male with leukemia.\n\n2. The first clinical trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years. This doesn't match the patient's age or medical condition.\n\n3. The second clinical trial (NCT02052479) is for female adolescents with Polycystic Ovary Syndrome (PCOS). This doesn't match the patient's gender, age, or medical condition.\n\nNeither of these trials is suitable for a male adult with leukemia. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-07 16:28:52,863 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. The patient, Jimmy Oldman, is a 24-year-old male with leukemia.

2. The first clinical trial (NCT05315479) is for postoperative pain in children aged 2 to <17 years. This doesn't match the patient's age or medical condition.

3. The second clinical trial (NCT02052479) is for female adolescents with Polycystic Ovary Syndrome (PCOS). This doesn't match the patient's gender, age, or medical condition.

Neither of these trials is suitable for a male adult with leukemia. Therefore, the output in the requested JSON format is:

[]

This empty array indicates that no trials match with a score of 70 or higher for this patient.
2024-08-07 16:28:52,863 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:28:52,863 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:28:53,028 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:28:58,451 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasoning:\n1. The patient has leukemia, but none of the trials are specifically for leukemia treatment.\n2. The patient's age (24 years old) does not match the age criteria for the trials that specify age ranges.\n3. The patient's current medications and condition do not align with the focus of any of the provided trials.\n4. The trials cover topics such as influenza vaccines, postpartum care, colorectal cancer, and oncologist satisfaction, which are not relevant to the patient's primary condition of leukemia.\n\nGiven these factors, there are no trials that meet the minimum compatibility score of 70 for this patient.", type='text')]
2024-08-07 16:28:58,452 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasoning:\n1. The patient has leukemia, but none of the trials are specifically for leukemia treatment.\n2. The patient's age (24 years old) does not match the age criteria for the trials that specify age ranges.\n3. The patient's current medications and condition do not align with the focus of any of the provided trials.\n4. The trials cover topics such as influenza vaccines, postpartum care, colorectal cancer, and oncologist satisfaction, which are not relevant to the patient's primary condition of leukemia.\n\nGiven these factors, there are no trials that meet the minimum compatibility score of 70 for this patient.", type='text')]
2024-08-07 16:28:58,453 - app.services.anthropic_service - INFO - Parsing response: After carefully analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasoning:
1. The patient has leukemia, but none of the trials are specifically for leukemia treatment.
2. The patient's age (24 years old) does not match the age criteria for the trials that specify age ranges.
3. The patient's current medications and condition do not align with the focus of any of the provided trials.
4. The trials cover topics such as influenza vaccines, postpartum care, colorectal cancer, and oncologist satisfaction, which are not relevant to the patient's primary condition of leukemia.

Given these factors, there are no trials that meet the minimum compatibility score of 70 for this patient.
2024-08-07 16:28:58,453 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:28:58,453 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:28:58,616 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:29:04,493 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have evaluated the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNeither of the two clinical trials provided are suitable matches for the patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT06378879 (Propofol study):\n   - This trial is focused on anesthesia during endoscopy, which is not related to the patient's medical condition (leukemia).\n   - The patient's age (24 years old) fits within the inclusion criteria, but the primary focus of the study is not relevant to their condition.\n   - Compatibility score would be well below 70.\n\n2. NCT02710279 (Response to Social Rejection in Suicidal Behavior):\n   - This trial is focused on unipolar depression and suicidal behavior, which are not mentioned in the patient's profile.\n   - The trial specifically recruits female patients, while the patient is male.\n   - The patient's primary condition (leukemia) is not relevant to this study.\n   - Compatibility score would be well below 70.\n\nGiven that neither trial is sufficiently compatible with the patient's profile, the result is an empty array, indicating no suitable matches with a score of 70 or higher.", type='text')]
2024-08-07 16:29:04,493 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have evaluated the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNeither of the two clinical trials provided are suitable matches for the patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT06378879 (Propofol study):\n   - This trial is focused on anesthesia during endoscopy, which is not related to the patient's medical condition (leukemia).\n   - The patient's age (24 years old) fits within the inclusion criteria, but the primary focus of the study is not relevant to their condition.\n   - Compatibility score would be well below 70.\n\n2. NCT02710279 (Response to Social Rejection in Suicidal Behavior):\n   - This trial is focused on unipolar depression and suicidal behavior, which are not mentioned in the patient's profile.\n   - The trial specifically recruits female patients, while the patient is male.\n   - The patient's primary condition (leukemia) is not relevant to this study.\n   - Compatibility score would be well below 70.\n\nGiven that neither trial is sufficiently compatible with the patient's profile, the result is an empty array, indicating no suitable matches with a score of 70 or higher.", type='text')]
2024-08-07 16:29:04,494 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have evaluated the compatibility. Here's the result:

[]

Explanation:
Neither of the two clinical trials provided are suitable matches for the patient with a compatibility score of 70 or higher. Here's why:

1. NCT06378879 (Propofol study):
   - This trial is focused on anesthesia during endoscopy, which is not related to the patient's medical condition (leukemia).
   - The patient's age (24 years old) fits within the inclusion criteria, but the primary focus of the study is not relevant to their condition.
   - Compatibility score would be well below 70.

2. NCT02710279 (Response to Social Rejection in Suicidal Behavior):
   - This trial is focused on unipolar depression and suicidal behavior, which are not mentioned in the patient's profile.
   - The trial specifically recruits female patients, while the patient is male.
   - The patient's primary condition (leukemia) is not relevant to this study.
   - Compatibility score would be well below 70.

Given that neither trial is sufficiently compatible with the patient's profile, the result is an empty array, indicating no suitable matches with a score of 70 or higher.
2024-08-07 16:29:04,494 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:29:04,494 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:29:04,715 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:29:07,670 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by any of the provided clinical trials. The trials focus on vascular Ehlers-Danlos Syndrome, periodontitis, and anemia, which are not conditions mentioned in the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:29:07,670 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by any of the provided clinical trials. The trials focus on vascular Ehlers-Danlos Syndrome, periodontitis, and anemia, which are not conditions mentioned in the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:29:07,671 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by any of the provided clinical trials. The trials focus on vascular Ehlers-Danlos Syndrome, periodontitis, and anemia, which are not conditions mentioned in the patient's profile.

Therefore, the output is an empty array:

[]
2024-08-07 16:29:07,671 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:29:07,672 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:29:07,922 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:29:14,019 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. The provided clinical trials are focused on:\n\n1. Coronary artery bypass grafting surgery (NCT03855579)\n2. ADHD symptoms in children (NCT03283579)\n3. Atrial fibrillation (NCT04398979)\n4. Temperature monitoring during general anesthesia (NCT03745079)\n5. Allergic rhinitis (NCT02953379)\n\nNone of these trials are related to leukemia or the patient's current medications. Additionally, the patient's age and specific condition do not match the eligibility criteria for any of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 16:29:14,019 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. The provided clinical trials are focused on:\n\n1. Coronary artery bypass grafting surgery (NCT03855579)\n2. ADHD symptoms in children (NCT03283579)\n3. Atrial fibrillation (NCT04398979)\n4. Temperature monitoring during general anesthesia (NCT03745079)\n5. Allergic rhinitis (NCT02953379)\n\nNone of these trials are related to leukemia or the patient's current medications. Additionally, the patient's age and specific condition do not match the eligibility criteria for any of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 16:29:14,020 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Jimmy Oldman, is a 24-year-old male with leukemia. The provided clinical trials are focused on:

1. Coronary artery bypass grafting surgery (NCT03855579)
2. ADHD symptoms in children (NCT03283579)
3. Atrial fibrillation (NCT04398979)
4. Temperature monitoring during general anesthesia (NCT03745079)
5. Allergic rhinitis (NCT02953379)

None of these trials are related to leukemia or the patient's current medications. Additionally, the patient's age and specific condition do not match the eligibility criteria for any of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-07 16:29:14,021 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:29:14,022 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:29:14,196 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:29:19,419 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided match this patient with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT02199379: This trial is for subjects with renal impairment, which doesn't match the patient's condition (leukemia).\n\n2. NCT02407379: This trial is for patients with periodontitis, which is unrelated to the patient's condition.\n\n3. NCT01100879: This trial is for patients with multiple myeloma and iron-deficiency anemia, which doesn't match the patient's condition.\n\nThe patient's primary condition is leukemia, and none of the provided trials are related to leukemia or its treatment. Additionally, the patient's age (24 years old) and specific medications are not relevant to any of these trials. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-07 16:29:19,420 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided match this patient with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT02199379: This trial is for subjects with renal impairment, which doesn't match the patient's condition (leukemia).\n\n2. NCT02407379: This trial is for patients with periodontitis, which is unrelated to the patient's condition.\n\n3. NCT01100879: This trial is for patients with multiple myeloma and iron-deficiency anemia, which doesn't match the patient's condition.\n\nThe patient's primary condition is leukemia, and none of the provided trials are related to leukemia or its treatment. Additionally, the patient's age (24 years old) and specific medications are not relevant to any of these trials. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-07 16:29:19,420 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials provided match this patient with a compatibility score of 70 or higher. Therefore, the result is an empty array:

[]

Explanation:

1. NCT02199379: This trial is for subjects with renal impairment, which doesn't match the patient's condition (leukemia).

2. NCT02407379: This trial is for patients with periodontitis, which is unrelated to the patient's condition.

3. NCT01100879: This trial is for patients with multiple myeloma and iron-deficiency anemia, which doesn't match the patient's condition.

The patient's primary condition is leukemia, and none of the provided trials are related to leukemia or its treatment. Additionally, the patient's age (24 years old) and specific medications are not relevant to any of these trials. Therefore, there are no suitable matches with a score of 70 or higher.
2024-08-07 16:29:19,421 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:29:19,421 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:29:19,604 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:40:10,000 - app - INFO - Initializing Flask app...
2024-08-07 16:40:10,001 - app - INFO - Configuring app...
2024-08-07 16:40:10,001 - app - INFO - Setting up CORS...
2024-08-07 16:40:10,001 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 16:40:10,184 - app - INFO - Initializing JWT manager...
2024-08-07 16:40:10,184 - app - INFO - Setting up rate limiting...
2024-08-07 16:40:10,185 - app - INFO - Setting up database...
2024-08-07 16:40:10,185 - app - INFO - Starting database setup...
2024-08-07 16:40:10,810 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 16:40:10,810 - app - INFO - Database setup completed successfully
2024-08-07 16:40:10,811 - app - INFO - Registering error handler...
2024-08-07 16:40:10,811 - app - INFO - Initializing CLI commands...
2024-08-07 16:40:10,811 - app - INFO - Registering routes...
2024-08-07 16:40:10,818 - app - INFO - Initializing services...
2024-08-07 16:40:10,826 - app - INFO - Initializing email service...
2024-08-07 16:40:10,826 - app - INFO - Setting up scheduler...
2024-08-07 16:40:10,831 - app - INFO - Initializing scheduler...
2024-08-07 16:40:10,831 - app.scheduler - INFO - Scheduler initialized
2024-08-07 16:40:10,832 - app - INFO - Application initialized successfully
2024-08-07 16:40:12,471 - app - INFO - Initializing Flask app...
2024-08-07 16:40:12,472 - app - INFO - Configuring app...
2024-08-07 16:40:12,472 - app - INFO - Setting up CORS...
2024-08-07 16:40:12,473 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 16:40:12,763 - app - INFO - Initializing JWT manager...
2024-08-07 16:40:12,764 - app - INFO - Setting up rate limiting...
2024-08-07 16:40:12,765 - app - INFO - Setting up database...
2024-08-07 16:40:12,766 - app - INFO - Starting database setup...
2024-08-07 16:40:13,327 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 16:40:13,327 - app - INFO - Database setup completed successfully
2024-08-07 16:40:13,327 - app - INFO - Registering error handler...
2024-08-07 16:40:13,328 - app - INFO - Initializing CLI commands...
2024-08-07 16:40:13,328 - app - INFO - Registering routes...
2024-08-07 16:40:13,333 - app - INFO - Initializing services...
2024-08-07 16:40:13,347 - app - INFO - Initializing email service...
2024-08-07 16:40:13,348 - app - INFO - Setting up scheduler...
2024-08-07 16:40:13,351 - app - INFO - Initializing scheduler...
2024-08-07 16:40:13,351 - app.scheduler - INFO - Scheduler initialized
2024-08-07 16:40:13,352 - app - INFO - Application initialized successfully
2024-08-07 16:40:28,866 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:40:29,400 - app.database - INFO - Database connection established successfully
2024-08-07 16:40:29,690 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:40:29,690 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:40:30,228 - app.database - INFO - Database connection established successfully
2024-08-07 16:40:30,269 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:40:30,277 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:40:30,794 - app.database - INFO - Database connection established successfully
2024-08-07 16:40:30,837 - app.services.trial_matching_service - INFO - Retrieved 5 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:40:30,844 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:40:30,844 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:40:31,377 - app.database - INFO - Database connection established successfully
2024-08-07 16:40:31,412 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-07 16:40:31,418 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:40:31,994 - app.database - INFO - Database connection established successfully
2024-08-07 16:40:32,039 - app.services.trial_matching_service - INFO - Retrieved 5 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:40:33,791 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:40:34,327 - app.database - INFO - Database connection established successfully
2024-08-07 16:40:34,423 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:40:34,444 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:40:34,968 - app.database - INFO - Database connection established successfully
2024-08-07 16:40:35,045 - app.services.trial_matching_service - INFO - Retrieved 14 recent matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:40:41,090 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:40:41,637 - app.database - INFO - Database connection established successfully
2024-08-07 16:40:41,761 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:40:50,620 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here is the matching result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 80,\n        "reasons": [\n            "Patient has leukemia, which matches the trial\'s condition",\n            "Trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",\n            "Patient is male and 24 years old, which likely fits within the trial\'s age and gender criteria",\n            "Patient is currently on medications commonly used for leukemia treatment, indicating they may be in a treatment phase suitable for this trial"\n        ]\n    }\n]\n\nNote: While this trial is the best match, there are some uncertainties that prevent a perfect score:\n1. The trial specifically mentions chronic myelogenous leukemia, while the patient\'s profile only states "leukemia" without specifying the type.\n2. The trial mentions patients not in complete cytogenetic remission after initial treatment, which we can\'t confirm from the patient\'s profile.\n3. The patient\'s exact stage of treatment and remission status is not provided, which are important criteria for this trial.\n\nThe other trials in the list do not match the patient\'s profile sufficiently to meet the 70% threshold, as they focus on conditions unrelated to leukemia (erectile dysfunction, prostate issues, smoking).', type='text')]
2024-08-07 16:40:50,621 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here is the matching result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 80,\n        "reasons": [\n            "Patient has leukemia, which matches the trial\'s condition",\n            "Trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",\n            "Patient is male and 24 years old, which likely fits within the trial\'s age and gender criteria",\n            "Patient is currently on medications commonly used for leukemia treatment, indicating they may be in a treatment phase suitable for this trial"\n        ]\n    }\n]\n\nNote: While this trial is the best match, there are some uncertainties that prevent a perfect score:\n1. The trial specifically mentions chronic myelogenous leukemia, while the patient\'s profile only states "leukemia" without specifying the type.\n2. The trial mentions patients not in complete cytogenetic remission after initial treatment, which we can\'t confirm from the patient\'s profile.\n3. The patient\'s exact stage of treatment and remission status is not provided, which are important criteria for this trial.\n\nThe other trials in the list do not match the patient\'s profile sufficiently to meet the 70% threshold, as they focus on conditions unrelated to leukemia (erectile dysfunction, prostate issues, smoking).', type='text')]
2024-08-07 16:40:50,621 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here is the matching result:

[
    {
        "nct_id": "NCT00072579",
        "compatibility_score": 80,
        "reasons": [
            "Patient has leukemia, which matches the trial's condition",
            "Trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",
            "Patient is male and 24 years old, which likely fits within the trial's age and gender criteria",
            "Patient is currently on medications commonly used for leukemia treatment, indicating they may be in a treatment phase suitable for this trial"
        ]
    }
]

Note: While this trial is the best match, there are some uncertainties that prevent a perfect score:
1. The trial specifically mentions chronic myelogenous leukemia, while the patient's profile only states "leukemia" without specifying the type.
2. The trial mentions patients not in complete cytogenetic remission after initial treatment, which we can't confirm [SQL REDACTED] the patient's profile.
3. The patient's exact stage of treatment and remission status is not provided, which are important criteria for this trial.

The other trials in the list do not match the patient's profile sufficiently to meet the 70% threshold, as they focus on conditions unrelated to leukemia (erectile dysfunction, prostate issues, smoking).
2024-08-07 16:40:50,622 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 14 column 1 (char 554)
2024-08-07 16:40:50,622 - app.services.anthropic_service - ERROR - Response content: Based on the patient profile and clinical trial data provided, here is the matching result:

[
    {
        "nct_id": "NCT00072579",
        "compatibility_score": 80,
        "reasons": [
            "Patient has leukemia, which matches the trial's condition",
            "Trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",
            "Patient is male and 24 years old, which likely fits within the trial's age and gender criteria",
            "Patient is currently on medications commonly used for leukemia treatment, indicating they may be in a treatment phase suitable for this trial"
        ]
    }
]

Note: While this trial is the best match, there are some uncertainties that prevent a perfect score:
1. The trial specifically mentions chronic myelogenous leukemia, while the patient's profile only states "leukemia" without specifying the type.
2. The trial mentions patients not in complete cytogenetic remission after initial treatment, which we can't confirm [SQL REDACTED] the patient's profile.
3. The patient's exact stage of treatment and remission status is not provided, which are important criteria for this trial.

The other trials in the list do not match the patient's profile sufficiently to meet the 70% threshold, as they focus on conditions unrelated to leukemia (erectile dysfunction, prostate issues, smoking).
2024-08-07 16:40:50,622 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:40:50,699 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:40:55,820 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not the target condition for either of the provided clinical trials.\n\n2. The first trial (NCT01353079) is for allergic rhinoconjunctivitis caused by ragweed pollen, which is unrelated to the patient's condition.\n\n3. The second trial (NCT03793179) is for non-small cell lung cancer, which is also unrelated to the patient's condition.\n\n4. The patient's age (24 years old) and medications are not specifically relevant to either trial's eligibility criteria.\n\nGiven these factors, the compatibility score for both trials would be well below 70. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-07 16:40:55,820 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not the target condition for either of the provided clinical trials.\n\n2. The first trial (NCT01353079) is for allergic rhinoconjunctivitis caused by ragweed pollen, which is unrelated to the patient's condition.\n\n3. The second trial (NCT03793179) is for non-small cell lung cancer, which is also unrelated to the patient's condition.\n\n4. The patient's age (24 years old) and medications are not specifically relevant to either trial's eligibility criteria.\n\nGiven these factors, the compatibility score for both trials would be well below 70. Therefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a score of 70 or higher for this patient.", type='text')]
2024-08-07 16:40:55,821 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I'm afraid there are no suitable trials with a compatibility score of 70 or higher. Here's why:

1. The patient has leukemia, which is not the target condition for either of the provided clinical trials.

2. The first trial (NCT01353079) is for allergic rhinoconjunctivitis caused by ragweed pollen, which is unrelated to the patient's condition.

3. The second trial (NCT03793179) is for non-small cell lung cancer, which is also unrelated to the patient's condition.

4. The patient's age (24 years old) and medications are not specifically relevant to either trial's eligibility criteria.

Given these factors, the compatibility score for both trials would be well below 70. Therefore, the output in the requested JSON format is:

[]

This empty array indicates that no trials match with a score of 70 or higher for this patient.
2024-08-07 16:40:55,821 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:40:55,821 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:40:55,898 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:41:02,674 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT00717379 (Kidney Transplantation study):\n   - This trial is for kidney transplant patients, which doesn't match the patient's condition (leukemia).\n   - Compatibility score would be very low (<70).\n\n2. NCT01294579 (Lymphoma study):\n   - This trial is for Non-Hodgkin's Lymphoma patients, which doesn't match the patient's condition (leukemia).\n   - Compatibility score would be very low (<70).\n\n3. NCT02589379 (Pancreatic Fistula study):\n   - This trial is for patients undergoing pancreatic surgery, which doesn't match the patient's condition (leukemia).\n   - Compatibility score would be very low (<70).\n\nThe patient's primary condition (leukemia) does not align with any of the provided clinical trials, which focus on kidney transplantation, lymphoma, and pancreatic fistula respectively. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 16:41:02,674 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the result is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT00717379 (Kidney Transplantation study):\n   - This trial is for kidney transplant patients, which doesn't match the patient's condition (leukemia).\n   - Compatibility score would be very low (<70).\n\n2. NCT01294579 (Lymphoma study):\n   - This trial is for Non-Hodgkin's Lymphoma patients, which doesn't match the patient's condition (leukemia).\n   - Compatibility score would be very low (<70).\n\n3. NCT02589379 (Pancreatic Fistula study):\n   - This trial is for patients undergoing pancreatic surgery, which doesn't match the patient's condition (leukemia).\n   - Compatibility score would be very low (<70).\n\nThe patient's primary condition (leukemia) does not align with any of the provided clinical trials, which focus on kidney transplantation, lymphoma, and pancreatic fistula respectively. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-07 16:41:02,675 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the provided clinical trials match this patient's profile with a compatibility score of 70 or higher. Therefore, the result is an empty array:

[]

Explanation:

1. NCT00717379 (Kidney Transplantation study):
   - This trial is for kidney transplant patients, which doesn't match the patient's condition (leukemia).
   - Compatibility score would be very low (<70).

2. NCT01294579 (Lymphoma study):
   - This trial is for Non-Hodgkin's Lymphoma patients, which doesn't match the patient's condition (leukemia).
   - Compatibility score would be very low (<70).

3. NCT02589379 (Pancreatic Fistula study):
   - This trial is for patients undergoing pancreatic surgery, which doesn't match the patient's condition (leukemia).
   - Compatibility score would be very low (<70).

The patient's primary condition (leukemia) does not align with any of the provided clinical trials, which focus on kidney transplantation, lymphoma, and pancreatic fistula respectively. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-07 16:41:02,675 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:41:02,675 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:41:02,752 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:41:06,587 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition (leukemia) does not match any of the conditions targeted by the provided clinical trials. The trials focus on conditions such as acromegaly, diabetes mellitus, post-intensive care syndrome, and esophageal cancer, which are not relevant to the patient's profile.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 16:41:06,587 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition (leukemia) does not match any of the conditions targeted by the provided clinical trials. The trials focus on conditions such as acromegaly, diabetes mellitus, post-intensive care syndrome, and esophageal cancer, which are not relevant to the patient's profile.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-07 16:41:06,588 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition (leukemia) does not match any of the conditions targeted by the provided clinical trials. The trials focus on conditions such as acromegaly, diabetes mellitus, post-intensive care syndrome, and esophageal cancer, which are not relevant to the patient's profile.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-07 16:41:06,588 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:41:06,588 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:41:06,671 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:41:12,541 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. NCT04801979 (Normative Values and Reference Equations of a New Incremental Step Test):\n   - This trial is for adults without disabilities, while the patient has leukemia.\n   - The trial explicitly excludes individuals with acute or chronic conditions.\n   - The patient's age (24 years old) and gender (male) would fit, but the medical condition is incompatible.\n\n2. NCT01312779 (Magna Mitral - 23mm):\n   - This trial is for patients with mitral valve disease requiring surgical replacement.\n   - The patient's profile does not mention any heart valve issues.\n   - The patient's leukemia and current medications are not relevant to this cardiac-focused study.\n\nGiven these factors, neither trial is sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:41:12,542 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. NCT04801979 (Normative Values and Reference Equations of a New Incremental Step Test):\n   - This trial is for adults without disabilities, while the patient has leukemia.\n   - The trial explicitly excludes individuals with acute or chronic conditions.\n   - The patient's age (24 years old) and gender (male) would fit, but the medical condition is incompatible.\n\n2. NCT01312779 (Magna Mitral - 23mm):\n   - This trial is for patients with mitral valve disease requiring surgical replacement.\n   - The patient's profile does not mention any heart valve issues.\n   - The patient's leukemia and current medications are not relevant to this cardiac-focused study.\n\nGiven these factors, neither trial is sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-07 16:41:12,543 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. NCT04801979 (Normative Values and Reference Equations of a New Incremental Step Test):
   - This trial is for adults without disabilities, while the patient has leukemia.
   - The trial explicitly excludes individuals with acute or chronic conditions.
   - The patient's age (24 years old) and gender (male) would fit, but the medical condition is incompatible.

2. NCT01312779 (Magna Mitral - 23mm):
   - This trial is for patients with mitral valve disease requiring surgical replacement.
   - The patient's profile does not mention any heart valve issues.
   - The patient's leukemia and current medications are not relevant to this cardiac-focused study.

Given these factors, neither trial is sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:

[]
2024-08-07 16:41:12,543 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:41:12,543 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:41:12,627 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:41:18,049 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a 24-year-old male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe key factors that contribute to the lack of compatibility are:\n\n1. The patient's primary medical condition (leukemia) is not related to the conditions targeted by the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (24 years old) is significantly younger than the typical demographic for sarcopenia and complex abdominal wall surgery.\n3. There's no indication in the patient profile of any abdominal wall issues or obesity-related conditions.\n4. The patient's current medications are not relevant to the trial's focus.\n\nGiven these factors, the compatibility score would be well below 70, and therefore, the appropriate output is an empty array:\n\n[]", type='text')]
2024-08-07 16:41:18,049 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the given patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a 24-year-old male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe key factors that contribute to the lack of compatibility are:\n\n1. The patient's primary medical condition (leukemia) is not related to the conditions targeted by the trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (24 years old) is significantly younger than the typical demographic for sarcopenia and complex abdominal wall surgery.\n3. There's no indication in the patient profile of any abdominal wall issues or obesity-related conditions.\n4. The patient's current medications are not relevant to the trial's focus.\n\nGiven these factors, the compatibility score would be well below 70, and therefore, the appropriate output is an empty array:\n\n[]", type='text')]
2024-08-07 16:41:18,050 - app.services.anthropic_service - INFO - Parsing response: Based on the given patient profile and clinical trial data, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile, which indicates a 24-year-old male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

The key factors that contribute to the lack of compatibility are:

1. The patient's primary medical condition (leukemia) is not related to the conditions targeted by the trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (24 years old) is significantly younger than the typical demographic for sarcopenia and complex abdominal wall surgery.
3. There's no indication in the patient profile of any abdominal wall issues or obesity-related conditions.
4. The patient's current medications are not relevant to the trial's focus.

Given these factors, the compatibility score would be well below 70, and therefore, the appropriate output is an empty array:

[]
2024-08-07 16:41:18,050 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:41:18,051 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:41:18,159 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:41:26,212 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient is a 24-year-old male with leukemia, which doesn't match the conditions or eligibility criteria of any of the provided trials.\n\n2. The first trial (NCT03499379) is about contraception and mood changes in women using IUDs, which is not relevant to this patient.\n\n3. The second trial (NCT04669379) is for patients undergoing surgery, which doesn't apply to this leukemia patient based on the given information.\n\n4. The third trial (NCT05360979) is for non-small cell lung cancer patients, which doesn't match this patient's condition of leukemia.\n\nNone of these trials are suitable for a young male patient with leukemia, hence the empty result. To find suitable trials for this patient, we would need to search for clinical trials specifically targeting leukemia in young adult patients.", type='text')]
2024-08-07 16:41:26,212 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient is a 24-year-old male with leukemia, which doesn't match the conditions or eligibility criteria of any of the provided trials.\n\n2. The first trial (NCT03499379) is about contraception and mood changes in women using IUDs, which is not relevant to this patient.\n\n3. The second trial (NCT04669379) is for patients undergoing surgery, which doesn't apply to this leukemia patient based on the given information.\n\n4. The third trial (NCT05360979) is for non-small cell lung cancer patients, which doesn't match this patient's condition of leukemia.\n\nNone of these trials are suitable for a young male patient with leukemia, hence the empty result. To find suitable trials for this patient, we would need to search for clinical trials specifically targeting leukemia in young adult patients.", type='text')]
2024-08-07 16:41:26,213 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient is a 24-year-old male with leukemia, which doesn't match the conditions or eligibility criteria of any of the provided trials.

2. The first trial (NCT03499379) is about contraception and mood changes in women using IUDs, which is not relevant to this patient.

3. The second trial (NCT04669379) is for patients undergoing surgery, which doesn't apply to this leukemia patient based on the given information.

4. The third trial (NCT05360979) is for non-small cell lung cancer patients, which doesn't match this patient's condition of leukemia.

None of these trials are suitable for a young male patient with leukemia, hence the empty result. To find suitable trials for this patient, we would need to search for clinical trials specifically targeting leukemia in young adult patients.
2024-08-07 16:41:26,213 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:41:26,215 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:41:26,297 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:41:33,819 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, I don't find any trials that are suitable matches with a compatibility score of 70 or higher. The patient's primary condition is leukemia, while the provided trials focus on asthma in children, basal cell carcinoma/chondrosarcoma, and bipolar depression. None of these align with the patient's medical condition.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable matches among the provided clinical trials for this particular patient.", type='text')]
2024-08-07 16:41:33,819 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, I don't find any trials that are suitable matches with a compatibility score of 70 or higher. The patient's primary condition is leukemia, while the provided trials focus on asthma in children, basal cell carcinoma/chondrosarcoma, and bipolar depression. None of these align with the patient's medical condition.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable matches among the provided clinical trials for this particular patient.", type='text')]
2024-08-07 16:41:33,820 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, I don't find any trials that are suitable matches with a compatibility score of 70 or higher. The patient's primary condition is leukemia, while the provided trials focus on asthma in children, basal cell carcinoma/chondrosarcoma, and bipolar depression. None of these align with the patient's medical condition.

Therefore, the output in the requested JSON format would be an empty array:

[]

This indicates that there are no suitable matches among the provided clinical trials for this particular patient.
2024-08-07 16:41:33,820 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-07 16:41:33,820 - app.services.trial_matching_service - WARNING - No matches found for batch. Continuing to next batch.
2024-08-07 16:41:33,897 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:41:40,281 - app.services.anthropic_service - INFO - Raw response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT05799079",\n        "compatibility_score": 80,\n        "reasons": [\n            "The patient has leukemia, which matches the trial\'s focus on acute myeloid leukemia (AML)",\n            "The trial is in Phase 2, which is appropriate for a patient with an existing diagnosis",\n            "The patient\'s age (24 years old) meets the trial\'s inclusion criteria of being over 18 years old",\n            "The trial is specifically for recurrent AML, which may be relevant if the patient\'s leukemia is recurrent or difficult to treat"\n        ]\n    }\n]\n\nNote: While this trial shows a good level of compatibility, it\'s important to note that the patient\'s profile doesn\'t specify if they have acute myeloid leukemia (AML) or if their condition is recurrent. Additionally, the patient\'s profile doesn\'t mention if they\'ve had a stem cell transplant, which is a key aspect of this trial. These factors could potentially affect the actual eligibility of the patient for this trial. A more detailed patient history would be needed for a definitive match.', type='text')]
2024-08-07 16:41:40,282 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT05799079",\n        "compatibility_score": 80,\n        "reasons": [\n            "The patient has leukemia, which matches the trial\'s focus on acute myeloid leukemia (AML)",\n            "The trial is in Phase 2, which is appropriate for a patient with an existing diagnosis",\n            "The patient\'s age (24 years old) meets the trial\'s inclusion criteria of being over 18 years old",\n            "The trial is specifically for recurrent AML, which may be relevant if the patient\'s leukemia is recurrent or difficult to treat"\n        ]\n    }\n]\n\nNote: While this trial shows a good level of compatibility, it\'s important to note that the patient\'s profile doesn\'t specify if they have acute myeloid leukemia (AML) or if their condition is recurrent. Additionally, the patient\'s profile doesn\'t mention if they\'ve had a stem cell transplant, which is a key aspect of this trial. These factors could potentially affect the actual eligibility of the patient for this trial. A more detailed patient history would be needed for a definitive match.', type='text')]
2024-08-07 16:41:40,282 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT05799079",
        "compatibility_score": 80,
        "reasons": [
            "The patient has leukemia, which matches the trial's focus on acute myeloid leukemia (AML)",
            "The trial is in Phase 2, which is appropriate for a patient with an existing diagnosis",
            "The patient's age (24 years old) meets the trial's inclusion criteria of being over 18 years old",
            "The trial is specifically for recurrent AML, which may be relevant if the patient's leukemia is recurrent or difficult to treat"
        ]
    }
]

Note: While this trial shows a good level of compatibility, it's important to note that the patient's profile doesn't specify if they have acute myeloid leukemia (AML) or if their condition is recurrent. Additionally, the patient's profile doesn't mention if they've had a stem cell transplant, which is a key aspect of this trial. These factors could potentially affect the actual eligibility of the patient for this trial. A more detailed patient history would be needed for a definitive match.
2024-08-07 16:41:40,282 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-07 16:41:40,321 - app.services.trial_matching_service - INFO - Trial NCT05799079 already matched for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:41:40,321 - app.services.trial_matching_service - INFO - Emitted 0 trial matches for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:41:40,321 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: object NoneType can't be used in 'await' expression
2024-08-07 16:41:40,398 - app.services.trial_matching_service - INFO - Processing batch of 10 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-07 16:56:26,109 - app - INFO - Initializing Flask app...
2024-08-07 16:56:26,110 - app - INFO - Configuring app...
2024-08-07 16:56:26,110 - app - INFO - Setting up CORS...
2024-08-07 16:56:26,111 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 16:56:26,454 - app - INFO - Initializing JWT manager...
2024-08-07 16:56:26,454 - app - INFO - Setting up rate limiting...
2024-08-07 16:56:26,456 - app - INFO - Setting up database...
2024-08-07 16:56:26,457 - app - INFO - Starting database setup...
2024-08-07 16:56:27,075 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 16:56:27,076 - app - INFO - Database setup completed successfully
2024-08-07 16:56:27,076 - app - INFO - Registering error handler...
2024-08-07 16:56:27,076 - app - INFO - Initializing CLI commands...
2024-08-07 16:56:27,077 - app - INFO - Registering routes...
2024-08-07 16:56:27,120 - app - INFO - Initializing services...
2024-08-07 16:56:27,133 - app - INFO - Initializing email service...
2024-08-07 16:56:27,133 - app - INFO - Setting up scheduler...
2024-08-07 16:56:27,137 - app - INFO - Initializing scheduler...
2024-08-07 16:56:27,138 - app.scheduler - INFO - Scheduler initialized
2024-08-07 16:56:27,138 - app - INFO - Application initialized successfully
2024-08-07 16:56:30,433 - app - INFO - Initializing Flask app...
2024-08-07 16:56:30,435 - app - INFO - Configuring app...
2024-08-07 16:56:30,436 - app - INFO - Setting up CORS...
2024-08-07 16:56:30,437 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 16:56:30,855 - app - INFO - Initializing JWT manager...
2024-08-07 16:56:30,855 - app - INFO - Setting up rate limiting...
2024-08-07 16:56:30,857 - app - INFO - Setting up database...
2024-08-07 16:56:30,858 - app - INFO - Starting database setup...
2024-08-07 16:56:31,388 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 16:56:31,388 - app - INFO - Database setup completed successfully
2024-08-07 16:56:31,389 - app - INFO - Registering error handler...
2024-08-07 16:56:31,389 - app - INFO - Initializing CLI commands...
2024-08-07 16:56:31,390 - app - INFO - Registering routes...
2024-08-07 16:56:31,399 - app - INFO - Initializing services...
2024-08-07 16:56:31,414 - app - INFO - Initializing email service...
2024-08-07 16:56:31,415 - app - INFO - Setting up scheduler...
2024-08-07 16:56:31,421 - app - INFO - Initializing scheduler...
2024-08-07 16:56:31,422 - app.scheduler - INFO - Scheduler initialized
2024-08-07 16:56:31,424 - app - INFO - Application initialized successfully
2024-08-07 16:56:54,488 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:56:55,021 - app.database - INFO - Database connection established successfully
2024-08-07 16:56:55,548 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:56:56,104 - app.database - INFO - Database connection established successfully
2024-08-07 16:56:56,148 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 16:56:56,169 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 16:56:56,169 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:56:57,495 - app.database - INFO - Database connection established successfully
2024-08-07 16:56:57,585 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 16:56:57,596 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:56:58,128 - app.database - INFO - Database connection established successfully
2024-08-07 16:56:58,170 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 16:56:58,185 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 16:56:58,186 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:56:58,719 - app.database - INFO - Database connection established successfully
2024-08-07 16:56:58,758 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 16:56:59,836 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:57:00,381 - app.database - INFO - Database connection established successfully
2024-08-07 16:57:00,434 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 16:57:00,463 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:57:00,985 - app.database - INFO - Database connection established successfully
2024-08-07 16:57:01,028 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 16:57:36,086 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 16:57:36,087 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 16:57:37,088 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 16:59:05,844 - app - INFO - Initializing Flask app...
2024-08-07 16:59:05,845 - app - INFO - Configuring app...
2024-08-07 16:59:05,845 - app - INFO - Setting up CORS...
2024-08-07 16:59:05,845 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 16:59:06,115 - app - INFO - Initializing JWT manager...
2024-08-07 16:59:06,115 - app - INFO - Setting up rate limiting...
2024-08-07 16:59:06,134 - app - INFO - Setting up database...
2024-08-07 16:59:06,143 - app - INFO - Starting database setup...
2024-08-07 16:59:06,775 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 16:59:06,775 - app - INFO - Database setup completed successfully
2024-08-07 16:59:06,776 - app - INFO - Registering error handler...
2024-08-07 16:59:06,776 - app - INFO - Initializing CLI commands...
2024-08-07 16:59:06,776 - app - INFO - Registering routes...
2024-08-07 16:59:06,782 - app - INFO - Initializing services...
2024-08-07 16:59:06,792 - app - INFO - Initializing email service...
2024-08-07 16:59:06,793 - app - INFO - Setting up scheduler...
2024-08-07 16:59:06,795 - app - INFO - Initializing scheduler...
2024-08-07 16:59:06,796 - app.scheduler - INFO - Scheduler initialized
2024-08-07 16:59:06,796 - app - INFO - Application initialized successfully
2024-08-07 16:59:09,127 - app - INFO - Initializing Flask app...
2024-08-07 16:59:09,129 - app - INFO - Configuring app...
2024-08-07 16:59:09,130 - app - INFO - Setting up CORS...
2024-08-07 16:59:09,130 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 16:59:09,486 - app - INFO - Initializing JWT manager...
2024-08-07 16:59:09,486 - app - INFO - Setting up rate limiting...
2024-08-07 16:59:09,488 - app - INFO - Setting up database...
2024-08-07 16:59:09,489 - app - INFO - Starting database setup...
2024-08-07 16:59:10,800 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 16:59:10,801 - app - INFO - Database setup completed successfully
2024-08-07 16:59:10,801 - app - INFO - Registering error handler...
2024-08-07 16:59:10,802 - app - INFO - Initializing CLI commands...
2024-08-07 16:59:10,802 - app - INFO - Registering routes...
2024-08-07 16:59:10,809 - app - INFO - Initializing services...
2024-08-07 16:59:10,823 - app - INFO - Initializing email service...
2024-08-07 16:59:10,824 - app - INFO - Setting up scheduler...
2024-08-07 16:59:10,829 - app - INFO - Initializing scheduler...
2024-08-07 16:59:10,830 - app.scheduler - INFO - Scheduler initialized
2024-08-07 16:59:10,830 - app - INFO - Application initialized successfully
2024-08-07 16:59:20,458 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:59:21,046 - app.database - INFO - Database connection established successfully
2024-08-07 16:59:21,569 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 16:59:21,569 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:59:22,188 - app.database - INFO - Database connection established successfully
2024-08-07 16:59:22,256 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 16:59:22,268 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:59:22,864 - app.database - INFO - Database connection established successfully
2024-08-07 16:59:22,911 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 16:59:22,923 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 16:59:22,928 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:59:23,466 - app.database - INFO - Database connection established successfully
2024-08-07 16:59:23,505 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 16:59:23,518 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:59:24,088 - app.database - INFO - Database connection established successfully
2024-08-07 16:59:24,136 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 16:59:25,771 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:59:26,327 - app.database - INFO - Database connection established successfully
2024-08-07 16:59:26,367 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 16:59:26,383 - app.database - INFO - Attempting to establish database connection...
2024-08-07 16:59:26,991 - app.database - INFO - Database connection established successfully
2024-08-07 16:59:27,034 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 16:59:47,266 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 16:59:47,266 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 16:59:48,268 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 17:22:12,905 - app - INFO - Initializing Flask app...
2024-08-07 17:22:12,906 - app - INFO - Configuring app...
2024-08-07 17:22:12,906 - app - INFO - Setting up CORS...
2024-08-07 17:22:12,907 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 17:22:13,099 - app - INFO - Initializing JWT manager...
2024-08-07 17:22:13,100 - app - INFO - Setting up rate limiting...
2024-08-07 17:22:13,100 - app - INFO - Setting up database...
2024-08-07 17:22:13,101 - app - INFO - Starting database setup...
2024-08-07 17:22:13,922 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 17:22:13,922 - app - INFO - Database setup completed successfully
2024-08-07 17:22:13,923 - app - INFO - Registering error handler...
2024-08-07 17:22:13,923 - app - INFO - Initializing CLI commands...
2024-08-07 17:22:13,923 - app - INFO - Registering routes...
2024-08-07 17:22:13,938 - app - INFO - Initializing services...
2024-08-07 17:22:13,948 - app - INFO - Initializing email service...
2024-08-07 17:22:13,948 - app - INFO - Setting up scheduler...
2024-08-07 17:22:13,951 - app - INFO - Initializing scheduler...
2024-08-07 17:22:13,951 - app.scheduler - INFO - Scheduler initialized
2024-08-07 17:22:13,951 - app - INFO - Application initialized successfully
2024-08-07 17:22:14,151 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:22:14,820 - app.database - INFO - Database connection established successfully
2024-08-07 17:22:14,871 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:22:22,636 - app - INFO - Initializing Flask app...
2024-08-07 17:22:22,638 - app - INFO - Configuring app...
2024-08-07 17:22:22,639 - app - INFO - Setting up CORS...
2024-08-07 17:22:22,639 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 17:22:22,816 - app - INFO - Initializing JWT manager...
2024-08-07 17:22:22,816 - app - INFO - Setting up rate limiting...
2024-08-07 17:22:22,817 - app - INFO - Setting up database...
2024-08-07 17:22:22,817 - app - INFO - Starting database setup...
2024-08-07 17:22:23,449 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 17:22:23,450 - app - INFO - Database setup completed successfully
2024-08-07 17:22:23,450 - app - INFO - Registering error handler...
2024-08-07 17:22:23,450 - app - INFO - Initializing CLI commands...
2024-08-07 17:22:23,450 - app - INFO - Registering routes...
2024-08-07 17:22:23,456 - app - INFO - Initializing services...
2024-08-07 17:22:23,465 - app - INFO - Initializing email service...
2024-08-07 17:22:23,465 - app - INFO - Setting up scheduler...
2024-08-07 17:22:23,468 - app - INFO - Initializing scheduler...
2024-08-07 17:22:23,469 - app.scheduler - INFO - Scheduler initialized
2024-08-07 17:22:23,469 - app - INFO - Application initialized successfully
2024-08-07 17:22:25,091 - app - INFO - Initializing Flask app...
2024-08-07 17:22:25,093 - app - INFO - Configuring app...
2024-08-07 17:22:25,093 - app - INFO - Setting up CORS...
2024-08-07 17:22:25,094 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 17:22:25,374 - app - INFO - Initializing JWT manager...
2024-08-07 17:22:25,375 - app - INFO - Setting up rate limiting...
2024-08-07 17:22:25,375 - app - INFO - Setting up database...
2024-08-07 17:22:25,376 - app - INFO - Starting database setup...
2024-08-07 17:22:25,888 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 17:22:25,888 - app - INFO - Database setup completed successfully
2024-08-07 17:22:25,889 - app - INFO - Registering error handler...
2024-08-07 17:22:25,889 - app - INFO - Initializing CLI commands...
2024-08-07 17:22:25,889 - app - INFO - Registering routes...
2024-08-07 17:22:25,896 - app - INFO - Initializing services...
2024-08-07 17:22:25,906 - app - INFO - Initializing email service...
2024-08-07 17:22:25,906 - app - INFO - Setting up scheduler...
2024-08-07 17:22:25,910 - app - INFO - Initializing scheduler...
2024-08-07 17:22:25,911 - app.scheduler - INFO - Scheduler initialized
2024-08-07 17:22:25,911 - app - INFO - Application initialized successfully
2024-08-07 17:22:35,509 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:22:36,305 - app.database - INFO - Database connection established successfully
2024-08-07 17:22:36,581 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 17:22:36,581 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:22:37,194 - app.database - INFO - Database connection established successfully
2024-08-07 17:22:37,262 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 17:22:37,267 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:22:38,019 - app.database - INFO - Database connection established successfully
2024-08-07 17:22:38,082 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:22:38,089 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 17:22:38,089 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:22:39,000 - app.database - INFO - Database connection established successfully
2024-08-07 17:22:39,060 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 17:22:39,066 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:22:39,907 - app.database - INFO - Database connection established successfully
2024-08-07 17:22:39,960 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:22:39,972 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:22:40,772 - app.database - INFO - Database connection established successfully
2024-08-07 17:22:40,817 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:22:40,823 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:22:41,693 - app.database - INFO - Database connection established successfully
2024-08-07 17:22:41,788 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:22:42,892 - app.routes.trial_matching - ERROR - Error starting matching process for user 66af0d2d118d8e248b49a856: 'Flask' object has no attribute 'matching_tasks'
2024-08-07 17:22:42,898 - app.utils.error_handlers - ERROR - General error: 'Flask' object has no attribute 'matching_tasks'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 70, in start_matching_process
    current_app.matching_tasks[current_user] = task
AttributeError: 'Flask' object has no attribute 'matching_tasks'

2024-08-07 17:22:42,899 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:22:43,023 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-07 17:24:35,053 - app - INFO - Initializing Flask app...
2024-08-07 17:24:35,054 - app - INFO - Configuring app...
2024-08-07 17:24:35,054 - app - INFO - Setting up CORS...
2024-08-07 17:24:35,054 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 17:24:35,247 - app - INFO - Initializing JWT manager...
2024-08-07 17:24:35,248 - app - INFO - Setting up rate limiting...
2024-08-07 17:24:35,248 - app - INFO - Setting up database...
2024-08-07 17:24:35,249 - app - INFO - Starting database setup...
2024-08-07 17:24:35,888 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 17:24:35,888 - app - INFO - Database setup completed successfully
2024-08-07 17:24:35,888 - app - INFO - Registering error handler...
2024-08-07 17:24:35,889 - app - INFO - Initializing CLI commands...
2024-08-07 17:24:35,889 - app - INFO - Registering routes...
2024-08-07 17:24:35,895 - app - INFO - Initializing services...
2024-08-07 17:24:35,903 - app - INFO - Initializing email service...
2024-08-07 17:24:35,904 - app - INFO - Setting up scheduler...
2024-08-07 17:24:35,907 - app - INFO - Initializing scheduler...
2024-08-07 17:24:35,907 - app.scheduler - INFO - Scheduler initialized
2024-08-07 17:24:35,907 - app - INFO - Application initialized successfully
2024-08-07 17:24:46,216 - app - INFO - Initializing Flask app...
2024-08-07 17:24:46,218 - app - INFO - Configuring app...
2024-08-07 17:24:46,218 - app - INFO - Setting up CORS...
2024-08-07 17:24:46,219 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 17:24:46,386 - app - INFO - Initializing JWT manager...
2024-08-07 17:24:46,386 - app - INFO - Setting up rate limiting...
2024-08-07 17:24:46,387 - app - INFO - Setting up database...
2024-08-07 17:24:46,387 - app - INFO - Starting database setup...
2024-08-07 17:24:46,933 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 17:24:46,933 - app - INFO - Database setup completed successfully
2024-08-07 17:24:46,933 - app - INFO - Registering error handler...
2024-08-07 17:24:46,933 - app - INFO - Initializing CLI commands...
2024-08-07 17:24:46,934 - app - INFO - Registering routes...
2024-08-07 17:24:46,939 - app - INFO - Initializing services...
2024-08-07 17:24:46,948 - app - INFO - Initializing email service...
2024-08-07 17:24:46,948 - app - INFO - Setting up scheduler...
2024-08-07 17:24:46,952 - app - INFO - Initializing scheduler...
2024-08-07 17:24:46,953 - app.scheduler - INFO - Scheduler initialized
2024-08-07 17:24:46,953 - app - INFO - Application initialized successfully
2024-08-07 17:24:48,475 - app - INFO - Initializing Flask app...
2024-08-07 17:24:48,477 - app - INFO - Configuring app...
2024-08-07 17:24:48,477 - app - INFO - Setting up CORS...
2024-08-07 17:24:48,477 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 17:24:48,726 - app - INFO - Initializing JWT manager...
2024-08-07 17:24:48,727 - app - INFO - Setting up rate limiting...
2024-08-07 17:24:48,728 - app - INFO - Setting up database...
2024-08-07 17:24:48,728 - app - INFO - Starting database setup...
2024-08-07 17:24:49,236 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 17:24:49,237 - app - INFO - Database setup completed successfully
2024-08-07 17:24:49,237 - app - INFO - Registering error handler...
2024-08-07 17:24:49,237 - app - INFO - Initializing CLI commands...
2024-08-07 17:24:49,237 - app - INFO - Registering routes...
2024-08-07 17:24:49,243 - app - INFO - Initializing services...
2024-08-07 17:24:49,252 - app - INFO - Initializing email service...
2024-08-07 17:24:49,252 - app - INFO - Setting up scheduler...
2024-08-07 17:24:49,257 - app - INFO - Initializing scheduler...
2024-08-07 17:24:49,257 - app.scheduler - INFO - Scheduler initialized
2024-08-07 17:24:49,258 - app - INFO - Application initialized successfully
2024-08-07 17:25:04,596 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:25:05,137 - app.database - INFO - Database connection established successfully
2024-08-07 17:25:05,354 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 17:25:05,354 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:25:05,833 - app.database - INFO - Database connection established successfully
2024-08-07 17:25:05,871 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 17:25:05,876 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:25:06,384 - app.database - INFO - Database connection established successfully
2024-08-07 17:25:06,436 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:25:06,441 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 17:25:06,441 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:25:06,961 - app.database - INFO - Database connection established successfully
2024-08-07 17:25:06,999 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 17:25:07,007 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:25:07,569 - app.database - INFO - Database connection established successfully
2024-08-07 17:25:07,608 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:25:07,806 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:25:08,367 - app.database - INFO - Database connection established successfully
2024-08-07 17:25:08,409 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:25:08,415 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:25:09,000 - app.database - INFO - Database connection established successfully
2024-08-07 17:25:09,040 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:25:09,855 - app.routes.trial_matching - ERROR - Error starting matching process for user 66af0d2d118d8e248b49a856: 'Flask' object has no attribute 'matching_tasks'
2024-08-07 17:25:09,863 - app.utils.error_handlers - ERROR - General error: 'Flask' object has no attribute 'matching_tasks'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\routes\trial_matching.py", line 70, in start_matching_process
    current_app.matching_tasks[current_user] = task
AttributeError: 'Flask' object has no attribute 'matching_tasks'

2024-08-07 17:25:09,863 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:25:09,934 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-07 17:35:45,847 - app - INFO - Initializing Flask app...
2024-08-07 17:35:45,848 - app - INFO - Configuring app...
2024-08-07 17:35:45,848 - app - INFO - Setting up CORS...
2024-08-07 17:35:45,848 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 17:35:46,016 - app - INFO - Initializing JWT manager...
2024-08-07 17:35:46,016 - app - INFO - Setting up rate limiting...
2024-08-07 17:35:46,017 - app - INFO - Setting up database...
2024-08-07 17:35:46,017 - app - INFO - Starting database setup...
2024-08-07 17:35:58,307 - app - INFO - Initializing Flask app...
2024-08-07 17:35:58,309 - app - INFO - Configuring app...
2024-08-07 17:35:58,309 - app - INFO - Setting up CORS...
2024-08-07 17:35:58,310 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 17:35:58,482 - app - INFO - Initializing JWT manager...
2024-08-07 17:35:58,483 - app - INFO - Setting up rate limiting...
2024-08-07 17:35:58,483 - app - INFO - Setting up database...
2024-08-07 17:35:58,484 - app - INFO - Starting database setup...
2024-08-07 17:35:59,165 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 17:35:59,165 - app - INFO - Database setup completed successfully
2024-08-07 17:35:59,166 - app - INFO - Registering error handler...
2024-08-07 17:35:59,166 - app - INFO - Initializing CLI commands...
2024-08-07 17:35:59,166 - app - INFO - Registering routes...
2024-08-07 17:35:59,191 - app - INFO - Initializing services...
2024-08-07 17:35:59,200 - app - INFO - Initializing email service...
2024-08-07 17:35:59,201 - app - INFO - Setting up scheduler...
2024-08-07 17:35:59,204 - app - INFO - Initializing scheduler...
2024-08-07 17:35:59,205 - app.scheduler - INFO - Scheduler initialized
2024-08-07 17:35:59,205 - app - INFO - Application initialized successfully
2024-08-07 17:36:00,598 - app - INFO - Initializing Flask app...
2024-08-07 17:36:00,600 - app - INFO - Configuring app...
2024-08-07 17:36:00,601 - app - INFO - Setting up CORS...
2024-08-07 17:36:00,601 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 17:36:00,832 - app - INFO - Initializing JWT manager...
2024-08-07 17:36:00,832 - app - INFO - Setting up rate limiting...
2024-08-07 17:36:00,833 - app - INFO - Setting up database...
2024-08-07 17:36:00,833 - app - INFO - Starting database setup...
2024-08-07 17:36:01,481 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 17:36:01,482 - app - INFO - Database setup completed successfully
2024-08-07 17:36:01,482 - app - INFO - Registering error handler...
2024-08-07 17:36:01,482 - app - INFO - Initializing CLI commands...
2024-08-07 17:36:01,483 - app - INFO - Registering routes...
2024-08-07 17:36:01,488 - app - INFO - Initializing services...
2024-08-07 17:36:01,501 - app - INFO - Initializing email service...
2024-08-07 17:36:01,501 - app - INFO - Setting up scheduler...
2024-08-07 17:36:01,504 - app - INFO - Initializing scheduler...
2024-08-07 17:36:01,505 - app.scheduler - INFO - Scheduler initialized
2024-08-07 17:36:01,505 - app - INFO - Application initialized successfully
2024-08-07 17:36:10,314 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:36:10,954 - app.database - INFO - Database connection established successfully
2024-08-07 17:36:11,215 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 17:36:11,216 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:36:11,778 - app.database - INFO - Database connection established successfully
2024-08-07 17:36:11,852 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 17:36:11,861 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:36:12,458 - app.database - INFO - Database connection established successfully
2024-08-07 17:36:12,500 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:36:12,507 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 17:36:12,507 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:36:13,074 - app.database - INFO - Database connection established successfully
2024-08-07 17:36:13,110 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 17:36:13,117 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:36:13,595 - app.database - INFO - Database connection established successfully
2024-08-07 17:36:13,634 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:36:23,759 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:36:24,298 - app.database - INFO - Database connection established successfully
2024-08-07 17:36:24,350 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:36:24,357 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:36:24,901 - app.database - INFO - Database connection established successfully
2024-08-07 17:36:24,941 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 17:36:28,604 - app.routes.trial_matching - INFO - Started matching process for user 66af0d2d118d8e248b49a856
2024-08-07 17:36:28,604 - app.database - INFO - Attempting to establish database connection...
2024-08-07 17:36:28,666 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-07 17:36:51,093 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 17:36:51,093 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 17:36:52,094 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 17:36:52,094 - app.routes.trial_matching - ERROR - Error stopping matching process for user 66af0d2d118d8e248b49a856: 'Request' object has no attribute 'namespace'
2024-08-07 18:47:05,329 - app - INFO - Initializing Flask app...
2024-08-07 18:47:05,330 - app - INFO - Configuring app...
2024-08-07 18:47:05,331 - app - INFO - Setting up CORS...
2024-08-07 18:47:05,331 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 18:47:05,546 - app - INFO - Initializing JWT manager...
2024-08-07 18:47:05,546 - app - INFO - Setting up rate limiting...
2024-08-07 18:47:05,547 - app - INFO - Setting up database...
2024-08-07 18:47:05,547 - app - INFO - Starting database setup...
2024-08-07 18:47:06,811 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 18:47:06,811 - app - INFO - Database setup completed successfully
2024-08-07 18:47:06,811 - app - INFO - Registering error handler...
2024-08-07 18:47:06,811 - app - INFO - Initializing CLI commands...
2024-08-07 18:47:06,811 - app - INFO - Registering routes...
2024-08-07 18:47:06,817 - app - INFO - Initializing services...
2024-08-07 18:47:06,829 - app - INFO - Initializing email service...
2024-08-07 18:47:06,829 - app - INFO - Setting up scheduler...
2024-08-07 18:47:06,842 - app - INFO - Initializing scheduler...
2024-08-07 18:47:06,842 - app.scheduler - INFO - Scheduler initialized
2024-08-07 18:47:06,843 - app - INFO - Application initialized successfully
2024-08-07 18:47:08,548 - app - INFO - Initializing Flask app...
2024-08-07 18:47:08,549 - app - INFO - Configuring app...
2024-08-07 18:47:08,550 - app - INFO - Setting up CORS...
2024-08-07 18:47:08,550 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 18:47:08,772 - app - INFO - Initializing JWT manager...
2024-08-07 18:47:08,772 - app - INFO - Setting up rate limiting...
2024-08-07 18:47:08,773 - app - INFO - Setting up database...
2024-08-07 18:47:08,773 - app - INFO - Starting database setup...
2024-08-07 18:47:09,328 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 18:47:09,328 - app - INFO - Database setup completed successfully
2024-08-07 18:47:09,328 - app - INFO - Registering error handler...
2024-08-07 18:47:09,329 - app - INFO - Initializing CLI commands...
2024-08-07 18:47:09,329 - app - INFO - Registering routes...
2024-08-07 18:47:09,336 - app - INFO - Initializing services...
2024-08-07 18:47:09,345 - app - INFO - Initializing email service...
2024-08-07 18:47:09,346 - app - INFO - Setting up scheduler...
2024-08-07 18:47:09,351 - app - INFO - Initializing scheduler...
2024-08-07 18:47:09,352 - app.scheduler - INFO - Scheduler initialized
2024-08-07 18:47:09,353 - app - INFO - Application initialized successfully
2024-08-07 18:47:16,019 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:47:16,577 - app.database - INFO - Database connection established successfully
2024-08-07 18:47:16,871 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 18:47:16,872 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:47:17,423 - app.database - INFO - Database connection established successfully
2024-08-07 18:47:17,464 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 18:47:17,469 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:47:18,019 - app.database - INFO - Database connection established successfully
2024-08-07 18:47:18,061 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 18:47:18,068 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 18:47:18,068 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:47:18,648 - app.database - INFO - Database connection established successfully
2024-08-07 18:47:18,686 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 18:47:18,694 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:47:19,215 - app.database - INFO - Database connection established successfully
2024-08-07 18:47:19,266 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 18:47:19,307 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:47:19,824 - app.database - INFO - Database connection established successfully
2024-08-07 18:47:19,867 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 18:47:19,874 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:47:20,518 - app.database - INFO - Database connection established successfully
2024-08-07 18:47:20,557 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 18:47:20,569 - app.routes.trial_matching - INFO - Started matching process for user 66af0d2d118d8e248b49a856
2024-08-07 18:47:20,570 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:47:20,621 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-07 18:57:55,456 - app - INFO - Initializing Flask app...
2024-08-07 18:57:55,457 - app - INFO - Configuring app...
2024-08-07 18:57:55,457 - app - INFO - Setting up CORS...
2024-08-07 18:57:55,457 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 18:57:55,639 - app - INFO - Initializing JWT manager...
2024-08-07 18:57:55,639 - app - INFO - Setting up rate limiting...
2024-08-07 18:57:55,640 - app - INFO - Setting up database...
2024-08-07 18:57:55,641 - app - INFO - Starting database setup...
2024-08-07 18:57:56,199 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 18:57:56,199 - app - INFO - Database setup completed successfully
2024-08-07 18:57:56,200 - app - INFO - Registering error handler...
2024-08-07 18:57:56,200 - app - INFO - Initializing CLI commands...
2024-08-07 18:57:56,200 - app - INFO - Registering routes...
2024-08-07 18:57:56,219 - app - INFO - Initializing services...
2024-08-07 18:57:56,228 - app - INFO - Initializing email service...
2024-08-07 18:57:56,228 - app - INFO - Setting up scheduler...
2024-08-07 18:57:56,231 - app - INFO - Initializing scheduler...
2024-08-07 18:57:56,232 - app.scheduler - INFO - Scheduler initialized
2024-08-07 18:57:56,232 - app - INFO - Application initialized successfully
2024-08-07 18:57:57,713 - app - INFO - Initializing Flask app...
2024-08-07 18:57:57,714 - app - INFO - Configuring app...
2024-08-07 18:57:57,714 - app - INFO - Setting up CORS...
2024-08-07 18:57:57,714 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 18:57:57,962 - app - INFO - Initializing JWT manager...
2024-08-07 18:57:57,963 - app - INFO - Setting up rate limiting...
2024-08-07 18:57:57,964 - app - INFO - Setting up database...
2024-08-07 18:57:57,964 - app - INFO - Starting database setup...
2024-08-07 18:57:58,525 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 18:57:58,525 - app - INFO - Database setup completed successfully
2024-08-07 18:57:58,525 - app - INFO - Registering error handler...
2024-08-07 18:57:58,526 - app - INFO - Initializing CLI commands...
2024-08-07 18:57:58,526 - app - INFO - Registering routes...
2024-08-07 18:57:58,532 - app - INFO - Initializing services...
2024-08-07 18:57:58,546 - app - INFO - Initializing email service...
2024-08-07 18:57:58,546 - app - INFO - Setting up scheduler...
2024-08-07 18:57:58,550 - app - INFO - Initializing scheduler...
2024-08-07 18:57:58,551 - app.scheduler - INFO - Scheduler initialized
2024-08-07 18:57:58,551 - app - INFO - Application initialized successfully
2024-08-07 18:58:06,793 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:58:07,322 - app.database - INFO - Database connection established successfully
2024-08-07 18:58:07,639 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 18:58:07,639 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:58:08,215 - app.database - INFO - Database connection established successfully
2024-08-07 18:58:08,266 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 18:58:08,274 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:58:08,939 - app.database - INFO - Database connection established successfully
2024-08-07 18:58:08,991 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 18:58:08,998 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 18:58:08,998 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:58:09,680 - app.database - INFO - Database connection established successfully
2024-08-07 18:58:09,721 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 18:58:09,726 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:58:10,393 - app.database - INFO - Database connection established successfully
2024-08-07 18:58:10,477 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 18:58:46,580 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:58:47,446 - app.database - INFO - Database connection established successfully
2024-08-07 18:58:47,483 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 18:58:47,492 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:58:48,040 - app.database - INFO - Database connection established successfully
2024-08-07 18:58:48,080 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 18:59:29,646 - app.routes.trial_matching - INFO - Started matching process for user 66af0d2d118d8e248b49a856
2024-08-07 18:59:29,646 - app.database - INFO - Attempting to establish database connection...
2024-08-07 18:59:29,711 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-07 18:59:30,142 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 18:59:30,142 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 18:59:31,148 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 18:59:31,148 - app.routes.trial_matching - ERROR - Error stopping matching process for user 66af0d2d118d8e248b49a856: 'Request' object has no attribute 'namespace'
2024-08-07 19:00:13,003 - app.routes.trial_matching - INFO - Started matching process for user 66af0d2d118d8e248b49a856
2024-08-07 19:00:13,003 - app.database - INFO - Attempting to establish database connection...
2024-08-07 19:00:13,078 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-07 19:00:13,788 - app.routes.trial_matching - INFO - Received stop matching request for user 66af0d2d118d8e248b49a856
2024-08-07 19:00:13,789 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-07 19:00:14,791 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-07 19:00:14,791 - app.routes.trial_matching - ERROR - Error stopping matching process for user 66af0d2d118d8e248b49a856: 'Request' object has no attribute 'namespace'
2024-08-07 20:21:09,293 - app - INFO - Initializing Flask app...
2024-08-07 20:21:09,295 - app - INFO - Configuring app...
2024-08-07 20:21:09,295 - app - INFO - Setting up CORS...
2024-08-07 20:21:09,296 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 20:21:09,595 - app - INFO - Initializing JWT manager...
2024-08-07 20:21:09,596 - app - INFO - Setting up rate limiting...
2024-08-07 20:21:09,597 - app - INFO - Setting up database...
2024-08-07 20:21:09,598 - app - INFO - Starting database setup...
2024-08-07 20:21:10,259 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 20:21:10,259 - app - INFO - Database setup completed successfully
2024-08-07 20:21:10,259 - app - INFO - Registering error handler...
2024-08-07 20:21:10,260 - app - INFO - Initializing CLI commands...
2024-08-07 20:21:10,260 - app - INFO - Registering routes...
2024-08-07 20:24:13,457 - app - INFO - Initializing Flask app...
2024-08-07 20:24:13,459 - app - INFO - Configuring app...
2024-08-07 20:24:13,460 - app - INFO - Setting up CORS...
2024-08-07 20:24:13,460 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 20:24:13,777 - app - INFO - Initializing JWT manager...
2024-08-07 20:24:13,779 - app - INFO - Setting up rate limiting...
2024-08-07 20:24:13,780 - app - INFO - Setting up database...
2024-08-07 20:24:13,780 - app - INFO - Starting database setup...
2024-08-07 20:24:14,419 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 20:24:14,420 - app - INFO - Database setup completed successfully
2024-08-07 20:24:14,420 - app - INFO - Registering error handler...
2024-08-07 20:24:14,420 - app - INFO - Initializing CLI commands...
2024-08-07 20:24:14,420 - app - INFO - Registering routes...
2024-08-07 20:24:30,286 - app - INFO - Initializing Flask app...
2024-08-07 20:24:30,288 - app - INFO - Configuring app...
2024-08-07 20:24:30,288 - app - INFO - Setting up CORS...
2024-08-07 20:24:30,289 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 20:24:30,592 - app - INFO - Initializing JWT manager...
2024-08-07 20:24:30,592 - app - INFO - Setting up rate limiting...
2024-08-07 20:24:30,593 - app - INFO - Setting up database...
2024-08-07 20:24:30,594 - app - INFO - Starting database setup...
2024-08-07 20:24:31,148 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 20:24:31,148 - app - INFO - Database setup completed successfully
2024-08-07 20:24:31,148 - app - INFO - Registering error handler...
2024-08-07 20:24:31,148 - app - INFO - Initializing CLI commands...
2024-08-07 20:24:31,148 - app - INFO - Registering routes...
2024-08-07 20:36:37,865 - app - INFO - Initializing Flask app...
2024-08-07 20:36:37,867 - app - INFO - Configuring app...
2024-08-07 20:36:37,867 - app - INFO - Setting up CORS...
2024-08-07 20:36:37,868 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 20:36:38,166 - app - INFO - Initializing JWT manager...
2024-08-07 20:36:38,166 - app - INFO - Setting up rate limiting...
2024-08-07 20:36:38,170 - app - INFO - Setting up database...
2024-08-07 20:36:38,172 - app - INFO - Starting database setup...
2024-08-07 20:36:38,764 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 20:36:38,765 - app - INFO - Database setup completed successfully
2024-08-07 20:36:38,765 - app - INFO - Registering error handler...
2024-08-07 20:36:38,765 - app - INFO - Initializing CLI commands...
2024-08-07 20:36:38,765 - app - INFO - Registering routes...
2024-08-07 20:48:03,573 - app - INFO - Initializing Flask app...
2024-08-07 20:48:03,574 - app - INFO - Configuring app...
2024-08-07 20:48:03,574 - app - INFO - Setting up CORS...
2024-08-07 20:48:03,574 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 20:48:03,773 - app - INFO - Initializing JWT manager...
2024-08-07 20:48:03,774 - app - INFO - Setting up rate limiting...
2024-08-07 20:48:03,774 - app - INFO - Setting up database...
2024-08-07 20:48:03,775 - app - INFO - Starting database setup...
2024-08-07 20:48:04,413 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 20:48:04,414 - app - INFO - Database setup completed successfully
2024-08-07 20:48:04,414 - app - INFO - Registering error handler...
2024-08-07 20:48:04,414 - app - INFO - Initializing CLI commands...
2024-08-07 20:48:04,415 - app - INFO - Registering routes...
2024-08-07 20:48:04,422 - app - INFO - Initializing services...
2024-08-07 20:48:04,431 - app - INFO - Initializing email service...
2024-08-07 20:48:04,431 - app - INFO - Setting up scheduler...
2024-08-07 20:48:04,446 - app - INFO - Initializing scheduler...
2024-08-07 20:48:04,447 - app.scheduler - INFO - Scheduler initialized
2024-08-07 20:48:04,447 - app - INFO - Application initialized successfully
2024-08-07 20:48:06,110 - app - INFO - Initializing Flask app...
2024-08-07 20:48:06,111 - app - INFO - Configuring app...
2024-08-07 20:48:06,111 - app - INFO - Setting up CORS...
2024-08-07 20:48:06,112 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 20:48:06,312 - app - INFO - Initializing JWT manager...
2024-08-07 20:48:06,313 - app - INFO - Setting up rate limiting...
2024-08-07 20:48:06,313 - app - INFO - Setting up database...
2024-08-07 20:48:06,314 - app - INFO - Starting database setup...
2024-08-07 20:48:06,881 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 20:48:06,882 - app - INFO - Database setup completed successfully
2024-08-07 20:48:06,882 - app - INFO - Registering error handler...
2024-08-07 20:48:06,882 - app - INFO - Initializing CLI commands...
2024-08-07 20:48:06,883 - app - INFO - Registering routes...
2024-08-07 20:48:06,890 - app - INFO - Initializing services...
2024-08-07 20:48:06,901 - app - INFO - Initializing email service...
2024-08-07 20:48:06,901 - app - INFO - Setting up scheduler...
2024-08-07 20:48:06,904 - app - INFO - Initializing scheduler...
2024-08-07 20:48:06,905 - app.scheduler - INFO - Scheduler initialized
2024-08-07 20:48:06,905 - app - INFO - Application initialized successfully
2024-08-07 20:55:21,040 - app - INFO - Initializing Flask app...
2024-08-07 20:55:21,041 - app - INFO - Configuring app...
2024-08-07 20:55:21,041 - app - INFO - Setting up CORS...
2024-08-07 20:55:21,041 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 20:55:21,221 - app - INFO - Initializing JWT manager...
2024-08-07 20:55:21,221 - app - INFO - Setting up rate limiting...
2024-08-07 20:55:21,222 - app - INFO - Setting up database...
2024-08-07 20:55:21,222 - app - INFO - Starting database setup...
2024-08-07 20:55:21,835 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 20:55:21,835 - app - INFO - Database setup completed successfully
2024-08-07 20:55:21,835 - app - INFO - Registering error handler...
2024-08-07 20:55:21,835 - app - INFO - Initializing CLI commands...
2024-08-07 20:55:21,835 - app - INFO - Registering routes...
2024-08-07 20:55:21,842 - app - INFO - Initializing services...
2024-08-07 20:55:21,850 - app - INFO - Initializing email service...
2024-08-07 20:55:21,850 - app - INFO - Setting up scheduler...
2024-08-07 20:55:21,853 - app - INFO - Initializing scheduler...
2024-08-07 20:55:21,853 - app.scheduler - INFO - Scheduler initialized
2024-08-07 20:55:21,853 - app - INFO - Application initialized successfully
2024-08-07 20:56:24,043 - app - INFO - Initializing Flask app...
2024-08-07 20:56:24,044 - app - INFO - Configuring app...
2024-08-07 20:56:24,045 - app - INFO - Setting up CORS...
2024-08-07 20:56:24,045 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 20:56:24,214 - app - INFO - Initializing JWT manager...
2024-08-07 20:56:24,216 - app - INFO - Setting up rate limiting...
2024-08-07 20:56:24,216 - app - INFO - Setting up database...
2024-08-07 20:56:24,217 - app - INFO - Starting database setup...
2024-08-07 20:56:24,826 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 20:56:24,827 - app - INFO - Database setup completed successfully
2024-08-07 20:56:24,827 - app - INFO - Registering error handler...
2024-08-07 20:56:24,828 - app - INFO - Initializing CLI commands...
2024-08-07 20:56:24,828 - app - INFO - Registering routes...
2024-08-07 20:56:24,835 - app - INFO - Initializing services...
2024-08-07 20:56:24,843 - app - INFO - Initializing email service...
2024-08-07 20:56:24,843 - app - INFO - Setting up scheduler...
2024-08-07 20:56:24,847 - app - INFO - Initializing scheduler...
2024-08-07 20:56:24,847 - app.scheduler - INFO - Scheduler initialized
2024-08-07 20:56:24,847 - app - INFO - Application initialized successfully
2024-08-07 21:08:46,119 - app - INFO - Initializing Flask app...
2024-08-07 21:08:46,121 - app - INFO - Configuring app...
2024-08-07 21:08:46,121 - app - INFO - Setting up CORS...
2024-08-07 21:08:46,121 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 21:08:46,122 - app - INFO - Initializing Celery...
2024-08-07 21:08:46,128 - app - INFO - Initializing SocketIO...
2024-08-07 21:08:46,425 - app - INFO - Initializing JWT manager...
2024-08-07 21:08:46,426 - app - INFO - Setting up rate limiting...
2024-08-07 21:08:46,426 - app - INFO - Setting up database...
2024-08-07 21:08:46,428 - app - INFO - Starting database setup...
2024-08-07 21:08:47,632 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 21:08:47,632 - app - INFO - Database setup completed successfully
2024-08-07 21:08:47,633 - app - INFO - Registering error handler...
2024-08-07 21:08:47,633 - app - INFO - Initializing CLI commands...
2024-08-07 21:08:47,633 - app - INFO - Registering routes...
2024-08-07 21:08:47,647 - app - INFO - Initializing services...
2024-08-07 21:08:47,660 - app - INFO - Initializing email service...
2024-08-07 21:08:47,661 - app - INFO - Setting up scheduler...
2024-08-07 21:08:47,671 - app - INFO - Initializing scheduler...
2024-08-07 21:08:47,673 - app.scheduler - INFO - Scheduler initialized
2024-08-07 21:08:47,673 - app - INFO - Application initialized successfully
2024-08-07 21:08:51,841 - app - INFO - Initializing Flask app...
2024-08-07 21:08:51,844 - app - INFO - Configuring app...
2024-08-07 21:08:51,845 - app - INFO - Setting up CORS...
2024-08-07 21:08:51,846 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 21:08:51,846 - app - INFO - Initializing Celery...
2024-08-07 21:08:51,860 - app - INFO - Initializing SocketIO...
2024-08-07 21:08:52,584 - app - INFO - Initializing JWT manager...
2024-08-07 21:08:52,584 - app - INFO - Setting up rate limiting...
2024-08-07 21:08:52,586 - app - INFO - Setting up database...
2024-08-07 21:08:52,587 - app - INFO - Starting database setup...
2024-08-07 21:08:53,484 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 21:08:53,484 - app - INFO - Database setup completed successfully
2024-08-07 21:08:53,485 - app - INFO - Registering error handler...
2024-08-07 21:08:53,486 - app - INFO - Initializing CLI commands...
2024-08-07 21:08:53,486 - app - INFO - Registering routes...
2024-08-07 21:08:53,506 - app - INFO - Initializing services...
2024-08-07 21:08:53,537 - app - INFO - Initializing email service...
2024-08-07 21:08:53,538 - app - INFO - Setting up scheduler...
2024-08-07 21:08:53,545 - app - INFO - Initializing scheduler...
2024-08-07 21:08:53,546 - app.scheduler - INFO - Scheduler initialized
2024-08-07 21:08:53,547 - app - INFO - Application initialized successfully
2024-08-07 21:10:01,952 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:10:02,607 - app.database - INFO - Database connection established successfully
2024-08-07 21:10:03,188 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 21:10:03,189 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:10:03,882 - app.database - INFO - Database connection established successfully
2024-08-07 21:10:03,946 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 21:10:03,995 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:10:04,626 - app.database - INFO - Database connection established successfully
2024-08-07 21:10:04,667 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:10:04,685 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 21:10:04,689 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:10:05,289 - app.database - INFO - Database connection established successfully
2024-08-07 21:10:05,330 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 21:10:05,381 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:10:06,071 - app.database - INFO - Database connection established successfully
2024-08-07 21:10:06,116 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:10:06,186 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:10:06,890 - app.database - INFO - Database connection established successfully
2024-08-07 21:10:06,940 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:10:06,979 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:10:07,549 - app.database - INFO - Database connection established successfully
2024-08-07 21:10:07,602 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:10:07,965 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 21:11:00,881 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 21:21:45,292 - app - INFO - Initializing Flask app...
2024-08-07 21:21:45,293 - app - INFO - Configuring app...
2024-08-07 21:21:45,293 - app - INFO - Setting up CORS...
2024-08-07 21:21:45,294 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 21:21:45,294 - app - INFO - Initializing Celery...
2024-08-07 21:21:45,300 - app - INFO - Initializing SocketIO...
2024-08-07 21:21:45,629 - app - INFO - Initializing JWT manager...
2024-08-07 21:21:45,629 - app - INFO - Setting up rate limiting...
2024-08-07 21:21:45,630 - app - INFO - Setting up database...
2024-08-07 21:21:45,631 - app - INFO - Starting database setup...
2024-08-07 21:21:46,515 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 21:21:46,516 - app - INFO - Database setup completed successfully
2024-08-07 21:21:46,516 - app - INFO - Registering error handler...
2024-08-07 21:21:46,516 - app - INFO - Initializing CLI commands...
2024-08-07 21:21:46,516 - app - INFO - Registering routes...
2024-08-07 21:21:46,526 - app - INFO - Initializing services...
2024-08-07 21:21:46,539 - app - INFO - Initializing email service...
2024-08-07 21:21:46,539 - app - INFO - Setting up scheduler...
2024-08-07 21:21:46,544 - app - INFO - Initializing scheduler...
2024-08-07 21:21:46,545 - app.scheduler - INFO - Scheduler initialized
2024-08-07 21:21:46,545 - app - INFO - Application initialized successfully
2024-08-07 21:21:49,600 - app - INFO - Initializing Flask app...
2024-08-07 21:21:49,603 - app - INFO - Configuring app...
2024-08-07 21:21:49,603 - app - INFO - Setting up CORS...
2024-08-07 21:21:49,604 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 21:21:49,605 - app - INFO - Initializing Celery...
2024-08-07 21:21:49,625 - app - INFO - Initializing SocketIO...
2024-08-07 21:21:50,450 - app - INFO - Initializing JWT manager...
2024-08-07 21:21:50,451 - app - INFO - Setting up rate limiting...
2024-08-07 21:21:50,454 - app - INFO - Setting up database...
2024-08-07 21:21:50,456 - app - INFO - Starting database setup...
2024-08-07 21:21:51,212 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 21:21:51,213 - app - INFO - Database setup completed successfully
2024-08-07 21:21:51,214 - app - INFO - Registering error handler...
2024-08-07 21:21:51,215 - app - INFO - Initializing CLI commands...
2024-08-07 21:21:51,215 - app - INFO - Registering routes...
2024-08-07 21:21:51,235 - app - INFO - Initializing services...
2024-08-07 21:21:51,263 - app - INFO - Initializing email service...
2024-08-07 21:21:51,263 - app - INFO - Setting up scheduler...
2024-08-07 21:21:51,271 - app - INFO - Initializing scheduler...
2024-08-07 21:21:51,272 - app.scheduler - INFO - Scheduler initialized
2024-08-07 21:21:51,272 - app - INFO - Application initialized successfully
2024-08-07 21:22:14,500 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:22:15,121 - app.database - INFO - Database connection established successfully
2024-08-07 21:22:15,693 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:22:16,263 - app.database - INFO - Database connection established successfully
2024-08-07 21:22:16,347 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:22:16,371 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 21:22:16,371 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:22:17,054 - app.database - INFO - Database connection established successfully
2024-08-07 21:22:17,097 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 21:22:17,135 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:22:17,721 - app.database - INFO - Database connection established successfully
2024-08-07 21:22:17,785 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:22:17,799 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 21:22:17,799 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:22:18,360 - app.database - INFO - Database connection established successfully
2024-08-07 21:22:18,402 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 21:22:19,105 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:22:19,714 - app.database - INFO - Database connection established successfully
2024-08-07 21:22:19,753 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:22:19,814 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:22:20,690 - app.database - INFO - Database connection established successfully
2024-08-07 21:22:20,752 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:22:20,894 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 21:31:13,692 - app - INFO - Initializing Flask app...
2024-08-07 21:31:13,693 - app - INFO - Configuring app...
2024-08-07 21:31:13,694 - app - INFO - Setting up CORS...
2024-08-07 21:31:13,694 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 21:31:13,694 - app - INFO - Initializing Celery...
2024-08-07 21:31:13,704 - app - INFO - Initializing SocketIO...
2024-08-07 21:31:14,049 - app - INFO - Initializing JWT manager...
2024-08-07 21:31:14,049 - app - INFO - Setting up rate limiting...
2024-08-07 21:31:14,051 - app - INFO - Setting up database...
2024-08-07 21:31:14,052 - app - INFO - Starting database setup...
2024-08-07 21:31:14,809 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 21:31:14,809 - app - INFO - Database setup completed successfully
2024-08-07 21:31:14,809 - app - INFO - Registering error handler...
2024-08-07 21:31:14,809 - app - INFO - Initializing CLI commands...
2024-08-07 21:31:14,810 - app - INFO - Registering routes...
2024-08-07 21:31:14,850 - app - INFO - Initializing services...
2024-08-07 21:31:14,862 - app - INFO - Initializing email service...
2024-08-07 21:31:14,863 - app - INFO - Setting up scheduler...
2024-08-07 21:31:14,870 - app - INFO - Initializing scheduler...
2024-08-07 21:31:14,870 - app.scheduler - INFO - Scheduler initialized
2024-08-07 21:31:14,871 - app - INFO - Application initialized successfully
2024-08-07 21:31:17,835 - app - INFO - Initializing Flask app...
2024-08-07 21:31:17,838 - app - INFO - Configuring app...
2024-08-07 21:31:17,840 - app - INFO - Setting up CORS...
2024-08-07 21:31:17,841 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 21:31:17,841 - app - INFO - Initializing Celery...
2024-08-07 21:31:17,859 - app - INFO - Initializing SocketIO...
2024-08-07 21:31:18,763 - app - INFO - Initializing JWT manager...
2024-08-07 21:31:18,764 - app - INFO - Setting up rate limiting...
2024-08-07 21:31:18,767 - app - INFO - Setting up database...
2024-08-07 21:31:18,768 - app - INFO - Starting database setup...
2024-08-07 21:31:19,420 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 21:31:19,421 - app - INFO - Database setup completed successfully
2024-08-07 21:31:19,422 - app - INFO - Registering error handler...
2024-08-07 21:31:19,422 - app - INFO - Initializing CLI commands...
2024-08-07 21:31:19,423 - app - INFO - Registering routes...
2024-08-07 21:31:19,442 - app - INFO - Initializing services...
2024-08-07 21:31:19,470 - app - INFO - Initializing email service...
2024-08-07 21:31:19,472 - app - INFO - Setting up scheduler...
2024-08-07 21:31:19,481 - app - INFO - Initializing scheduler...
2024-08-07 21:31:19,483 - app.scheduler - INFO - Scheduler initialized
2024-08-07 21:31:19,483 - app - INFO - Application initialized successfully
2024-08-07 21:32:32,989 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:32:34,649 - app.database - INFO - Database connection established successfully
2024-08-07 21:32:35,206 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 21:32:35,206 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:32:36,284 - app.database - INFO - Database connection established successfully
2024-08-07 21:32:36,361 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 21:32:36,401 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:32:37,318 - app.database - INFO - Database connection established successfully
2024-08-07 21:32:37,389 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:32:37,402 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 21:32:37,402 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:32:38,273 - app.database - INFO - Database connection established successfully
2024-08-07 21:32:38,342 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 21:32:38,388 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:32:39,517 - app.database - INFO - Database connection established successfully
2024-08-07 21:32:39,590 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:32:39,659 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:32:40,551 - app.database - INFO - Database connection established successfully
2024-08-07 21:32:40,812 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:32:40,854 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:32:41,505 - app.database - INFO - Database connection established successfully
2024-08-07 21:32:41,556 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:32:41,900 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 21:35:45,194 - app - INFO - Initializing Flask app...
2024-08-07 21:35:45,196 - app - INFO - Configuring app...
2024-08-07 21:35:45,197 - app - INFO - Setting up CORS...
2024-08-07 21:35:45,198 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 21:35:45,198 - app - INFO - Initializing Celery...
2024-08-07 21:35:45,207 - app - INFO - Initializing SocketIO...
2024-08-07 21:35:45,540 - app - INFO - Initializing JWT manager...
2024-08-07 21:35:45,541 - app - INFO - Setting up rate limiting...
2024-08-07 21:35:45,542 - app - INFO - Setting up database...
2024-08-07 21:35:45,543 - app - INFO - Starting database setup...
2024-08-07 21:35:46,218 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 21:35:46,218 - app - INFO - Database setup completed successfully
2024-08-07 21:35:46,219 - app - INFO - Registering error handler...
2024-08-07 21:35:46,219 - app - INFO - Initializing CLI commands...
2024-08-07 21:35:46,219 - app - INFO - Registering routes...
2024-08-07 21:35:46,228 - app - INFO - Initializing services...
2024-08-07 21:35:46,243 - app - INFO - Initializing email service...
2024-08-07 21:35:46,244 - app - INFO - Setting up scheduler...
2024-08-07 21:35:46,250 - app - INFO - Initializing scheduler...
2024-08-07 21:35:46,250 - app.scheduler - INFO - Scheduler initialized
2024-08-07 21:35:46,251 - app - INFO - Application initialized successfully
2024-08-07 21:35:50,011 - app - INFO - Initializing Flask app...
2024-08-07 21:35:50,015 - app - INFO - Configuring app...
2024-08-07 21:35:50,016 - app - INFO - Setting up CORS...
2024-08-07 21:35:50,017 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 21:35:50,018 - app - INFO - Initializing Celery...
2024-08-07 21:35:50,034 - app - INFO - Initializing SocketIO...
2024-08-07 21:35:50,723 - app - INFO - Initializing JWT manager...
2024-08-07 21:35:50,724 - app - INFO - Setting up rate limiting...
2024-08-07 21:35:50,727 - app - INFO - Setting up database...
2024-08-07 21:35:50,728 - app - INFO - Starting database setup...
2024-08-07 21:35:51,484 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 21:35:51,485 - app - INFO - Database setup completed successfully
2024-08-07 21:35:51,486 - app - INFO - Registering error handler...
2024-08-07 21:35:51,486 - app - INFO - Initializing CLI commands...
2024-08-07 21:35:51,487 - app - INFO - Registering routes...
2024-08-07 21:35:51,509 - app - INFO - Initializing services...
2024-08-07 21:35:51,537 - app - INFO - Initializing email service...
2024-08-07 21:35:51,538 - app - INFO - Setting up scheduler...
2024-08-07 21:35:51,545 - app - INFO - Initializing scheduler...
2024-08-07 21:35:51,546 - app.scheduler - INFO - Scheduler initialized
2024-08-07 21:35:51,548 - app - INFO - Application initialized successfully
2024-08-07 21:36:19,679 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:36:20,308 - app.database - INFO - Database connection established successfully
2024-08-07 21:36:20,629 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 21:36:20,630 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:36:21,210 - app.database - INFO - Database connection established successfully
2024-08-07 21:36:21,260 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 21:36:21,338 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:36:21,912 - app.database - INFO - Database connection established successfully
2024-08-07 21:36:21,987 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:36:21,996 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 21:36:21,996 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:36:22,584 - app.database - INFO - Database connection established successfully
2024-08-07 21:36:22,654 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 21:36:22,673 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:36:23,218 - app.database - INFO - Database connection established successfully
2024-08-07 21:36:23,258 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:36:23,386 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:36:23,986 - app.database - INFO - Database connection established successfully
2024-08-07 21:36:24,026 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:36:24,064 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:36:24,683 - app.database - INFO - Database connection established successfully
2024-08-07 21:36:24,726 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:36:26,346 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 21:36:30,722 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:36:31,312 - app.database - INFO - Database connection established successfully
2024-08-07 21:36:31,351 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:36:37,287 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 21:41:46,523 - app - INFO - Initializing Flask app...
2024-08-07 21:41:46,525 - app - INFO - Configuring app...
2024-08-07 21:41:46,525 - app - INFO - Setting up CORS...
2024-08-07 21:41:46,526 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 21:41:46,526 - app - INFO - Initializing Celery...
2024-08-07 21:41:46,534 - app - INFO - Initializing SocketIO...
2024-08-07 21:41:46,852 - app - INFO - Initializing JWT manager...
2024-08-07 21:41:46,852 - app - INFO - Setting up rate limiting...
2024-08-07 21:41:46,861 - app - INFO - Setting up database...
2024-08-07 21:41:46,861 - app - INFO - Starting database setup...
2024-08-07 21:41:47,502 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 21:41:47,502 - app - INFO - Database setup completed successfully
2024-08-07 21:41:47,502 - app - INFO - Registering error handler...
2024-08-07 21:41:47,502 - app - INFO - Initializing CLI commands...
2024-08-07 21:41:47,503 - app - INFO - Registering routes...
2024-08-07 21:41:47,511 - app - INFO - Initializing services...
2024-08-07 21:41:47,559 - app - INFO - Initializing email service...
2024-08-07 21:41:47,560 - app - INFO - Setting up scheduler...
2024-08-07 21:41:47,564 - app - INFO - Initializing scheduler...
2024-08-07 21:41:47,565 - app.scheduler - INFO - Scheduler initialized
2024-08-07 21:41:47,565 - app - INFO - Application initialized successfully
2024-08-07 21:41:50,900 - app - INFO - Initializing Flask app...
2024-08-07 21:41:50,903 - app - INFO - Configuring app...
2024-08-07 21:41:50,904 - app - INFO - Setting up CORS...
2024-08-07 21:41:50,906 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 21:41:50,906 - app - INFO - Initializing Celery...
2024-08-07 21:41:50,921 - app - INFO - Initializing SocketIO...
2024-08-07 21:41:51,477 - app - INFO - Initializing JWT manager...
2024-08-07 21:41:51,478 - app - INFO - Setting up rate limiting...
2024-08-07 21:41:51,480 - app - INFO - Setting up database...
2024-08-07 21:41:51,481 - app - INFO - Starting database setup...
2024-08-07 21:41:52,210 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 21:41:52,211 - app - INFO - Database setup completed successfully
2024-08-07 21:41:52,213 - app - INFO - Registering error handler...
2024-08-07 21:41:52,214 - app - INFO - Initializing CLI commands...
2024-08-07 21:41:52,214 - app - INFO - Registering routes...
2024-08-07 21:41:52,233 - app - INFO - Initializing services...
2024-08-07 21:41:52,261 - app - INFO - Initializing email service...
2024-08-07 21:41:52,261 - app - INFO - Setting up scheduler...
2024-08-07 21:41:52,271 - app - INFO - Initializing scheduler...
2024-08-07 21:41:52,271 - app.scheduler - INFO - Scheduler initialized
2024-08-07 21:41:52,273 - app - INFO - Application initialized successfully
2024-08-07 21:42:12,270 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:42:13,043 - app.database - INFO - Database connection established successfully
2024-08-07 21:42:13,621 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:42:14,424 - app.database - INFO - Database connection established successfully
2024-08-07 21:42:14,489 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:42:14,511 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 21:42:14,513 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:42:17,150 - app.database - INFO - Database connection established successfully
2024-08-07 21:42:17,198 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 21:42:17,302 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:42:17,988 - app.database - INFO - Database connection established successfully
2024-08-07 21:42:18,029 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:42:18,038 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 21:42:18,038 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:42:18,611 - app.database - INFO - Database connection established successfully
2024-08-07 21:42:18,650 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 21:42:18,727 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:42:19,393 - app.database - INFO - Database connection established successfully
2024-08-07 21:42:19,442 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:42:19,486 - app.database - INFO - Attempting to establish database connection...
2024-08-07 21:42:20,059 - app.database - INFO - Database connection established successfully
2024-08-07 21:42:20,116 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 21:42:20,494 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 22:29:52,650 - app - INFO - Initializing Flask app...
2024-08-07 22:29:52,651 - app - INFO - Configuring app...
2024-08-07 22:29:52,652 - app - INFO - Setting up CORS...
2024-08-07 22:29:52,653 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 22:29:52,653 - app - INFO - Initializing Celery...
2024-08-07 22:29:52,660 - app - INFO - Initializing SocketIO...
2024-08-07 22:29:52,936 - app - INFO - Initializing JWT manager...
2024-08-07 22:29:52,936 - app - INFO - Setting up rate limiting...
2024-08-07 22:29:52,937 - app - INFO - Setting up database...
2024-08-07 22:29:52,938 - app - INFO - Starting database setup...
2024-08-07 22:29:53,600 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 22:29:53,600 - app - INFO - Database setup completed successfully
2024-08-07 22:29:53,600 - app - INFO - Registering error handler...
2024-08-07 22:29:53,600 - app - INFO - Initializing CLI commands...
2024-08-07 22:29:53,600 - app - INFO - Registering routes...
2024-08-07 22:29:53,609 - app - INFO - Initializing services...
2024-08-07 22:29:53,621 - app - INFO - Initializing email service...
2024-08-07 22:29:53,622 - app - INFO - Setting up scheduler...
2024-08-07 22:29:53,626 - app - INFO - Initializing scheduler...
2024-08-07 22:29:53,628 - app.scheduler - INFO - Scheduler initialized
2024-08-07 22:29:53,629 - app - INFO - Application initialized successfully
2024-08-07 22:29:57,434 - app - INFO - Initializing Flask app...
2024-08-07 22:29:57,437 - app - INFO - Configuring app...
2024-08-07 22:29:57,438 - app - INFO - Setting up CORS...
2024-08-07 22:29:57,439 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 22:29:57,439 - app - INFO - Initializing Celery...
2024-08-07 22:29:57,454 - app - INFO - Initializing SocketIO...
2024-08-07 22:29:58,230 - app - INFO - Initializing JWT manager...
2024-08-07 22:29:58,231 - app - INFO - Setting up rate limiting...
2024-08-07 22:29:58,233 - app - INFO - Setting up database...
2024-08-07 22:29:58,234 - app - INFO - Starting database setup...
2024-08-07 22:29:59,663 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 22:29:59,664 - app - INFO - Database setup completed successfully
2024-08-07 22:29:59,665 - app - INFO - Registering error handler...
2024-08-07 22:29:59,666 - app - INFO - Initializing CLI commands...
2024-08-07 22:29:59,666 - app - INFO - Registering routes...
2024-08-07 22:29:59,687 - app - INFO - Initializing services...
2024-08-07 22:29:59,716 - app - INFO - Initializing email service...
2024-08-07 22:29:59,716 - app - INFO - Setting up scheduler...
2024-08-07 22:29:59,724 - app - INFO - Initializing scheduler...
2024-08-07 22:29:59,725 - app.scheduler - INFO - Scheduler initialized
2024-08-07 22:29:59,726 - app - INFO - Application initialized successfully
2024-08-07 22:31:22,963 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:31:23,662 - app.database - INFO - Database connection established successfully
2024-08-07 22:31:24,199 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 22:31:24,199 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:31:24,857 - app.database - INFO - Database connection established successfully
2024-08-07 22:31:24,912 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 22:31:24,947 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:31:25,570 - app.database - INFO - Database connection established successfully
2024-08-07 22:31:25,631 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 22:31:25,646 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 22:31:25,647 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:31:26,340 - app.database - INFO - Database connection established successfully
2024-08-07 22:31:26,382 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 22:31:26,422 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:31:27,011 - app.database - INFO - Database connection established successfully
2024-08-07 22:31:27,056 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 22:31:31,474 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:31:32,106 - app.database - INFO - Database connection established successfully
2024-08-07 22:31:32,157 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 22:31:32,197 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:31:32,829 - app.database - INFO - Database connection established successfully
2024-08-07 22:31:32,877 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 22:31:35,683 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 22:31:37,678 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 22:36:25,013 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:36:25,735 - app.database - INFO - Database connection established successfully
2024-08-07 22:36:26,031 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 22:36:26,032 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:36:26,643 - app.database - INFO - Database connection established successfully
2024-08-07 22:36:26,691 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 22:36:26,708 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:36:27,428 - app.database - INFO - Database connection established successfully
2024-08-07 22:36:27,493 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 22:36:27,500 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 22:36:27,501 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:36:28,117 - app.database - INFO - Database connection established successfully
2024-08-07 22:36:28,202 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 22:36:28,227 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:36:28,868 - app.database - INFO - Database connection established successfully
2024-08-07 22:36:28,918 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 22:51:27,919 - app - INFO - Initializing Flask app...
2024-08-07 22:51:27,920 - app - INFO - Configuring app...
2024-08-07 22:51:27,920 - app - INFO - Setting up CORS...
2024-08-07 22:51:27,920 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 22:51:27,920 - app - INFO - Initializing Celery...
2024-08-07 22:51:27,925 - app - INFO - Initializing SocketIO...
2024-08-07 22:51:28,133 - app - INFO - Initializing JWT manager...
2024-08-07 22:51:28,133 - app - INFO - Setting up rate limiting...
2024-08-07 22:51:28,134 - app - INFO - Setting up database...
2024-08-07 22:51:28,134 - app - INFO - Starting database setup...
2024-08-07 22:51:28,766 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 22:51:28,766 - app - INFO - Database setup completed successfully
2024-08-07 22:51:28,766 - app - INFO - Registering error handler...
2024-08-07 22:51:28,766 - app - INFO - Initializing CLI commands...
2024-08-07 22:51:28,766 - app - INFO - Registering routes...
2024-08-07 22:51:28,775 - app - INFO - Initializing services...
2024-08-07 22:51:28,783 - app - INFO - Initializing email service...
2024-08-07 22:51:28,783 - app - INFO - Setting up scheduler...
2024-08-07 22:51:28,787 - app - INFO - Initializing scheduler...
2024-08-07 22:51:28,788 - app.scheduler - INFO - Scheduler initialized
2024-08-07 22:51:28,788 - app - INFO - Application initialized successfully
2024-08-07 22:51:30,535 - app - INFO - Initializing Flask app...
2024-08-07 22:51:30,537 - app - INFO - Configuring app...
2024-08-07 22:51:30,538 - app - INFO - Setting up CORS...
2024-08-07 22:51:30,539 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 22:51:30,539 - app - INFO - Initializing Celery...
2024-08-07 22:51:30,549 - app - INFO - Initializing SocketIO...
2024-08-07 22:51:31,141 - app - INFO - Initializing JWT manager...
2024-08-07 22:51:31,142 - app - INFO - Setting up rate limiting...
2024-08-07 22:51:31,143 - app - INFO - Setting up database...
2024-08-07 22:51:31,144 - app - INFO - Starting database setup...
2024-08-07 22:51:31,717 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 22:51:31,717 - app - INFO - Database setup completed successfully
2024-08-07 22:51:31,718 - app - INFO - Registering error handler...
2024-08-07 22:51:31,718 - app - INFO - Initializing CLI commands...
2024-08-07 22:51:31,719 - app - INFO - Registering routes...
2024-08-07 22:51:31,735 - app - INFO - Initializing services...
2024-08-07 22:51:31,754 - app - INFO - Initializing email service...
2024-08-07 22:51:31,755 - app - INFO - Setting up scheduler...
2024-08-07 22:51:31,760 - app - INFO - Initializing scheduler...
2024-08-07 22:51:31,761 - app.scheduler - INFO - Scheduler initialized
2024-08-07 22:51:31,762 - app - INFO - Application initialized successfully
2024-08-07 22:51:45,524 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:51:46,107 - app.database - INFO - Database connection established successfully
2024-08-07 22:51:46,378 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 22:51:46,379 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:51:46,979 - app.database - INFO - Database connection established successfully
2024-08-07 22:51:47,018 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 22:51:47,031 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:51:47,614 - app.database - INFO - Database connection established successfully
2024-08-07 22:51:47,657 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 22:51:47,665 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 22:51:47,665 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:51:48,280 - app.database - INFO - Database connection established successfully
2024-08-07 22:51:48,331 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 22:51:48,353 - app.database - INFO - Attempting to establish database connection...
2024-08-07 22:51:48,960 - app.database - INFO - Database connection established successfully
2024-08-07 22:51:49,003 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:01:42,824 - app - INFO - Initializing Flask app...
2024-08-07 23:01:42,826 - app - INFO - Configuring app...
2024-08-07 23:01:42,826 - app - INFO - Setting up CORS...
2024-08-07 23:01:42,826 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 23:01:42,827 - app - INFO - Initializing Celery...
2024-08-07 23:01:42,833 - app - INFO - Initializing SocketIO...
2024-08-07 23:01:43,055 - app - INFO - Initializing JWT manager...
2024-08-07 23:01:43,056 - app - INFO - Setting up rate limiting...
2024-08-07 23:01:43,056 - app - INFO - Setting up database...
2024-08-07 23:01:43,057 - app - INFO - Starting database setup...
2024-08-07 23:01:43,627 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 23:01:43,628 - app - INFO - Database setup completed successfully
2024-08-07 23:01:43,628 - app - INFO - Registering error handler...
2024-08-07 23:01:43,628 - app - INFO - Initializing CLI commands...
2024-08-07 23:01:43,629 - app - INFO - Registering routes...
2024-08-07 23:01:43,637 - app - INFO - Initializing services...
2024-08-07 23:01:43,648 - app - INFO - Initializing email service...
2024-08-07 23:01:43,648 - app - INFO - Setting up scheduler...
2024-08-07 23:01:43,651 - app - INFO - Initializing scheduler...
2024-08-07 23:01:43,651 - app.scheduler - INFO - Scheduler initialized
2024-08-07 23:01:43,652 - app - INFO - Application initialized successfully
2024-08-07 23:01:45,930 - app - INFO - Initializing Flask app...
2024-08-07 23:01:45,933 - app - INFO - Configuring app...
2024-08-07 23:01:45,934 - app - INFO - Setting up CORS...
2024-08-07 23:01:45,934 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 23:01:45,935 - app - INFO - Initializing Celery...
2024-08-07 23:01:45,944 - app - INFO - Initializing SocketIO...
2024-08-07 23:01:46,536 - app - INFO - Initializing JWT manager...
2024-08-07 23:01:46,536 - app - INFO - Setting up rate limiting...
2024-08-07 23:01:46,538 - app - INFO - Setting up database...
2024-08-07 23:01:46,538 - app - INFO - Starting database setup...
2024-08-07 23:01:47,045 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 23:01:47,045 - app - INFO - Database setup completed successfully
2024-08-07 23:01:47,046 - app - INFO - Registering error handler...
2024-08-07 23:01:47,046 - app - INFO - Initializing CLI commands...
2024-08-07 23:01:47,047 - app - INFO - Registering routes...
2024-08-07 23:01:47,060 - app - INFO - Initializing services...
2024-08-07 23:01:47,076 - app - INFO - Initializing email service...
2024-08-07 23:01:47,077 - app - INFO - Setting up scheduler...
2024-08-07 23:01:47,088 - app - INFO - Initializing scheduler...
2024-08-07 23:01:47,090 - app.scheduler - INFO - Scheduler initialized
2024-08-07 23:01:47,091 - app - INFO - Application initialized successfully
2024-08-07 23:01:58,484 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:01:59,021 - app.database - INFO - Database connection established successfully
2024-08-07 23:01:59,283 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 23:01:59,283 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:01:59,894 - app.database - INFO - Database connection established successfully
2024-08-07 23:01:59,932 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 23:01:59,951 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:02:00,460 - app.database - INFO - Database connection established successfully
2024-08-07 23:02:00,517 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:02:00,523 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 23:02:00,523 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:02:01,061 - app.database - INFO - Database connection established successfully
2024-08-07 23:02:01,098 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 23:02:01,114 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:02:01,646 - app.database - INFO - Database connection established successfully
2024-08-07 23:02:01,684 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:02:41,962 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:02:42,942 - app.database - INFO - Database connection established successfully
2024-08-07 23:02:42,982 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:02:42,998 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:02:43,534 - app.database - INFO - Database connection established successfully
2024-08-07 23:02:43,573 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:02:45,662 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 23:03:41,834 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 23:08:32,947 - app - INFO - Initializing Flask app...
2024-08-07 23:08:32,948 - app - INFO - Configuring app...
2024-08-07 23:08:32,948 - app - INFO - Setting up CORS...
2024-08-07 23:08:32,949 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 23:08:32,949 - app - INFO - Initializing Celery...
2024-08-07 23:08:32,954 - app - INFO - Initializing SocketIO...
2024-08-07 23:08:33,164 - app - INFO - Initializing JWT manager...
2024-08-07 23:08:33,164 - app - INFO - Setting up rate limiting...
2024-08-07 23:08:33,165 - app - INFO - Setting up database...
2024-08-07 23:08:33,165 - app - INFO - Starting database setup...
2024-08-07 23:08:33,749 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 23:08:33,749 - app - INFO - Database setup completed successfully
2024-08-07 23:08:33,749 - app - INFO - Registering error handler...
2024-08-07 23:08:33,750 - app - INFO - Initializing CLI commands...
2024-08-07 23:08:33,750 - app - INFO - Registering routes...
2024-08-07 23:08:33,757 - app - INFO - Initializing services...
2024-08-07 23:08:33,769 - app - INFO - Initializing email service...
2024-08-07 23:08:33,769 - app - INFO - Setting up scheduler...
2024-08-07 23:08:33,774 - app - INFO - Initializing scheduler...
2024-08-07 23:08:33,774 - app.scheduler - INFO - Scheduler initialized
2024-08-07 23:08:33,775 - app - INFO - Application initialized successfully
2024-08-07 23:08:35,617 - app - INFO - Initializing Flask app...
2024-08-07 23:08:35,618 - app - INFO - Configuring app...
2024-08-07 23:08:35,619 - app - INFO - Setting up CORS...
2024-08-07 23:08:35,620 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 23:08:35,620 - app - INFO - Initializing Celery...
2024-08-07 23:08:35,630 - app - INFO - Initializing SocketIO...
2024-08-07 23:08:36,185 - app - INFO - Initializing JWT manager...
2024-08-07 23:08:36,185 - app - INFO - Setting up rate limiting...
2024-08-07 23:08:36,186 - app - INFO - Setting up database...
2024-08-07 23:08:36,187 - app - INFO - Starting database setup...
2024-08-07 23:08:36,792 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 23:08:36,792 - app - INFO - Database setup completed successfully
2024-08-07 23:08:36,793 - app - INFO - Registering error handler...
2024-08-07 23:08:36,794 - app - INFO - Initializing CLI commands...
2024-08-07 23:08:36,794 - app - INFO - Registering routes...
2024-08-07 23:08:36,805 - app - INFO - Initializing services...
2024-08-07 23:08:36,822 - app - INFO - Initializing email service...
2024-08-07 23:08:36,823 - app - INFO - Setting up scheduler...
2024-08-07 23:08:36,832 - app - INFO - Initializing scheduler...
2024-08-07 23:08:36,833 - app.scheduler - INFO - Scheduler initialized
2024-08-07 23:08:36,833 - app - INFO - Application initialized successfully
2024-08-07 23:10:04,493 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:10:05,868 - app.database - INFO - Database connection established successfully
2024-08-07 23:10:06,143 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 23:10:06,143 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:10:06,682 - app.database - INFO - Database connection established successfully
2024-08-07 23:10:06,793 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 23:10:06,809 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:10:07,405 - app.database - INFO - Database connection established successfully
2024-08-07 23:10:07,444 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:10:07,451 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 23:10:07,452 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:10:07,975 - app.database - INFO - Database connection established successfully
2024-08-07 23:10:08,014 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 23:10:08,031 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:10:08,591 - app.database - INFO - Database connection established successfully
2024-08-07 23:10:08,630 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:10:08,804 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:10:09,683 - app.database - INFO - Database connection established successfully
2024-08-07 23:10:09,722 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:10:09,741 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:10:10,660 - app.database - INFO - Database connection established successfully
2024-08-07 23:10:10,718 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:10:10,729 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 23:10:46,046 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 23:10:47,085 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 23:10:47,753 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 23:10:48,336 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-07 23:25:45,823 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:25:46,399 - app.database - INFO - Database connection established successfully
2024-08-07 23:25:46,629 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 23:25:46,629 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:25:47,250 - app.database - INFO - Database connection established successfully
2024-08-07 23:25:47,293 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 23:25:47,310 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:25:47,835 - app.database - INFO - Database connection established successfully
2024-08-07 23:25:47,889 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:25:47,894 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 23:25:47,895 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:25:48,390 - app.database - INFO - Database connection established successfully
2024-08-07 23:25:48,427 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 23:25:48,442 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:25:48,951 - app.database - INFO - Database connection established successfully
2024-08-07 23:25:48,998 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:38:48,409 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 23:38:53,407 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 23:38:57,118 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 23:40:40,609 - app - INFO - Initializing Flask app...
2024-08-07 23:40:40,610 - app - INFO - Configuring app...
2024-08-07 23:40:40,611 - app - INFO - Setting up CORS...
2024-08-07 23:40:40,611 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 23:40:40,611 - app - INFO - Initializing Celery...
2024-08-07 23:40:40,615 - app - INFO - Initializing SocketIO...
2024-08-07 23:40:40,837 - app - INFO - Initializing JWT manager...
2024-08-07 23:40:40,838 - app - INFO - Setting up rate limiting...
2024-08-07 23:40:40,838 - app - INFO - Setting up database...
2024-08-07 23:40:40,839 - app - INFO - Starting database setup...
2024-08-07 23:40:41,453 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 23:40:41,454 - app - INFO - Database setup completed successfully
2024-08-07 23:40:41,459 - app - INFO - Registering error handler...
2024-08-07 23:40:41,460 - app - INFO - Initializing CLI commands...
2024-08-07 23:40:41,460 - app - INFO - Registering routes...
2024-08-07 23:40:41,466 - app - INFO - Initializing services...
2024-08-07 23:40:41,475 - app - INFO - Initializing email service...
2024-08-07 23:40:41,476 - app - INFO - Setting up scheduler...
2024-08-07 23:40:41,478 - app - INFO - Initializing scheduler...
2024-08-07 23:40:41,478 - app.scheduler - INFO - Scheduler initialized
2024-08-07 23:40:41,478 - app - INFO - Application initialized successfully
2024-08-07 23:40:43,501 - app - INFO - Initializing Flask app...
2024-08-07 23:40:43,503 - app - INFO - Configuring app...
2024-08-07 23:40:43,504 - app - INFO - Setting up CORS...
2024-08-07 23:40:43,504 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 23:40:43,504 - app - INFO - Initializing Celery...
2024-08-07 23:40:43,513 - app - INFO - Initializing SocketIO...
2024-08-07 23:40:44,154 - app - INFO - Initializing JWT manager...
2024-08-07 23:40:44,155 - app - INFO - Setting up rate limiting...
2024-08-07 23:40:44,156 - app - INFO - Setting up database...
2024-08-07 23:40:44,157 - app - INFO - Starting database setup...
2024-08-07 23:40:44,703 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 23:40:44,704 - app - INFO - Database setup completed successfully
2024-08-07 23:40:44,704 - app - INFO - Registering error handler...
2024-08-07 23:40:44,705 - app - INFO - Initializing CLI commands...
2024-08-07 23:40:44,705 - app - INFO - Registering routes...
2024-08-07 23:40:44,718 - app - INFO - Initializing services...
2024-08-07 23:40:44,736 - app - INFO - Initializing email service...
2024-08-07 23:40:44,736 - app - INFO - Setting up scheduler...
2024-08-07 23:40:44,743 - app - INFO - Initializing scheduler...
2024-08-07 23:40:44,744 - app.scheduler - INFO - Scheduler initialized
2024-08-07 23:40:44,744 - app - INFO - Application initialized successfully
2024-08-07 23:40:53,637 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 23:40:56,039 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-07 23:47:23,467 - app - INFO - Initializing Flask app...
2024-08-07 23:47:23,468 - app - INFO - Configuring app...
2024-08-07 23:47:23,468 - app - INFO - Setting up CORS...
2024-08-07 23:47:23,470 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 23:47:23,470 - app - INFO - Initializing Celery...
2024-08-07 23:47:23,475 - app - INFO - Initializing SocketIO...
2024-08-07 23:47:23,655 - app - INFO - Initializing JWT manager...
2024-08-07 23:47:23,655 - app - INFO - Setting up rate limiting...
2024-08-07 23:47:23,656 - app - INFO - Setting up database...
2024-08-07 23:47:23,656 - app - INFO - Starting database setup...
2024-08-07 23:47:24,274 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 23:47:24,274 - app - INFO - Database setup completed successfully
2024-08-07 23:47:24,274 - app - INFO - Registering error handler...
2024-08-07 23:47:24,275 - app - INFO - Initializing CLI commands...
2024-08-07 23:47:24,275 - app - INFO - Registering routes...
2024-08-07 23:47:24,281 - app - INFO - Initializing services...
2024-08-07 23:47:24,289 - app - INFO - Initializing email service...
2024-08-07 23:47:24,289 - app - INFO - Setting up scheduler...
2024-08-07 23:47:24,293 - app - INFO - Initializing scheduler...
2024-08-07 23:47:24,294 - app.scheduler - INFO - Scheduler initialized
2024-08-07 23:47:24,294 - app - INFO - Application initialized successfully
2024-08-07 23:47:26,376 - app - INFO - Initializing Flask app...
2024-08-07 23:47:26,378 - app - INFO - Configuring app...
2024-08-07 23:47:26,378 - app - INFO - Setting up CORS...
2024-08-07 23:47:26,379 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 23:47:26,379 - app - INFO - Initializing Celery...
2024-08-07 23:47:26,387 - app - INFO - Initializing SocketIO...
2024-08-07 23:47:26,806 - app - INFO - Initializing JWT manager...
2024-08-07 23:47:26,806 - app - INFO - Setting up rate limiting...
2024-08-07 23:47:26,807 - app - INFO - Setting up database...
2024-08-07 23:47:26,808 - app - INFO - Starting database setup...
2024-08-07 23:47:27,311 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 23:47:27,312 - app - INFO - Database setup completed successfully
2024-08-07 23:47:27,312 - app - INFO - Registering error handler...
2024-08-07 23:47:27,313 - app - INFO - Initializing CLI commands...
2024-08-07 23:47:27,314 - app - INFO - Registering routes...
2024-08-07 23:47:27,326 - app - INFO - Initializing services...
2024-08-07 23:47:27,343 - app - INFO - Initializing email service...
2024-08-07 23:47:27,344 - app - INFO - Setting up scheduler...
2024-08-07 23:47:27,350 - app - INFO - Initializing scheduler...
2024-08-07 23:47:27,351 - app.scheduler - INFO - Scheduler initialized
2024-08-07 23:47:27,351 - app - INFO - Application initialized successfully
2024-08-07 23:49:00,968 - app - INFO - Initializing Flask app...
2024-08-07 23:49:00,970 - app - INFO - Configuring app...
2024-08-07 23:49:00,970 - app - INFO - Setting up CORS...
2024-08-07 23:49:00,970 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 23:49:00,971 - app - INFO - Initializing Celery...
2024-08-07 23:49:00,976 - app - INFO - Initializing SocketIO...
2024-08-07 23:49:01,150 - app - INFO - Initializing JWT manager...
2024-08-07 23:49:01,150 - app - INFO - Setting up rate limiting...
2024-08-07 23:49:01,151 - app - INFO - Setting up database...
2024-08-07 23:49:01,152 - app - INFO - Starting database setup...
2024-08-07 23:49:01,691 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 23:49:01,691 - app - INFO - Database setup completed successfully
2024-08-07 23:49:01,691 - app - INFO - Registering error handler...
2024-08-07 23:49:01,691 - app - INFO - Initializing CLI commands...
2024-08-07 23:49:01,692 - app - INFO - Registering routes...
2024-08-07 23:49:01,698 - app - INFO - Initializing services...
2024-08-07 23:49:01,706 - app - INFO - Initializing email service...
2024-08-07 23:49:01,707 - app - INFO - Setting up scheduler...
2024-08-07 23:49:01,710 - app - INFO - Initializing scheduler...
2024-08-07 23:49:01,710 - app.scheduler - INFO - Scheduler initialized
2024-08-07 23:49:01,711 - app - INFO - Application initialized successfully
2024-08-07 23:49:03,729 - app - INFO - Initializing Flask app...
2024-08-07 23:49:03,730 - app - INFO - Configuring app...
2024-08-07 23:49:03,731 - app - INFO - Setting up CORS...
2024-08-07 23:49:03,731 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-07 23:49:03,731 - app - INFO - Initializing Celery...
2024-08-07 23:49:03,739 - app - INFO - Initializing SocketIO...
2024-08-07 23:49:04,141 - app - INFO - Initializing JWT manager...
2024-08-07 23:49:04,141 - app - INFO - Setting up rate limiting...
2024-08-07 23:49:04,143 - app - INFO - Setting up database...
2024-08-07 23:49:04,144 - app - INFO - Starting database setup...
2024-08-07 23:49:04,660 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-07 23:49:04,660 - app - INFO - Database setup completed successfully
2024-08-07 23:49:04,660 - app - INFO - Registering error handler...
2024-08-07 23:49:04,662 - app - INFO - Initializing CLI commands...
2024-08-07 23:49:04,662 - app - INFO - Registering routes...
2024-08-07 23:49:04,676 - app - INFO - Initializing services...
2024-08-07 23:49:04,695 - app - INFO - Initializing email service...
2024-08-07 23:49:04,696 - app - INFO - Setting up scheduler...
2024-08-07 23:49:04,708 - app - INFO - Initializing scheduler...
2024-08-07 23:49:04,710 - app.scheduler - INFO - Scheduler initialized
2024-08-07 23:49:04,710 - app - INFO - Application initialized successfully
2024-08-07 23:49:15,924 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:49:16,499 - app.database - INFO - Database connection established successfully
2024-08-07 23:49:16,786 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 23:49:16,786 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:49:17,350 - app.database - INFO - Database connection established successfully
2024-08-07 23:49:17,392 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 23:49:17,421 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:49:17,917 - app.database - INFO - Database connection established successfully
2024-08-07 23:49:17,962 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:49:17,970 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 23:49:17,970 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:49:18,494 - app.database - INFO - Database connection established successfully
2024-08-07 23:49:18,530 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 23:49:18,546 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:49:19,048 - app.database - INFO - Database connection established successfully
2024-08-07 23:49:19,087 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:57:48,467 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:57:49,130 - app.database - INFO - Database connection established successfully
2024-08-07 23:57:49,477 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 23:57:49,477 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:57:50,242 - app.database - INFO - Database connection established successfully
2024-08-07 23:57:50,303 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 23:57:50,309 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-07 23:57:50,309 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:57:51,063 - app.database - INFO - Database connection established successfully
2024-08-07 23:57:51,129 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-07 23:57:51,143 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:57:51,984 - app.database - INFO - Database connection established successfully
2024-08-07 23:57:52,043 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:57:52,070 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:57:52,840 - app.database - INFO - Database connection established successfully
2024-08-07 23:57:52,909 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:57:55,850 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:57:56,701 - app.database - INFO - Database connection established successfully
2024-08-07 23:57:56,744 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:57:56,776 - app.database - INFO - Attempting to establish database connection...
2024-08-07 23:57:57,654 - app.database - INFO - Database connection established successfully
2024-08-07 23:57:57,705 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-07 23:57:57,794 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-08 00:16:55,603 - app - INFO - Initializing Flask app...
2024-08-08 00:16:55,605 - app - INFO - Configuring app...
2024-08-08 00:16:55,605 - app - INFO - Setting up CORS...
2024-08-08 00:16:55,606 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 00:16:55,606 - app - INFO - Initializing Celery...
2024-08-08 00:16:55,613 - app - INFO - Initializing SocketIO...
2024-08-08 00:16:55,955 - app - INFO - Initializing JWT manager...
2024-08-08 00:16:55,956 - app - INFO - Setting up rate limiting...
2024-08-08 00:16:55,957 - app - INFO - Setting up database...
2024-08-08 00:16:55,958 - app - INFO - Starting database setup...
2024-08-08 00:16:56,600 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 00:16:56,600 - app - INFO - Database setup completed successfully
2024-08-08 00:16:56,601 - app - INFO - Registering error handler...
2024-08-08 00:16:56,601 - app - INFO - Initializing CLI commands...
2024-08-08 00:16:56,602 - app - INFO - Registering routes...
2024-08-08 00:16:56,614 - app - INFO - Initializing services...
2024-08-08 00:16:56,632 - app - INFO - Initializing email service...
2024-08-08 00:16:56,632 - app - INFO - Setting up scheduler...
2024-08-08 00:16:56,644 - app - INFO - Initializing scheduler...
2024-08-08 00:16:56,646 - app.scheduler - INFO - Scheduler initialized
2024-08-08 00:16:56,647 - app - INFO - Application initialized successfully
2024-08-08 00:16:59,995 - app - INFO - Initializing Flask app...
2024-08-08 00:16:59,998 - app - INFO - Configuring app...
2024-08-08 00:16:59,999 - app - INFO - Setting up CORS...
2024-08-08 00:17:00,000 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 00:17:00,001 - app - INFO - Initializing Celery...
2024-08-08 00:17:00,015 - app - INFO - Initializing SocketIO...
2024-08-08 00:17:00,730 - app - INFO - Initializing JWT manager...
2024-08-08 00:17:00,731 - app - INFO - Setting up rate limiting...
2024-08-08 00:17:00,733 - app - INFO - Setting up database...
2024-08-08 00:17:00,734 - app - INFO - Starting database setup...
2024-08-08 00:17:01,404 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 00:17:01,404 - app - INFO - Database setup completed successfully
2024-08-08 00:17:01,405 - app - INFO - Registering error handler...
2024-08-08 00:17:01,406 - app - INFO - Initializing CLI commands...
2024-08-08 00:17:01,406 - app - INFO - Registering routes...
2024-08-08 00:17:01,423 - app - INFO - Initializing services...
2024-08-08 00:17:01,449 - app - INFO - Initializing email service...
2024-08-08 00:17:01,450 - app - INFO - Setting up scheduler...
2024-08-08 00:17:01,457 - app - INFO - Initializing scheduler...
2024-08-08 00:17:01,461 - app.scheduler - INFO - Scheduler initialized
2024-08-08 00:17:01,461 - app - INFO - Application initialized successfully
2024-08-08 00:17:26,453 - app.database - INFO - Attempting to establish database connection...
2024-08-08 00:17:27,371 - app.database - INFO - Database connection established successfully
2024-08-08 00:17:27,699 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 00:17:27,700 - app.database - INFO - Attempting to establish database connection...
2024-08-08 00:17:28,409 - app.database - INFO - Database connection established successfully
2024-08-08 00:17:28,480 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 00:17:28,503 - app.database - INFO - Attempting to establish database connection...
2024-08-08 00:17:29,270 - app.database - INFO - Database connection established successfully
2024-08-08 00:17:29,356 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 00:17:29,363 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 00:17:29,364 - app.database - INFO - Attempting to establish database connection...
2024-08-08 00:17:30,257 - app.database - INFO - Database connection established successfully
2024-08-08 00:17:30,343 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 00:17:30,365 - app.database - INFO - Attempting to establish database connection...
2024-08-08 00:17:31,248 - app.database - INFO - Database connection established successfully
2024-08-08 00:17:31,328 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 00:17:31,973 - app.database - INFO - Attempting to establish database connection...
2024-08-08 00:17:32,651 - app.database - INFO - Database connection established successfully
2024-08-08 00:17:32,855 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 00:17:32,881 - app.database - INFO - Attempting to establish database connection...
2024-08-08 00:17:33,695 - app.database - INFO - Database connection established successfully
2024-08-08 00:17:33,736 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 00:18:00,435 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-08 00:19:02,771 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-08 00:19:04,016 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-08 00:19:04,966 - app.routes.trial_matching - INFO - Received matching request for user 66af0d2d118d8e248b49a856
2024-08-08 00:41:43,440 - app - INFO - Initializing Flask app...
2024-08-08 00:41:43,441 - app - INFO - Configuring app...
2024-08-08 00:41:43,442 - app - INFO - Setting up CORS...
2024-08-08 00:41:43,442 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 00:41:43,443 - app - INFO - Initializing Celery...
2024-08-08 00:41:43,450 - app - INFO - Initializing SocketIO...
2024-08-08 00:41:43,772 - app - INFO - Initializing JWT manager...
2024-08-08 00:41:43,773 - app - INFO - Setting up rate limiting...
2024-08-08 00:41:43,774 - app - INFO - Setting up database...
2024-08-08 00:41:43,775 - app - INFO - Starting database setup...
2024-08-08 00:41:44,390 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 00:41:44,391 - app - INFO - Database setup completed successfully
2024-08-08 00:41:44,391 - app - INFO - Registering error handler...
2024-08-08 00:41:44,392 - app - INFO - Initializing CLI commands...
2024-08-08 00:41:44,392 - app - INFO - Registering routes...
2024-08-08 00:41:44,435 - app - INFO - Initializing services...
2024-08-08 00:41:44,447 - app - INFO - Initializing email service...
2024-08-08 00:41:44,447 - app - INFO - Setting up scheduler...
2024-08-08 00:41:44,453 - app - INFO - Initializing scheduler...
2024-08-08 00:41:44,453 - app.scheduler - INFO - Scheduler initialized
2024-08-08 00:41:44,454 - app - INFO - Application initialized successfully
2024-08-08 01:23:01,521 - app - INFO - Initializing Flask app...
2024-08-08 01:23:01,529 - app - INFO - Configuring app...
2024-08-08 01:23:01,529 - app - INFO - Setting up CORS...
2024-08-08 01:23:01,531 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 01:23:01,531 - app - INFO - Initializing Celery...
2024-08-08 01:23:01,536 - app - INFO - Initializing SocketIO...
2024-08-08 01:23:01,753 - app - INFO - Initializing JWT manager...
2024-08-08 01:23:01,754 - app - INFO - Setting up rate limiting...
2024-08-08 01:23:01,755 - app - INFO - Setting up database...
2024-08-08 01:23:01,756 - app - INFO - Starting database setup...
2024-08-08 01:23:02,388 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 01:23:02,389 - app - INFO - Database setup completed successfully
2024-08-08 01:23:02,389 - app - INFO - Registering error handler...
2024-08-08 01:23:02,390 - app - INFO - Initializing CLI commands...
2024-08-08 01:23:02,390 - app - INFO - Registering routes...
2024-08-08 01:23:02,414 - app - INFO - Initializing services...
2024-08-08 11:34:07,980 - app - INFO - Initializing Flask app...
2024-08-08 11:34:08,002 - app - INFO - Configuring app...
2024-08-08 11:34:08,003 - app - INFO - Setting up CORS...
2024-08-08 11:34:08,004 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 11:34:08,004 - app - INFO - Initializing JWT manager...
2024-08-08 11:34:08,005 - app - INFO - Setting up rate limiting...
2024-08-08 11:34:08,007 - app - INFO - Setting up database...
2024-08-08 11:34:08,008 - app - INFO - Starting database setup...
2024-08-08 11:34:09,148 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 11:34:09,148 - app - INFO - Database setup completed successfully
2024-08-08 11:34:09,148 - app - INFO - Registering error handler...
2024-08-08 11:34:09,149 - app - INFO - Initializing CLI commands...
2024-08-08 11:34:09,149 - app - INFO - Registering routes...
2024-08-08 11:34:09,160 - app - INFO - Initializing services...
2024-08-08 11:35:01,439 - app - INFO - Initializing Flask app...
2024-08-08 11:35:01,440 - app - INFO - Configuring app...
2024-08-08 11:35:01,441 - app - INFO - Setting up CORS...
2024-08-08 11:35:01,441 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 11:35:01,441 - app - INFO - Initializing JWT manager...
2024-08-08 11:35:01,442 - app - INFO - Setting up rate limiting...
2024-08-08 11:35:01,459 - app - INFO - Setting up database...
2024-08-08 11:35:01,460 - app - INFO - Starting database setup...
2024-08-08 11:35:02,558 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 11:35:02,558 - app - INFO - Database setup completed successfully
2024-08-08 11:35:02,558 - app - INFO - Registering error handler...
2024-08-08 11:35:02,559 - app - INFO - Initializing CLI commands...
2024-08-08 11:35:02,559 - app - INFO - Registering routes...
2024-08-08 11:35:02,566 - app - INFO - Initializing services...
2024-08-08 11:35:02,580 - app - INFO - Initializing email service...
2024-08-08 11:35:02,580 - app - INFO - Setting up scheduler...
2024-08-08 11:35:02,620 - app - INFO - Initializing scheduler...
2024-08-08 11:35:02,621 - app.scheduler - INFO - Scheduler initialized
2024-08-08 11:35:02,621 - app - INFO - Application initialized successfully
2024-08-08 11:35:05,046 - app - INFO - Initializing Flask app...
2024-08-08 11:35:05,048 - app - INFO - Configuring app...
2024-08-08 11:35:05,048 - app - INFO - Setting up CORS...
2024-08-08 11:35:05,049 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 11:35:05,050 - app - INFO - Initializing JWT manager...
2024-08-08 11:35:05,051 - app - INFO - Setting up rate limiting...
2024-08-08 11:35:05,052 - app - INFO - Setting up database...
2024-08-08 11:35:05,053 - app - INFO - Starting database setup...
2024-08-08 11:35:06,047 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 11:35:06,048 - app - INFO - Database setup completed successfully
2024-08-08 11:35:06,055 - app - INFO - Registering error handler...
2024-08-08 11:35:06,055 - app - INFO - Initializing CLI commands...
2024-08-08 11:35:06,056 - app - INFO - Registering routes...
2024-08-08 11:35:06,072 - app - INFO - Initializing services...
2024-08-08 11:35:06,091 - app - INFO - Initializing email service...
2024-08-08 11:35:06,092 - app - INFO - Setting up scheduler...
2024-08-08 11:35:06,099 - app - INFO - Initializing scheduler...
2024-08-08 11:35:06,099 - app.scheduler - INFO - Scheduler initialized
2024-08-08 11:35:06,100 - app - INFO - Application initialized successfully
2024-08-08 11:35:21,312 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:35:22,159 - app.database - INFO - Database connection established successfully
2024-08-08 11:35:23,146 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 11:35:23,147 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:35:23,204 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:35:23,206 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:35:23,936 - app.database - INFO - Database connection established successfully
2024-08-08 11:35:23,992 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 11:35:24,321 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 11:35:24,322 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:35:25,081 - app.database - INFO - Database connection established successfully
2024-08-08 11:35:25,146 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 11:36:47,325 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 11:36:47,325 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:36:48,274 - app.database - INFO - Database connection established successfully
2024-08-08 11:36:48,369 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 11:36:48,381 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 11:36:48,381 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:36:49,229 - app.database - INFO - Database connection established successfully
2024-08-08 11:36:49,290 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 11:36:49,755 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:36:49,756 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:36:52,852 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:36:54,242 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:36:55,824 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:36:57,691 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:54:20,073 - app - INFO - Initializing Flask app...
2024-08-08 11:54:20,075 - app - INFO - Configuring app...
2024-08-08 11:54:20,075 - app - INFO - Setting up CORS...
2024-08-08 11:54:20,075 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 11:54:20,076 - app - INFO - Initializing JWT manager...
2024-08-08 11:54:20,076 - app - INFO - Setting up rate limiting...
2024-08-08 11:54:20,078 - app - INFO - Setting up database...
2024-08-08 11:54:20,078 - app - INFO - Starting database setup...
2024-08-08 11:54:20,879 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 11:54:20,880 - app - INFO - Database setup completed successfully
2024-08-08 11:54:20,880 - app - INFO - Registering error handler...
2024-08-08 11:54:20,881 - app - INFO - Initializing CLI commands...
2024-08-08 11:54:20,881 - app - INFO - Registering routes...
2024-08-08 11:54:20,889 - app - INFO - Initializing services...
2024-08-08 11:54:20,904 - app - INFO - Initializing email service...
2024-08-08 11:54:20,921 - app - INFO - Setting up scheduler...
2024-08-08 11:54:20,927 - app - INFO - Initializing scheduler...
2024-08-08 11:54:20,928 - app.scheduler - INFO - Scheduler initialized
2024-08-08 11:54:20,929 - app - INFO - Application initialized successfully
2024-08-08 11:54:34,807 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:54:35,428 - app.database - INFO - Database connection established successfully
2024-08-08 11:54:36,251 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:54:36,292 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:54:36,312 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 11:54:36,314 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:54:36,994 - app.database - INFO - Database connection established successfully
2024-08-08 11:54:37,051 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 11:54:37,370 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 11:54:37,371 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:54:37,996 - app.database - INFO - Database connection established successfully
2024-08-08 11:54:38,165 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 11:54:54,668 - app - INFO - Initializing Flask app...
2024-08-08 11:54:54,669 - app - INFO - Configuring app...
2024-08-08 11:54:54,669 - app - INFO - Setting up CORS...
2024-08-08 11:54:54,670 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 11:54:54,670 - app - INFO - Initializing JWT manager...
2024-08-08 11:54:54,670 - app - INFO - Setting up rate limiting...
2024-08-08 11:54:54,671 - app - INFO - Setting up database...
2024-08-08 11:54:54,672 - app - INFO - Starting database setup...
2024-08-08 11:54:55,496 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 11:54:55,496 - app - INFO - Database setup completed successfully
2024-08-08 11:54:55,496 - app - INFO - Registering error handler...
2024-08-08 11:54:55,496 - app - INFO - Initializing CLI commands...
2024-08-08 11:54:55,496 - app - INFO - Registering routes...
2024-08-08 11:54:55,504 - app - INFO - Initializing services...
2024-08-08 11:54:55,519 - app - INFO - Initializing email service...
2024-08-08 11:54:55,520 - app - INFO - Setting up scheduler...
2024-08-08 11:54:55,525 - app - INFO - Initializing scheduler...
2024-08-08 11:54:55,526 - app.scheduler - INFO - Scheduler initialized
2024-08-08 11:54:55,526 - app - INFO - Application initialized successfully
2024-08-08 11:54:57,214 - app - INFO - Initializing Flask app...
2024-08-08 11:54:57,217 - app - INFO - Configuring app...
2024-08-08 11:54:57,219 - app - INFO - Setting up CORS...
2024-08-08 11:54:57,221 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 11:54:57,222 - app - INFO - Initializing JWT manager...
2024-08-08 11:54:57,223 - app - INFO - Setting up rate limiting...
2024-08-08 11:54:57,225 - app - INFO - Setting up database...
2024-08-08 11:54:57,227 - app - INFO - Starting database setup...
2024-08-08 11:54:58,365 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 11:54:58,366 - app - INFO - Database setup completed successfully
2024-08-08 11:54:58,367 - app - INFO - Registering error handler...
2024-08-08 11:54:58,367 - app - INFO - Initializing CLI commands...
2024-08-08 11:54:58,368 - app - INFO - Registering routes...
2024-08-08 11:54:58,376 - app - INFO - Initializing services...
2024-08-08 11:54:58,391 - app - INFO - Initializing email service...
2024-08-08 11:54:58,392 - app - INFO - Setting up scheduler...
2024-08-08 11:54:58,397 - app - INFO - Initializing scheduler...
2024-08-08 11:54:58,398 - app.scheduler - INFO - Scheduler initialized
2024-08-08 11:54:58,398 - app - INFO - Application initialized successfully
2024-08-08 11:55:09,036 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:55:09,889 - app.database - INFO - Database connection established successfully
2024-08-08 11:55:10,684 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:55:10,693 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:55:10,714 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 11:55:10,717 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:55:11,395 - app.database - INFO - Database connection established successfully
2024-08-08 11:55:11,435 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 11:55:11,760 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 11:55:11,760 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:55:12,353 - app.database - INFO - Database connection established successfully
2024-08-08 11:55:12,401 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 11:55:34,682 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:55:34,687 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:55:40,514 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:57:36,442 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 11:57:36,444 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:57:37,133 - app.database - INFO - Database connection established successfully
2024-08-08 11:57:37,177 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 11:57:37,263 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 11:57:37,264 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:57:37,901 - app.database - INFO - Database connection established successfully
2024-08-08 11:57:37,973 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 11:57:44,298 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:57:44,300 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 11:57:44,552 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 11:57:44,552 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:57:45,210 - app.database - INFO - Database connection established successfully
2024-08-08 11:57:45,271 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 11:57:45,281 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 11:57:45,281 - app.database - INFO - Attempting to establish database connection...
2024-08-08 11:57:46,153 - app.database - INFO - Database connection established successfully
2024-08-08 11:57:46,202 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 11:58:00,315 - app - INFO - Initializing Flask app...
2024-08-08 11:58:00,316 - app - INFO - Configuring app...
2024-08-08 11:58:00,317 - app - INFO - Setting up CORS...
2024-08-08 11:58:00,317 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 11:58:00,317 - app - INFO - Initializing JWT manager...
2024-08-08 11:58:00,318 - app - INFO - Setting up rate limiting...
2024-08-08 11:58:00,319 - app - INFO - Setting up database...
2024-08-08 11:58:00,320 - app - INFO - Starting database setup...
2024-08-08 11:58:01,133 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 11:58:01,134 - app - INFO - Database setup completed successfully
2024-08-08 11:58:01,134 - app - INFO - Registering error handler...
2024-08-08 11:58:01,135 - app - INFO - Initializing CLI commands...
2024-08-08 11:58:01,135 - app - INFO - Registering routes...
2024-08-08 11:58:01,143 - app - INFO - Initializing services...
2024-08-08 11:58:01,159 - app - INFO - Initializing email service...
2024-08-08 11:58:01,160 - app - INFO - Setting up scheduler...
2024-08-08 11:58:01,167 - app - INFO - Initializing scheduler...
2024-08-08 11:58:01,168 - app.scheduler - INFO - Scheduler initialized
2024-08-08 11:58:01,168 - app - INFO - Application initialized successfully
2024-08-08 11:58:03,394 - app - INFO - Initializing Flask app...
2024-08-08 11:58:03,396 - app - INFO - Configuring app...
2024-08-08 11:58:03,397 - app - INFO - Setting up CORS...
2024-08-08 11:58:03,397 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 11:58:03,398 - app - INFO - Initializing JWT manager...
2024-08-08 11:58:03,398 - app - INFO - Setting up rate limiting...
2024-08-08 11:58:03,399 - app - INFO - Setting up database...
2024-08-08 11:58:03,400 - app - INFO - Starting database setup...
2024-08-08 11:58:04,103 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 11:58:04,103 - app - INFO - Database setup completed successfully
2024-08-08 11:58:04,103 - app - INFO - Registering error handler...
2024-08-08 11:58:04,104 - app - INFO - Initializing CLI commands...
2024-08-08 11:58:04,105 - app - INFO - Registering routes...
2024-08-08 11:58:04,113 - app - INFO - Initializing services...
2024-08-08 11:58:04,126 - app - INFO - Initializing email service...
2024-08-08 11:58:04,127 - app - INFO - Setting up scheduler...
2024-08-08 11:58:04,132 - app - INFO - Initializing scheduler...
2024-08-08 11:58:04,133 - app.scheduler - INFO - Scheduler initialized
2024-08-08 11:58:04,133 - app - INFO - Application initialized successfully
2024-08-08 11:58:13,819 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:01:59,592 - app - INFO - Initializing Flask app...
2024-08-08 12:01:59,593 - app - INFO - Configuring app...
2024-08-08 12:01:59,594 - app - INFO - Setting up CORS...
2024-08-08 12:01:59,594 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:01:59,594 - app - INFO - Initializing JWT manager...
2024-08-08 12:01:59,595 - app - INFO - Setting up rate limiting...
2024-08-08 12:01:59,597 - app - INFO - Setting up database...
2024-08-08 12:01:59,597 - app - INFO - Starting database setup...
2024-08-08 12:02:00,478 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:02:00,484 - app - INFO - Database setup completed successfully
2024-08-08 12:02:00,484 - app - INFO - Registering error handler...
2024-08-08 12:02:00,485 - app - INFO - Initializing CLI commands...
2024-08-08 12:02:00,485 - app - INFO - Registering routes...
2024-08-08 12:02:00,491 - app - INFO - Initializing services...
2024-08-08 12:02:00,507 - app - INFO - Initializing email service...
2024-08-08 12:02:00,508 - app - INFO - Setting up scheduler...
2024-08-08 12:02:00,513 - app - INFO - Initializing scheduler...
2024-08-08 12:02:00,514 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:02:00,514 - app - INFO - Application initialized successfully
2024-08-08 12:02:02,842 - app - INFO - Initializing Flask app...
2024-08-08 12:02:02,843 - app - INFO - Configuring app...
2024-08-08 12:02:02,844 - app - INFO - Setting up CORS...
2024-08-08 12:02:02,845 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:02:02,846 - app - INFO - Initializing JWT manager...
2024-08-08 12:02:02,847 - app - INFO - Setting up rate limiting...
2024-08-08 12:02:02,848 - app - INFO - Setting up database...
2024-08-08 12:02:02,849 - app - INFO - Starting database setup...
2024-08-08 12:02:03,586 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:02:03,586 - app - INFO - Database setup completed successfully
2024-08-08 12:02:03,586 - app - INFO - Registering error handler...
2024-08-08 12:02:03,587 - app - INFO - Initializing CLI commands...
2024-08-08 12:02:03,587 - app - INFO - Registering routes...
2024-08-08 12:02:03,598 - app - INFO - Initializing services...
2024-08-08 12:02:03,615 - app - INFO - Initializing email service...
2024-08-08 12:02:03,617 - app - INFO - Setting up scheduler...
2024-08-08 12:02:03,624 - app - INFO - Initializing scheduler...
2024-08-08 12:02:03,625 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:02:03,626 - app - INFO - Application initialized successfully
2024-08-08 12:02:17,366 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:02:18,273 - app.database - INFO - Database connection established successfully
2024-08-08 12:02:19,128 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:02:19,143 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:02:19,162 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:02:19,163 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:02:19,946 - app.database - INFO - Database connection established successfully
2024-08-08 12:02:20,000 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:02:20,322 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:02:20,323 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:02:21,665 - app.database - INFO - Database connection established successfully
2024-08-08 12:02:21,741 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:03:56,422 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:03:56,422 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:03:57,178 - app.database - INFO - Database connection established successfully
2024-08-08 12:03:57,244 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:03:57,259 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:03:57,260 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:03:57,973 - app.database - INFO - Database connection established successfully
2024-08-08 12:03:58,017 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:03:59,101 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:03:59,105 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:03:59,347 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:03:59,348 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:00,204 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:00,251 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:00,266 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:00,267 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:01,128 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:01,176 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:14,166 - app - INFO - Initializing Flask app...
2024-08-08 12:04:14,167 - app - INFO - Configuring app...
2024-08-08 12:04:14,167 - app - INFO - Setting up CORS...
2024-08-08 12:04:14,168 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:04:14,169 - app - INFO - Initializing JWT manager...
2024-08-08 12:04:14,170 - app - INFO - Setting up rate limiting...
2024-08-08 12:04:14,171 - app - INFO - Setting up database...
2024-08-08 12:04:14,172 - app - INFO - Starting database setup...
2024-08-08 12:04:15,089 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:04:15,089 - app - INFO - Database setup completed successfully
2024-08-08 12:04:15,090 - app - INFO - Registering error handler...
2024-08-08 12:04:15,090 - app - INFO - Initializing CLI commands...
2024-08-08 12:04:15,092 - app - INFO - Registering routes...
2024-08-08 12:04:15,099 - app - INFO - Initializing services...
2024-08-08 12:04:15,113 - app - INFO - Initializing email service...
2024-08-08 12:04:15,113 - app - INFO - Setting up scheduler...
2024-08-08 12:04:15,119 - app - INFO - Initializing scheduler...
2024-08-08 12:04:15,120 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:04:15,121 - app - INFO - Application initialized successfully
2024-08-08 12:04:17,357 - app - INFO - Initializing Flask app...
2024-08-08 12:04:17,359 - app - INFO - Configuring app...
2024-08-08 12:04:17,359 - app - INFO - Setting up CORS...
2024-08-08 12:04:17,360 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:04:17,360 - app - INFO - Initializing JWT manager...
2024-08-08 12:04:17,361 - app - INFO - Setting up rate limiting...
2024-08-08 12:04:17,361 - app - INFO - Setting up database...
2024-08-08 12:04:17,362 - app - INFO - Starting database setup...
2024-08-08 12:04:18,258 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:04:18,258 - app - INFO - Database setup completed successfully
2024-08-08 12:04:18,259 - app - INFO - Registering error handler...
2024-08-08 12:04:18,259 - app - INFO - Initializing CLI commands...
2024-08-08 12:04:18,259 - app - INFO - Registering routes...
2024-08-08 12:04:18,266 - app - INFO - Initializing services...
2024-08-08 12:04:18,280 - app - INFO - Initializing email service...
2024-08-08 12:04:18,280 - app - INFO - Setting up scheduler...
2024-08-08 12:04:18,288 - app - INFO - Initializing scheduler...
2024-08-08 12:04:18,289 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:04:18,289 - app - INFO - Application initialized successfully
2024-08-08 12:04:32,102 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:32,920 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:33,758 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:04:33,759 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:04:33,805 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:33,806 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:34,555 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:34,598 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:34,929 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:34,929 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:35,611 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:35,656 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:36,014 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:36,015 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:36,735 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:36,780 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:36,798 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:36,798 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:37,440 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:37,489 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:38,370 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:38,371 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:39,235 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:39,287 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:04:39,301 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:39,303 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:40,037 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:40,084 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:04:41,414 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:41,416 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:41,504 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 12:04:42,111 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:42,112 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:42,767 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:42,814 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:04:48,561 - app.services.trial_matching_service - WARNING - Matching process already running for user 66af0d2d118d8e248b49a856
2024-08-08 12:04:49,212 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:49,213 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:50,119 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:50,180 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:04:52,296 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:52,297 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:52,994 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:53,059 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:04:55,971 - app.services.trial_matching_service - WARNING - Matching process already running for user 66af0d2d118d8e248b49a856
2024-08-08 12:04:56,635 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:04:56,636 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:04:57,545 - app.database - INFO - Database connection established successfully
2024-08-08 12:04:57,596 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:05:10,464 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:05:10,478 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:05:10,483 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:10,484 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:05:11,118 - app.database - INFO - Database connection established successfully
2024-08-08 12:05:11,178 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:11,521 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:11,522 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:05:12,188 - app.database - INFO - Database connection established successfully
2024-08-08 12:05:12,251 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:22,607 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:22,609 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:05:23,160 - app.database - INFO - Database connection established successfully
2024-08-08 12:05:23,211 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:05:23,232 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:23,232 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:05:23,810 - app.database - INFO - Database connection established successfully
2024-08-08 12:05:23,858 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:05:24,862 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:05:24,863 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:05:25,114 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:25,115 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:05:25,862 - app.database - INFO - Database connection established successfully
2024-08-08 12:05:25,938 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:25,954 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:25,957 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:05:26,766 - app.database - INFO - Database connection established successfully
2024-08-08 12:05:26,875 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:55,104 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:55,104 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:05:55,888 - app.database - INFO - Database connection established successfully
2024-08-08 12:05:55,926 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:05:55,939 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:55,941 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:05:56,569 - app.database - INFO - Database connection established successfully
2024-08-08 12:05:56,612 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:05:58,576 - app.services.trial_matching_service - WARNING - Matching process already running for user 66af0d2d118d8e248b49a856
2024-08-08 12:05:58,966 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:05:58,968 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:05:59,569 - app.database - INFO - Database connection established successfully
2024-08-08 12:05:59,616 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:06:12,246 - app.services.trial_matching_service - WARNING - Matching process already running for user 66af0d2d118d8e248b49a856
2024-08-08 12:06:12,895 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:06:12,895 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:06:13,429 - app.database - INFO - Database connection established successfully
2024-08-08 12:06:13,471 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:07:08,003 - app - INFO - Initializing Flask app...
2024-08-08 12:07:08,005 - app - INFO - Configuring app...
2024-08-08 12:07:08,006 - app - INFO - Setting up CORS...
2024-08-08 12:07:08,006 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:07:08,006 - app - INFO - Initializing JWT manager...
2024-08-08 12:07:08,007 - app - INFO - Setting up rate limiting...
2024-08-08 12:07:08,008 - app - INFO - Setting up database...
2024-08-08 12:07:08,008 - app - INFO - Starting database setup...
2024-08-08 12:07:08,772 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:07:08,772 - app - INFO - Database setup completed successfully
2024-08-08 12:07:08,773 - app - INFO - Registering error handler...
2024-08-08 12:07:08,773 - app - INFO - Initializing CLI commands...
2024-08-08 12:07:08,773 - app - INFO - Registering routes...
2024-08-08 12:07:08,779 - app - INFO - Initializing services...
2024-08-08 12:07:08,790 - app - INFO - Initializing email service...
2024-08-08 12:07:08,790 - app - INFO - Setting up scheduler...
2024-08-08 12:07:08,795 - app - INFO - Initializing scheduler...
2024-08-08 12:07:08,796 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:07:08,796 - app - INFO - Application initialized successfully
2024-08-08 12:07:10,828 - app - INFO - Initializing Flask app...
2024-08-08 12:07:10,829 - app - INFO - Configuring app...
2024-08-08 12:07:10,830 - app - INFO - Setting up CORS...
2024-08-08 12:07:10,830 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:07:10,831 - app - INFO - Initializing JWT manager...
2024-08-08 12:07:10,832 - app - INFO - Setting up rate limiting...
2024-08-08 12:07:10,834 - app - INFO - Setting up database...
2024-08-08 12:07:10,834 - app - INFO - Starting database setup...
2024-08-08 12:07:11,513 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:07:11,513 - app - INFO - Database setup completed successfully
2024-08-08 12:07:11,514 - app - INFO - Registering error handler...
2024-08-08 12:07:11,515 - app - INFO - Initializing CLI commands...
2024-08-08 12:07:11,516 - app - INFO - Registering routes...
2024-08-08 12:07:11,527 - app - INFO - Initializing services...
2024-08-08 12:07:11,545 - app - INFO - Initializing email service...
2024-08-08 12:07:11,546 - app - INFO - Setting up scheduler...
2024-08-08 12:07:11,552 - app - INFO - Initializing scheduler...
2024-08-08 12:07:11,553 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:07:11,556 - app - INFO - Application initialized successfully
2024-08-08 12:07:22,991 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:07:23,626 - app.database - INFO - Database connection established successfully
2024-08-08 12:07:24,239 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:07:24,242 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:07:24,245 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:07:24,246 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:07:24,863 - app.database - INFO - Database connection established successfully
2024-08-08 12:07:24,903 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:07:25,219 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:07:25,219 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:07:25,787 - app.database - INFO - Database connection established successfully
2024-08-08 12:07:25,831 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:08:34,285 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:08:34,285 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:08:34,933 - app.database - INFO - Database connection established successfully
2024-08-08 12:08:34,985 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:08:34,997 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:08:34,998 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:08:35,600 - app.database - INFO - Database connection established successfully
2024-08-08 12:08:35,664 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:08:40,968 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 12:08:40,969 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:08:41,065 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 12:08:41,730 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:08:41,730 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:08:42,346 - app.database - INFO - Database connection established successfully
2024-08-08 12:08:42,416 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:09:08,563 - app.services.trial_matching_service - WARNING - Matching process already running for user 66af0d2d118d8e248b49a856
2024-08-08 12:09:09,208 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:09,210 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:09:09,761 - app.database - INFO - Database connection established successfully
2024-08-08 12:09:09,800 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:09:23,548 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:09:23,561 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:09:23,583 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:23,589 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:09:24,098 - app.database - INFO - Database connection established successfully
2024-08-08 12:09:24,148 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:24,465 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:24,465 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:09:25,072 - app.database - INFO - Database connection established successfully
2024-08-08 12:09:25,132 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:30,810 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:30,810 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:09:31,440 - app.database - INFO - Database connection established successfully
2024-08-08 12:09:31,484 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:09:31,494 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:31,494 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:09:32,100 - app.database - INFO - Database connection established successfully
2024-08-08 12:09:32,149 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:09:36,797 - app.services.trial_matching_service - WARNING - Matching process already running for user 66af0d2d118d8e248b49a856
2024-08-08 12:09:37,446 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:37,448 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:09:38,198 - app.database - INFO - Database connection established successfully
2024-08-08 12:09:38,245 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:09:49,194 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:09:49,195 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:09:49,221 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:49,222 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:09:49,824 - app.database - INFO - Database connection established successfully
2024-08-08 12:09:49,866 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:50,182 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:50,182 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:09:50,872 - app.database - INFO - Database connection established successfully
2024-08-08 12:09:50,967 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:58,164 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:58,164 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:09:58,730 - app.database - INFO - Database connection established successfully
2024-08-08 12:09:58,793 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:58,809 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:09:58,810 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:09:59,441 - app.database - INFO - Database connection established successfully
2024-08-08 12:09:59,483 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:10:01,465 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:10:01,469 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:10:01,484 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:10:01,485 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:10:02,160 - app.database - INFO - Database connection established successfully
2024-08-08 12:10:02,240 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:10:02,250 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:10:02,251 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:10:02,867 - app.database - INFO - Database connection established successfully
2024-08-08 12:10:02,937 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:10:19,168 - app - INFO - Initializing Flask app...
2024-08-08 12:10:19,171 - app - INFO - Configuring app...
2024-08-08 12:10:19,171 - app - INFO - Setting up CORS...
2024-08-08 12:10:19,171 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:10:19,172 - app - INFO - Initializing JWT manager...
2024-08-08 12:10:19,172 - app - INFO - Setting up rate limiting...
2024-08-08 12:10:19,173 - app - INFO - Setting up database...
2024-08-08 12:10:19,174 - app - INFO - Starting database setup...
2024-08-08 12:10:19,790 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:10:19,791 - app - INFO - Database setup completed successfully
2024-08-08 12:10:19,791 - app - INFO - Registering error handler...
2024-08-08 12:10:19,791 - app - INFO - Initializing CLI commands...
2024-08-08 12:10:19,791 - app - INFO - Registering routes...
2024-08-08 12:10:19,799 - app - INFO - Initializing services...
2024-08-08 12:10:19,813 - app - INFO - Initializing email service...
2024-08-08 12:10:19,813 - app - INFO - Setting up scheduler...
2024-08-08 12:10:19,818 - app - INFO - Initializing scheduler...
2024-08-08 12:10:19,818 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:10:19,819 - app - INFO - Application initialized successfully
2024-08-08 12:10:21,711 - app - INFO - Initializing Flask app...
2024-08-08 12:10:21,713 - app - INFO - Configuring app...
2024-08-08 12:10:21,714 - app - INFO - Setting up CORS...
2024-08-08 12:10:21,714 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:10:21,714 - app - INFO - Initializing JWT manager...
2024-08-08 12:10:21,715 - app - INFO - Setting up rate limiting...
2024-08-08 12:10:21,716 - app - INFO - Setting up database...
2024-08-08 12:10:21,717 - app - INFO - Starting database setup...
2024-08-08 12:10:22,424 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:10:22,425 - app - INFO - Database setup completed successfully
2024-08-08 12:10:22,425 - app - INFO - Registering error handler...
2024-08-08 12:10:22,425 - app - INFO - Initializing CLI commands...
2024-08-08 12:10:22,426 - app - INFO - Registering routes...
2024-08-08 12:10:22,435 - app - INFO - Initializing services...
2024-08-08 12:10:22,450 - app - INFO - Initializing email service...
2024-08-08 12:10:22,451 - app - INFO - Setting up scheduler...
2024-08-08 12:10:22,460 - app - INFO - Initializing scheduler...
2024-08-08 12:10:22,460 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:10:22,461 - app - INFO - Application initialized successfully
2024-08-08 12:10:33,278 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:10:33,866 - app.database - INFO - Database connection established successfully
2024-08-08 12:10:39,819 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:10:40,477 - app.database - INFO - Database connection established successfully
2024-08-08 12:10:41,114 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:10:41,122 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:10:41,130 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:10:41,131 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:10:41,822 - app.database - INFO - Database connection established successfully
2024-08-08 12:10:41,861 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:10:42,179 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:10:42,179 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:10:42,810 - app.database - INFO - Database connection established successfully
2024-08-08 12:10:42,856 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:15:30,707 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:15:31,331 - app.database - INFO - Database connection established successfully
2024-08-08 12:15:31,956 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:15:31,977 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:15:31,986 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:15:31,987 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:15:32,570 - app.database - INFO - Database connection established successfully
2024-08-08 12:15:32,611 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:15:32,934 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:15:32,935 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:15:33,568 - app.database - INFO - Database connection established successfully
2024-08-08 12:15:33,612 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:15:58,873 - app - INFO - Initializing Flask app...
2024-08-08 12:15:58,874 - app - INFO - Configuring app...
2024-08-08 12:15:58,875 - app - INFO - Setting up CORS...
2024-08-08 12:15:58,875 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:15:58,875 - app - INFO - Initializing JWT manager...
2024-08-08 12:15:58,876 - app - INFO - Setting up rate limiting...
2024-08-08 12:15:58,881 - app - INFO - Setting up database...
2024-08-08 12:15:58,881 - app - INFO - Starting database setup...
2024-08-08 12:15:59,506 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:15:59,507 - app - INFO - Database setup completed successfully
2024-08-08 12:15:59,507 - app - INFO - Registering error handler...
2024-08-08 12:15:59,507 - app - INFO - Initializing CLI commands...
2024-08-08 12:15:59,507 - app - INFO - Registering routes...
2024-08-08 12:15:59,512 - app - INFO - Initializing services...
2024-08-08 12:15:59,526 - app - INFO - Initializing email service...
2024-08-08 12:15:59,526 - app - INFO - Setting up scheduler...
2024-08-08 12:15:59,533 - app - INFO - Initializing scheduler...
2024-08-08 12:15:59,533 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:15:59,535 - app - INFO - Application initialized successfully
2024-08-08 12:16:01,515 - app - INFO - Initializing Flask app...
2024-08-08 12:16:01,516 - app - INFO - Configuring app...
2024-08-08 12:16:01,517 - app - INFO - Setting up CORS...
2024-08-08 12:16:01,517 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:16:01,517 - app - INFO - Initializing JWT manager...
2024-08-08 12:16:01,518 - app - INFO - Setting up rate limiting...
2024-08-08 12:16:01,519 - app - INFO - Setting up database...
2024-08-08 12:16:01,520 - app - INFO - Starting database setup...
2024-08-08 12:16:02,204 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:16:02,204 - app - INFO - Database setup completed successfully
2024-08-08 12:16:02,205 - app - INFO - Registering error handler...
2024-08-08 12:16:02,207 - app - INFO - Initializing CLI commands...
2024-08-08 12:16:02,207 - app - INFO - Registering routes...
2024-08-08 12:16:02,220 - app - INFO - Initializing services...
2024-08-08 12:16:02,237 - app - INFO - Initializing email service...
2024-08-08 12:16:02,238 - app - INFO - Setting up scheduler...
2024-08-08 12:16:02,243 - app - INFO - Initializing scheduler...
2024-08-08 12:16:02,246 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:16:02,247 - app - INFO - Application initialized successfully
2024-08-08 12:16:14,248 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:16:14,831 - app.database - INFO - Database connection established successfully
2024-08-08 12:16:15,443 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:16:15,445 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:16:15,468 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:16:15,478 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:16:16,080 - app.database - INFO - Database connection established successfully
2024-08-08 12:16:16,129 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:16:16,460 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:16:16,461 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:16:17,053 - app.database - INFO - Database connection established successfully
2024-08-08 12:16:17,097 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:20:36,515 - app - INFO - Initializing Flask app...
2024-08-08 12:20:36,516 - app - INFO - Configuring app...
2024-08-08 12:20:36,517 - app - INFO - Setting up CORS...
2024-08-08 12:20:36,518 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:20:36,518 - app - INFO - Initializing JWT manager...
2024-08-08 12:20:36,518 - app - INFO - Setting up rate limiting...
2024-08-08 12:20:36,520 - app - INFO - Setting up database...
2024-08-08 12:20:36,520 - app - INFO - Starting database setup...
2024-08-08 12:20:37,233 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:20:37,233 - app - INFO - Database setup completed successfully
2024-08-08 12:20:37,233 - app - INFO - Registering error handler...
2024-08-08 12:20:37,234 - app - INFO - Initializing CLI commands...
2024-08-08 12:20:37,234 - app - INFO - Registering routes...
2024-08-08 12:20:37,240 - app - INFO - Initializing services...
2024-08-08 12:20:37,254 - app - INFO - Initializing email service...
2024-08-08 12:20:37,256 - app - INFO - Setting up scheduler...
2024-08-08 12:20:37,262 - app - INFO - Initializing scheduler...
2024-08-08 12:20:37,264 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:20:37,265 - app - INFO - Application initialized successfully
2024-08-08 12:20:39,380 - app - INFO - Initializing Flask app...
2024-08-08 12:20:39,382 - app - INFO - Configuring app...
2024-08-08 12:20:39,383 - app - INFO - Setting up CORS...
2024-08-08 12:20:39,384 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:20:39,385 - app - INFO - Initializing JWT manager...
2024-08-08 12:20:39,386 - app - INFO - Setting up rate limiting...
2024-08-08 12:20:39,387 - app - INFO - Setting up database...
2024-08-08 12:20:39,388 - app - INFO - Starting database setup...
2024-08-08 12:20:40,103 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:20:40,104 - app - INFO - Database setup completed successfully
2024-08-08 12:20:40,104 - app - INFO - Registering error handler...
2024-08-08 12:20:40,105 - app - INFO - Initializing CLI commands...
2024-08-08 12:20:40,105 - app - INFO - Registering routes...
2024-08-08 12:20:40,116 - app - INFO - Initializing services...
2024-08-08 12:20:40,140 - app - INFO - Initializing email service...
2024-08-08 12:20:40,141 - app - INFO - Setting up scheduler...
2024-08-08 12:20:40,151 - app - INFO - Initializing scheduler...
2024-08-08 12:20:40,152 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:20:40,153 - app - INFO - Application initialized successfully
2024-08-08 12:20:51,064 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:20:51,608 - app.database - INFO - Database connection established successfully
2024-08-08 12:20:52,225 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:20:52,228 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:20:52,248 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:20:52,249 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:20:52,839 - app.database - INFO - Database connection established successfully
2024-08-08 12:20:52,876 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:20:53,201 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:20:53,203 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:20:53,728 - app.database - INFO - Database connection established successfully
2024-08-08 12:20:53,771 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:22:37,728 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:22:37,729 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:22:38,439 - app.database - INFO - Database connection established successfully
2024-08-08 12:22:38,484 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:22:38,503 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:22:38,504 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:22:39,064 - app.database - INFO - Database connection established successfully
2024-08-08 12:22:39,122 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:22:43,385 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:22:43,386 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:22:43,959 - app.database - INFO - Database connection established successfully
2024-08-08 12:22:44,004 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:22:44,030 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:22:44,032 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:22:44,672 - app.database - INFO - Database connection established successfully
2024-08-08 12:22:44,733 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:25:58,594 - app - INFO - Initializing Flask app...
2024-08-08 12:25:58,596 - app - INFO - Configuring app...
2024-08-08 12:25:58,596 - app - INFO - Setting up CORS...
2024-08-08 12:25:58,597 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:25:58,597 - app - INFO - Initializing JWT manager...
2024-08-08 12:25:58,597 - app - INFO - Setting up rate limiting...
2024-08-08 12:25:58,598 - app - INFO - Setting up database...
2024-08-08 12:25:58,598 - app - INFO - Starting database setup...
2024-08-08 12:25:59,287 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:25:59,287 - app - INFO - Database setup completed successfully
2024-08-08 12:25:59,287 - app - INFO - Registering error handler...
2024-08-08 12:25:59,287 - app - INFO - Initializing CLI commands...
2024-08-08 12:25:59,288 - app - INFO - Registering routes...
2024-08-08 12:25:59,294 - app - INFO - Initializing services...
2024-08-08 12:25:59,307 - app - INFO - Initializing email service...
2024-08-08 12:25:59,307 - app - INFO - Setting up scheduler...
2024-08-08 12:25:59,316 - app - INFO - Initializing scheduler...
2024-08-08 12:25:59,317 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:25:59,318 - app - INFO - Application initialized successfully
2024-08-08 12:26:01,115 - app - INFO - Initializing Flask app...
2024-08-08 12:26:01,117 - app - INFO - Configuring app...
2024-08-08 12:26:01,117 - app - INFO - Setting up CORS...
2024-08-08 12:26:01,118 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:26:01,118 - app - INFO - Initializing JWT manager...
2024-08-08 12:26:01,119 - app - INFO - Setting up rate limiting...
2024-08-08 12:26:01,120 - app - INFO - Setting up database...
2024-08-08 12:26:01,121 - app - INFO - Starting database setup...
2024-08-08 12:26:01,785 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:26:01,785 - app - INFO - Database setup completed successfully
2024-08-08 12:26:01,786 - app - INFO - Registering error handler...
2024-08-08 12:26:01,786 - app - INFO - Initializing CLI commands...
2024-08-08 12:26:01,787 - app - INFO - Registering routes...
2024-08-08 12:26:01,794 - app - INFO - Initializing services...
2024-08-08 12:26:01,811 - app - INFO - Initializing email service...
2024-08-08 12:26:01,811 - app - INFO - Setting up scheduler...
2024-08-08 12:26:01,818 - app - INFO - Initializing scheduler...
2024-08-08 12:26:01,819 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:26:01,819 - app - INFO - Application initialized successfully
2024-08-08 12:26:13,640 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:26:14,267 - app.database - INFO - Database connection established successfully
2024-08-08 12:26:14,862 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:26:14,863 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:26:14,900 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:26:14,901 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:26:15,534 - app.database - INFO - Database connection established successfully
2024-08-08 12:26:15,604 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:26:15,932 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:26:15,933 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:26:16,468 - app.database - INFO - Database connection established successfully
2024-08-08 12:26:16,520 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:26:27,339 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:26:27,340 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:26:27,962 - app.database - INFO - Database connection established successfully
2024-08-08 12:26:28,007 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:26:28,328 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:26:28,328 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:26:28,918 - app.database - INFO - Database connection established successfully
2024-08-08 12:26:28,962 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:26:47,646 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:26:47,647 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:26:47,903 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:26:47,904 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:26:48,720 - app.database - INFO - Database connection established successfully
2024-08-08 12:26:48,805 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:26:48,815 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:26:48,816 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:26:49,797 - app.database - INFO - Database connection established successfully
2024-08-08 12:26:49,874 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:46:11,134 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:46:11,134 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:46:11,712 - app.database - INFO - Database connection established successfully
2024-08-08 12:46:11,776 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:46:11,791 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:46:11,792 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:46:12,297 - app.database - INFO - Database connection established successfully
2024-08-08 12:46:12,341 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:13,185 - app - INFO - Initializing Flask app...
2024-08-08 12:47:13,187 - app - INFO - Configuring app...
2024-08-08 12:47:13,187 - app - INFO - Setting up CORS...
2024-08-08 12:47:13,188 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:47:13,188 - app - INFO - Initializing JWT manager...
2024-08-08 12:47:13,189 - app - INFO - Setting up rate limiting...
2024-08-08 12:47:13,191 - app - INFO - Setting up database...
2024-08-08 12:47:13,192 - app - INFO - Starting database setup...
2024-08-08 12:47:13,901 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:47:13,901 - app - INFO - Database setup completed successfully
2024-08-08 12:47:13,903 - app - INFO - Registering error handler...
2024-08-08 12:47:13,904 - app - INFO - Initializing CLI commands...
2024-08-08 12:47:13,904 - app - INFO - Registering routes...
2024-08-08 12:47:13,951 - app - INFO - Initializing services...
2024-08-08 12:47:13,970 - app - INFO - Initializing email service...
2024-08-08 12:47:13,971 - app - INFO - Setting up scheduler...
2024-08-08 12:47:13,976 - app - INFO - Initializing scheduler...
2024-08-08 12:47:13,976 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:47:13,977 - app - INFO - Application initialized successfully
2024-08-08 12:47:20,817 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:20,818 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:21,481 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:21,526 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:21,554 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:21,555 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:22,194 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:22,232 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:23,702 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:23,703 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:23,954 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:23,954 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:24,230 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:24,276 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:24,288 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:24,289 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:24,512 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:24,552 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:24,860 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:24,869 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:24,870 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:24,916 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:25,445 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:25,491 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:30,811 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:30,811 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:31,402 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:31,443 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:31,456 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:31,457 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:32,120 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:32,159 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:39,163 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:39,164 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:39,260 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:39,261 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:39,763 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:39,823 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:39,823 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:39,839 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:39,840 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:39,996 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:40,319 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:40,319 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:40,931 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:40,990 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:42,452 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:42,453 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:42,459 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:42,520 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:43,033 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:43,076 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:43,418 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:43,418 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:43,941 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:43,989 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:47,037 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:47,038 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:47,096 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 12:47:47,830 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:47:47,830 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:47:48,368 - app.database - INFO - Database connection established successfully
2024-08-08 12:47:48,417 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:48:02,660 - app.services.trial_matching_service - WARNING - Matching process already running for user 66af0d2d118d8e248b49a856
2024-08-08 12:48:03,308 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:48:03,308 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:48:03,873 - app.database - INFO - Database connection established successfully
2024-08-08 12:48:03,916 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:48:05,161 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:48:05,161 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:48:05,185 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:48:05,188 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:48:05,670 - app.database - INFO - Database connection established successfully
2024-08-08 12:48:05,701 - app.database - INFO - Database connection established successfully
2024-08-08 12:48:05,710 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:48:05,747 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:48:06,040 - app.services.trial_matching_service - INFO - Fetching recent matches for user: 66af0d2d118d8e248b49a856
2024-08-08 12:48:06,041 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:48:06,071 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:48:06,071 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:48:06,603 - app.database - INFO - Database connection established successfully
2024-08-08 12:48:06,643 - app.services.trial_matching_service - INFO - Retrieved 1 recent matches for user 66af0d2d118d8e248b49a856
2024-08-08 12:48:06,686 - app.database - INFO - Database connection established successfully
2024-08-08 12:48:06,734 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:57:36,753 - app - INFO - Initializing Flask app...
2024-08-08 12:57:36,755 - app - INFO - Configuring app...
2024-08-08 12:57:36,755 - app - INFO - Setting up CORS...
2024-08-08 12:57:36,756 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:57:36,756 - app - INFO - Initializing JWT manager...
2024-08-08 12:57:36,756 - app - INFO - Setting up rate limiting...
2024-08-08 12:57:36,761 - app - INFO - Setting up database...
2024-08-08 12:57:36,762 - app - INFO - Starting database setup...
2024-08-08 12:57:37,479 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:57:37,480 - app - INFO - Database setup completed successfully
2024-08-08 12:57:37,480 - app - INFO - Registering error handler...
2024-08-08 12:57:37,480 - app - INFO - Initializing CLI commands...
2024-08-08 12:57:37,481 - app - INFO - Registering routes...
2024-08-08 12:57:37,586 - app - INFO - Initializing services...
2024-08-08 12:57:37,600 - app - INFO - Initializing email service...
2024-08-08 12:57:37,601 - app - INFO - Setting up scheduler...
2024-08-08 12:57:37,609 - app - INFO - Initializing scheduler...
2024-08-08 12:57:37,610 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:57:37,610 - app - INFO - Application initialized successfully
2024-08-08 12:57:40,026 - app - INFO - Initializing Flask app...
2024-08-08 12:57:40,028 - app - INFO - Configuring app...
2024-08-08 12:57:40,029 - app - INFO - Setting up CORS...
2024-08-08 12:57:40,031 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 12:57:40,032 - app - INFO - Initializing JWT manager...
2024-08-08 12:57:40,033 - app - INFO - Setting up rate limiting...
2024-08-08 12:57:40,035 - app - INFO - Setting up database...
2024-08-08 12:57:40,037 - app - INFO - Starting database setup...
2024-08-08 12:57:40,849 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 12:57:40,849 - app - INFO - Database setup completed successfully
2024-08-08 12:57:40,850 - app - INFO - Registering error handler...
2024-08-08 12:57:40,851 - app - INFO - Initializing CLI commands...
2024-08-08 12:57:40,851 - app - INFO - Registering routes...
2024-08-08 12:57:40,862 - app - INFO - Initializing services...
2024-08-08 12:57:40,883 - app - INFO - Initializing email service...
2024-08-08 12:57:40,884 - app - INFO - Setting up scheduler...
2024-08-08 12:57:40,892 - app - INFO - Initializing scheduler...
2024-08-08 12:57:40,894 - app.scheduler - INFO - Scheduler initialized
2024-08-08 12:57:40,895 - app - INFO - Application initialized successfully
2024-08-08 12:58:01,872 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:58:02,502 - app.database - INFO - Database connection established successfully
2024-08-08 12:58:03,382 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:58:03,384 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:58:03,412 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:58:03,413 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:58:04,000 - app.database - INFO - Database connection established successfully
2024-08-08 12:58:04,043 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:58:04,368 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:58:04,370 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:58:04,980 - app.database - INFO - Database connection established successfully
2024-08-08 12:58:05,020 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:58:06,215 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:58:06,805 - app.database - INFO - Database connection established successfully
2024-08-08 12:58:06,911 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:58:07,465 - app.database - INFO - Database connection established successfully
2024-08-08 12:58:10,790 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:58:10,791 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 12:58:11,024 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:58:11,025 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:58:11,691 - app.database - INFO - Database connection established successfully
2024-08-08 12:58:11,750 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 12:58:11,772 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 12:58:11,773 - app.database - INFO - Attempting to establish database connection...
2024-08-08 12:58:12,388 - app.database - INFO - Database connection established successfully
2024-08-08 12:58:12,431 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:01:06,794 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:01:07,621 - app.database - INFO - Database connection established successfully
2024-08-08 13:01:08,438 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 13:01:08,444 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 13:01:08,472 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:01:08,472 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:01:09,178 - app.database - INFO - Database connection established successfully
2024-08-08 13:01:09,218 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:01:09,549 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:01:09,550 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:01:10,149 - app.database - INFO - Database connection established successfully
2024-08-08 13:01:10,213 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:01:10,581 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:01:11,255 - app.database - INFO - Database connection established successfully
2024-08-08 13:01:11,669 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:01:12,233 - app.database - INFO - Database connection established successfully
2024-08-08 13:01:16,832 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 13:01:16,838 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 13:01:17,082 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:01:17,082 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:01:17,624 - app.database - INFO - Database connection established successfully
2024-08-08 13:01:17,663 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:01:17,679 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:01:17,680 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:01:18,272 - app.database - INFO - Database connection established successfully
2024-08-08 13:01:18,316 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:04:27,635 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:04:28,315 - app.database - INFO - Database connection established successfully
2024-08-08 13:04:28,448 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:04:29,052 - app.database - INFO - Database connection established successfully
2024-08-08 13:04:33,086 - app.utils.error_handlers - ERROR - General error: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 880, in full_dispatch_request
    rv = self.dispatch_request()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 854, in dispatch_request
    self.raise_routing_exception(req)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\app.py", line 463, in raise_routing_exception
    raise request.routing_exception  # type: ignore[misc]
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\flask\ctx.py", line 362, in match_request
    result = self.url_adapter.match(return_rule=True)  # type: ignore
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\werkzeug\routing\map.py", line 629, in match
    raise NotFound() from None
werkzeug.exceptions.NotFound: 404 Not Found: The requested URL was not found on the server. If you entered the URL manually please check your spelling and try again.

2024-08-08 13:08:24,359 - app - INFO - Initializing Flask app...
2024-08-08 13:08:24,362 - app - INFO - Configuring app...
2024-08-08 13:08:24,363 - app - INFO - Setting up CORS...
2024-08-08 13:08:24,363 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:08:24,365 - app - INFO - Initializing JWT manager...
2024-08-08 13:08:24,367 - app - INFO - Setting up rate limiting...
2024-08-08 13:08:24,372 - app - INFO - Setting up database...
2024-08-08 13:08:24,372 - app - INFO - Starting database setup...
2024-08-08 13:08:25,021 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:08:25,022 - app - INFO - Database setup completed successfully
2024-08-08 13:08:25,022 - app - INFO - Registering error handler...
2024-08-08 13:08:25,023 - app - INFO - Initializing CLI commands...
2024-08-08 13:08:25,023 - app - INFO - Registering routes...
2024-08-08 13:08:25,056 - app - INFO - Initializing services...
2024-08-08 13:08:25,072 - app - INFO - Initializing email service...
2024-08-08 13:08:25,072 - app - INFO - Setting up scheduler...
2024-08-08 13:08:25,081 - app - INFO - Initializing scheduler...
2024-08-08 13:08:25,081 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:08:25,082 - app - INFO - Application initialized successfully
2024-08-08 13:08:42,921 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:08:43,542 - app.database - INFO - Database connection established successfully
2024-08-08 13:08:44,398 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:08:44,399 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:08:44,694 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:08:44,991 - app.database - INFO - Database connection established successfully
2024-08-08 13:08:45,054 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:08:45,359 - app.database - INFO - Database connection established successfully
2024-08-08 13:08:45,445 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:08:45,446 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:08:45,725 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:08:45,997 - app.database - INFO - Database connection established successfully
2024-08-08 13:08:46,039 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:08:46,262 - app.database - INFO - Database connection established successfully
2024-08-08 13:08:47,776 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:08:48,440 - app.database - INFO - Database connection established successfully
2024-08-08 13:08:48,570 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:08:49,151 - app.database - INFO - Database connection established successfully
2024-08-08 13:08:56,524 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 13:08:56,524 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:08:56,586 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 13:08:57,272 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:08:57,843 - app.database - INFO - Database connection established successfully
2024-08-08 13:10:38,433 - app - INFO - Initializing Flask app...
2024-08-08 13:10:38,435 - app - INFO - Configuring app...
2024-08-08 13:10:38,436 - app - INFO - Setting up CORS...
2024-08-08 13:10:38,436 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:10:38,437 - app - INFO - Initializing JWT manager...
2024-08-08 13:10:38,437 - app - INFO - Setting up rate limiting...
2024-08-08 13:10:38,444 - app - INFO - Setting up database...
2024-08-08 13:10:38,445 - app - INFO - Starting database setup...
2024-08-08 13:10:39,187 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:10:39,188 - app - INFO - Database setup completed successfully
2024-08-08 13:10:39,189 - app - INFO - Registering error handler...
2024-08-08 13:10:39,191 - app - INFO - Initializing CLI commands...
2024-08-08 13:10:39,192 - app - INFO - Registering routes...
2024-08-08 13:10:39,210 - app - INFO - Initializing services...
2024-08-08 13:10:39,229 - app - INFO - Initializing email service...
2024-08-08 13:10:39,229 - app - INFO - Setting up scheduler...
2024-08-08 13:10:39,237 - app - INFO - Initializing scheduler...
2024-08-08 13:10:39,238 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:10:39,239 - app - INFO - Application initialized successfully
2024-08-08 13:10:44,595 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:10:44,694 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:10:44,696 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:10:45,237 - app.database - INFO - Database connection established successfully
2024-08-08 13:10:45,279 - app.database - INFO - Database connection established successfully
2024-08-08 13:10:45,294 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:10:45,329 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:10:45,654 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:10:45,655 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:10:45,903 - app.database - INFO - Database connection established successfully
2024-08-08 13:10:46,219 - app.database - INFO - Database connection established successfully
2024-08-08 13:10:46,259 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:10:49,902 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:10:50,500 - app.database - INFO - Database connection established successfully
2024-08-08 13:10:50,603 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:10:51,259 - app.database - INFO - Database connection established successfully
2024-08-08 13:11:51,991 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 13:11:51,992 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:11:52,066 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 13:11:52,762 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:11:53,542 - app.database - INFO - Database connection established successfully
2024-08-08 13:22:11,633 - app - INFO - Initializing Flask app...
2024-08-08 13:22:11,635 - app - INFO - Configuring app...
2024-08-08 13:22:11,636 - app - INFO - Setting up CORS...
2024-08-08 13:22:11,636 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:22:11,636 - app - INFO - Initializing JWT manager...
2024-08-08 13:22:11,637 - app - INFO - Setting up rate limiting...
2024-08-08 13:22:11,639 - app - INFO - Setting up database...
2024-08-08 13:22:11,640 - app - INFO - Starting database setup...
2024-08-08 13:22:12,407 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:22:12,407 - app - INFO - Database setup completed successfully
2024-08-08 13:22:12,408 - app - INFO - Registering error handler...
2024-08-08 13:22:12,408 - app - INFO - Initializing CLI commands...
2024-08-08 13:22:12,409 - app - INFO - Registering routes...
2024-08-08 13:22:12,427 - app - INFO - Initializing services...
2024-08-08 13:22:12,453 - app - INFO - Initializing email service...
2024-08-08 13:22:12,453 - app - INFO - Setting up scheduler...
2024-08-08 13:22:12,460 - app - INFO - Initializing scheduler...
2024-08-08 13:22:12,462 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:22:12,462 - app - INFO - Application initialized successfully
2024-08-08 13:22:15,298 - app - INFO - Initializing Flask app...
2024-08-08 13:22:15,301 - app - INFO - Configuring app...
2024-08-08 13:22:15,301 - app - INFO - Setting up CORS...
2024-08-08 13:22:15,302 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:22:15,303 - app - INFO - Initializing JWT manager...
2024-08-08 13:22:15,304 - app - INFO - Setting up rate limiting...
2024-08-08 13:22:15,307 - app - INFO - Setting up database...
2024-08-08 13:22:15,308 - app - INFO - Starting database setup...
2024-08-08 13:22:16,102 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:22:16,102 - app - INFO - Database setup completed successfully
2024-08-08 13:22:16,103 - app - INFO - Registering error handler...
2024-08-08 13:22:16,104 - app - INFO - Initializing CLI commands...
2024-08-08 13:22:16,104 - app - INFO - Registering routes...
2024-08-08 13:22:16,120 - app - INFO - Initializing services...
2024-08-08 13:22:16,147 - app - INFO - Initializing email service...
2024-08-08 13:22:16,148 - app - INFO - Setting up scheduler...
2024-08-08 13:22:16,156 - app - INFO - Initializing scheduler...
2024-08-08 13:22:16,158 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:22:16,159 - app - INFO - Application initialized successfully
2024-08-08 13:22:33,646 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:22:34,392 - app.database - INFO - Database connection established successfully
2024-08-08 13:22:46,216 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:22:46,862 - app.database - INFO - Database connection established successfully
2024-08-08 13:22:47,694 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:22:47,697 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:22:48,007 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:22:48,360 - app.database - INFO - Database connection established successfully
2024-08-08 13:22:48,402 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:22:48,679 - app.database - INFO - Database connection established successfully
2024-08-08 13:22:48,744 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:22:48,745 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:22:49,065 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:22:49,319 - app.database - INFO - Database connection established successfully
2024-08-08 13:22:49,373 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:22:49,686 - app.database - INFO - Database connection established successfully
2024-08-08 13:22:50,527 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:22:51,199 - app.database - INFO - Database connection established successfully
2024-08-08 13:22:51,299 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:22:51,874 - app.database - INFO - Database connection established successfully
2024-08-08 13:22:55,070 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 13:22:55,071 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:22:55,184 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 13:22:55,874 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:22:56,659 - app.database - INFO - Database connection established successfully
2024-08-08 13:24:56,304 - app.services.trial_matching_service - WARNING - Matching process already running for user 66af0d2d118d8e248b49a856
2024-08-08 13:24:56,969 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:24:57,744 - app.database - INFO - Database connection established successfully
2024-08-08 13:25:06,412 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:25:07,141 - app.database - INFO - Database connection established successfully
2024-08-08 13:25:08,983 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:25:09,699 - app.database - INFO - Database connection established successfully
2024-08-08 13:29:36,243 - app - INFO - Initializing Flask app...
2024-08-08 13:29:36,245 - app - INFO - Configuring app...
2024-08-08 13:29:36,245 - app - INFO - Setting up CORS...
2024-08-08 13:29:36,246 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:29:36,246 - app - INFO - Initializing JWT manager...
2024-08-08 13:29:36,246 - app - INFO - Setting up rate limiting...
2024-08-08 13:29:36,247 - app - INFO - Setting up database...
2024-08-08 13:29:36,248 - app - INFO - Starting database setup...
2024-08-08 13:29:45,174 - app - INFO - Initializing Flask app...
2024-08-08 13:29:45,177 - app - INFO - Configuring app...
2024-08-08 13:29:45,177 - app - INFO - Setting up CORS...
2024-08-08 13:29:45,178 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:29:45,181 - app - INFO - Initializing JWT manager...
2024-08-08 13:29:45,182 - app - INFO - Setting up rate limiting...
2024-08-08 13:29:45,184 - app - INFO - Setting up database...
2024-08-08 13:29:45,185 - app - INFO - Starting database setup...
2024-08-08 13:29:45,890 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:29:45,890 - app - INFO - Database setup completed successfully
2024-08-08 13:29:45,891 - app - INFO - Registering error handler...
2024-08-08 13:29:45,891 - app - INFO - Initializing CLI commands...
2024-08-08 13:29:45,891 - app - INFO - Registering routes...
2024-08-08 13:29:45,901 - app - INFO - Initializing services...
2024-08-08 13:29:45,923 - app - INFO - Initializing email service...
2024-08-08 13:29:45,924 - app - INFO - Setting up scheduler...
2024-08-08 13:29:45,933 - app - INFO - Initializing scheduler...
2024-08-08 13:29:45,934 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:29:45,935 - app - INFO - Application initialized successfully
2024-08-08 13:29:48,330 - app - INFO - Initializing Flask app...
2024-08-08 13:29:48,332 - app - INFO - Configuring app...
2024-08-08 13:29:48,333 - app - INFO - Setting up CORS...
2024-08-08 13:29:48,335 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:29:48,336 - app - INFO - Initializing JWT manager...
2024-08-08 13:29:48,337 - app - INFO - Setting up rate limiting...
2024-08-08 13:29:48,338 - app - INFO - Setting up database...
2024-08-08 13:29:48,339 - app - INFO - Starting database setup...
2024-08-08 13:29:49,128 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:29:49,129 - app - INFO - Database setup completed successfully
2024-08-08 13:29:49,130 - app - INFO - Registering error handler...
2024-08-08 13:29:49,131 - app - INFO - Initializing CLI commands...
2024-08-08 13:29:49,132 - app - INFO - Registering routes...
2024-08-08 13:29:49,150 - app - INFO - Initializing services...
2024-08-08 13:29:49,188 - app - INFO - Initializing email service...
2024-08-08 13:29:49,188 - app - INFO - Setting up scheduler...
2024-08-08 13:29:49,196 - app - INFO - Initializing scheduler...
2024-08-08 13:29:49,198 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:29:49,200 - app - INFO - Application initialized successfully
2024-08-08 13:30:10,055 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:30:10,703 - app.database - INFO - Database connection established successfully
2024-08-08 13:30:11,351 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:30:11,351 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:30:11,670 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:30:11,974 - app.database - INFO - Database connection established successfully
2024-08-08 13:30:12,046 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:30:12,244 - app.database - INFO - Database connection established successfully
2024-08-08 13:30:12,370 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:30:12,370 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:30:12,599 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:30:12,965 - app.database - INFO - Database connection established successfully
2024-08-08 13:30:13,009 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:30:13,154 - app.database - INFO - Database connection established successfully
2024-08-08 13:30:17,170 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:30:17,967 - app.database - INFO - Database connection established successfully
2024-08-08 13:30:18,081 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:30:18,777 - app.database - INFO - Database connection established successfully
2024-08-08 13:30:19,753 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 13:30:19,754 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:30:20,504 - app.database - INFO - Database connection established successfully
2024-08-08 13:30:20,572 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 13:30:20,762 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 13:30:35,259 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-08 13:30:35,260 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-08 13:30:51,254 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 13:30:51,254 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:30:51,859 - app.database - INFO - Database connection established successfully
2024-08-08 13:30:51,899 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 13:30:51,941 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 13:30:52,120 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 13:30:52,136 - app.services.trial_matching_service - INFO - Calling Anthropic service for user 66af0d2d118d8e248b49a856
2024-08-08 13:30:52,258 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 13:31:09,749 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-08 13:31:09,749 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-08 13:31:11,327 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:31:11,956 - app.database - INFO - Database connection established successfully
2024-08-08 13:49:00,972 - app - INFO - Initializing Flask app...
2024-08-08 13:49:00,973 - app - INFO - Configuring app...
2024-08-08 13:49:00,974 - app - INFO - Setting up CORS...
2024-08-08 13:49:00,974 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:49:00,974 - app - INFO - Initializing JWT manager...
2024-08-08 13:49:00,974 - app - INFO - Setting up rate limiting...
2024-08-08 13:49:00,975 - app - INFO - Setting up database...
2024-08-08 13:49:00,975 - app - INFO - Starting database setup...
2024-08-08 13:49:01,710 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:49:01,711 - app - INFO - Database setup completed successfully
2024-08-08 13:49:01,712 - app - INFO - Registering error handler...
2024-08-08 13:49:01,713 - app - INFO - Initializing CLI commands...
2024-08-08 13:49:01,713 - app - INFO - Registering routes...
2024-08-08 13:49:01,720 - app - INFO - Initializing services...
2024-08-08 13:49:01,729 - app - INFO - Initializing email service...
2024-08-08 13:49:01,729 - app - INFO - Setting up scheduler...
2024-08-08 13:49:01,733 - app - INFO - Initializing scheduler...
2024-08-08 13:49:01,733 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:49:01,734 - app - INFO - Application initialized successfully
2024-08-08 13:49:11,479 - app - INFO - Initializing Flask app...
2024-08-08 13:49:11,480 - app - INFO - Configuring app...
2024-08-08 13:49:11,480 - app - INFO - Setting up CORS...
2024-08-08 13:49:11,481 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:49:11,481 - app - INFO - Initializing JWT manager...
2024-08-08 13:49:11,481 - app - INFO - Setting up rate limiting...
2024-08-08 13:49:11,482 - app - INFO - Setting up database...
2024-08-08 13:49:11,483 - app - INFO - Starting database setup...
2024-08-08 13:49:12,112 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:49:12,112 - app - INFO - Database setup completed successfully
2024-08-08 13:49:12,113 - app - INFO - Registering error handler...
2024-08-08 13:49:12,113 - app - INFO - Initializing CLI commands...
2024-08-08 13:49:12,113 - app - INFO - Registering routes...
2024-08-08 13:49:12,119 - app - INFO - Initializing services...
2024-08-08 13:49:12,128 - app - INFO - Initializing email service...
2024-08-08 13:49:12,129 - app - INFO - Setting up scheduler...
2024-08-08 13:49:12,132 - app - INFO - Initializing scheduler...
2024-08-08 13:49:12,133 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:49:12,133 - app - INFO - Application initialized successfully
2024-08-08 13:49:13,534 - app - INFO - Initializing Flask app...
2024-08-08 13:49:13,536 - app - INFO - Configuring app...
2024-08-08 13:49:13,537 - app - INFO - Setting up CORS...
2024-08-08 13:49:13,537 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:49:13,538 - app - INFO - Initializing JWT manager...
2024-08-08 13:49:13,538 - app - INFO - Setting up rate limiting...
2024-08-08 13:49:13,538 - app - INFO - Setting up database...
2024-08-08 13:49:13,539 - app - INFO - Starting database setup...
2024-08-08 13:49:14,175 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:49:14,175 - app - INFO - Database setup completed successfully
2024-08-08 13:49:14,176 - app - INFO - Registering error handler...
2024-08-08 13:49:14,176 - app - INFO - Initializing CLI commands...
2024-08-08 13:49:14,177 - app - INFO - Registering routes...
2024-08-08 13:49:14,183 - app - INFO - Initializing services...
2024-08-08 13:49:14,192 - app - INFO - Initializing email service...
2024-08-08 13:49:14,192 - app - INFO - Setting up scheduler...
2024-08-08 13:49:14,196 - app - INFO - Initializing scheduler...
2024-08-08 13:49:14,197 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:49:14,197 - app - INFO - Application initialized successfully
2024-08-08 13:49:24,449 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:49:25,012 - app.database - INFO - Database connection established successfully
2024-08-08 13:49:25,574 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:49:25,576 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:49:25,873 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:49:26,177 - app.database - INFO - Database connection established successfully
2024-08-08 13:49:26,218 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:49:26,412 - app.database - INFO - Database connection established successfully
2024-08-08 13:49:26,537 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 13:49:26,537 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:49:26,769 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:49:27,107 - app.database - INFO - Database connection established successfully
2024-08-08 13:49:27,168 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 13:49:27,341 - app.database - INFO - Database connection established successfully
2024-08-08 13:49:32,398 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:49:32,921 - app.database - INFO - Database connection established successfully
2024-08-08 13:49:33,008 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:49:33,483 - app.database - INFO - Database connection established successfully
2024-08-08 13:49:35,700 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 13:49:35,700 - app.database - INFO - Attempting to establish database connection...
2024-08-08 13:49:36,240 - app.database - INFO - Database connection established successfully
2024-08-08 13:49:36,279 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 13:49:36,350 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 13:49:36,522 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 13:49:36,525 - app.services.trial_matching_service - INFO - Calling Anthropic service for user 66af0d2d118d8e248b49a856
2024-08-08 13:49:36,714 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 13:51:54,768 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-08 13:51:54,768 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-08 13:59:38,003 - app - INFO - Initializing Flask app...
2024-08-08 13:59:38,004 - app - INFO - Configuring app...
2024-08-08 13:59:38,004 - app - INFO - Setting up CORS...
2024-08-08 13:59:38,005 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:59:38,005 - app - INFO - Initializing JWT manager...
2024-08-08 13:59:38,006 - app - INFO - Setting up rate limiting...
2024-08-08 13:59:38,007 - app - INFO - Setting up database...
2024-08-08 13:59:38,007 - app - INFO - Starting database setup...
2024-08-08 13:59:38,720 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:59:38,720 - app - INFO - Database setup completed successfully
2024-08-08 13:59:38,720 - app - INFO - Registering error handler...
2024-08-08 13:59:38,721 - app - INFO - Initializing CLI commands...
2024-08-08 13:59:38,721 - app - INFO - Registering routes...
2024-08-08 13:59:38,727 - app - INFO - Initializing services...
2024-08-08 13:59:38,737 - app - INFO - Initializing email service...
2024-08-08 13:59:38,737 - app - INFO - Setting up scheduler...
2024-08-08 13:59:38,742 - app - INFO - Initializing scheduler...
2024-08-08 13:59:38,742 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:59:38,743 - app - INFO - Application initialized successfully
2024-08-08 13:59:46,842 - app - INFO - Initializing Flask app...
2024-08-08 13:59:46,843 - app - INFO - Configuring app...
2024-08-08 13:59:46,843 - app - INFO - Setting up CORS...
2024-08-08 13:59:46,844 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:59:46,844 - app - INFO - Initializing JWT manager...
2024-08-08 13:59:46,844 - app - INFO - Setting up rate limiting...
2024-08-08 13:59:46,845 - app - INFO - Setting up database...
2024-08-08 13:59:46,846 - app - INFO - Starting database setup...
2024-08-08 13:59:47,451 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:59:47,451 - app - INFO - Database setup completed successfully
2024-08-08 13:59:47,451 - app - INFO - Registering error handler...
2024-08-08 13:59:47,451 - app - INFO - Initializing CLI commands...
2024-08-08 13:59:47,451 - app - INFO - Registering routes...
2024-08-08 13:59:47,456 - app - INFO - Initializing services...
2024-08-08 13:59:47,467 - app - INFO - Initializing email service...
2024-08-08 13:59:47,467 - app - INFO - Setting up scheduler...
2024-08-08 13:59:47,471 - app - INFO - Initializing scheduler...
2024-08-08 13:59:47,471 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:59:47,472 - app - INFO - Application initialized successfully
2024-08-08 13:59:48,914 - app - INFO - Initializing Flask app...
2024-08-08 13:59:48,916 - app - INFO - Configuring app...
2024-08-08 13:59:48,917 - app - INFO - Setting up CORS...
2024-08-08 13:59:48,917 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 13:59:48,917 - app - INFO - Initializing JWT manager...
2024-08-08 13:59:48,918 - app - INFO - Setting up rate limiting...
2024-08-08 13:59:48,918 - app - INFO - Setting up database...
2024-08-08 13:59:48,919 - app - INFO - Starting database setup...
2024-08-08 13:59:49,554 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 13:59:49,554 - app - INFO - Database setup completed successfully
2024-08-08 13:59:49,555 - app - INFO - Registering error handler...
2024-08-08 13:59:49,555 - app - INFO - Initializing CLI commands...
2024-08-08 13:59:49,555 - app - INFO - Registering routes...
2024-08-08 13:59:49,563 - app - INFO - Initializing services...
2024-08-08 13:59:49,574 - app - INFO - Initializing email service...
2024-08-08 13:59:49,575 - app - INFO - Setting up scheduler...
2024-08-08 13:59:49,578 - app - INFO - Initializing scheduler...
2024-08-08 13:59:49,579 - app.scheduler - INFO - Scheduler initialized
2024-08-08 13:59:49,579 - app - INFO - Application initialized successfully
2024-08-08 14:00:00,873 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:00:01,436 - app.database - INFO - Database connection established successfully
2024-08-08 14:00:01,988 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:00:01,988 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:00:02,296 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:00:02,526 - app.database - INFO - Database connection established successfully
2024-08-08 14:00:02,570 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:00:02,858 - app.database - INFO - Database connection established successfully
2024-08-08 14:00:02,893 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:00:02,893 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:00:03,231 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:00:03,410 - app.database - INFO - Database connection established successfully
2024-08-08 14:00:03,448 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:00:03,798 - app.database - INFO - Database connection established successfully
2024-08-08 14:00:06,644 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:00:07,214 - app.database - INFO - Database connection established successfully
2024-08-08 14:00:07,314 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:00:07,872 - app.database - INFO - Database connection established successfully
2024-08-08 14:00:09,556 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 14:00:09,556 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:00:10,523 - app.database - INFO - Database connection established successfully
2024-08-08 14:00:10,559 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 14:00:31,850 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-08 14:00:31,850 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-08 14:00:32,098 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-08 14:00:32,098 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-08 14:01:22,646 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 14:01:22,647 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:01:23,268 - app.database - INFO - Database connection established successfully
2024-08-08 14:01:23,307 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 14:01:23,373 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 14:01:23,545 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 14:01:23,551 - app.services.trial_matching_service - INFO - Calling Anthropic service for user 66af0d2d118d8e248b49a856
2024-08-08 14:01:23,562 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 14:01:23,563 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 14:01:23,665 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 14:01:31,017 - app - INFO - Initializing Flask app...
2024-08-08 14:01:31,018 - app - INFO - Configuring app...
2024-08-08 14:01:31,019 - app - INFO - Setting up CORS...
2024-08-08 14:01:31,019 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:01:31,019 - app - INFO - Initializing JWT manager...
2024-08-08 14:01:31,019 - app - INFO - Setting up rate limiting...
2024-08-08 14:01:31,020 - app - INFO - Setting up database...
2024-08-08 14:01:31,020 - app - INFO - Starting database setup...
2024-08-08 14:01:31,779 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:01:31,780 - app - INFO - Database setup completed successfully
2024-08-08 14:01:31,780 - app - INFO - Registering error handler...
2024-08-08 14:01:31,780 - app - INFO - Initializing CLI commands...
2024-08-08 14:01:31,781 - app - INFO - Registering routes...
2024-08-08 14:01:31,787 - app - INFO - Initializing services...
2024-08-08 14:01:31,796 - app - INFO - Initializing email service...
2024-08-08 14:01:31,796 - app - INFO - Setting up scheduler...
2024-08-08 14:01:31,800 - app - INFO - Initializing scheduler...
2024-08-08 14:01:31,801 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:01:31,801 - app - INFO - Application initialized successfully
2024-08-08 14:01:49,280 - app - INFO - Initializing Flask app...
2024-08-08 14:01:49,281 - app - INFO - Configuring app...
2024-08-08 14:01:49,281 - app - INFO - Setting up CORS...
2024-08-08 14:01:49,282 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:01:49,282 - app - INFO - Initializing JWT manager...
2024-08-08 14:01:49,282 - app - INFO - Setting up rate limiting...
2024-08-08 14:01:49,283 - app - INFO - Setting up database...
2024-08-08 14:01:49,283 - app - INFO - Starting database setup...
2024-08-08 14:01:49,945 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:01:49,945 - app - INFO - Database setup completed successfully
2024-08-08 14:01:49,945 - app - INFO - Registering error handler...
2024-08-08 14:01:49,945 - app - INFO - Initializing CLI commands...
2024-08-08 14:01:49,946 - app - INFO - Registering routes...
2024-08-08 14:01:49,952 - app - INFO - Initializing services...
2024-08-08 14:01:49,962 - app - INFO - Initializing email service...
2024-08-08 14:01:49,962 - app - INFO - Setting up scheduler...
2024-08-08 14:01:49,966 - app - INFO - Initializing scheduler...
2024-08-08 14:01:49,967 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:01:49,967 - app - INFO - Application initialized successfully
2024-08-08 14:01:58,462 - app - INFO - Initializing Flask app...
2024-08-08 14:01:58,464 - app - INFO - Configuring app...
2024-08-08 14:01:58,464 - app - INFO - Setting up CORS...
2024-08-08 14:01:58,465 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:01:58,465 - app - INFO - Initializing JWT manager...
2024-08-08 14:01:58,465 - app - INFO - Setting up rate limiting...
2024-08-08 14:01:58,466 - app - INFO - Setting up database...
2024-08-08 14:01:58,467 - app - INFO - Starting database setup...
2024-08-08 14:01:59,197 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:01:59,198 - app - INFO - Database setup completed successfully
2024-08-08 14:01:59,198 - app - INFO - Registering error handler...
2024-08-08 14:01:59,198 - app - INFO - Initializing CLI commands...
2024-08-08 14:01:59,199 - app - INFO - Registering routes...
2024-08-08 14:01:59,204 - app - INFO - Initializing services...
2024-08-08 14:01:59,213 - app - INFO - Initializing email service...
2024-08-08 14:01:59,213 - app - INFO - Setting up scheduler...
2024-08-08 14:01:59,217 - app - INFO - Initializing scheduler...
2024-08-08 14:01:59,218 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:01:59,218 - app - INFO - Application initialized successfully
2024-08-08 14:02:00,879 - app - INFO - Initializing Flask app...
2024-08-08 14:02:00,881 - app - INFO - Configuring app...
2024-08-08 14:02:00,881 - app - INFO - Setting up CORS...
2024-08-08 14:02:00,882 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:02:00,883 - app - INFO - Initializing JWT manager...
2024-08-08 14:02:00,883 - app - INFO - Setting up rate limiting...
2024-08-08 14:02:00,884 - app - INFO - Setting up database...
2024-08-08 14:02:00,884 - app - INFO - Starting database setup...
2024-08-08 14:02:01,549 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:02:01,549 - app - INFO - Database setup completed successfully
2024-08-08 14:02:01,550 - app - INFO - Registering error handler...
2024-08-08 14:02:01,550 - app - INFO - Initializing CLI commands...
2024-08-08 14:02:01,550 - app - INFO - Registering routes...
2024-08-08 14:02:01,558 - app - INFO - Initializing services...
2024-08-08 14:02:01,570 - app - INFO - Initializing email service...
2024-08-08 14:02:01,570 - app - INFO - Setting up scheduler...
2024-08-08 14:02:01,573 - app - INFO - Initializing scheduler...
2024-08-08 14:02:01,574 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:02:01,574 - app - INFO - Application initialized successfully
2024-08-08 14:02:10,952 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:02:11,598 - app.database - INFO - Database connection established successfully
2024-08-08 14:02:12,157 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:02:12,160 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:02:12,476 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:02:12,867 - app.database - INFO - Database connection established successfully
2024-08-08 14:02:12,916 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:02:13,060 - app.database - INFO - Database connection established successfully
2024-08-08 14:02:13,224 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:02:13,225 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:02:13,462 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:02:13,871 - app.database - INFO - Database connection established successfully
2024-08-08 14:02:13,917 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:02:14,020 - app.database - INFO - Database connection established successfully
2024-08-08 14:02:15,952 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:02:16,538 - app.database - INFO - Database connection established successfully
2024-08-08 14:02:16,649 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:02:17,262 - app.database - INFO - Database connection established successfully
2024-08-08 14:02:18,044 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 14:02:18,044 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:02:18,700 - app.database - INFO - Database connection established successfully
2024-08-08 14:02:18,741 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 14:02:18,785 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 14:02:19,045 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 14:02:19,048 - app.services.trial_matching_service - INFO - Calling Anthropic service for user 66af0d2d118d8e248b49a856
2024-08-08 14:02:19,062 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 14:02:19,062 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 14:02:19,063 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 14:15:28,015 - app - INFO - Initializing Flask app...
2024-08-08 14:15:28,016 - app - INFO - Configuring app...
2024-08-08 14:15:28,016 - app - INFO - Setting up CORS...
2024-08-08 14:15:28,017 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:15:28,017 - app - INFO - Initializing JWT manager...
2024-08-08 14:15:28,017 - app - INFO - Setting up rate limiting...
2024-08-08 14:15:28,018 - app - INFO - Setting up database...
2024-08-08 14:15:28,019 - app - INFO - Starting database setup...
2024-08-08 14:15:28,902 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:15:28,902 - app - INFO - Database setup completed successfully
2024-08-08 14:15:28,903 - app - INFO - Registering error handler...
2024-08-08 14:15:28,903 - app - INFO - Initializing CLI commands...
2024-08-08 14:15:28,903 - app - INFO - Registering routes...
2024-08-08 14:15:28,909 - app - INFO - Initializing services...
2024-08-08 14:15:28,923 - app - INFO - Initializing email service...
2024-08-08 14:15:28,924 - app - INFO - Setting up scheduler...
2024-08-08 14:15:28,927 - app - INFO - Initializing scheduler...
2024-08-08 14:15:28,928 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:15:28,928 - app - INFO - Application initialized successfully
2024-08-08 14:15:30,552 - app - INFO - Initializing Flask app...
2024-08-08 14:15:30,553 - app - INFO - Configuring app...
2024-08-08 14:15:30,553 - app - INFO - Setting up CORS...
2024-08-08 14:15:30,554 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:15:30,554 - app - INFO - Initializing JWT manager...
2024-08-08 14:15:30,554 - app - INFO - Setting up rate limiting...
2024-08-08 14:15:30,555 - app - INFO - Setting up database...
2024-08-08 14:15:30,556 - app - INFO - Starting database setup...
2024-08-08 14:15:31,744 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:15:31,744 - app - INFO - Database setup completed successfully
2024-08-08 14:15:31,745 - app - INFO - Registering error handler...
2024-08-08 14:15:31,745 - app - INFO - Initializing CLI commands...
2024-08-08 14:15:31,745 - app - INFO - Registering routes...
2024-08-08 14:15:31,752 - app - INFO - Initializing services...
2024-08-08 14:15:31,761 - app - INFO - Initializing email service...
2024-08-08 14:15:31,762 - app - INFO - Setting up scheduler...
2024-08-08 14:15:31,765 - app - INFO - Initializing scheduler...
2024-08-08 14:15:31,765 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:15:31,765 - app - INFO - Application initialized successfully
2024-08-08 14:15:47,787 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:15:48,750 - app.database - INFO - Database connection established successfully
2024-08-08 14:15:49,330 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:15:49,331 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:15:49,649 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:15:49,971 - app.database - INFO - Database connection established successfully
2024-08-08 14:15:50,013 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:15:50,160 - app.database - INFO - Database connection established successfully
2024-08-08 14:15:50,332 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:15:50,332 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:15:50,533 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:15:51,131 - app.database - INFO - Database connection established successfully
2024-08-08 14:15:51,169 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:15:51,225 - app.database - INFO - Database connection established successfully
2024-08-08 14:15:54,346 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:15:55,135 - app.database - INFO - Database connection established successfully
2024-08-08 14:15:55,246 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:15:56,028 - app.database - INFO - Database connection established successfully
2024-08-08 14:15:56,921 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 14:15:56,921 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:15:57,657 - app.database - INFO - Database connection established successfully
2024-08-08 14:15:57,724 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 14:15:57,804 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 14:15:58,110 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 14:15:58,114 - app.services.trial_matching_service - INFO - Calling Anthropic service for user 66af0d2d118d8e248b49a856
2024-08-08 14:15:58,130 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 14:15:58,130 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 14:15:58,423 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-08 14:15:58,451 - app.services.anthropic_service - ERROR - Unexpected error in match_patient_to_trials: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 98, in match_patient_to_trials
    response = await self.invoke_model(messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.BadRequestError: Error code: 400 - {'type': 'error', 'error': {'type': 'invalid_request_error', 'message': 'messages: Unexpected role "system". The Messages API accepts a top-level `system` parameter, not "system" as an input message role.'}}
2024-08-08 14:15:58,452 - app.services.trial_matching_service - INFO - Found 0 potential matches in this batch for user 66af0d2d118d8e248b49a856
2024-08-08 14:15:58,453 - app.services.trial_matching_service - INFO - Added 0 new matches for user 66af0d2d118d8e248b49a856
2024-08-08 14:15:58,453 - app.services.trial_matching_service - INFO - Completed batch. Total matches so far: 0 for user 66af0d2d118d8e248b49a856
2024-08-08 14:15:58,453 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 14:16:14,954 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-08 14:16:14,955 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-08 14:22:12,904 - app - INFO - Initializing Flask app...
2024-08-08 14:22:12,905 - app - INFO - Configuring app...
2024-08-08 14:22:12,906 - app - INFO - Setting up CORS...
2024-08-08 14:22:12,906 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:22:12,906 - app - INFO - Initializing JWT manager...
2024-08-08 14:22:12,906 - app - INFO - Setting up rate limiting...
2024-08-08 14:22:12,908 - app - INFO - Setting up database...
2024-08-08 14:22:12,909 - app - INFO - Starting database setup...
2024-08-08 14:22:13,723 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:22:13,723 - app - INFO - Database setup completed successfully
2024-08-08 14:22:13,724 - app - INFO - Registering error handler...
2024-08-08 14:22:13,724 - app - INFO - Initializing CLI commands...
2024-08-08 14:22:13,724 - app - INFO - Registering routes...
2024-08-08 14:22:13,730 - app - INFO - Initializing services...
2024-08-08 14:22:13,740 - app - INFO - Initializing email service...
2024-08-08 14:22:13,740 - app - INFO - Setting up scheduler...
2024-08-08 14:22:13,744 - app - INFO - Initializing scheduler...
2024-08-08 14:22:13,745 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:22:13,745 - app - INFO - Application initialized successfully
2024-08-08 14:22:35,216 - app - INFO - Initializing Flask app...
2024-08-08 14:22:35,217 - app - INFO - Configuring app...
2024-08-08 14:22:35,217 - app - INFO - Setting up CORS...
2024-08-08 14:22:35,218 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:22:35,218 - app - INFO - Initializing JWT manager...
2024-08-08 14:22:35,218 - app - INFO - Setting up rate limiting...
2024-08-08 14:22:35,219 - app - INFO - Setting up database...
2024-08-08 14:22:35,219 - app - INFO - Starting database setup...
2024-08-08 14:22:36,094 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:22:36,094 - app - INFO - Database setup completed successfully
2024-08-08 14:22:36,095 - app - INFO - Registering error handler...
2024-08-08 14:22:36,095 - app - INFO - Initializing CLI commands...
2024-08-08 14:22:36,096 - app - INFO - Registering routes...
2024-08-08 14:22:36,100 - app - INFO - Initializing services...
2024-08-08 14:22:36,109 - app - INFO - Initializing email service...
2024-08-08 14:22:36,109 - app - INFO - Setting up scheduler...
2024-08-08 14:22:36,112 - app - INFO - Initializing scheduler...
2024-08-08 14:22:36,113 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:22:36,113 - app - INFO - Application initialized successfully
2024-08-08 14:22:37,598 - app - INFO - Initializing Flask app...
2024-08-08 14:22:37,599 - app - INFO - Configuring app...
2024-08-08 14:22:37,600 - app - INFO - Setting up CORS...
2024-08-08 14:22:37,600 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:22:37,600 - app - INFO - Initializing JWT manager...
2024-08-08 14:22:37,600 - app - INFO - Setting up rate limiting...
2024-08-08 14:22:37,601 - app - INFO - Setting up database...
2024-08-08 14:22:37,602 - app - INFO - Starting database setup...
2024-08-08 14:22:38,543 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:22:38,544 - app - INFO - Database setup completed successfully
2024-08-08 14:22:38,544 - app - INFO - Registering error handler...
2024-08-08 14:22:38,544 - app - INFO - Initializing CLI commands...
2024-08-08 14:22:38,545 - app - INFO - Registering routes...
2024-08-08 14:22:38,550 - app - INFO - Initializing services...
2024-08-08 14:22:38,559 - app - INFO - Initializing email service...
2024-08-08 14:22:38,560 - app - INFO - Setting up scheduler...
2024-08-08 14:22:38,564 - app - INFO - Initializing scheduler...
2024-08-08 14:22:38,565 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:22:38,565 - app - INFO - Application initialized successfully
2024-08-08 14:22:48,299 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:22:48,797 - app.database - INFO - Database connection established successfully
2024-08-08 14:22:49,350 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:22:49,352 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:22:49,647 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:22:50,021 - app.database - INFO - Database connection established successfully
2024-08-08 14:22:50,092 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:22:50,212 - app.database - INFO - Database connection established successfully
2024-08-08 14:22:50,403 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:22:50,405 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:22:50,564 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:22:50,956 - app.database - INFO - Database connection established successfully
2024-08-08 14:22:51,013 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:22:51,144 - app.database - INFO - Database connection established successfully
2024-08-08 14:22:55,359 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:22:55,937 - app.database - INFO - Database connection established successfully
2024-08-08 14:22:56,079 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:22:56,626 - app.database - INFO - Database connection established successfully
2024-08-08 14:22:58,074 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 14:22:58,074 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:22:58,627 - app.database - INFO - Database connection established successfully
2024-08-08 14:22:58,685 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 14:22:58,740 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 14:22:58,939 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 14:22:58,943 - app.services.trial_matching_service - INFO - Calling Anthropic service for user 66af0d2d118d8e248b49a856
2024-08-08 14:22:58,961 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 14:22:58,962 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 14:23:06,650 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 14:23:06,650 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The available trials focus on:\n\n1. Chronic Myelogenous Leukemia (NCT00072579)\n2. Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)\n3. Smoking and exposure to smoke constituents (NCT00812279)\n4. Adolescent alcohol use and brain development (NCT01511679)\n\nThese trials are not compatible with the patient's profile, as they target different conditions and age groups. Therefore, no trials meet the minimum compatibility score of 70 or higher.", type='text')]...
2024-08-08 14:23:06,650 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the clinical trial data provided, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The available trials focus on:\n\n1. Chronic Myelogenous Leukemia (NCT00072579)\n2. Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)\n3. Smoking and exposure to smoke constituents (NCT00812279)\n4. Adolescent alcohol use and brain development (NCT01511679)\n\nThese trials are not compatible with the patient's profile, as they target different conditions and age groups. Therefore, no trials meet the minimum compatibility score of 70 or higher.", type='text')]
2024-08-08 14:23:06,651 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the clinical trial data provided, I have determined that there are no suitable trials with a compatibility score of 70 or higher for this patient. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications. The available trials focus on:

1. Chronic Myelogenous Leukemia (NCT00072579)
2. Erectile Dysfunction and Benign Prostatic Hyperplasia (NCT00517179)
3. Smoking and exposure to smoke constituents (NCT00812279)
4. Adolescent alcohol use and brain development (NCT01511679)

These trials are not compatible with the patient's profile, as they target different conditions and age groups. Therefore, no trials meet the minimum compatibility score of 70 or higher.
2024-08-08 14:23:06,651 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 14:23:06,652 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 14:23:06,653 - app.services.trial_matching_service - INFO - Found 0 potential matches in this batch for user 66af0d2d118d8e248b49a856
2024-08-08 14:23:06,653 - app.services.trial_matching_service - INFO - Added 0 new matches for user 66af0d2d118d8e248b49a856
2024-08-08 14:23:06,653 - app.services.trial_matching_service - INFO - Completed batch. Total matches so far: 0 for user 66af0d2d118d8e248b49a856
2024-08-08 14:23:06,654 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 14:23:45,435 - app.services.trial_matching_service - INFO - Attempting to stop matching process for user 66af0d2d118d8e248b49a856
2024-08-08 14:23:45,435 - app.services.trial_matching_service - INFO - Stop flag set for user 66af0d2d118d8e248b49a856
2024-08-08 14:45:20,844 - app - INFO - Initializing Flask app...
2024-08-08 14:45:20,846 - app - INFO - Configuring app...
2024-08-08 14:45:20,847 - app - INFO - Setting up CORS...
2024-08-08 14:45:20,847 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:45:20,847 - app - INFO - Initializing JWT manager...
2024-08-08 14:45:20,847 - app - INFO - Setting up rate limiting...
2024-08-08 14:45:20,848 - app - INFO - Setting up database...
2024-08-08 14:45:20,849 - app - INFO - Starting database setup...
2024-08-08 14:45:28,875 - app - INFO - Initializing Flask app...
2024-08-08 14:45:28,876 - app - INFO - Configuring app...
2024-08-08 14:45:28,876 - app - INFO - Setting up CORS...
2024-08-08 14:45:28,877 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:45:28,877 - app - INFO - Initializing JWT manager...
2024-08-08 14:45:28,877 - app - INFO - Setting up rate limiting...
2024-08-08 14:45:28,878 - app - INFO - Setting up database...
2024-08-08 14:45:28,878 - app - INFO - Starting database setup...
2024-08-08 14:45:29,485 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:45:29,486 - app - INFO - Database setup completed successfully
2024-08-08 14:45:29,486 - app - INFO - Registering error handler...
2024-08-08 14:45:29,486 - app - INFO - Initializing CLI commands...
2024-08-08 14:45:29,487 - app - INFO - Registering routes...
2024-08-08 14:45:29,494 - app - INFO - Initializing services...
2024-08-08 14:45:29,515 - app - INFO - Initializing email service...
2024-08-08 14:45:29,516 - app - INFO - Setting up scheduler...
2024-08-08 14:45:29,522 - app - INFO - Initializing scheduler...
2024-08-08 14:45:29,523 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:45:29,523 - app - INFO - Application initialized successfully
2024-08-08 14:45:30,735 - app - INFO - Initializing Flask app...
2024-08-08 14:45:30,737 - app - INFO - Configuring app...
2024-08-08 14:45:30,737 - app - INFO - Setting up CORS...
2024-08-08 14:45:30,737 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:45:30,737 - app - INFO - Initializing JWT manager...
2024-08-08 14:45:30,737 - app - INFO - Setting up rate limiting...
2024-08-08 14:45:30,739 - app - INFO - Setting up database...
2024-08-08 14:45:30,739 - app - INFO - Starting database setup...
2024-08-08 14:45:31,315 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:45:31,315 - app - INFO - Database setup completed successfully
2024-08-08 14:45:31,316 - app - INFO - Registering error handler...
2024-08-08 14:45:31,316 - app - INFO - Initializing CLI commands...
2024-08-08 14:45:31,316 - app - INFO - Registering routes...
2024-08-08 14:45:31,323 - app - INFO - Initializing services...
2024-08-08 14:45:31,335 - app - INFO - Initializing email service...
2024-08-08 14:45:31,336 - app - INFO - Setting up scheduler...
2024-08-08 14:45:31,338 - app - INFO - Initializing scheduler...
2024-08-08 14:45:31,339 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:45:31,339 - app - INFO - Application initialized successfully
2024-08-08 14:45:43,040 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:45:43,679 - app.database - INFO - Database connection established successfully
2024-08-08 14:45:44,266 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:45:44,266 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:45:44,578 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:45:44,851 - app.database - INFO - Database connection established successfully
2024-08-08 14:45:44,892 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:45:45,159 - app.database - INFO - Database connection established successfully
2024-08-08 14:45:45,207 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:45:45,207 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:45:45,511 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:45:45,794 - app.database - INFO - Database connection established successfully
2024-08-08 14:45:45,845 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:45:46,047 - app.database - INFO - Database connection established successfully
2024-08-08 14:45:47,482 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:45:48,019 - app.database - INFO - Database connection established successfully
2024-08-08 14:45:48,111 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:45:48,701 - app.database - INFO - Database connection established successfully
2024-08-08 14:45:49,837 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 14:45:49,838 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:45:50,370 - app.database - INFO - Database connection established successfully
2024-08-08 14:45:50,410 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 14:45:50,453 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 14:45:50,647 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 14:45:50,651 - app.services.trial_matching_service - INFO - Calling Anthropic service for user 66af0d2d118d8e248b49a856
2024-08-08 14:45:50,665 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 14:45:50,665 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 14:45:56,397 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 14:45:56,398 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in the provided clinical trials (leukemia, erectile dysfunction/prostatic hyperplasia, smoking, and alcohol abuse).\n\n2. The patient's age (31 years old) and current medication (Escitalopram) are not relevant to the eligibility criteria of the provided trials.\n\n3. The trials focus on specific conditions and treatments that are unrelated to the patient's profile, such as chronic myelogenous leukemia, erectile dysfunction, smoking cessation, and alcohol abuse in adolescents.\n\n4. None of the trials have eligibility criteria that would include a generally healthy 31-year-old male with depression and anxiety as their primary conditions.\n\nGiven these factors, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.", type='text')]...
2024-08-08 14:45:56,398 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n\n1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in the provided clinical trials (leukemia, erectile dysfunction/prostatic hyperplasia, smoking, and alcohol abuse).\n\n2. The patient's age (31 years old) and current medication (Escitalopram) are not relevant to the eligibility criteria of the provided trials.\n\n3. The trials focus on specific conditions and treatments that are unrelated to the patient's profile, such as chronic myelogenous leukemia, erectile dysfunction, smoking cessation, and alcohol abuse in adolescents.\n\n4. None of the trials have eligibility criteria that would include a generally healthy 31-year-old male with depression and anxiety as their primary conditions.\n\nGiven these factors, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.", type='text')]
2024-08-08 14:45:56,399 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasons for no matches:

1. The patient's primary medical conditions (depression and anxiety) do not align with the conditions targeted in the provided clinical trials (leukemia, erectile dysfunction/prostatic hyperplasia, smoking, and alcohol abuse).

2. The patient's age (31 years old) and current medication (Escitalopram) are not relevant to the eligibility criteria of the provided trials.

3. The trials focus on specific conditions and treatments that are unrelated to the patient's profile, such as chronic myelogenous leukemia, erectile dysfunction, smoking cessation, and alcohol abuse in adolescents.

4. None of the trials have eligibility criteria that would include a generally healthy 31-year-old male with depression and anxiety as their primary conditions.

Given these factors, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.
2024-08-08 14:45:56,399 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 14:45:56,399 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 14:45:56,399 - app.services.trial_matching_service - INFO - Found 0 potential matches in this batch for user 66af0d2d118d8e248b49a856
2024-08-08 14:45:56,399 - app.services.trial_matching_service - INFO - Added 0 new matches for user 66af0d2d118d8e248b49a856
2024-08-08 14:45:56,400 - app.services.trial_matching_service - INFO - Completed batch. Total matches so far: 0 for user 66af0d2d118d8e248b49a856
2024-08-08 14:45:56,400 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 50, Total trials: 4585
2024-08-08 14:45:56,401 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 14:46:39,509 - app - INFO - Initializing Flask app...
2024-08-08 14:46:39,511 - app - INFO - Configuring app...
2024-08-08 14:46:39,512 - app - INFO - Setting up CORS...
2024-08-08 14:46:39,512 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:46:39,513 - app - INFO - Initializing JWT manager...
2024-08-08 14:46:39,513 - app - INFO - Setting up rate limiting...
2024-08-08 14:46:39,516 - app - INFO - Setting up database...
2024-08-08 14:46:39,516 - app - INFO - Starting database setup...
2024-08-08 14:46:40,236 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:46:40,236 - app - INFO - Database setup completed successfully
2024-08-08 14:46:40,237 - app - INFO - Registering error handler...
2024-08-08 14:46:40,237 - app - INFO - Initializing CLI commands...
2024-08-08 14:46:40,237 - app - INFO - Registering routes...
2024-08-08 14:46:40,244 - app - INFO - Initializing services...
2024-08-08 14:46:40,257 - app - INFO - Initializing email service...
2024-08-08 14:46:40,257 - app - INFO - Setting up scheduler...
2024-08-08 14:46:40,262 - app - INFO - Initializing scheduler...
2024-08-08 14:46:40,263 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:46:40,263 - app - INFO - Application initialized successfully
2024-08-08 14:46:42,663 - app - INFO - Initializing Flask app...
2024-08-08 14:46:42,665 - app - INFO - Configuring app...
2024-08-08 14:46:42,666 - app - INFO - Setting up CORS...
2024-08-08 14:46:42,666 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:46:42,666 - app - INFO - Initializing JWT manager...
2024-08-08 14:46:42,667 - app - INFO - Setting up rate limiting...
2024-08-08 14:46:42,667 - app - INFO - Setting up database...
2024-08-08 14:46:42,668 - app - INFO - Starting database setup...
2024-08-08 14:46:43,294 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:46:43,295 - app - INFO - Database setup completed successfully
2024-08-08 14:46:43,295 - app - INFO - Registering error handler...
2024-08-08 14:46:43,296 - app - INFO - Initializing CLI commands...
2024-08-08 14:46:43,296 - app - INFO - Registering routes...
2024-08-08 14:46:43,310 - app - INFO - Initializing services...
2024-08-08 14:46:43,327 - app - INFO - Initializing email service...
2024-08-08 14:46:43,327 - app - INFO - Setting up scheduler...
2024-08-08 14:46:43,335 - app - INFO - Initializing scheduler...
2024-08-08 14:46:43,336 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:46:43,336 - app - INFO - Application initialized successfully
2024-08-08 14:46:53,717 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:46:54,301 - app.database - INFO - Database connection established successfully
2024-08-08 14:46:55,126 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:46:55,127 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:46:55,439 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:46:55,716 - app.database - INFO - Database connection established successfully
2024-08-08 14:46:55,755 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:46:55,983 - app.database - INFO - Database connection established successfully
2024-08-08 14:46:56,076 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:46:56,077 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:46:56,357 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:46:56,690 - app.database - INFO - Database connection established successfully
2024-08-08 14:46:56,731 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:46:56,917 - app.database - INFO - Database connection established successfully
2024-08-08 14:46:59,515 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:47:00,098 - app.database - INFO - Database connection established successfully
2024-08-08 14:47:00,240 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:47:00,817 - app.database - INFO - Database connection established successfully
2024-08-08 14:47:02,233 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 14:47:02,233 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:47:02,866 - app.database - INFO - Database connection established successfully
2024-08-08 14:47:02,925 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 14:47:02,966 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 14:47:03,156 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 14:47:03,164 - app.services.trial_matching_service - INFO - Calling Anthropic service for user 66af0d2d118d8e248b49a856
2024-08-08 14:47:03,201 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 14:47:03,203 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 14:47:09,689 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 14:47:09,690 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older males (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is for adolescents and young adults (12-21 years), it focuses on alcohol abuse, which is not mentioned in the patient's profile. Additionally, the patient is older than the age range for this study.\n\nGiven these reasons, the output in the requested JSON format would be an empty array:\n\n[]\n\nThe patient's profile (31-year-old male with depression and anxiety) does not align well with any of the provided clinical trials, which focus on very different conditions and demographics.", type='text')]...
2024-08-08 14:47:09,690 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.\n\n2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older males (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.\n\n3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.\n\n4. NCT01511679: While this trial is for adolescents and young adults (12-21 years), it focuses on alcohol abuse, which is not mentioned in the patient's profile. Additionally, the patient is older than the age range for this study.\n\nGiven these reasons, the output in the requested JSON format would be an empty array:\n\n[]\n\nThe patient's profile (31-year-old male with depression and anxiety) does not align well with any of the provided clinical trials, which focus on very different conditions and demographics.", type='text')]
2024-08-08 14:47:09,692 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT00072579: This trial is for chronic myelogenous leukemia, which the patient does not have.

2. NCT00517179: This trial is for erectile dysfunction and benign prostatic hyperplasia in older males (50-80 years old). The patient is too young (31 years old) and doesn't have these conditions.

3. NCT00812279: This trial is for smokers, and there's no indication that the patient is a smoker.

4. NCT01511679: While this trial is for adolescents and young adults (12-21 years), it focuses on alcohol abuse, which is not mentioned in the patient's profile. Additionally, the patient is older than the age range for this study.

Given these reasons, the output in the requested JSON format would be an empty array:

[]

The patient's profile (31-year-old male with depression and anxiety) does not align well with any of the provided clinical trials, which focus on very different conditions and demographics.
2024-08-08 14:47:09,692 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 14:47:09,692 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 14:47:09,693 - app.services.trial_matching_service - INFO - Found 0 potential matches in this batch for user 66af0d2d118d8e248b49a856
2024-08-08 14:47:09,693 - app.services.trial_matching_service - INFO - Added 0 new matches for user 66af0d2d118d8e248b49a856
2024-08-08 14:47:09,693 - app.services.trial_matching_service - INFO - Completed batch. Total matches so far: 0 for user 66af0d2d118d8e248b49a856
2024-08-08 14:47:09,693 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 50, Total trials: 4585
2024-08-08 14:47:09,694 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 14:52:06,457 - app - INFO - Initializing Flask app...
2024-08-08 14:52:06,459 - app - INFO - Configuring app...
2024-08-08 14:52:06,459 - app - INFO - Setting up CORS...
2024-08-08 14:52:06,460 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:52:06,460 - app - INFO - Initializing JWT manager...
2024-08-08 14:52:06,460 - app - INFO - Setting up rate limiting...
2024-08-08 14:52:06,462 - app - INFO - Setting up database...
2024-08-08 14:52:06,462 - app - INFO - Starting database setup...
2024-08-08 14:52:07,124 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:52:07,125 - app - INFO - Database setup completed successfully
2024-08-08 14:52:07,125 - app - INFO - Registering error handler...
2024-08-08 14:52:07,126 - app - INFO - Initializing CLI commands...
2024-08-08 14:52:07,126 - app - INFO - Registering routes...
2024-08-08 14:52:07,135 - app - INFO - Initializing services...
2024-08-08 14:52:07,148 - app - INFO - Initializing email service...
2024-08-08 14:52:07,148 - app - INFO - Setting up scheduler...
2024-08-08 14:52:07,152 - app - INFO - Initializing scheduler...
2024-08-08 14:52:07,153 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:52:07,153 - app - INFO - Application initialized successfully
2024-08-08 14:52:18,686 - app - INFO - Initializing Flask app...
2024-08-08 14:52:18,687 - app - INFO - Configuring app...
2024-08-08 14:52:18,688 - app - INFO - Setting up CORS...
2024-08-08 14:52:18,688 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:52:18,688 - app - INFO - Initializing JWT manager...
2024-08-08 14:52:18,689 - app - INFO - Setting up rate limiting...
2024-08-08 14:52:18,690 - app - INFO - Setting up database...
2024-08-08 14:52:18,690 - app - INFO - Starting database setup...
2024-08-08 14:52:19,280 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:52:19,280 - app - INFO - Database setup completed successfully
2024-08-08 14:52:19,280 - app - INFO - Registering error handler...
2024-08-08 14:52:19,281 - app - INFO - Initializing CLI commands...
2024-08-08 14:52:19,281 - app - INFO - Registering routes...
2024-08-08 14:52:19,288 - app - INFO - Initializing services...
2024-08-08 14:52:19,301 - app - INFO - Initializing email service...
2024-08-08 14:52:19,302 - app - INFO - Setting up scheduler...
2024-08-08 14:52:19,306 - app - INFO - Initializing scheduler...
2024-08-08 14:52:19,307 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:52:19,308 - app - INFO - Application initialized successfully
2024-08-08 14:52:20,961 - app - INFO - Initializing Flask app...
2024-08-08 14:52:20,964 - app - INFO - Configuring app...
2024-08-08 14:52:20,964 - app - INFO - Setting up CORS...
2024-08-08 14:52:20,965 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:52:20,965 - app - INFO - Initializing JWT manager...
2024-08-08 14:52:20,966 - app - INFO - Setting up rate limiting...
2024-08-08 14:52:20,967 - app - INFO - Setting up database...
2024-08-08 14:52:20,968 - app - INFO - Starting database setup...
2024-08-08 14:52:21,825 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:52:21,826 - app - INFO - Database setup completed successfully
2024-08-08 14:52:21,827 - app - INFO - Registering error handler...
2024-08-08 14:52:21,827 - app - INFO - Initializing CLI commands...
2024-08-08 14:52:21,827 - app - INFO - Registering routes...
2024-08-08 14:52:21,840 - app - INFO - Initializing services...
2024-08-08 14:52:21,858 - app - INFO - Initializing email service...
2024-08-08 14:52:21,858 - app - INFO - Setting up scheduler...
2024-08-08 14:52:21,866 - app - INFO - Initializing scheduler...
2024-08-08 14:52:21,867 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:52:21,868 - app - INFO - Application initialized successfully
2024-08-08 14:52:33,154 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:52:33,729 - app.database - INFO - Database connection established successfully
2024-08-08 14:52:34,585 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:52:34,586 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:52:34,876 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:52:35,232 - app.database - INFO - Database connection established successfully
2024-08-08 14:52:35,280 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:52:35,479 - app.database - INFO - Database connection established successfully
2024-08-08 14:52:35,605 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:52:35,606 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:52:35,843 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:52:36,161 - app.database - INFO - Database connection established successfully
2024-08-08 14:52:36,203 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:52:36,399 - app.database - INFO - Database connection established successfully
2024-08-08 14:52:39,006 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:52:39,637 - app.database - INFO - Database connection established successfully
2024-08-08 14:52:39,736 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:52:40,335 - app.database - INFO - Database connection established successfully
2024-08-08 14:52:45,207 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 14:52:45,208 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:52:45,861 - app.database - INFO - Database connection established successfully
2024-08-08 14:52:45,905 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 14:52:45,955 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 14:52:45,957 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 14:53:43,443 - app - INFO - Initializing Flask app...
2024-08-08 14:53:43,444 - app - INFO - Configuring app...
2024-08-08 14:53:43,445 - app - INFO - Setting up CORS...
2024-08-08 14:53:43,446 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:53:43,446 - app - INFO - Initializing JWT manager...
2024-08-08 14:53:43,446 - app - INFO - Setting up rate limiting...
2024-08-08 14:53:43,450 - app - INFO - Setting up database...
2024-08-08 14:53:43,451 - app - INFO - Starting database setup...
2024-08-08 14:53:44,152 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:53:44,154 - app - INFO - Database setup completed successfully
2024-08-08 14:53:44,154 - app - INFO - Registering error handler...
2024-08-08 14:53:44,155 - app - INFO - Initializing CLI commands...
2024-08-08 14:53:44,155 - app - INFO - Registering routes...
2024-08-08 14:53:44,164 - app - INFO - Initializing services...
2024-08-08 14:53:44,176 - app - INFO - Initializing email service...
2024-08-08 14:53:44,177 - app - INFO - Setting up scheduler...
2024-08-08 14:53:44,183 - app - INFO - Initializing scheduler...
2024-08-08 14:53:44,185 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:53:44,185 - app - INFO - Application initialized successfully
2024-08-08 14:53:53,977 - app - INFO - Initializing Flask app...
2024-08-08 14:53:53,978 - app - INFO - Configuring app...
2024-08-08 14:53:53,979 - app - INFO - Setting up CORS...
2024-08-08 14:53:53,979 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:53:53,979 - app - INFO - Initializing JWT manager...
2024-08-08 14:53:53,980 - app - INFO - Setting up rate limiting...
2024-08-08 14:53:53,980 - app - INFO - Setting up database...
2024-08-08 14:53:53,981 - app - INFO - Starting database setup...
2024-08-08 14:53:54,675 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:53:54,675 - app - INFO - Database setup completed successfully
2024-08-08 14:53:54,675 - app - INFO - Registering error handler...
2024-08-08 14:53:54,676 - app - INFO - Initializing CLI commands...
2024-08-08 14:53:54,676 - app - INFO - Registering routes...
2024-08-08 14:53:54,684 - app - INFO - Initializing services...
2024-08-08 14:53:54,695 - app - INFO - Initializing email service...
2024-08-08 14:53:54,695 - app - INFO - Setting up scheduler...
2024-08-08 14:53:54,701 - app - INFO - Initializing scheduler...
2024-08-08 14:53:54,701 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:53:54,702 - app - INFO - Application initialized successfully
2024-08-08 14:53:57,072 - app - INFO - Initializing Flask app...
2024-08-08 14:53:57,074 - app - INFO - Configuring app...
2024-08-08 14:53:57,074 - app - INFO - Setting up CORS...
2024-08-08 14:53:57,075 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 14:53:57,075 - app - INFO - Initializing JWT manager...
2024-08-08 14:53:57,075 - app - INFO - Setting up rate limiting...
2024-08-08 14:53:57,076 - app - INFO - Setting up database...
2024-08-08 14:53:57,078 - app - INFO - Starting database setup...
2024-08-08 14:53:57,712 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 14:53:57,712 - app - INFO - Database setup completed successfully
2024-08-08 14:53:57,713 - app - INFO - Registering error handler...
2024-08-08 14:53:57,714 - app - INFO - Initializing CLI commands...
2024-08-08 14:53:57,715 - app - INFO - Registering routes...
2024-08-08 14:53:57,725 - app - INFO - Initializing services...
2024-08-08 14:53:57,745 - app - INFO - Initializing email service...
2024-08-08 14:53:57,746 - app - INFO - Setting up scheduler...
2024-08-08 14:53:57,754 - app - INFO - Initializing scheduler...
2024-08-08 14:53:57,755 - app.scheduler - INFO - Scheduler initialized
2024-08-08 14:53:57,756 - app - INFO - Application initialized successfully
2024-08-08 14:54:07,965 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:54:08,604 - app.database - INFO - Database connection established successfully
2024-08-08 14:54:09,425 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:54:09,425 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:54:09,735 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:54:10,037 - app.database - INFO - Database connection established successfully
2024-08-08 14:54:10,083 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:54:10,360 - app.database - INFO - Database connection established successfully
2024-08-08 14:54:10,412 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 14:54:10,412 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:54:10,734 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:54:11,039 - app.database - INFO - Database connection established successfully
2024-08-08 14:54:11,081 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 14:54:11,308 - app.database - INFO - Database connection established successfully
2024-08-08 14:54:13,968 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:54:14,536 - app.database - INFO - Database connection established successfully
2024-08-08 14:54:14,704 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:54:15,261 - app.database - INFO - Database connection established successfully
2024-08-08 14:54:17,946 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 14:54:17,948 - app.database - INFO - Attempting to establish database connection...
2024-08-08 14:54:18,574 - app.database - INFO - Database connection established successfully
2024-08-08 14:54:18,618 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 14:54:18,664 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 14:54:18,827 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 14:54:18,840 - app.services.trial_matching_service - INFO - Calling Anthropic service for user 66af0d2d118d8e248b49a856
2024-08-08 14:54:18,889 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 14:54:18,890 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 14:54:27,756 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 14:54:27,756 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available trials are:\n   - NCT00072579: For chronic myelogenous leukemia\n   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia\n   - NCT00812279: For smokers switching to a new type of cigarette\n   - NCT01511679: For studying alcohol use in adolescents\n\nNone of these trials are related to depression or anxiety, which are the patient's primary medical conditions. The patient's age, gender, and current medication also do not align with the eligibility criteria of these trials.\n\nTherefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a compatibility score of 70 or higher for this patient.", type='text')]...
2024-08-08 14:54:27,756 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a 31-year-old male with depression and anxiety, taking Escitalopram.\n\n2. The available trials are:\n   - NCT00072579: For chronic myelogenous leukemia\n   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia\n   - NCT00812279: For smokers switching to a new type of cigarette\n   - NCT01511679: For studying alcohol use in adolescents\n\nNone of these trials are related to depression or anxiety, which are the patient's primary medical conditions. The patient's age, gender, and current medication also do not align with the eligibility criteria of these trials.\n\nTherefore, the output in the requested JSON format is:\n\n[]\n\nThis empty array indicates that no trials match with a compatibility score of 70 or higher for this patient.", type='text')]
2024-08-08 14:54:27,757 - app.services.anthropic_service - INFO - Parsing response: After carefully analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. The patient is a 31-year-old male with depression and anxiety, taking Escitalopram.

2. The available trials are:
   - NCT00072579: For chronic myelogenous leukemia
   - NCT00517179: For erectile dysfunction and benign prostatic hyperplasia
   - NCT00812279: For smokers switching to a new type of cigarette
   - NCT01511679: For studying alcohol use in adolescents

None of these trials are related to depression or anxiety, which are the patient's primary medical conditions. The patient's age, gender, and current medication also do not align with the eligibility criteria of these trials.

Therefore, the output in the requested JSON format is:

[]

This empty array indicates that no trials match with a compatibility score of 70 or higher for this patient.
2024-08-08 14:54:27,757 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 14:54:27,757 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 14:54:27,758 - app.services.trial_matching_service - INFO - Found 0 potential matches in this batch for user 66af0d2d118d8e248b49a856
2024-08-08 14:54:27,758 - app.services.trial_matching_service - INFO - Added 0 new matches for user 66af0d2d118d8e248b49a856
2024-08-08 14:54:27,758 - app.services.trial_matching_service - INFO - Completed batch. Total matches so far: 0 for user 66af0d2d118d8e248b49a856
2024-08-08 14:54:27,758 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 50, Total trials: 4585
2024-08-08 14:54:27,758 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 16:25:00,338 - app - INFO - Initializing Flask app...
2024-08-08 16:25:00,339 - app - INFO - Configuring app...
2024-08-08 16:25:00,340 - app - INFO - Setting up CORS...
2024-08-08 16:25:00,340 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 16:25:00,340 - app - INFO - Initializing JWT manager...
2024-08-08 16:25:00,341 - app - INFO - Setting up rate limiting...
2024-08-08 16:25:00,344 - app - INFO - Setting up database...
2024-08-08 16:25:00,344 - app - INFO - Starting database setup...
2024-08-08 16:25:01,137 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 16:25:01,137 - app - INFO - Database setup completed successfully
2024-08-08 16:25:01,138 - app - INFO - Registering error handler...
2024-08-08 16:25:01,138 - app - INFO - Initializing CLI commands...
2024-08-08 16:25:01,139 - app - INFO - Registering routes...
2024-08-08 16:25:01,145 - app - INFO - Initializing services...
2024-08-08 16:25:01,158 - app - INFO - Initializing email service...
2024-08-08 16:25:01,158 - app - INFO - Setting up scheduler...
2024-08-08 16:25:01,164 - app - INFO - Initializing scheduler...
2024-08-08 16:25:01,165 - app.scheduler - INFO - Scheduler initialized
2024-08-08 16:25:01,167 - app - INFO - Application initialized successfully
2024-08-08 16:25:03,553 - app - INFO - Initializing Flask app...
2024-08-08 16:25:03,555 - app - INFO - Configuring app...
2024-08-08 16:25:03,555 - app - INFO - Setting up CORS...
2024-08-08 16:25:03,556 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 16:25:03,556 - app - INFO - Initializing JWT manager...
2024-08-08 16:25:03,556 - app - INFO - Setting up rate limiting...
2024-08-08 16:25:03,557 - app - INFO - Setting up database...
2024-08-08 16:25:03,558 - app - INFO - Starting database setup...
2024-08-08 16:25:04,295 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 16:25:04,295 - app - INFO - Database setup completed successfully
2024-08-08 16:25:04,296 - app - INFO - Registering error handler...
2024-08-08 16:25:04,297 - app - INFO - Initializing CLI commands...
2024-08-08 16:25:04,297 - app - INFO - Registering routes...
2024-08-08 16:25:04,306 - app - INFO - Initializing services...
2024-08-08 16:25:04,320 - app - INFO - Initializing email service...
2024-08-08 16:25:04,321 - app - INFO - Setting up scheduler...
2024-08-08 16:25:04,326 - app - INFO - Initializing scheduler...
2024-08-08 16:25:04,327 - app.scheduler - INFO - Scheduler initialized
2024-08-08 16:25:04,327 - app - INFO - Application initialized successfully
2024-08-08 16:25:14,367 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:25:14,946 - app.database - INFO - Database connection established successfully
2024-08-08 16:25:15,794 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 16:25:15,795 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:25:16,107 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:25:16,402 - app.database - INFO - Database connection established successfully
2024-08-08 16:25:16,449 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 16:25:16,677 - app.database - INFO - Database connection established successfully
2024-08-08 16:25:16,777 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 16:25:16,778 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:25:17,057 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:25:17,377 - app.database - INFO - Database connection established successfully
2024-08-08 16:25:17,425 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 16:25:17,708 - app.database - INFO - Database connection established successfully
2024-08-08 16:25:18,096 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:25:18,630 - app.database - INFO - Database connection established successfully
2024-08-08 16:25:18,780 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:25:19,475 - app.database - INFO - Database connection established successfully
2024-08-08 16:25:24,132 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 16:25:24,133 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:25:24,714 - app.database - INFO - Database connection established successfully
2024-08-08 16:25:24,751 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 16:25:25,019 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 16:25:25,211 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:25:25,222 - app.services.trial_matching_service - INFO - Calling Anthropic service for user 66af0d2d118d8e248b49a856
2024-08-08 16:25:25,265 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:25:25,266 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:25:34,138 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 16:30:52,859 - app - INFO - Initializing Flask app...
2024-08-08 16:30:52,861 - app - INFO - Configuring app...
2024-08-08 16:30:52,862 - app - INFO - Setting up CORS...
2024-08-08 16:30:52,862 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 16:30:52,863 - app - INFO - Initializing JWT manager...
2024-08-08 16:30:52,863 - app - INFO - Setting up rate limiting...
2024-08-08 16:30:52,864 - app - INFO - Setting up database...
2024-08-08 16:30:52,865 - app - INFO - Starting database setup...
2024-08-08 16:30:53,661 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 16:30:53,661 - app - INFO - Database setup completed successfully
2024-08-08 16:30:53,662 - app - INFO - Registering error handler...
2024-08-08 16:30:53,662 - app - INFO - Initializing CLI commands...
2024-08-08 16:30:53,663 - app - INFO - Registering routes...
2024-08-08 16:30:53,682 - app - INFO - Initializing services...
2024-08-08 16:30:53,700 - app - INFO - Initializing email service...
2024-08-08 16:30:53,701 - app - INFO - Setting up scheduler...
2024-08-08 16:30:53,709 - app - INFO - Initializing scheduler...
2024-08-08 16:30:53,714 - app.scheduler - INFO - Scheduler initialized
2024-08-08 16:30:53,714 - app - INFO - Application initialized successfully
2024-08-08 16:30:57,055 - app - INFO - Initializing Flask app...
2024-08-08 16:30:57,059 - app - INFO - Configuring app...
2024-08-08 16:30:57,060 - app - INFO - Setting up CORS...
2024-08-08 16:30:57,060 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 16:30:57,061 - app - INFO - Initializing JWT manager...
2024-08-08 16:30:57,062 - app - INFO - Setting up rate limiting...
2024-08-08 16:30:57,064 - app - INFO - Setting up database...
2024-08-08 16:30:57,066 - app - INFO - Starting database setup...
2024-08-08 16:30:57,720 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 16:30:57,720 - app - INFO - Database setup completed successfully
2024-08-08 16:30:57,721 - app - INFO - Registering error handler...
2024-08-08 16:30:57,721 - app - INFO - Initializing CLI commands...
2024-08-08 16:30:57,722 - app - INFO - Registering routes...
2024-08-08 16:30:57,735 - app - INFO - Initializing services...
2024-08-08 16:30:57,757 - app - INFO - Initializing email service...
2024-08-08 16:30:57,758 - app - INFO - Setting up scheduler...
2024-08-08 16:30:57,771 - app - INFO - Initializing scheduler...
2024-08-08 16:30:57,772 - app.scheduler - INFO - Scheduler initialized
2024-08-08 16:30:57,773 - app - INFO - Application initialized successfully
2024-08-08 16:31:10,516 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:31:11,085 - app.database - INFO - Database connection established successfully
2024-08-08 16:31:11,926 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 16:31:11,929 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:31:12,224 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:31:12,588 - app.database - INFO - Database connection established successfully
2024-08-08 16:31:12,627 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 16:31:12,772 - app.database - INFO - Database connection established successfully
2024-08-08 16:31:12,949 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 16:31:12,950 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:31:13,136 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:31:13,478 - app.database - INFO - Database connection established successfully
2024-08-08 16:31:13,518 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 16:31:13,676 - app.database - INFO - Database connection established successfully
2024-08-08 16:31:15,094 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:31:15,619 - app.database - INFO - Database connection established successfully
2024-08-08 16:31:15,721 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:31:16,255 - app.database - INFO - Database connection established successfully
2024-08-08 16:31:17,384 - app.services.trial_matching_service - INFO - Starting matching process for user: 66af0d2d118d8e248b49a856
2024-08-08 16:31:17,385 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:31:17,953 - app.database - INFO - Database connection established successfully
2024-08-08 16:31:17,994 - app.services.trial_matching_service - INFO - Patient profile found for user 66af0d2d118d8e248b49a856
2024-08-08 16:31:18,035 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 16:31:18,208 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:31:18,220 - app.services.trial_matching_service - INFO - Calling Anthropic service for user 66af0d2d118d8e248b49a856
2024-08-08 16:31:18,263 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:31:18,265 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:31:27,391 - app.services.trial_matching_service - INFO - Matching task cancelled for user 66af0d2d118d8e248b49a856
2024-08-08 16:38:46,333 - app - INFO - Initializing Flask app...
2024-08-08 16:38:46,335 - app - INFO - Configuring app...
2024-08-08 16:38:46,335 - app - INFO - Setting up CORS...
2024-08-08 16:38:46,336 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 16:38:46,336 - app - INFO - Initializing JWT manager...
2024-08-08 16:38:46,337 - app - INFO - Setting up rate limiting...
2024-08-08 16:38:46,338 - app - INFO - Setting up database...
2024-08-08 16:38:46,339 - app - INFO - Starting database setup...
2024-08-08 16:38:47,079 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 16:38:47,079 - app - INFO - Database setup completed successfully
2024-08-08 16:38:47,079 - app - INFO - Registering error handler...
2024-08-08 16:38:47,080 - app - INFO - Initializing CLI commands...
2024-08-08 16:38:47,080 - app - INFO - Registering routes...
2024-08-08 16:38:47,118 - app - INFO - Initializing services...
2024-08-08 16:38:47,133 - app - INFO - Initializing email service...
2024-08-08 16:38:47,133 - app - INFO - Setting up scheduler...
2024-08-08 16:38:47,139 - app - INFO - Initializing scheduler...
2024-08-08 16:38:47,140 - app.scheduler - INFO - Scheduler initialized
2024-08-08 16:38:47,141 - app - INFO - Application initialized successfully
2024-08-08 16:38:51,399 - app - INFO - Initializing Flask app...
2024-08-08 16:38:51,402 - app - INFO - Configuring app...
2024-08-08 16:38:51,403 - app - INFO - Setting up CORS...
2024-08-08 16:38:51,403 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 16:38:51,404 - app - INFO - Initializing JWT manager...
2024-08-08 16:38:51,405 - app - INFO - Setting up rate limiting...
2024-08-08 16:38:51,407 - app - INFO - Setting up database...
2024-08-08 16:38:51,409 - app - INFO - Starting database setup...
2024-08-08 16:38:52,130 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 16:38:52,130 - app - INFO - Database setup completed successfully
2024-08-08 16:38:52,131 - app - INFO - Registering error handler...
2024-08-08 16:38:52,131 - app - INFO - Initializing CLI commands...
2024-08-08 16:38:52,132 - app - INFO - Registering routes...
2024-08-08 16:38:52,144 - app - INFO - Initializing services...
2024-08-08 16:38:52,164 - app - INFO - Initializing email service...
2024-08-08 16:38:52,165 - app - INFO - Setting up scheduler...
2024-08-08 16:38:52,178 - app - INFO - Initializing scheduler...
2024-08-08 16:38:52,180 - app.scheduler - INFO - Scheduler initialized
2024-08-08 16:38:52,182 - app - INFO - Application initialized successfully
2024-08-08 16:39:05,548 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:39:06,150 - app.database - INFO - Database connection established successfully
2024-08-08 16:39:06,990 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 16:39:06,991 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:39:07,300 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:39:07,594 - app.database - INFO - Database connection established successfully
2024-08-08 16:39:07,637 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 16:39:07,878 - app.database - INFO - Database connection established successfully
2024-08-08 16:39:07,970 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 16:39:07,971 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:39:08,249 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:39:08,502 - app.database - INFO - Database connection established successfully
2024-08-08 16:39:08,546 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 16:39:08,788 - app.database - INFO - Database connection established successfully
2024-08-08 16:39:10,235 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:39:10,792 - app.database - INFO - Database connection established successfully
2024-08-08 16:39:10,902 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:39:11,603 - app.database - INFO - Database connection established successfully
2024-08-08 16:39:12,344 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66af0d2d118d8e248b49a856
2024-08-08 16:39:12,344 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:39:12,893 - app.database - INFO - Database connection established successfully
2024-08-08 16:39:12,977 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 16:39:13,166 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:39:13,225 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:39:13,227 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:39:20,846 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:39:20,847 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications.\n\nThe clinical trials provided are focused on:\n1. Chronic Myelogenous Leukemia\n2. Erectile Dysfunction and Benign Prostatic Hyperplasia\n3. Smoking and exposure to smoke constituents\n4. Alcohol abuse and its effects on adolescent brain development\n\nThese trials do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]...
2024-08-08 16:39:20,847 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications.\n\nThe clinical trials provided are focused on:\n1. Chronic Myelogenous Leukemia\n2. Erectile Dysfunction and Benign Prostatic Hyperplasia\n3. Smoking and exposure to smoke constituents\n4. Alcohol abuse and its effects on adolescent brain development\n\nThese trials do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-08 16:39:20,850 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient, Ethan Brush, has depression and anxiety as medical conditions and is taking Escitalopram. None of the provided clinical trials are directly related to these conditions or medications.

The clinical trials provided are focused on:
1. Chronic Myelogenous Leukemia
2. Erectile Dysfunction and Benign Prostatic Hyperplasia
3. Smoking and exposure to smoke constituents
4. Alcohol abuse and its effects on adolescent brain development

These trials do not align with the patient's profile, resulting in low compatibility scores (below 70) for all trials.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-08 16:39:20,850 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:39:20,850 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:39:20,851 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:39:20,851 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 50, Total trials: 4585
2024-08-08 16:39:22,046 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:39:22,068 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:39:22,069 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:39:29,217 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:39:29,217 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31 years old, male, with depression and anxiety) does not align closely with the eligibility criteria or focus of the provided clinical trial (NCT04690179), which is about sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]...
2024-08-08 16:39:29,218 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31 years old, male, with depression and anxiety) does not align closely with the eligibility criteria or focus of the provided clinical trial (NCT04690179), which is about sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-08 16:39:29,218 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, 31 years old, male, with depression and anxiety) does not align closely with the eligibility criteria or focus of the provided clinical trial (NCT04690179), which is about sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-08 16:39:29,219 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:39:29,220 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:39:29,220 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:39:29,221 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 100, Total trials: 4585
2024-08-08 16:39:30,411 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:39:30,424 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:39:30,424 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:39:38,284 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:39:38,284 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials directly relate to these conditions or medications. The trials focus on:\n\n1. Heart disease risk factors and aging\n2. Diabetes prevention in specific ethnic groups\n3. PTSD in military veterans\n4. Virtual reality for children with cerebral palsy\n\nThese trials either target different conditions, age groups, or specific populations that don't match Ethan's profile. As a result, none of the trials reach the threshold of 70 or higher for compatibility.", type='text')]...
2024-08-08 16:39:38,285 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials directly relate to these conditions or medications. The trials focus on:\n\n1. Heart disease risk factors and aging\n2. Diabetes prevention in specific ethnic groups\n3. PTSD in military veterans\n4. Virtual reality for children with cerebral palsy\n\nThese trials either target different conditions, age groups, or specific populations that don't match Ethan's profile. As a result, none of the trials reach the threshold of 70 or higher for compatibility.", type='text')]
2024-08-08 16:39:38,285 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram. None of the provided clinical trials directly relate to these conditions or medications. The trials focus on:

1. Heart disease risk factors and aging
2. Diabetes prevention in specific ethnic groups
3. PTSD in military veterans
4. Virtual reality for children with cerebral palsy

These trials either target different conditions, age groups, or specific populations that don't match Ethan's profile. As a result, none of the trials reach the threshold of 70 or higher for compatibility.
2024-08-08 16:39:38,286 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:39:38,286 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:39:38,287 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:39:38,287 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 150, Total trials: 4585
2024-08-08 16:39:39,484 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:39:39,507 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:39:39,507 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:39:50,680 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:39:50,681 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. NCT02244879 (Effects of Resveratrol on Inflammation in Type 2 Diabetic Patients):\n   - The patient does not have Type 2 Diabetes Mellitus, which is the primary condition for this trial.\n   - The patient's medical conditions (depression and anxiety) are not relevant to this study.\n   - The patient's age (31) is below the minimum age requirement (35 years and older).\n\n2. NCT02841579 (Osimertinib in First-line Locally Advanced or Metastatic NSCLC Patients):\n   - The patient does not have Non-Small Cell Lung Cancer, which is the primary condition for this trial.\n   - The patient's medical conditions (depression and anxiety) are not relevant to this study.\n   - The trial is specifically for cancer patients with EGFR mutations, which doesn't apply to this patient.\n\nGiven these factors, neither trial is sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:\n\n[]", type='text')]...
2024-08-08 16:39:50,681 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:\n\n1. NCT02244879 (Effects of Resveratrol on Inflammation in Type 2 Diabetic Patients):\n   - The patient does not have Type 2 Diabetes Mellitus, which is the primary condition for this trial.\n   - The patient's medical conditions (depression and anxiety) are not relevant to this study.\n   - The patient's age (31) is below the minimum age requirement (35 years and older).\n\n2. NCT02841579 (Osimertinib in First-line Locally Advanced or Metastatic NSCLC Patients):\n   - The patient does not have Non-Small Cell Lung Cancer, which is the primary condition for this trial.\n   - The patient's medical conditions (depression and anxiety) are not relevant to this study.\n   - The trial is specifically for cancer patients with EGFR mutations, which doesn't apply to this patient.\n\nGiven these factors, neither trial is sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-08 16:39:50,681 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that there are no suitable matches with a compatibility score of 70 or higher. Here's why:

1. NCT02244879 (Effects of Resveratrol on Inflammation in Type 2 Diabetic Patients):
   - The patient does not have Type 2 Diabetes Mellitus, which is the primary condition for this trial.
   - The patient's medical conditions (depression and anxiety) are not relevant to this study.
   - The patient's age (31) is below the minimum age requirement (35 years and older).

2. NCT02841579 (Osimertinib in First-line Locally Advanced or Metastatic NSCLC Patients):
   - The patient does not have Non-Small Cell Lung Cancer, which is the primary condition for this trial.
   - The patient's medical conditions (depression and anxiety) are not relevant to this study.
   - The trial is specifically for cancer patients with EGFR mutations, which doesn't apply to this patient.

Given these factors, neither trial is sufficiently compatible with the patient's profile to warrant a score of 70 or higher. Therefore, the output is an empty array:

[]
2024-08-08 16:39:50,681 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:39:50,681 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:39:50,682 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:39:50,682 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 200, Total trials: 4585
2024-08-08 16:39:51,873 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:39:51,890 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:39:51,890 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:39:57,819 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:39:57,820 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. Here's the reasoning:\n\n1. NCT03059979 (Systemic Sclerosis trial):\n   - The patient doesn't have systemic sclerosis or Raynaud's phenomenon.\n   - The trial is focused on very specific conditions that the patient doesn't have.\n\n2. NCT00293579 (Head and Neck Cancer trial):\n   - The patient doesn't have head and neck cancer.\n   - The trial is specifically for cancer patients, which doesn't match the patient's profile.\n\n3. NCT04491279 (Stroke trial):\n   - The patient doesn't have a history of stroke.\n   - The trial is specifically for chronic stroke patients, which doesn't match the patient's profile.\n\nThe patient's primary conditions are depression and anxiety, which are not addressed by any of the provided clinical trials. Additionally, the patient's age (31 years old) and medication (Escitalopram) are not relevant to any of the trials' eligibility criteria.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]...
2024-08-08 16:39:57,821 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. Here's the reasoning:\n\n1. NCT03059979 (Systemic Sclerosis trial):\n   - The patient doesn't have systemic sclerosis or Raynaud's phenomenon.\n   - The trial is focused on very specific conditions that the patient doesn't have.\n\n2. NCT00293579 (Head and Neck Cancer trial):\n   - The patient doesn't have head and neck cancer.\n   - The trial is specifically for cancer patients, which doesn't match the patient's profile.\n\n3. NCT04491279 (Stroke trial):\n   - The patient doesn't have a history of stroke.\n   - The trial is specifically for chronic stroke patients, which doesn't match the patient's profile.\n\nThe patient's primary conditions are depression and anxiety, which are not addressed by any of the provided clinical trials. Additionally, the patient's age (31 years old) and medication (Escitalopram) are not relevant to any of the trials' eligibility criteria.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-08 16:39:57,821 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no trials that match with a compatibility score of 70 or higher. Here's the reasoning:

1. NCT03059979 (Systemic Sclerosis trial):
   - The patient doesn't have systemic sclerosis or Raynaud's phenomenon.
   - The trial is focused on very specific conditions that the patient doesn't have.

2. NCT00293579 (Head and Neck Cancer trial):
   - The patient doesn't have head and neck cancer.
   - The trial is specifically for cancer patients, which doesn't match the patient's profile.

3. NCT04491279 (Stroke trial):
   - The patient doesn't have a history of stroke.
   - The trial is specifically for chronic stroke patients, which doesn't match the patient's profile.

The patient's primary conditions are depression and anxiety, which are not addressed by any of the provided clinical trials. Additionally, the patient's age (31 years old) and medication (Escitalopram) are not relevant to any of the trials' eligibility criteria.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-08 16:39:57,823 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:39:57,823 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:39:57,824 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:39:57,825 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 250, Total trials: 4585
2024-08-08 16:39:59,020 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:39:59,045 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:39:59,045 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:40:07,750 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:40:07,750 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasoning:\n1. The patient's main medical conditions are depression and anxiety, which do not match the focus of any of the provided clinical trials.\n2. The patient's age (31 years old) and gender (male) do not specifically match any of the trial's inclusion criteria.\n3. The patient's medication (Escitalopram) is not relevant to any of the trials' focuses.\n4. The clinical trials provided are focused on:\n   - Scalp cooling for metastatic breast cancer patients\n   - Extracorporeal photopheresis for lung transplant patients\n   - Workplace health and safety training\n   - Choroidal thickness measurements related to refractive errors\n\nNone of these trials align closely with the patient's profile, resulting in compatibility scores below the 70-point threshold for all trials.", type='text')]...
2024-08-08 16:40:07,751 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasoning:\n1. The patient's main medical conditions are depression and anxiety, which do not match the focus of any of the provided clinical trials.\n2. The patient's age (31 years old) and gender (male) do not specifically match any of the trial's inclusion criteria.\n3. The patient's medication (Escitalopram) is not relevant to any of the trials' focuses.\n4. The clinical trials provided are focused on:\n   - Scalp cooling for metastatic breast cancer patients\n   - Extracorporeal photopheresis for lung transplant patients\n   - Workplace health and safety training\n   - Choroidal thickness measurements related to refractive errors\n\nNone of these trials align closely with the patient's profile, resulting in compatibility scores below the 70-point threshold for all trials.", type='text')]
2024-08-08 16:40:07,752 - app.services.anthropic_service - INFO - Parsing response: After carefully reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasoning:
1. The patient's main medical conditions are depression and anxiety, which do not match the focus of any of the provided clinical trials.
2. The patient's age (31 years old) and gender (male) do not specifically match any of the trial's inclusion criteria.
3. The patient's medication (Escitalopram) is not relevant to any of the trials' focuses.
4. The clinical trials provided are focused on:
   - Scalp cooling for metastatic breast cancer patients
   - Extracorporeal photopheresis for lung transplant patients
   - Workplace health and safety training
   - Choroidal thickness measurements related to refractive errors

None of these trials align closely with the patient's profile, resulting in compatibility scores below the 70-point threshold for all trials.
2024-08-08 16:40:07,752 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:40:07,753 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:40:07,753 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:40:07,753 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 300, Total trials: 4585
2024-08-08 16:40:08,927 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:40:08,942 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:40:08,942 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:40:13,831 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:40:13,833 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on conditions like hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and advanced left ventricular heart failure.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]...
2024-08-08 16:40:13,834 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on conditions like hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and advanced left ventricular heart failure.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-08 16:40:13,835 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's profile (a 31-year-old male with depression and anxiety) doesn't align closely with the conditions and eligibility criteria of the provided clinical trials, which focus on conditions like hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and advanced left ventricular heart failure.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-08 16:40:13,836 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:40:13,836 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:40:13,837 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:40:13,838 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 350, Total trials: 4585
2024-08-08 16:40:15,028 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:40:15,060 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:40:15,061 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:40:21,355 - app.services.trial_matching_service - INFO - Stop signal sent for user 66af0d2d118d8e248b49a856
2024-08-08 16:40:25,924 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:40:26,533 - app.database - INFO - Database connection established successfully
2024-08-08 16:40:31,459 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:40:31,459 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by any of the three clinical trials presented.\n\nHere's why:\n\n1. NCT06289179 (Thyroid and Cortisol Hormone Response to Sepsis):\n   - This trial is for sepsis patients, which doesn't match the patient's conditions.\n   - The patient doesn't have sepsis or any related conditions mentioned.\n\n2. NCT03221179 (Safety, Tolerability, Pharmacokinetics, and Pharmacodynamics of RO7049665 in Healthy Volunteers):\n   - This trial is for healthy volunteers, but the patient has existing medical conditions (depression and anxiety).\n   - The patient is taking medication (Escitalopram), which would likely exclude him from a healthy volunteer study.\n\n3. NCT00228579 (Assessment of Changes in Abdominal Fat):\n   - This trial is focused on obesity in women, which doesn't match the patient's gender or reported conditions.\n   - The study specifically excludes males.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nNone of the provided trials are suitable for this patient with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 16:40:31,460 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by any of the three clinical trials presented.\n\nHere's why:\n\n1. NCT06289179 (Thyroid and Cortisol Hormone Response to Sepsis):\n   - This trial is for sepsis patients, which doesn't match the patient's conditions.\n   - The patient doesn't have sepsis or any related conditions mentioned.\n\n2. NCT03221179 (Safety, Tolerability, Pharmacokinetics, and Pharmacodynamics of RO7049665 in Healthy Volunteers):\n   - This trial is for healthy volunteers, but the patient has existing medical conditions (depression and anxiety).\n   - The patient is taking medication (Escitalopram), which would likely exclude him from a healthy volunteer study.\n\n3. NCT00228579 (Assessment of Changes in Abdominal Fat):\n   - This trial is focused on obesity in women, which doesn't match the patient's gender or reported conditions.\n   - The study specifically excludes males.\n\nTherefore, the output in the requested JSON format would be an empty array:\n\n[]\n\nNone of the provided trials are suitable for this patient with a compatibility score of 70 or higher.", type='text')]
2024-08-08 16:40:31,461 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by any of the three clinical trials presented.

Here's why:

1. NCT06289179 (Thyroid and Cortisol Hormone Response to Sepsis):
   - This trial is for sepsis patients, which doesn't match the patient's conditions.
   - The patient doesn't have sepsis or any related conditions mentioned.

2. NCT03221179 (Safety, Tolerability, Pharmacokinetics, and Pharmacodynamics of RO7049665 in Healthy Volunteers):
   - This trial is for healthy volunteers, but the patient has existing medical conditions (depression and anxiety).
   - The patient is taking medication (Escitalopram), which would likely exclude him [SQL REDACTED] a healthy volunteer study.

3. NCT00228579 (Assessment of Changes in Abdominal Fat):
   - This trial is focused on obesity in women, which doesn't match the patient's gender or reported conditions.
   - The study specifically excludes males.

Therefore, the output in the requested JSON format would be an empty array:

[]

None of the provided trials are suitable for this patient with a compatibility score of 70 or higher.
2024-08-08 16:40:31,461 - app.services.anthropic_service - ERROR - Error parsing matching response: Expecting value: line 1 column 2 (char 1)
2024-08-08 16:40:31,462 - app.services.anthropic_service - ERROR - Response content: Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (Ethan Brush, a 31-year-old male with depression and anxiety) does not align closely with the eligibility criteria or conditions targeted by any of the three clinical trials presented.

Here's why:

1. NCT06289179 (Thyroid and Cortisol Hormone Response to Sepsis):
   - This trial is for sepsis patients, which doesn't match the patient's conditions.
   - The patient doesn't have sepsis or any related conditions mentioned.

2. NCT03221179 (Safety, Tolerability, Pharmacokinetics, and Pharmacodynamics of RO7049665 in Healthy Volunteers):
   - This trial is for healthy volunteers, but the patient has existing medical conditions (depression and anxiety).
   - The patient is taking medication (Escitalopram), which would likely exclude him [SQL REDACTED] a healthy volunteer study.

3. NCT00228579 (Assessment of Changes in Abdominal Fat):
   - This trial is focused on obesity in women, which doesn't match the patient's gender or reported conditions.
   - The study specifically excludes males.

Therefore, the output in the requested JSON format would be an empty array:

[]

None of the provided trials are suitable for this patient with a compatibility score of 70 or higher.
2024-08-08 16:40:31,462 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:40:31,463 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:40:31,463 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 400, Total trials: 4585
2024-08-08 16:40:32,466 - app.services.trial_matching_service - INFO - No new matching trials found for user: 66af0d2d118d8e248b49a856
2024-08-08 16:41:14,312 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66af0d2d118d8e248b49a856
2024-08-08 16:41:14,313 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:41:15,346 - app.database - INFO - Database connection established successfully
2024-08-08 16:41:15,423 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 16:41:15,646 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:41:15,666 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:41:15,667 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:41:23,614 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:41:23,615 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data provided, I have determined that none of the clinical trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The provided clinical trials are focused on:\n   - Chronic myelogenous leukemia (NCT00072579)\n   - Erectile dysfunction and benign prostatic hyperplasia (NCT00517179)\n   - Smoking and exposure to smoke constituents (NCT00812279)\n   - Adolescent alcohol use and brain development (NCT01511679)\n\nNone of these trials are directly related to the patient's conditions (depression and anxiety) or age group. The patient also doesn't meet the specific eligibility criteria for any of the trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 16:41:23,615 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and clinical trial data provided, I have determined that none of the clinical trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.\n2. The provided clinical trials are focused on:\n   - Chronic myelogenous leukemia (NCT00072579)\n   - Erectile dysfunction and benign prostatic hyperplasia (NCT00517179)\n   - Smoking and exposure to smoke constituents (NCT00812279)\n   - Adolescent alcohol use and brain development (NCT01511679)\n\nNone of these trials are directly related to the patient's conditions (depression and anxiety) or age group. The patient also doesn't meet the specific eligibility criteria for any of the trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-08 16:41:23,615 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data provided, I have determined that none of the clinical trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Ethan Brush, is a 31-year-old male with depression and anxiety, taking Escitalopram.
2. The provided clinical trials are focused on:
   - Chronic myelogenous leukemia (NCT00072579)
   - Erectile dysfunction and benign prostatic hyperplasia (NCT00517179)
   - Smoking and exposure to smoke constituents (NCT00812279)
   - Adolescent alcohol use and brain development (NCT01511679)

None of these trials are directly related to the patient's conditions (depression and anxiety) or age group. The patient also doesn't meet the specific eligibility criteria for any of the trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-08 16:41:23,615 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:41:23,615 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:41:23,616 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:41:23,616 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 50, Total trials: 4585
2024-08-08 16:41:24,787 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:41:24,813 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:41:24,813 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:41:31,930 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:41:31,931 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not align well with the provided clinical trial, which is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery patients.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no match include:\n1. The patient's medical conditions (depression and anxiety) are not related to the trial's focus (sarcopenia, obesity, incisional hernia).\n2. The patient's age (31 years old) doesn't align with the typical demographic for sarcopenia studies, which often focus on older adults.\n3. There's no indication in the patient profile of any abdominal surgery history or hernia issues, which are key aspects of the trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]...
2024-08-08 16:41:31,931 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not align well with the provided clinical trial, which is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery patients.\n\nTherefore, the output is an empty array:\n\n[]\n\nThe reasons for no match include:\n1. The patient's medical conditions (depression and anxiety) are not related to the trial's focus (sarcopenia, obesity, incisional hernia).\n2. The patient's age (31 years old) doesn't align with the typical demographic for sarcopenia studies, which often focus on older adults.\n3. There's no indication in the patient profile of any abdominal surgery history or hernia issues, which are key aspects of the trial.\n4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.", type='text')]
2024-08-08 16:41:31,931 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile (young adult male with depression and anxiety) does not align well with the provided clinical trial, which is focused on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery patients.

Therefore, the output is an empty array:

[]

The reasons for no match include:
1. The patient's medical conditions (depression and anxiety) are not related to the trial's focus (sarcopenia, obesity, incisional hernia).
2. The patient's age (31 years old) doesn't align with the typical demographic for sarcopenia studies, which often focus on older adults.
3. There's no indication in the patient profile of any abdominal surgery history or hernia issues, which are key aspects of the trial.
4. The patient's medication (Escitalopram) is not relevant to the conditions being studied in the trial.
2024-08-08 16:41:31,931 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:41:31,932 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:41:31,932 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:41:31,932 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 100, Total trials: 4585
2024-08-08 16:41:33,121 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:41:33,138 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:41:33,138 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:41:40,937 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:41:40,937 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNone of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Here's a brief overview of why:\n\n1. NCT00626379: This trial focuses on heart disease and cardiovascular health. The patient's profile doesn't mention any heart-related conditions.\n\n2. NCT03530579: This trial is for diabetes prevention among Korean and South Asian Americans. The patient is not mentioned to be of Korean or South Asian descent, nor is diabetes mentioned in their profile.\n\n3. NCT05900479: This trial is for veterans with PTSD. The patient's profile doesn't indicate military service or PTSD.\n\n4. NCT04679779: This trial is for children with cerebral palsy. The patient is an adult (born in 1992) and doesn't have cerebral palsy mentioned in their profile.\n\nThe patient's profile indicates depression and anxiety, which are not the focus of any of the provided clinical trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 16:41:40,938 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNone of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Here's a brief overview of why:\n\n1. NCT00626379: This trial focuses on heart disease and cardiovascular health. The patient's profile doesn't mention any heart-related conditions.\n\n2. NCT03530579: This trial is for diabetes prevention among Korean and South Asian Americans. The patient is not mentioned to be of Korean or South Asian descent, nor is diabetes mentioned in their profile.\n\n3. NCT05900479: This trial is for veterans with PTSD. The patient's profile doesn't indicate military service or PTSD.\n\n4. NCT04679779: This trial is for children with cerebral palsy. The patient is an adult (born in 1992) and doesn't have cerebral palsy mentioned in their profile.\n\nThe patient's profile indicates depression and anxiety, which are not the focus of any of the provided clinical trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-08 16:41:40,938 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:

[]

Explanation:
None of the provided clinical trials match the patient's profile with a compatibility score of 70 or higher. Here's a brief overview of why:

1. NCT00626379: This trial focuses on heart disease and cardiovascular health. The patient's profile doesn't mention any heart-related conditions.

2. NCT03530579: This trial is for diabetes prevention among Korean and South Asian Americans. The patient is not mentioned to be of Korean or South Asian descent, nor is diabetes mentioned in their profile.

3. NCT05900479: This trial is for veterans with PTSD. The patient's profile doesn't indicate military service or PTSD.

4. NCT04679779: This trial is for children with cerebral palsy. The patient is an adult (born in 1992) and doesn't have cerebral palsy mentioned in their profile.

The patient's profile indicates depression and anxiety, which are not the focus of any of the provided clinical trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-08 16:41:40,938 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:41:40,938 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:41:40,939 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:41:40,939 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 150, Total trials: 4585
2024-08-08 16:41:42,161 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:41:42,183 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:41:42,183 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:41:50,837 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:41:50,838 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02244879) is focused on type 2 diabetes, inflammation, insulin resistance, and bone disorders. The patient's profile doesn't mention any of these conditions, so this trial is not a match.\n\n2. The second trial (NCT02841579) is for non-small cell lung cancer patients with specific EGFR mutations. The patient's profile doesn't mention lung cancer or any EGFR mutations, so this trial is also not a match.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 16:41:50,839 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT02244879) is focused on type 2 diabetes, inflammation, insulin resistance, and bone disorders. The patient's profile doesn't mention any of these conditions, so this trial is not a match.\n\n2. The second trial (NCT02841579) is for non-small cell lung cancer patients with specific EGFR mutations. The patient's profile doesn't mention lung cancer or any EGFR mutations, so this trial is also not a match.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-08 16:41:50,840 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT02244879) is focused on type 2 diabetes, inflammation, insulin resistance, and bone disorders. The patient's profile doesn't mention any of these conditions, so this trial is not a match.

2. The second trial (NCT02841579) is for non-small cell lung cancer patients with specific EGFR mutations. The patient's profile doesn't mention lung cancer or any EGFR mutations, so this trial is also not a match.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. Neither of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-08 16:41:50,840 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:41:50,841 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:41:50,841 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:41:50,841 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 200, Total trials: 4585
2024-08-08 16:41:52,060 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66af0d2d118d8e248b49a856
2024-08-08 16:41:52,083 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:41:52,085 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:41:52,520 - app.services.trial_matching_service - INFO - Stop signal sent for user 66af0d2d118d8e248b49a856
2024-08-08 16:41:58,718 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:41:58,718 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 16:41:58,718 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.\n2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.\n3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.\n\nThe patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-08 16:41:58,718 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which are not conditions the patient has.
2. The second trial (NCT00293579) is for Head and Neck Cancer, which is not a condition the patient has.
3. The third trial (NCT04491279) is for Stroke patients, which is not a condition the patient has.

The patient's profile indicates they have depression and anxiety, and are taking Escitalopram. None of the provided clinical trials are related to these conditions or medications. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-08 16:41:58,719 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:41:58,719 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:41:58,719 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:41:58,719 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 250, Total trials: 4585
2024-08-08 16:41:59,727 - app.services.trial_matching_service - INFO - No new matching trials found for user: 66af0d2d118d8e248b49a856
2024-08-08 16:42:18,228 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:18,777 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:19,455 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 16:42:19,455 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:19,733 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:19,975 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:20,022 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 16:42:20,276 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:20,340 - app.routes.patient - INFO - Fetching profile for user: 66af0d2d118d8e248b49a856
2024-08-08 16:42:20,341 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:20,651 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:20,930 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:20,973 - app.routes.patient - INFO - Profile found for user: 66af0d2d118d8e248b49a856
2024-08-08 16:42:21,237 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:37,017 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:37,584 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:46,702 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:47,241 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:47,871 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-08 16:42:47,875 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:48,178 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:48,430 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:48,481 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-08 16:42:48,666 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:48,798 - app.routes.patient - INFO - Fetching profile for user: 66aad4b4c5463e9d7e8724d8
2024-08-08 16:42:48,798 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:49,052 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:49,346 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:49,392 - app.routes.patient - INFO - Profile found for user: 66aad4b4c5463e9d7e8724d8
2024-08-08 16:42:49,624 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:56,193 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:56,681 - app.database - INFO - Database connection established successfully
2024-08-08 16:42:56,829 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:42:57,376 - app.database - INFO - Database connection established successfully
2024-08-08 16:43:09,897 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66aad4b4c5463e9d7e8724d8
2024-08-08 16:43:09,898 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:43:10,590 - app.database - INFO - Database connection established successfully
2024-08-08 16:43:10,668 - app.services.trial_matching_service - INFO - Total trials to process: 4585
2024-08-08 16:43:10,899 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:43:10,915 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:43:10,916 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:43:17,623 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:43:17,624 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 80,\n        "reasons": [\n            "The patient has leukemia, which matches the condition \'Leukemia\' in the trial",\n            "The trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",\n            "The patient\'s age (24 years old) is likely within the acceptable range for the trial",\n            "The patient is male, which is not excluded from the trial",\n            "The patient is currently on leukemia medications, indicating they have undergone initial treatment, which aligns with the trial\'s focus on patients who have received initial therapy"\n        ]\n    }\n]\n\nNote: While this trial shows good compatibility, it\'s important to note that the exact type of leukemia (chronic myelogenous leukemia) and the patient\'s cytogenetic remission status are not specified in the patient profile. These factors would need to be confirmed to ensure full eligibility. The other two trials do not match the patient\'s condition and thus are not included in the results.', type='text')]...
2024-08-08 16:43:17,625 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT00072579",\n        "compatibility_score": 80,\n        "reasons": [\n            "The patient has leukemia, which matches the condition \'Leukemia\' in the trial",\n            "The trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",\n            "The patient\'s age (24 years old) is likely within the acceptable range for the trial",\n            "The patient is male, which is not excluded from the trial",\n            "The patient is currently on leukemia medications, indicating they have undergone initial treatment, which aligns with the trial\'s focus on patients who have received initial therapy"\n        ]\n    }\n]\n\nNote: While this trial shows good compatibility, it\'s important to note that the exact type of leukemia (chronic myelogenous leukemia) and the patient\'s cytogenetic remission status are not specified in the patient profile. These factors would need to be confirmed to ensure full eligibility. The other two trials do not match the patient\'s condition and thus are not included in the results.', type='text')]
2024-08-08 16:43:17,626 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT00072579",
        "compatibility_score": 80,
        "reasons": [
            "The patient has leukemia, which matches the condition 'Leukemia' in the trial",
            "The trial is specifically for chronic myelogenous leukemia, which is a type of leukemia",
            "The patient's age (24 years old) is likely within the acceptable range for the trial",
            "The patient is male, which is not excluded [SQL REDACTED] the trial",
            "The patient is currently on leukemia medications, indicating they have undergone initial treatment, which aligns with the trial's focus on patients who have received initial therapy"
        ]
    }
]

Note: While this trial shows good compatibility, it's important to note that the exact type of leukemia (chronic myelogenous leukemia) and the patient's cytogenetic remission status are not specified in the patient profile. These factors would need to be confirmed to ensure full eligibility. The other two trials do not match the patient's condition and thus are not included in the results.
2024-08-08 16:43:17,626 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-08 16:43:17,627 - app.services.anthropic_service - INFO - Parsed 1 matches from Anthropic response
2024-08-08 16:43:17,665 - app.services.trial_matching_service - INFO - Trial NCT00072579 already matched for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:43:17,666 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: 'TrialMatchingService' object has no attribute 'emit_trial_matches'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 59, in match_patient_to_trials
    await self.emit_trial_matches(str(user_id), new_matches)
AttributeError: 'TrialMatchingService' object has no attribute 'emit_trial_matches'
2024-08-08 16:43:17,686 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 50, Total trials: 4585
2024-08-08 16:43:18,861 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:43:18,881 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:43:18,881 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:43:27,201 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:43:27,201 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile, which indicates a 24-year-old male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe output in the requested JSON format is:\n\n[]\n\nThe reasons for this conclusion include:\n\n1. The patient's primary condition (leukemia) is not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (24 years old) is likely too young for the target population of the study, which seems to focus on older adults more prone to sarcopenia.\n3. There is no indication in the patient's profile of any abdominal wall issues or surgeries, which are the main focus of the clinical trial.\n4. The medications listed in the patient's profile are primarily related to leukemia treatment and are not relevant to the clinical trial's focus.\n\nGiven these significant differences between the patient's profile and the clinical trial's requirements, there is no suitable match with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 16:43:27,202 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the provided patient profile and clinical trial data, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile, which indicates a 24-year-old male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.\n\nThe output in the requested JSON format is:\n\n[]\n\nThe reasons for this conclusion include:\n\n1. The patient's primary condition (leukemia) is not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).\n2. The patient's age (24 years old) is likely too young for the target population of the study, which seems to focus on older adults more prone to sarcopenia.\n3. There is no indication in the patient's profile of any abdominal wall issues or surgeries, which are the main focus of the clinical trial.\n4. The medications listed in the patient's profile are primarily related to leukemia treatment and are not relevant to the clinical trial's focus.\n\nGiven these significant differences between the patient's profile and the clinical trial's requirements, there is no suitable match with a compatibility score of 70 or higher.", type='text')]
2024-08-08 16:43:27,203 - app.services.anthropic_service - INFO - Parsing response: Based on the provided patient profile and clinical trial data, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile, which indicates a 24-year-old male with leukemia, does not align well with the provided clinical trial, which focuses on sarcopenia, sarcopenic obesity, and incisional hernia in complex abdominal wall surgery.

The output in the requested JSON format is:

[]

The reasons for this conclusion include:

1. The patient's primary condition (leukemia) is not related to the conditions studied in the provided clinical trial (sarcopenia, sarcopenic obesity, incisional hernia).
2. The patient's age (24 years old) is likely too young for the target population of the study, which seems to focus on older adults more prone to sarcopenia.
3. There is no indication in the patient's profile of any abdominal wall issues or surgeries, which are the main focus of the clinical trial.
4. The medications listed in the patient's profile are primarily related to leukemia treatment and are not relevant to the clinical trial's focus.

Given these significant differences between the patient's profile and the clinical trial's requirements, there is no suitable match with a compatibility score of 70 or higher.
2024-08-08 16:43:27,203 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:43:27,203 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:43:27,203 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:43:27,204 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 100, Total trials: 4585
2024-08-08 16:43:28,367 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:43:28,379 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:43:28,379 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:43:31,699 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:43:31,699 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by any of the provided clinical trials. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, none of which align with the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]...
2024-08-08 16:43:31,699 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by any of the provided clinical trials. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, none of which align with the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-08 16:43:31,699 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by any of the provided clinical trials. The trials focus on heart disease, diabetes prevention, PTSD in veterans, and cerebral palsy in children, none of which align with the patient's profile.

Therefore, the output is an empty array:

[]
2024-08-08 16:43:31,700 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:43:31,700 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:43:31,700 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:43:31,701 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 150, Total trials: 4585
2024-08-08 16:43:32,876 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:43:32,892 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:43:32,892 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:43:40,369 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:43:40,369 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which does not match the conditions targeted by either of the provided clinical trials (Type 2 Diabetes Mellitus and Non-Small Cell Lung Cancer). Therefore, the output is an empty array:\n\n[]", type='text')]...
2024-08-08 16:43:40,370 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which does not match the conditions targeted by either of the provided clinical trials (Type 2 Diabetes Mellitus and Non-Small Cell Lung Cancer). Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-08 16:43:40,370 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which does not match the conditions targeted by either of the provided clinical trials (Type 2 Diabetes Mellitus and Non-Small Cell Lung Cancer). Therefore, the output is an empty array:

[]
2024-08-08 16:43:40,370 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:43:40,370 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:43:40,371 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:43:40,371 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 200, Total trials: 4585
2024-08-08 16:43:41,576 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:43:41,595 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:43:41,596 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:43:46,687 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:43:46,687 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match the patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT03059979: This trial is for early systemic sclerosis, which doesn't match the patient's condition (leukemia).\n\n2. NCT00293579: This trial is for head and neck cancer patients, which doesn't match the patient's condition.\n\n3. NCT04491279: This trial is for stroke patients, which also doesn't match the patient's condition.\n\nThe patient's primary medical condition is leukemia, and none of the provided clinical trials are related to leukemia or blood cancers. Therefore, the compatibility score for all trials would be very low, certainly below 70.\n\nAs per the instructions, since no trials match with a score of 70 or higher, I'm returning an empty array:\n\n[]", type='text')]...
2024-08-08 16:43:46,688 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match the patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT03059979: This trial is for early systemic sclerosis, which doesn't match the patient's condition (leukemia).\n\n2. NCT00293579: This trial is for head and neck cancer patients, which doesn't match the patient's condition.\n\n3. NCT04491279: This trial is for stroke patients, which also doesn't match the patient's condition.\n\nThe patient's primary medical condition is leukemia, and none of the provided clinical trials are related to leukemia or blood cancers. Therefore, the compatibility score for all trials would be very low, certainly below 70.\n\nAs per the instructions, since no trials match with a score of 70 or higher, I'm returning an empty array:\n\n[]", type='text')]
2024-08-08 16:43:46,688 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match the patient's profile with a compatibility score of 70 or higher. Here's why:

1. NCT03059979: This trial is for early systemic sclerosis, which doesn't match the patient's condition (leukemia).

2. NCT00293579: This trial is for head and neck cancer patients, which doesn't match the patient's condition.

3. NCT04491279: This trial is for stroke patients, which also doesn't match the patient's condition.

The patient's primary medical condition is leukemia, and none of the provided clinical trials are related to leukemia or blood cancers. Therefore, the compatibility score for all trials would be very low, certainly below 70.

As per the instructions, since no trials match with a score of 70 or higher, I'm returning an empty array:

[]
2024-08-08 16:43:46,688 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:43:46,689 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:43:46,689 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:43:46,689 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 250, Total trials: 4585
2024-08-08 16:43:47,872 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:43:47,904 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:43:47,904 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:43:50,971 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:43:50,971 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not specifically addressed in any of the provided clinical trials. Additionally, some trials explicitly exclude patients with hematological malignancies like leukemia. Therefore, the output is an empty array:\n\n[]", type='text')]...
2024-08-08 16:43:50,971 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not specifically addressed in any of the provided clinical trials. Additionally, some trials explicitly exclude patients with hematological malignancies like leukemia. Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-08 16:43:50,972 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not specifically addressed in any of the provided clinical trials. Additionally, some trials explicitly exclude patients with hematological malignancies like leukemia. Therefore, the output is an empty array:

[]
2024-08-08 16:43:50,972 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:43:50,972 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:43:50,973 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:43:50,973 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 300, Total trials: 4585
2024-08-08 16:43:52,215 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:43:52,230 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:43:52,231 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:43:56,195 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:43:56,195 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary condition is leukemia, which is not directly addressed by any of the trials listed. The trials focus on conditions such as chronic hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and advanced refractory left ventricular heart failure. These conditions and their eligibility criteria do not align with the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]...
2024-08-08 16:43:56,195 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary condition is leukemia, which is not directly addressed by any of the trials listed. The trials focus on conditions such as chronic hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and advanced refractory left ventricular heart failure. These conditions and their eligibility criteria do not align with the patient's profile.\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-08 16:43:56,196 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no trials that match with a compatibility score of 70 or higher. The patient's primary condition is leukemia, which is not directly addressed by any of the trials listed. The trials focus on conditions such as chronic hepatitis C in hemodialysis patients, melanoma, ischemic heart failure, and advanced refractory left ventricular heart failure. These conditions and their eligibility criteria do not align with the patient's profile.

Therefore, the output is an empty array:

[]
2024-08-08 16:43:56,196 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:43:56,196 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:43:56,197 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:43:56,197 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 350, Total trials: 4585
2024-08-08 16:43:57,366 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:43:57,396 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:43:57,397 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:02,159 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:44:02,159 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient has leukemia, which is not a condition addressed in any of the provided clinical trials.\n2. The first trial (NCT06289179) is for sepsis patients, which doesn't match the patient's condition.\n3. The second trial (NCT03221179) is for healthy volunteers, which doesn't apply to this patient with leukemia.\n4. The third trial (NCT00228579) is for obesity in women, which doesn't match the patient's gender (male) or condition (leukemia).\n\nGiven these factors, none of the trials are suitable for this patient with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 16:44:02,159 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient has leukemia, which is not a condition addressed in any of the provided clinical trials.\n2. The first trial (NCT06289179) is for sepsis patients, which doesn't match the patient's condition.\n3. The second trial (NCT03221179) is for healthy volunteers, which doesn't apply to this patient with leukemia.\n4. The third trial (NCT00228579) is for obesity in women, which doesn't match the patient's gender (male) or condition (leukemia).\n\nGiven these factors, none of the trials are suitable for this patient with a compatibility score of 70 or higher.", type='text')]
2024-08-08 16:44:02,160 - app.services.anthropic_service - INFO - Parsing response: After reviewing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient has leukemia, which is not a condition addressed in any of the provided clinical trials.
2. The first trial (NCT06289179) is for sepsis patients, which doesn't match the patient's condition.
3. The second trial (NCT03221179) is for healthy volunteers, which doesn't apply to this patient with leukemia.
4. The third trial (NCT00228579) is for obesity in women, which doesn't match the patient's gender (male) or condition (leukemia).

Given these factors, none of the trials are suitable for this patient with a compatibility score of 70 or higher.
2024-08-08 16:44:02,161 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:44:02,161 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:44:02,161 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:44:02,162 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 400, Total trials: 4585
2024-08-08 16:44:03,342 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:03,358 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:03,358 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:08,255 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:44:08,255 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text='Based on the patient profile and the clinical trials provided, here is the matching result:\n\n[\n    {\n        "nct_id": "NCT05639179",\n        "compatibility_score": 90,\n        "reasons": [\n            "The trial is specifically for B-cell Acute Lymphoblastic Leukemia (B-ALL), which is a type of leukemia matching the patient\'s medical condition",\n            "The trial is in Phase 1/2 and recruiting, which means it\'s potentially open for new participants",\n            "The patient\'s age (24 years old) falls within the trial\'s age range (2-75 years)",\n            "The trial is for relapsed/refractory B-ALL patients, which may apply to this patient given their current medications",\n            "The patient\'s gender (male) is not excluded from the trial"\n        ]\n    }\n]', type='text')]...
2024-08-08 16:44:08,257 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and the clinical trials provided, here is the matching result:\n\n[\n    {\n        "nct_id": "NCT05639179",\n        "compatibility_score": 90,\n        "reasons": [\n            "The trial is specifically for B-cell Acute Lymphoblastic Leukemia (B-ALL), which is a type of leukemia matching the patient\'s medical condition",\n            "The trial is in Phase 1/2 and recruiting, which means it\'s potentially open for new participants",\n            "The patient\'s age (24 years old) falls within the trial\'s age range (2-75 years)",\n            "The trial is for relapsed/refractory B-ALL patients, which may apply to this patient given their current medications",\n            "The patient\'s gender (male) is not excluded from the trial"\n        ]\n    }\n]', type='text')]
2024-08-08 16:44:08,258 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, here is the matching result:

[
    {
        "nct_id": "NCT05639179",
        "compatibility_score": 90,
        "reasons": [
            "The trial is specifically for B-cell Acute Lymphoblastic Leukemia (B-ALL), which is a type of leukemia matching the patient's medical condition",
            "The trial is in Phase 1/2 and recruiting, which means it's potentially open for new participants",
            "The patient's age (24 years old) falls within the trial's age range (2-75 years)",
            "The trial is for relapsed/refractory B-ALL patients, which may apply to this patient given their current medications",
            "The patient's gender (male) is not excluded [SQL REDACTED] the trial"
        ]
    }
]
2024-08-08 16:44:08,258 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-08 16:44:08,258 - app.services.anthropic_service - INFO - Parsed 1 matches from Anthropic response
2024-08-08 16:44:08,311 - app.services.trial_matching_service - INFO - Trial NCT05639179 already matched for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:08,311 - app.services.trial_matching_service - ERROR - Error processing batch for user 66aad4b4c5463e9d7e8724d8: 'TrialMatchingService' object has no attribute 'emit_trial_matches'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 59, in match_patient_to_trials
    await self.emit_trial_matches(str(user_id), new_matches)
AttributeError: 'TrialMatchingService' object has no attribute 'emit_trial_matches'
2024-08-08 16:44:08,313 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 450, Total trials: 4585
2024-08-08 16:44:09,490 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:09,518 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:09,520 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:13,470 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:44:13,470 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (24-year-old male with leukemia) does not align well with the eligibility criteria or focus of the provided clinical trials. One trial is for postoperative pain in children aged 2 to <17 years, and the other is for females with Polycystic Ovary Syndrome (PCOS).\n\nTherefore, the output is an empty array:\n\n[]", type='text')]...
2024-08-08 16:44:13,471 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (24-year-old male with leukemia) does not align well with the eligibility criteria or focus of the provided clinical trials. One trial is for postoperative pain in children aged 2 to <17 years, and the other is for females with Polycystic Ovary Syndrome (PCOS).\n\nTherefore, the output is an empty array:\n\n[]", type='text')]
2024-08-08 16:44:13,471 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. The patient's profile (24-year-old male with leukemia) does not align well with the eligibility criteria or focus of the provided clinical trials. One trial is for postoperative pain in children aged 2 to <17 years, and the other is for females with Polycystic Ovary Syndrome (PCOS).

Therefore, the output is an empty array:

[]
2024-08-08 16:44:13,472 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:44:13,473 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:44:13,473 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:44:13,473 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 500, Total trials: 4585
2024-08-08 16:44:14,666 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:14,693 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:14,695 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:19,934 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:44:19,934 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I didn't find any trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, and none of the provided clinical trials are specifically targeting leukemia or related conditions. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n1. The patient has leukemia, but none of the trials are for leukemia treatment.\n2. The provided trials are for conditions like influenza vaccination, postpartum care, colorectal cancer, and physician satisfaction studies, which are not relevant to the patient's condition.\n3. The patient's age (24 years old) and specific medications are not aligned with the eligibility criteria of the provided trials.\n\nIf you have more clinical trials available, particularly ones related to leukemia or hematological disorders, those might be more suitable for this patient.", type='text')]...
2024-08-08 16:44:19,936 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I didn't find any trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, and none of the provided clinical trials are specifically targeting leukemia or related conditions. Therefore, the output is an empty array:\n\n[]\n\nReasons for no matches:\n1. The patient has leukemia, but none of the trials are for leukemia treatment.\n2. The provided trials are for conditions like influenza vaccination, postpartum care, colorectal cancer, and physician satisfaction studies, which are not relevant to the patient's condition.\n3. The patient's age (24 years old) and specific medications are not aligned with the eligibility criteria of the provided trials.\n\nIf you have more clinical trials available, particularly ones related to leukemia or hematological disorders, those might be more suitable for this patient.", type='text')]
2024-08-08 16:44:19,937 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I didn't find any trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, and none of the provided clinical trials are specifically targeting leukemia or related conditions. Therefore, the output is an empty array:

[]

Reasons for no matches:
1. The patient has leukemia, but none of the trials are for leukemia treatment.
2. The provided trials are for conditions like influenza vaccination, postpartum care, colorectal cancer, and physician satisfaction studies, which are not relevant to the patient's condition.
3. The patient's age (24 years old) and specific medications are not aligned with the eligibility criteria of the provided trials.

If you have more clinical trials available, particularly ones related to leukemia or hematological disorders, those might be more suitable for this patient.
2024-08-08 16:44:19,937 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:44:19,937 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:44:19,939 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:44:19,939 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 550, Total trials: 4585
2024-08-08 16:44:21,149 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:21,173 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:21,174 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:25,262 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:44:25,262 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by either of the clinical trials presented. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06378879) is about anesthesia methods during gastroscopy, which is not relevant to the patient's leukemia condition.\n2. The second trial (NCT02710279) focuses on unipolar depression and suicidal behavior, which also doesn't match the patient's profile.\n\nNeither trial addresses leukemia or any of the patient's current medications, resulting in very low compatibility scores (well below 70) for both trials.", type='text')]...
2024-08-08 16:44:25,262 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by either of the clinical trials presented. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT06378879) is about anesthesia methods during gastroscopy, which is not relevant to the patient's leukemia condition.\n2. The second trial (NCT02710279) focuses on unipolar depression and suicidal behavior, which also doesn't match the patient's profile.\n\nNeither trial addresses leukemia or any of the patient's current medications, resulting in very low compatibility scores (well below 70) for both trials.", type='text')]
2024-08-08 16:44:25,263 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I don't find any trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which is not directly addressed by either of the clinical trials presented. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT06378879) is about anesthesia methods during gastroscopy, which is not relevant to the patient's leukemia condition.
2. The second trial (NCT02710279) focuses on unipolar depression and suicidal behavior, which also doesn't match the patient's profile.

Neither trial addresses leukemia or any of the patient's current medications, resulting in very low compatibility scores (well below 70) for both trials.
2024-08-08 16:44:25,263 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:44:25,263 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:44:25,263 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:44:25,264 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 600, Total trials: 4585
2024-08-08 16:44:26,447 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:26,461 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:26,461 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:33,835 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:44:33,835 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT05463679 (Enzastaurin for Vascular Ehlers-Danlos Syndrome):\n   - The patient does not have Vascular Ehlers-Danlos Syndrome.\n   - The age range (18-60) matches, but the condition doesn't.\n\n2. NCT03137979 (Gingiva Mesenchymal Stem Cells for Chronic Periodontitis):\n   - The patient does not have periodontitis.\n   - The age range (35-60) doesn't match the patient's age (24).\n\n3. NCT01733979 (Heme-Iron Polypeptide for Anemia):\n   - While the patient might have anemia due to leukemia, it's not explicitly stated in their profile.\n   - The age range (19-60) matches, but without confirmed anemia, this isn't a strong match.\n\nThe patient's primary condition is leukemia, which none of these trials address. Additionally, the patient is on several medications for leukemia treatment, which might interfere with participation in other studies.\n\nGiven these factors, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that no trials match with a compatibility score of 70 or higher for this patient based on the provided information.", type='text')]...
2024-08-08 16:44:33,835 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT05463679 (Enzastaurin for Vascular Ehlers-Danlos Syndrome):\n   - The patient does not have Vascular Ehlers-Danlos Syndrome.\n   - The age range (18-60) matches, but the condition doesn't.\n\n2. NCT03137979 (Gingiva Mesenchymal Stem Cells for Chronic Periodontitis):\n   - The patient does not have periodontitis.\n   - The age range (35-60) doesn't match the patient's age (24).\n\n3. NCT01733979 (Heme-Iron Polypeptide for Anemia):\n   - While the patient might have anemia due to leukemia, it's not explicitly stated in their profile.\n   - The age range (19-60) matches, but without confirmed anemia, this isn't a strong match.\n\nThe patient's primary condition is leukemia, which none of these trials address. Additionally, the patient is on several medications for leukemia treatment, which might interfere with participation in other studies.\n\nGiven these factors, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that no trials match with a compatibility score of 70 or higher for this patient based on the provided information.", type='text')]
2024-08-08 16:44:33,836 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. NCT05463679 (Enzastaurin for Vascular Ehlers-Danlos Syndrome):
   - The patient does not have Vascular Ehlers-Danlos Syndrome.
   - The age range (18-60) matches, but the condition doesn't.

2. NCT03137979 (Gingiva Mesenchymal Stem Cells for Chronic Periodontitis):
   - The patient does not have periodontitis.
   - The age range (35-60) doesn't match the patient's age (24).

3. NCT01733979 (Heme-Iron Polypeptide for Anemia):
   - While the patient might have anemia due to leukemia, it's not explicitly stated in their profile.
   - The age range (19-60) matches, but without confirmed anemia, this isn't a strong match.

The patient's primary condition is leukemia, which none of these trials address. Additionally, the patient is on several medications for leukemia treatment, which might interfere with participation in other studies.

Given these factors, the output in the requested JSON format would be an empty array:

[]

This indicates that no trials match with a compatibility score of 70 or higher for this patient based on the provided information.
2024-08-08 16:44:33,836 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:44:33,836 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:44:33,836 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:44:33,836 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 650, Total trials: 4585
2024-08-08 16:44:35,112 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:35,135 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:35,136 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:40,409 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:44:40,410 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After reviewing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically targeting leukemia or related conditions. The trials cover various other medical conditions such as hemodynamics during coronary artery bypass surgery, ADHD, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis. These conditions and study focuses are not directly relevant to the patient's primary medical condition of leukemia. Additionally, the patient's age, specific type of leukemia, and current medications do not align with the eligibility criteria of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 16:44:40,410 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After reviewing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically targeting leukemia or related conditions. The trials cover various other medical conditions such as hemodynamics during coronary artery bypass surgery, ADHD, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis. These conditions and study focuses are not directly relevant to the patient's primary medical condition of leukemia. Additionally, the patient's age, specific type of leukemia, and current medications do not align with the eligibility criteria of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-08 16:44:40,411 - app.services.anthropic_service - INFO - Parsing response: After reviewing the patient profile and clinical trial data, I have determined that none of the provided trials are suitable matches for this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Jimmy Oldman, is a 24-year-old male with leukemia. None of the provided clinical trials are specifically targeting leukemia or related conditions. The trials cover various other medical conditions such as hemodynamics during coronary artery bypass surgery, ADHD, atrial fibrillation, temperature monitoring during anesthesia, and allergic rhinitis. These conditions and study focuses are not directly relevant to the patient's primary medical condition of leukemia. Additionally, the patient's age, specific type of leukemia, and current medications do not align with the eligibility criteria of the provided trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-08 16:44:40,411 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:44:40,412 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:44:40,413 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:44:40,413 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 700, Total trials: 4585
2024-08-08 16:44:41,604 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:41,620 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:41,621 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:41,945 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.InternalServerError: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
2024-08-08 16:44:42,008 - app.services.anthropic_service - ERROR - Unexpected error in match_patient_to_trials: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 100, in match_patient_to_trials
    response = await self.invoke_model(system_message, messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.InternalServerError: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
2024-08-08 16:44:42,009 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:44:42,009 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 750, Total trials: 4585
2024-08-08 16:44:43,201 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:43,219 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:43,219 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:44,402 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.InternalServerError: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
2024-08-08 16:44:44,403 - app.services.anthropic_service - ERROR - Unexpected error in match_patient_to_trials: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 100, in match_patient_to_trials
    response = await self.invoke_model(system_message, messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.InternalServerError: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
2024-08-08 16:44:44,403 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:44:44,404 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 800, Total trials: 4585
2024-08-08 16:44:45,576 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:45,601 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:45,601 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:46,042 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.InternalServerError: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
2024-08-08 16:44:46,043 - app.services.anthropic_service - ERROR - Unexpected error in match_patient_to_trials: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 100, in match_patient_to_trials
    response = await self.invoke_model(system_message, messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.InternalServerError: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
2024-08-08 16:44:46,044 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:44:46,045 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 850, Total trials: 4585
2024-08-08 16:44:47,234 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:47,251 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:47,252 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:47,851 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.InternalServerError: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
2024-08-08 16:44:47,852 - app.services.anthropic_service - ERROR - Unexpected error in match_patient_to_trials: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 100, in match_patient_to_trials
    response = await self.invoke_model(system_message, messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.InternalServerError: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
2024-08-08 16:44:47,853 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:44:47,854 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 900, Total trials: 4585
2024-08-08 16:44:49,022 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:49,040 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:49,041 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:44:51,750 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:44:51,751 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, unfortunately there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which does not align with the conditions targeted in the provided clinical trials (breast cancer, snacking habits, knee infections, and dry eye). Therefore, the output is an empty array:\n\n[]", type='text')]...
2024-08-08 16:44:51,751 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, unfortunately there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which does not align with the conditions targeted in the provided clinical trials (breast cancer, snacking habits, knee infections, and dry eye). Therefore, the output is an empty array:\n\n[]", type='text')]
2024-08-08 16:44:51,752 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, unfortunately there are no trials that match with a compatibility score of 70 or higher. The patient's primary medical condition is leukemia, which does not align with the conditions targeted in the provided clinical trials (breast cancer, snacking habits, knee infections, and dry eye). Therefore, the output is an empty array:

[]
2024-08-08 16:44:51,753 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:44:51,753 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:44:51,753 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:44:51,754 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 950, Total trials: 4585
2024-08-08 16:44:52,934 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:44:52,961 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 16:44:52,962 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 16:45:00,207 - app.services.trial_matching_service - INFO - Stop signal sent for user 66aad4b4c5463e9d7e8724d8
2024-08-08 16:45:01,205 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 16:45:01,206 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not a condition addressed in any of the provided trials.\n2. The trials focus on hemophilia, coronary artery disease, draining hematomas, and Hodgkin lymphoma, none of which match the patient's condition.\n3. The patient's age (24 years old) and specific medications are not relevant to the eligibility criteria of the provided trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the ones provided, based on the given criteria and compatibility threshold of 70 or higher.", type='text')]...
2024-08-08 16:45:01,206 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient has leukemia, which is not a condition addressed in any of the provided trials.\n2. The trials focus on hemophilia, coronary artery disease, draining hematomas, and Hodgkin lymphoma, none of which match the patient's condition.\n3. The patient's age (24 years old) and specific medications are not relevant to the eligibility criteria of the provided trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]\n\nThis indicates that there are no suitable trials for this patient among the ones provided, based on the given criteria and compatibility threshold of 70 or higher.", type='text')]
2024-08-08 16:45:01,207 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. The patient has leukemia, which is not a condition addressed in any of the provided trials.
2. The trials focus on hemophilia, coronary artery disease, draining hematomas, and Hodgkin lymphoma, none of which match the patient's condition.
3. The patient's age (24 years old) and specific medications are not relevant to the eligibility criteria of the provided trials.

Therefore, the output in the requested JSON format is an empty array:

[]

This indicates that there are no suitable trials for this patient among the ones provided, based on the given criteria and compatibility threshold of 70 or higher.
2024-08-08 16:45:01,207 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 16:45:01,207 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 16:45:01,208 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 16:45:01,208 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1000, Total trials: 4585
2024-08-08 16:45:02,214 - app.services.trial_matching_service - INFO - No new matching trials found for user: 66aad4b4c5463e9d7e8724d8
2024-08-08 16:45:15,770 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:45:16,387 - app.database - INFO - Database connection established successfully
2024-08-08 16:45:37,149 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:45:37,779 - app.database - INFO - Database connection established successfully
2024-08-08 16:45:40,393 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:45:41,031 - app.database - INFO - Database connection established successfully
2024-08-08 16:57:59,787 - app - INFO - Initializing Flask app...
2024-08-08 16:57:59,789 - app - INFO - Configuring app...
2024-08-08 16:57:59,789 - app - INFO - Setting up CORS...
2024-08-08 16:57:59,790 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 16:57:59,790 - app - INFO - Initializing JWT manager...
2024-08-08 16:57:59,790 - app - INFO - Setting up rate limiting...
2024-08-08 16:57:59,804 - app - INFO - Setting up database...
2024-08-08 16:57:59,805 - app - INFO - Starting database setup...
2024-08-08 16:58:01,053 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 16:58:01,054 - app - INFO - Database setup completed successfully
2024-08-08 16:58:01,054 - app - INFO - Registering error handler...
2024-08-08 16:58:01,055 - app - INFO - Initializing CLI commands...
2024-08-08 16:58:01,056 - app - INFO - Registering routes...
2024-08-08 16:58:01,064 - app - INFO - Initializing services...
2024-08-08 16:58:01,081 - app - INFO - Initializing email service...
2024-08-08 16:58:01,082 - app - INFO - Setting up scheduler...
2024-08-08 16:58:01,088 - app - INFO - Initializing scheduler...
2024-08-08 16:58:01,088 - app.scheduler - INFO - Scheduler initialized
2024-08-08 16:58:01,089 - app - INFO - Application initialized successfully
2024-08-08 16:58:04,284 - app - INFO - Initializing Flask app...
2024-08-08 16:58:04,287 - app - INFO - Configuring app...
2024-08-08 16:58:04,288 - app - INFO - Setting up CORS...
2024-08-08 16:58:04,289 - app - INFO - CORS configured with credentials support for allowed origins
2024-08-08 16:58:04,289 - app - INFO - Initializing JWT manager...
2024-08-08 16:58:04,290 - app - INFO - Setting up rate limiting...
2024-08-08 16:58:04,291 - app - INFO - Setting up database...
2024-08-08 16:58:04,293 - app - INFO - Starting database setup...
2024-08-08 16:58:05,114 - app.mongo_client - INFO - Connected to MongoDB database: clinical_trial_screener
2024-08-08 16:58:05,114 - app - INFO - Database setup completed successfully
2024-08-08 16:58:05,115 - app - INFO - Registering error handler...
2024-08-08 16:58:05,116 - app - INFO - Initializing CLI commands...
2024-08-08 16:58:05,116 - app - INFO - Registering routes...
2024-08-08 16:58:05,126 - app - INFO - Initializing services...
2024-08-08 16:58:05,146 - app - INFO - Initializing email service...
2024-08-08 16:58:05,147 - app - INFO - Setting up scheduler...
2024-08-08 16:58:05,154 - app - INFO - Initializing scheduler...
2024-08-08 16:58:05,156 - app.scheduler - INFO - Scheduler initialized
2024-08-08 16:58:05,157 - app - INFO - Application initialized successfully
2024-08-08 16:58:36,715 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:58:37,276 - app.database - INFO - Database connection established successfully
2024-08-08 16:58:37,749 - app.models.patient - INFO - Created patient profile for user: 66b5317dedf1eada14fb290b
2024-08-08 16:58:37,750 - app.routes.auth - INFO - User created successfully with ID: 66b5317dedf1eada14fb290b
2024-08-08 16:58:46,923 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:58:47,548 - app.database - INFO - Database connection established successfully
2024-08-08 16:58:57,223 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:58:57,800 - app.database - INFO - Database connection established successfully
2024-08-08 16:58:58,637 - app.routes.patient - INFO - Fetching profile for user: 66b5317dedf1eada14fb290b
2024-08-08 16:58:58,638 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:58:58,954 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:58:59,181 - app.database - INFO - Database connection established successfully
2024-08-08 16:58:59,227 - app.routes.patient - INFO - Profile found for user: 66b5317dedf1eada14fb290b
2024-08-08 16:58:59,545 - app.routes.patient - INFO - Fetching profile for user: 66b5317dedf1eada14fb290b
2024-08-08 16:58:59,546 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:58:59,575 - app.database - INFO - Database connection established successfully
2024-08-08 16:58:59,951 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:59:00,138 - app.database - INFO - Database connection established successfully
2024-08-08 16:59:00,180 - app.routes.patient - INFO - Profile found for user: 66b5317dedf1eada14fb290b
2024-08-08 16:59:00,506 - app.database - INFO - Database connection established successfully
2024-08-08 16:59:02,116 - app.routes.patient - INFO - Fetching profile for user: 66b5317dedf1eada14fb290b
2024-08-08 16:59:02,116 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:59:02,736 - app.database - INFO - Database connection established successfully
2024-08-08 16:59:02,784 - app.routes.patient - INFO - Profile found for user: 66b5317dedf1eada14fb290b
2024-08-08 16:59:02,807 - app.routes.patient - INFO - Fetching profile for user: 66b5317dedf1eada14fb290b
2024-08-08 16:59:02,807 - app.database - INFO - Attempting to establish database connection...
2024-08-08 16:59:03,419 - app.database - INFO - Database connection established successfully
2024-08-08 16:59:03,472 - app.routes.patient - INFO - Profile found for user: 66b5317dedf1eada14fb290b
2024-08-08 17:00:00,078 - app.routes.patient - INFO - Updating profile for user: 66b5317dedf1eada14fb290b
2024-08-08 17:00:00,079 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:00:00,659 - app.database - INFO - Database connection established successfully
2024-08-08 17:00:00,730 - app.models.patient - INFO - Updated patient profile for user: 66b5317dedf1eada14fb290b
2024-08-08 17:00:02,657 - app.routes.patient - INFO - Fetching profile for user: 66b5317dedf1eada14fb290b
2024-08-08 17:00:02,658 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:00:03,218 - app.database - INFO - Database connection established successfully
2024-08-08 17:00:03,259 - app.routes.patient - INFO - Profile found for user: 66b5317dedf1eada14fb290b
2024-08-08 17:00:03,301 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:00:03,581 - app.routes.patient - INFO - Fetching profile for user: 66b5317dedf1eada14fb290b
2024-08-08 17:00:03,582 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:00:03,914 - app.database - INFO - Database connection established successfully
2024-08-08 17:00:04,182 - app.database - INFO - Database connection established successfully
2024-08-08 17:00:04,220 - app.routes.patient - INFO - Profile found for user: 66b5317dedf1eada14fb290b
2024-08-08 17:00:04,285 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:00:04,809 - app.database - INFO - Database connection established successfully
2024-08-08 17:00:08,291 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:00:08,855 - app.database - INFO - Database connection established successfully
2024-08-08 17:00:08,956 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:00:09,541 - app.database - INFO - Database connection established successfully
2024-08-08 17:00:11,407 - app.services.trial_matching_service - INFO - Starting trial matching for user: 66b5317dedf1eada14fb290b
2024-08-08 17:00:11,408 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:00:11,994 - app.database - INFO - Database connection established successfully
2024-08-08 17:00:12,098 - app.services.trial_matching_service - INFO - Total trials to process: 5175
2024-08-08 17:00:12,268 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:00:12,299 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:00:12,301 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:00:20,001 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:00:20,001 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT00072579 (Sargramostim for Chronic Myelogenous Leukemia): The patient does not have leukemia, which is the primary condition for this trial.\n\n2. NCT00517179 (Vardenafil for Erectile Dysfunction): The patient is female and does not have the conditions (erectile dysfunction, benign prostatic hyperplasia) targeted by this trial.\n\n3. NCT00812279 (Smoking Study): The patient's profile does not indicate that she is a smoker, which is a requirement for this trial.\n\n4. NCT01511679 (Brain-imaging and Adolescent Neuroscience Consortium): The patient is 38 years old, which is outside the age range (12-21 years) for this study. Additionally, there's no indication of alcohol abuse in her profile.\n\nNone of these trials are suitable for the patient based on her age, gender, and medical conditions (Type 2 Diabetes, Hypertension, Asthma). Therefore, no trials meet the minimum compatibility score of 70.", type='text')]...
2024-08-08 17:00:20,002 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT00072579 (Sargramostim for Chronic Myelogenous Leukemia): The patient does not have leukemia, which is the primary condition for this trial.\n\n2. NCT00517179 (Vardenafil for Erectile Dysfunction): The patient is female and does not have the conditions (erectile dysfunction, benign prostatic hyperplasia) targeted by this trial.\n\n3. NCT00812279 (Smoking Study): The patient's profile does not indicate that she is a smoker, which is a requirement for this trial.\n\n4. NCT01511679 (Brain-imaging and Adolescent Neuroscience Consortium): The patient is 38 years old, which is outside the age range (12-21 years) for this study. Additionally, there's no indication of alcohol abuse in her profile.\n\nNone of these trials are suitable for the patient based on her age, gender, and medical conditions (Type 2 Diabetes, Hypertension, Asthma). Therefore, no trials meet the minimum compatibility score of 70.", type='text')]
2024-08-08 17:00:20,003 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. NCT00072579 (Sargramostim for Chronic Myelogenous Leukemia): The patient does not have leukemia, which is the primary condition for this trial.

2. NCT00517179 (Vardenafil for Erectile Dysfunction): The patient is female and does not have the conditions (erectile dysfunction, benign prostatic hyperplasia) targeted by this trial.

3. NCT00812279 (Smoking Study): The patient's profile does not indicate that she is a smoker, which is a requirement for this trial.

4. NCT01511679 (Brain-imaging and Adolescent Neuroscience Consortium): The patient is 38 years old, which is outside the age range (12-21 years) for this study. Additionally, there's no indication of alcohol abuse in her profile.

None of these trials are suitable for the patient based on her age, gender, and medical conditions (Type 2 Diabetes, Hypertension, Asthma). Therefore, no trials meet the minimum compatibility score of 70.
2024-08-08 17:00:20,003 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:00:20,005 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:00:20,006 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 17:00:20,006 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 50, Total trials: 5175
2024-08-08 17:00:21,222 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:00:21,239 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:00:21,240 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:00:28,029 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:00:28,030 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align closely with the eligibility criteria or focus of the provided clinical trial. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe provided clinical trial (NCT04690179) is focused on sarcopenia, sarcopenic obesity, and incisional hernia in the context of complex abdominal wall surgery. The patient profile does not mention any of these conditions. The patient's medical conditions (Type 2 Diabetes, Hypertension, Asthma) and medications (Metformin, Lisinopril, Albuterol Inhaler) are not directly related to the focus of this study. Additionally, there's no mention of the patient having undergone or requiring abdominal wall surgery, which is a key aspect of the trial. Therefore, the compatibility score would be below 70, and the trial is not included in the output.", type='text')]...
2024-08-08 17:00:28,030 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align closely with the eligibility criteria or focus of the provided clinical trial. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe provided clinical trial (NCT04690179) is focused on sarcopenia, sarcopenic obesity, and incisional hernia in the context of complex abdominal wall surgery. The patient profile does not mention any of these conditions. The patient's medical conditions (Type 2 Diabetes, Hypertension, Asthma) and medications (Metformin, Lisinopril, Albuterol Inhaler) are not directly related to the focus of this study. Additionally, there's no mention of the patient having undergone or requiring abdominal wall surgery, which is a key aspect of the trial. Therefore, the compatibility score would be below 70, and the trial is not included in the output.", type='text')]
2024-08-08 17:00:28,031 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trial data provided, there are no suitable matches with a compatibility score of 70 or higher. The patient's profile does not align closely with the eligibility criteria or focus of the provided clinical trial. Therefore, the output is an empty array:

[]

Explanation:
The provided clinical trial (NCT04690179) is focused on sarcopenia, sarcopenic obesity, and incisional hernia in the context of complex abdominal wall surgery. The patient profile does not mention any of these conditions. The patient's medical conditions (Type 2 Diabetes, Hypertension, Asthma) and medications (Metformin, Lisinopril, Albuterol Inhaler) are not directly related to the focus of this study. Additionally, there's no mention of the patient having undergone or requiring abdominal wall surgery, which is a key aspect of the trial. Therefore, the compatibility score would be below 70, and the trial is not included in the output.
2024-08-08 17:00:28,032 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:00:28,032 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:00:28,033 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 17:00:28,036 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 100, Total trials: 5175
2024-08-08 17:00:29,236 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:00:29,253 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:00:29,253 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:00:38,989 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:00:38,989 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here\'s the result in the requested JSON format:\n\n[\n    {\n        "nct_id": "NCT03530579",\n        "compatibility_score": 80,\n        "reasons": [\n            "Patient has Type 2 Diabetes, and this trial focuses on diabetes prevention",\n            "Patient\'s age (38) falls within the trial\'s age range (18-75)",\n            "Trial targets individuals at risk for diabetes, which applies to the patient",\n            "Patient is not excluded by any of the trial\'s exclusion criteria"\n        ]\n    }\n]\n\nExplanation:\n1. The trial NCT03530579 is the most suitable match for Emily Johnson.\n2. While it\'s a diabetes prevention trial and Emily already has Type 2 Diabetes, the trial\'s focus on diabetes-related health issues makes it relevant.\n3. Emily\'s age of 38 (calculated from her date of birth) falls within the trial\'s age range of 18-75.\n4. The trial targets individuals at risk for diabetes, which certainly applies to Emily as she already has the condition.\n5. Emily doesn\'t meet any of the exclusion criteria listed for this trial.\n6. The other trials were not suitable matches:\n   - NCT00626379 focuses on heart disease, which is not one of Emily\'s listed conditions.\n   - NCT05900479 is specifically for military veterans with PTSD, which doesn\'t apply to Emily.\n   - NCT04679779 is for children with cerebral palsy, which doesn\'t match Emily\'s profile.\n\nNote that while the match isn\'t perfect (as Emily already has diabetes rather than being at risk), the overall relevance of the trial to her condition results in a relatively high compatibility score of 80.', type='text')]...
2024-08-08 17:00:38,990 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here\'s the result in the requested JSON format:\n\n[\n    {\n        "nct_id": "NCT03530579",\n        "compatibility_score": 80,\n        "reasons": [\n            "Patient has Type 2 Diabetes, and this trial focuses on diabetes prevention",\n            "Patient\'s age (38) falls within the trial\'s age range (18-75)",\n            "Trial targets individuals at risk for diabetes, which applies to the patient",\n            "Patient is not excluded by any of the trial\'s exclusion criteria"\n        ]\n    }\n]\n\nExplanation:\n1. The trial NCT03530579 is the most suitable match for Emily Johnson.\n2. While it\'s a diabetes prevention trial and Emily already has Type 2 Diabetes, the trial\'s focus on diabetes-related health issues makes it relevant.\n3. Emily\'s age of 38 (calculated from her date of birth) falls within the trial\'s age range of 18-75.\n4. The trial targets individuals at risk for diabetes, which certainly applies to Emily as she already has the condition.\n5. Emily doesn\'t meet any of the exclusion criteria listed for this trial.\n6. The other trials were not suitable matches:\n   - NCT00626379 focuses on heart disease, which is not one of Emily\'s listed conditions.\n   - NCT05900479 is specifically for military veterans with PTSD, which doesn\'t apply to Emily.\n   - NCT04679779 is for children with cerebral palsy, which doesn\'t match Emily\'s profile.\n\nNote that while the match isn\'t perfect (as Emily already has diabetes rather than being at risk), the overall relevance of the trial to her condition results in a relatively high compatibility score of 80.', type='text')]
2024-08-08 17:00:38,991 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result in the requested JSON format:

[
    {
        "nct_id": "NCT03530579",
        "compatibility_score": 80,
        "reasons": [
            "Patient has Type 2 Diabetes, and this trial focuses on diabetes prevention",
            "Patient's age (38) falls within the trial's age range (18-75)",
            "Trial targets individuals at risk for diabetes, which applies to the patient",
            "Patient is not excluded by any of the trial's exclusion criteria"
        ]
    }
]

Explanation:
1. The trial NCT03530579 is the most suitable match for Emily Johnson.
2. While it's a diabetes prevention trial and Emily already has Type 2 Diabetes, the trial's focus on diabetes-related health issues makes it relevant.
3. Emily's age of 38 (calculated [SQL REDACTED] her date of birth) falls within the trial's age range of 18-75.
4. The trial targets individuals at risk for diabetes, which certainly applies to Emily as she already has the condition.
5. Emily doesn't meet any of the exclusion criteria listed for this trial.
6. The other trials were not suitable matches:
   - NCT00626379 focuses on heart disease, which is not one of Emily's listed conditions.
   - NCT05900479 is specifically for military veterans with PTSD, which doesn't apply to Emily.
   - NCT04679779 is for children with cerebral palsy, which doesn't match Emily's profile.

Note that while the match isn't perfect (as Emily already has diabetes rather than being at risk), the overall relevance of the trial to her condition results in a relatively high compatibility score of 80.
2024-08-08 17:00:38,992 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 14 column 1 (char 454)
2024-08-08 17:00:38,992 - app.services.anthropic_service - ERROR - Response content: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result in the requested JSON format:

[
    {
        "nct_id": "NCT03530579",
        "compatibility_score": 80,
        "reasons": [
            "Patient has Type 2 Diabetes, and this trial focuses on diabetes prevention",
            "Patient's age (38) falls within the trial's age range (18-75)",
            "Trial targets individuals at risk for diabetes, which applies to the patient",
            "Patient is not excluded by any of the trial's exclusion criteria"
        ]
    }
]

Explanation:
1. The trial NCT03530579 is the most suitable match for Emily Johnson.
2. While it's a diabetes prevention trial and Emily already has Type 2 Diabetes, the trial's focus on diabetes-related health issues makes it relevant.
3. Emily's age of 38 (calculated [SQL REDACTED] her date of birth) falls within the trial's age range of 18-75.
4. The trial targets individuals at risk for diabetes, which certainly applies to Emily as she already has the condition.
5. Emily doesn't meet any of the exclusion criteria listed for this trial.
6. The other trials were not suitable matches:
   - NCT00626379 focuses on heart disease, which is not one of Emily's listed conditions.
   - NCT05900479 is specifically for military veterans with PTSD, which doesn't apply to Emily.
   - NCT04679779 is for children with cerebral palsy, which doesn't match Emily's profile.

Note that while the match isn't perfect (as Emily already has diabetes rather than being at risk), the overall relevance of the trial to her condition results in a relatively high compatibility score of 80.
2024-08-08 17:00:38,993 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:00:38,993 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 0
2024-08-08 17:00:38,999 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 150, Total trials: 5175
2024-08-08 17:00:40,177 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:00:40,200 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:00:40,201 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:00:45,286 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:00:45,288 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text='After analyzing the patient profile and clinical trial data, I\'ve identified one suitable trial with a compatibility score of 70 or higher. Here\'s the output in the requested JSON format:\n\n[\n    {\n        "nct_id": "NCT02244879",\n        "compatibility_score": 85,\n        "reasons": [\n            "Patient has Type 2 Diabetes, which is the primary condition being studied in this trial",\n            "Patient meets the age requirement (35 years and older)",\n            "Patient\'s gender (female) does not exclude her from the trial",\n            "Patient is not on insulin, which is an exclusion criterion",\n            "Patient\'s other conditions (Hypertension, Asthma) are not listed as exclusion criteria"\n        ]\n    }\n]\n\nThe other trial (NCT02841579) is not suitable for this patient as it focuses on non-small cell lung cancer, which is not one of the patient\'s medical conditions.', type='text')]...
2024-08-08 17:00:45,288 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='After analyzing the patient profile and clinical trial data, I\'ve identified one suitable trial with a compatibility score of 70 or higher. Here\'s the output in the requested JSON format:\n\n[\n    {\n        "nct_id": "NCT02244879",\n        "compatibility_score": 85,\n        "reasons": [\n            "Patient has Type 2 Diabetes, which is the primary condition being studied in this trial",\n            "Patient meets the age requirement (35 years and older)",\n            "Patient\'s gender (female) does not exclude her from the trial",\n            "Patient is not on insulin, which is an exclusion criterion",\n            "Patient\'s other conditions (Hypertension, Asthma) are not listed as exclusion criteria"\n        ]\n    }\n]\n\nThe other trial (NCT02841579) is not suitable for this patient as it focuses on non-small cell lung cancer, which is not one of the patient\'s medical conditions.', type='text')]
2024-08-08 17:00:45,288 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I've identified one suitable trial with a compatibility score of 70 or higher. Here's the output in the requested JSON format:

[
    {
        "nct_id": "NCT02244879",
        "compatibility_score": 85,
        "reasons": [
            "Patient has Type 2 Diabetes, which is the primary condition being studied in this trial",
            "Patient meets the age requirement (35 years and older)",
            "Patient's gender (female) does not exclude her [SQL REDACTED] the trial",
            "Patient is not on insulin, which is an exclusion criterion",
            "Patient's other conditions (Hypertension, Asthma) are not listed as exclusion criteria"
        ]
    }
]

The other trial (NCT02841579) is not suitable for this patient as it focuses on non-small cell lung cancer, which is not one of the patient's medical conditions.
2024-08-08 17:00:45,289 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-08 17:00:45,289 - app.services.anthropic_service - INFO - Parsed 1 matches from Anthropic response
2024-08-08 17:00:45,402 - app.services.trial_matching_service - ERROR - Error processing batch for user 66b5317dedf1eada14fb290b: 'TrialMatchingService' object has no attribute 'emit_trial_matches'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 59, in match_patient_to_trials
    await self.emit_trial_matches(str(user_id), new_matches)
AttributeError: 'TrialMatchingService' object has no attribute 'emit_trial_matches'
2024-08-08 17:00:45,406 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 200, Total trials: 5175
2024-08-08 17:00:46,601 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:00:46,620 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:00:46,620 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:00:53,628 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:00:53,629 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which the patient does not have.\n2. The second trial (NCT00293579) is for advanced Head and Neck Cancer, which the patient does not have.\n3. The third trial (NCT04491279) is for chronic stroke patients, which the patient does not have.\n\nThe patient's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) do not match any of the conditions targeted by these clinical trials. Additionally, the patient's age, gender, and medications are not specifically relevant to the eligibility criteria of these trials. Therefore, there are no suitable matches with a high compatibility score.", type='text')]...
2024-08-08 17:00:53,629 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which the patient does not have.\n2. The second trial (NCT00293579) is for advanced Head and Neck Cancer, which the patient does not have.\n3. The third trial (NCT04491279) is for chronic stroke patients, which the patient does not have.\n\nThe patient's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) do not match any of the conditions targeted by these clinical trials. Additionally, the patient's age, gender, and medications are not specifically relevant to the eligibility criteria of these trials. Therefore, there are no suitable matches with a high compatibility score.", type='text')]
2024-08-08 17:00:53,630 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the clinical trials provided, there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT03059979) is for Systemic Sclerosis and Raynaud Phenomena, which the patient does not have.
2. The second trial (NCT00293579) is for advanced Head and Neck Cancer, which the patient does not have.
3. The third trial (NCT04491279) is for chronic stroke patients, which the patient does not have.

The patient's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) do not match any of the conditions targeted by these clinical trials. Additionally, the patient's age, gender, and medications are not specifically relevant to the eligibility criteria of these trials. Therefore, there are no suitable matches with a high compatibility score.
2024-08-08 17:00:53,630 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:00:53,630 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:00:53,631 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:00:53,631 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 250, Total trials: 5175
2024-08-08 17:00:54,824 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:00:54,842 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:00:54,843 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:01:03,810 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:01:03,811 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNone of the provided clinical trials have a compatibility score of 70 or higher for the given patient profile. The reasons for this are:\n\n1. NCT04986579 (Scalp Cooling in MBC): This trial is for metastatic breast cancer patients, which doesn't match the patient's conditions.\n\n2. NCT05721079 (Extracorporeal Photopheresis After Lung Transplantation): This trial is for lung transplant patients, which doesn't match the patient's profile.\n\n3. NCT06060379 (Giochiamo 626 - Gaming for Health and Safety in Workplaces): This trial is about workplace safety and doesn't relate to the patient's medical conditions.\n\n4. NCT03906279 (Choroidal Thickness Change in Response to Physiological and Refractive Changes): This trial is about refractive errors and accommodation disorders, which are not mentioned in the patient's profile.\n\nThe patient's conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications (Metformin, Lisinopril, Albuterol Inhaler) do not align closely with any of the provided clinical trials. Therefore, there are no matches with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 17:01:03,811 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNone of the provided clinical trials have a compatibility score of 70 or higher for the given patient profile. The reasons for this are:\n\n1. NCT04986579 (Scalp Cooling in MBC): This trial is for metastatic breast cancer patients, which doesn't match the patient's conditions.\n\n2. NCT05721079 (Extracorporeal Photopheresis After Lung Transplantation): This trial is for lung transplant patients, which doesn't match the patient's profile.\n\n3. NCT06060379 (Giochiamo 626 - Gaming for Health and Safety in Workplaces): This trial is about workplace safety and doesn't relate to the patient's medical conditions.\n\n4. NCT03906279 (Choroidal Thickness Change in Response to Physiological and Refractive Changes): This trial is about refractive errors and accommodation disorders, which are not mentioned in the patient's profile.\n\nThe patient's conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications (Metformin, Lisinopril, Albuterol Inhaler) do not align closely with any of the provided clinical trials. Therefore, there are no matches with a compatibility score of 70 or higher.", type='text')]
2024-08-08 17:01:03,812 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result:

[]

Explanation:
None of the provided clinical trials have a compatibility score of 70 or higher for the given patient profile. The reasons for this are:

1. NCT04986579 (Scalp Cooling in MBC): This trial is for metastatic breast cancer patients, which doesn't match the patient's conditions.

2. NCT05721079 (Extracorporeal Photopheresis After Lung Transplantation): This trial is for lung transplant patients, which doesn't match the patient's profile.

3. NCT06060379 (Giochiamo 626 - Gaming for Health and Safety in Workplaces): This trial is about workplace safety and doesn't relate to the patient's medical conditions.

4. NCT03906279 (Choroidal Thickness Change in Response to Physiological and Refractive Changes): This trial is about refractive errors and accommodation disorders, which are not mentioned in the patient's profile.

The patient's conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications (Metformin, Lisinopril, Albuterol Inhaler) do not align closely with any of the provided clinical trials. Therefore, there are no matches with a compatibility score of 70 or higher.
2024-08-08 17:01:03,812 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:01:03,812 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:01:03,813 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:01:03,814 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 300, Total trials: 5175
2024-08-08 17:01:05,008 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:01:05,022 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:01:05,022 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:01:06,067 - app.services.anthropic_service - ERROR - Error invoking Anthropic model: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.InternalServerError: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
2024-08-08 17:01:06,071 - app.services.anthropic_service - ERROR - Unexpected error in match_patient_to_trials: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 100, in match_patient_to_trials
    response = await self.invoke_model(system_message, messages)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\anthropic_service.py", line 36, in invoke_model
    response = await asyncio.wait_for(
  File "C:\Users\ethan\anaconda3\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\resources\messages.py", line 1766, in create
    return await self._post(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1826, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1519, in request
    return await self._request(
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\venv\lib\site-packages\anthropic\_base_client.py", line 1620, in _request
    raise self._make_status_error_from_response(err.response) from None
anthropic.InternalServerError: Error code: 500 - {'type': 'error', 'error': {'type': 'api_error', 'message': 'Internal server error'}}
2024-08-08 17:01:06,073 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:01:06,073 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 350, Total trials: 5175
2024-08-08 17:01:07,279 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:01:07,292 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:01:07,292 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:01:17,487 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:01:17,488 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasoning:\n1. NCT06289179 (Thyroid and Cortisol Hormone Response to Sepsis):\n   - The patient does not have sepsis, which is the main condition for this trial.\n   - The trial is specifically looking for septic patients admitted to critical care units.\n\n2. NCT03221179 (Safety, Tolerability, Pharmacokinetics, and Pharmacodynamics of RO7049665 in Healthy Volunteers):\n   - This trial is for healthy volunteers, but the patient has multiple medical conditions (Type 2 Diabetes, Hypertension, Asthma).\n   - The trial is specifically for males, while the patient is female.\n\n3. NCT00228579 (Assessment of Changes in Abdominal Fat):\n   - While this trial is related to obesity, which can be associated with Type 2 Diabetes, the patient's profile doesn't explicitly mention obesity.\n   - The trial is focusing on severe obesity, which isn't mentioned in the patient's profile.\n   - The trial has specific exclusion criteria, including age limits (18-65) which the patient meets, but also excludes those with certain medical histories that may apply to this patient.\n\nNone of these trials are sufficiently compatible with Emily Johnson's profile to warrant a compatibility score of 70 or higher.", type='text')]...
2024-08-08 17:01:17,488 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nReasoning:\n1. NCT06289179 (Thyroid and Cortisol Hormone Response to Sepsis):\n   - The patient does not have sepsis, which is the main condition for this trial.\n   - The trial is specifically looking for septic patients admitted to critical care units.\n\n2. NCT03221179 (Safety, Tolerability, Pharmacokinetics, and Pharmacodynamics of RO7049665 in Healthy Volunteers):\n   - This trial is for healthy volunteers, but the patient has multiple medical conditions (Type 2 Diabetes, Hypertension, Asthma).\n   - The trial is specifically for males, while the patient is female.\n\n3. NCT00228579 (Assessment of Changes in Abdominal Fat):\n   - While this trial is related to obesity, which can be associated with Type 2 Diabetes, the patient's profile doesn't explicitly mention obesity.\n   - The trial is focusing on severe obesity, which isn't mentioned in the patient's profile.\n   - The trial has specific exclusion criteria, including age limits (18-65) which the patient meets, but also excludes those with certain medical histories that may apply to this patient.\n\nNone of these trials are sufficiently compatible with Emily Johnson's profile to warrant a compatibility score of 70 or higher.", type='text')]
2024-08-08 17:01:17,489 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Reasoning:
1. NCT06289179 (Thyroid and Cortisol Hormone Response to Sepsis):
   - The patient does not have sepsis, which is the main condition for this trial.
   - The trial is specifically looking for septic patients admitted to critical care units.

2. NCT03221179 (Safety, Tolerability, Pharmacokinetics, and Pharmacodynamics of RO7049665 in Healthy Volunteers):
   - This trial is for healthy volunteers, but the patient has multiple medical conditions (Type 2 Diabetes, Hypertension, Asthma).
   - The trial is specifically for males, while the patient is female.

3. NCT00228579 (Assessment of Changes in Abdominal Fat):
   - While this trial is related to obesity, which can be associated with Type 2 Diabetes, the patient's profile doesn't explicitly mention obesity.
   - The trial is focusing on severe obesity, which isn't mentioned in the patient's profile.
   - The trial has specific exclusion criteria, including age limits (18-65) which the patient meets, but also excludes those with certain medical histories that may apply to this patient.

None of these trials are sufficiently compatible with Emily Johnson's profile to warrant a compatibility score of 70 or higher.
2024-08-08 17:01:17,489 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:01:17,489 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:01:17,490 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:01:17,491 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 400, Total trials: 5175
2024-08-08 17:01:18,654 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:01:18,673 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:01:18,674 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:01:24,758 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:01:24,758 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT03901079 focuses on coronary artery disease, which the patient does not have.\n2. NCT05639179 is for B-cell Acute Lymphoblastic Leukemia, which is not present in the patient's profile.\n3. NCT00383279 is for gynecologic cancer survivors, which doesn't apply to this patient.\n4. NCT01928979 is for atrial fibrillation, which is not listed in the patient's medical conditions.\n\nThe patient's main conditions (Type 2 Diabetes, Hypertension, and Asthma) are not directly addressed by any of the provided clinical trials, resulting in low compatibility scores for all trials.", type='text')]...
2024-08-08 17:01:24,759 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT03901079 focuses on coronary artery disease, which the patient does not have.\n2. NCT05639179 is for B-cell Acute Lymphoblastic Leukemia, which is not present in the patient's profile.\n3. NCT00383279 is for gynecologic cancer survivors, which doesn't apply to this patient.\n4. NCT01928979 is for atrial fibrillation, which is not listed in the patient's medical conditions.\n\nThe patient's main conditions (Type 2 Diabetes, Hypertension, and Asthma) are not directly addressed by any of the provided clinical trials, resulting in low compatibility scores for all trials.", type='text')]
2024-08-08 17:01:24,759 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. NCT03901079 focuses on coronary artery disease, which the patient does not have.
2. NCT05639179 is for B-cell Acute Lymphoblastic Leukemia, which is not present in the patient's profile.
3. NCT00383279 is for gynecologic cancer survivors, which doesn't apply to this patient.
4. NCT01928979 is for atrial fibrillation, which is not listed in the patient's medical conditions.

The patient's main conditions (Type 2 Diabetes, Hypertension, and Asthma) are not directly addressed by any of the provided clinical trials, resulting in low compatibility scores for all trials.
2024-08-08 17:01:24,759 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:01:24,760 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:01:24,760 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:01:24,760 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 450, Total trials: 5175
2024-08-08 17:01:25,948 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:01:25,969 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:01:25,969 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:01:32,553 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:01:32,553 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05315479) is focused on pediatric patients aged 2 to <17 years undergoing surgery. The patient, Emily Johnson, is 38 years old (born in 1985) and does not match the age criteria or the condition (post-operative pain) being studied.\n\n2. The second trial (NCT02052479) is specifically for adolescent females aged 12-18 with Polycystic Ovary Syndrome (PCOS). Again, the patient's age (38) is well outside the study's age range. Additionally, PCOS is not listed among the patient's medical conditions.\n\nNeither of these trials is suitable for the patient based on the provided information, resulting in compatibility scores well below the 70% threshold. Therefore, no matches are returned.", type='text')]...
2024-08-08 17:01:32,554 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05315479) is focused on pediatric patients aged 2 to <17 years undergoing surgery. The patient, Emily Johnson, is 38 years old (born in 1985) and does not match the age criteria or the condition (post-operative pain) being studied.\n\n2. The second trial (NCT02052479) is specifically for adolescent females aged 12-18 with Polycystic Ovary Syndrome (PCOS). Again, the patient's age (38) is well outside the study's age range. Additionally, PCOS is not listed among the patient's medical conditions.\n\nNeither of these trials is suitable for the patient based on the provided information, resulting in compatibility scores well below the 70% threshold. Therefore, no matches are returned.", type='text')]
2024-08-08 17:01:32,555 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT05315479) is focused on pediatric patients aged 2 to <17 years undergoing surgery. The patient, Emily Johnson, is 38 years old (born in 1985) and does not match the age criteria or the condition (post-operative pain) being studied.

2. The second trial (NCT02052479) is specifically for adolescent females aged 12-18 with Polycystic Ovary Syndrome (PCOS). Again, the patient's age (38) is well outside the study's age range. Additionally, PCOS is not listed among the patient's medical conditions.

Neither of these trials is suitable for the patient based on the provided information, resulting in compatibility scores well below the 70% threshold. Therefore, no matches are returned.
2024-08-08 17:01:32,555 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:01:32,556 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:01:32,556 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:01:32,556 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 500, Total trials: 5175
2024-08-08 17:01:33,735 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:01:33,747 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:01:33,748 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:01:39,153 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:01:39,153 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. None of the provided clinical trials specifically target these conditions or seem particularly suitable for her profile. The trials focus on:\n\n1. Influenza vaccine for children\n2. Pain relief during postpartum perineal tear repair\n3. Colorectal cancer with liver metastases\n4. Oncologist satisfaction with cytotoxic agents\n\nThese trials either target different conditions, age groups, or are not relevant to the patient's medical profile. As a result, none of the trials reach the threshold of 70 or higher for compatibility.", type='text')]...
2024-08-08 17:01:39,154 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. None of the provided clinical trials specifically target these conditions or seem particularly suitable for her profile. The trials focus on:\n\n1. Influenza vaccine for children\n2. Pain relief during postpartum perineal tear repair\n3. Colorectal cancer with liver metastases\n4. Oncologist satisfaction with cytotoxic agents\n\nThese trials either target different conditions, age groups, or are not relevant to the patient's medical profile. As a result, none of the trials reach the threshold of 70 or higher for compatibility.", type='text')]
2024-08-08 17:01:39,154 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. None of the provided clinical trials specifically target these conditions or seem particularly suitable for her profile. The trials focus on:

1. Influenza vaccine for children
2. Pain relief during postpartum perineal tear repair
3. Colorectal cancer with liver metastases
4. Oncologist satisfaction with cytotoxic agents

These trials either target different conditions, age groups, or are not relevant to the patient's medical profile. As a result, none of the trials reach the threshold of 70 or higher for compatibility.
2024-08-08 17:01:39,154 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:01:39,154 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:01:39,155 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:01:39,155 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 550, Total trials: 5175
2024-08-08 17:01:40,329 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:01:40,349 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:01:40,349 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:01:47,781 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:01:47,782 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The first trial (NCT06378879) is focused on anesthesia methods during gastroscopy. The patient's profile doesn't indicate any need for this procedure, and her medical conditions (Type 2 Diabetes, Hypertension, Asthma) are not directly related to the study's focus.\n\n2. The second trial (NCT02710279) is specifically for female patients with unipolar depression and a focus on suicidal behavior. While the patient is female, her profile does not mention depression or any history of suicidal behavior. Additionally, the trial has specific requirements related to depression that the patient doesn't meet based on the provided information.\n\nBoth trials have very specific criteria that don't align with the patient's profile, resulting in low compatibility scores (below 70) for both. Hence, no trials are returned in the output.", type='text')]...
2024-08-08 17:01:47,799 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. The first trial (NCT06378879) is focused on anesthesia methods during gastroscopy. The patient's profile doesn't indicate any need for this procedure, and her medical conditions (Type 2 Diabetes, Hypertension, Asthma) are not directly related to the study's focus.\n\n2. The second trial (NCT02710279) is specifically for female patients with unipolar depression and a focus on suicidal behavior. While the patient is female, her profile does not mention depression or any history of suicidal behavior. Additionally, the trial has specific requirements related to depression that the patient doesn't meet based on the provided information.\n\nBoth trials have very specific criteria that don't align with the patient's profile, resulting in low compatibility scores (below 70) for both. Hence, no trials are returned in the output.", type='text')]
2024-08-08 17:01:47,801 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that there are no suitable matches with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. The first trial (NCT06378879) is focused on anesthesia methods during gastroscopy. The patient's profile doesn't indicate any need for this procedure, and her medical conditions (Type 2 Diabetes, Hypertension, Asthma) are not directly related to the study's focus.

2. The second trial (NCT02710279) is specifically for female patients with unipolar depression and a focus on suicidal behavior. While the patient is female, her profile does not mention depression or any history of suicidal behavior. Additionally, the trial has specific requirements related to depression that the patient doesn't meet based on the provided information.

Both trials have very specific criteria that don't align with the patient's profile, resulting in low compatibility scores (below 70) for both. Hence, no trials are returned in the output.
2024-08-08 17:01:47,801 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:01:47,802 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:01:47,802 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:01:47,803 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 600, Total trials: 5175
2024-08-08 17:01:48,988 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:01:49,004 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:01:49,004 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:01:55,785 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:01:55,786 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT05463679 (Vascular Ehlers-Danlos Syndrome trial): The patient does not have Vascular Ehlers-Danlos Syndrome, which is the primary condition for this trial.\n\n2. NCT03137979 (Periodontitis trial): The patient does not have periodontitis listed in their medical conditions.\n\n3. NCT01733979 (Anemia trial): While this trial is for anemia, the patient's profile does not indicate that they have anemia. Additionally, the patient's age (38 years old) is within the inclusion criteria, but without information about their hemoglobin levels, we cannot determine if they meet the primary inclusion criterion for anemia.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher, hence the empty array result.", type='text')]...
2024-08-08 17:01:55,786 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT05463679 (Vascular Ehlers-Danlos Syndrome trial): The patient does not have Vascular Ehlers-Danlos Syndrome, which is the primary condition for this trial.\n\n2. NCT03137979 (Periodontitis trial): The patient does not have periodontitis listed in their medical conditions.\n\n3. NCT01733979 (Anemia trial): While this trial is for anemia, the patient's profile does not indicate that they have anemia. Additionally, the patient's age (38 years old) is within the inclusion criteria, but without information about their hemoglobin levels, we cannot determine if they meet the primary inclusion criterion for anemia.\n\nNone of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher, hence the empty array result.", type='text')]
2024-08-08 17:01:55,786 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials match the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. NCT05463679 (Vascular Ehlers-Danlos Syndrome trial): The patient does not have Vascular Ehlers-Danlos Syndrome, which is the primary condition for this trial.

2. NCT03137979 (Periodontitis trial): The patient does not have periodontitis listed in their medical conditions.

3. NCT01733979 (Anemia trial): While this trial is for anemia, the patient's profile does not indicate that they have anemia. Additionally, the patient's age (38 years old) is within the inclusion criteria, but without information about their hemoglobin levels, we cannot determine if they meet the primary inclusion criterion for anemia.

None of these trials are sufficiently compatible with the patient's profile to warrant a score of 70 or higher, hence the empty array result.
2024-08-08 17:01:55,786 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:01:55,787 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:01:55,787 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:01:55,787 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 650, Total trials: 5175
2024-08-08 17:01:57,045 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:01:57,058 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:01:57,058 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:02:08,135 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:02:08,137 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma.\n2. None of the provided clinical trials specifically target these conditions.\n3. The trials focus on:\n   - Hemodynamics during off-pump coronary artery bypass grafting\n   - ADHD symptoms in children\n   - Atrial fibrillation\n   - Temperature monitoring during general anesthesia\n   - Allergic rhinitis\n4. The patient's conditions and characteristics do not align closely with the eligibility criteria or focus of these trials.\n5. Some trials have specific exclusion criteria that would likely rule out this patient (e.g., age requirements, specific cardiac conditions).\n\nAs a result, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.", type='text')]...
2024-08-08 17:02:08,137 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma.\n2. None of the provided clinical trials specifically target these conditions.\n3. The trials focus on:\n   - Hemodynamics during off-pump coronary artery bypass grafting\n   - ADHD symptoms in children\n   - Atrial fibrillation\n   - Temperature monitoring during general anesthesia\n   - Allergic rhinitis\n4. The patient's conditions and characteristics do not align closely with the eligibility criteria or focus of these trials.\n5. Some trials have specific exclusion criteria that would likely rule out this patient (e.g., age requirements, specific cardiac conditions).\n\nAs a result, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.", type='text')]
2024-08-08 17:02:08,137 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma.
2. None of the provided clinical trials specifically target these conditions.
3. The trials focus on:
   - Hemodynamics during off-pump coronary artery bypass grafting
   - ADHD symptoms in children
   - Atrial fibrillation
   - Temperature monitoring during general anesthesia
   - Allergic rhinitis
4. The patient's conditions and characteristics do not align closely with the eligibility criteria or focus of these trials.
5. Some trials have specific exclusion criteria that would likely rule out this patient (e.g., age requirements, specific cardiac conditions).

As a result, there are no suitable matches with a compatibility score of 70 or higher for this patient among the provided clinical trials.
2024-08-08 17:02:08,138 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:02:08,138 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:02:08,139 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:02:08,139 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 700, Total trials: 5175
2024-08-08 17:02:09,369 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:02:09,391 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:02:09,392 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:02:15,780 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:02:15,780 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are sufficiently compatible with the patient to warrant a score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT02199379: This trial is for subjects with renal impairment. The patient has no mentioned kidney issues, so it's not applicable.\n\n2. NCT02407379: This trial is for periodontitis treatment. The patient's profile doesn't mention any dental issues, making this trial irrelevant.\n\n3. NCT01100879: This trial is for anaemia in multiple myeloma patients. The patient doesn't have multiple myeloma or anaemia mentioned in their profile.\n\nThe patient's main conditions (Type 2 Diabetes, Hypertension, and Asthma) are not addressed by any of the provided clinical trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 17:02:15,781 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are sufficiently compatible with the patient to warrant a score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT02199379: This trial is for subjects with renal impairment. The patient has no mentioned kidney issues, so it's not applicable.\n\n2. NCT02407379: This trial is for periodontitis treatment. The patient's profile doesn't mention any dental issues, making this trial irrelevant.\n\n3. NCT01100879: This trial is for anaemia in multiple myeloma patients. The patient doesn't have multiple myeloma or anaemia mentioned in their profile.\n\nThe patient's main conditions (Type 2 Diabetes, Hypertension, and Asthma) are not addressed by any of the provided clinical trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-08 17:02:15,783 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are sufficiently compatible with the patient to warrant a score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. NCT02199379: This trial is for subjects with renal impairment. The patient has no mentioned kidney issues, so it's not applicable.

2. NCT02407379: This trial is for periodontitis treatment. The patient's profile doesn't mention any dental issues, making this trial irrelevant.

3. NCT01100879: This trial is for anaemia in multiple myeloma patients. The patient doesn't have multiple myeloma or anaemia mentioned in their profile.

The patient's main conditions (Type 2 Diabetes, Hypertension, and Asthma) are not addressed by any of the provided clinical trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-08 17:02:15,784 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:02:15,784 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:02:15,785 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:02:15,785 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 750, Total trials: 5175
2024-08-08 17:02:16,967 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:02:16,989 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:02:16,989 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:02:25,212 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:02:25,214 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNeither of the provided clinical trials are suitable matches for the patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT04931979 (Prostate Cancer Trial):\n   - This trial is specifically for male patients with prostate cancer.\n   - The patient, Emily Johnson, is female and does not have prostate cancer.\n   - Compatibility score would be 0.\n\n2. NCT06207279 (Attention Rating Scale Study):\n   - This trial is for patients with Major Depressive Disorder (MDD), attention deficit hyperactivity disorder (ADHD), or Chronic Insomnia Disorder.\n   - The patient's medical conditions (Type 2 Diabetes, Hypertension, Asthma) do not match these criteria.\n   - While the trial does include healthy subjects, the patient's existing medical conditions would likely exclude her from the healthy control group.\n   - Compatibility score would be below 70.\n\nTherefore, neither trial is a suitable match for this patient with a score of 70 or higher, resulting in an empty array as the output.", type='text')]...
2024-08-08 17:02:25,214 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNeither of the provided clinical trials are suitable matches for the patient with a compatibility score of 70 or higher. Here's why:\n\n1. NCT04931979 (Prostate Cancer Trial):\n   - This trial is specifically for male patients with prostate cancer.\n   - The patient, Emily Johnson, is female and does not have prostate cancer.\n   - Compatibility score would be 0.\n\n2. NCT06207279 (Attention Rating Scale Study):\n   - This trial is for patients with Major Depressive Disorder (MDD), attention deficit hyperactivity disorder (ADHD), or Chronic Insomnia Disorder.\n   - The patient's medical conditions (Type 2 Diabetes, Hypertension, Asthma) do not match these criteria.\n   - While the trial does include healthy subjects, the patient's existing medical conditions would likely exclude her from the healthy control group.\n   - Compatibility score would be below 70.\n\nTherefore, neither trial is a suitable match for this patient with a score of 70 or higher, resulting in an empty array as the output.", type='text')]
2024-08-08 17:02:25,214 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:

[]

Explanation:
Neither of the provided clinical trials are suitable matches for the patient with a compatibility score of 70 or higher. Here's why:

1. NCT04931979 (Prostate Cancer Trial):
   - This trial is specifically for male patients with prostate cancer.
   - The patient, Emily Johnson, is female and does not have prostate cancer.
   - Compatibility score would be 0.

2. NCT06207279 (Attention Rating Scale Study):
   - This trial is for patients with Major Depressive Disorder (MDD), attention deficit hyperactivity disorder (ADHD), or Chronic Insomnia Disorder.
   - The patient's medical conditions (Type 2 Diabetes, Hypertension, Asthma) do not match these criteria.
   - While the trial does include healthy subjects, the patient's existing medical conditions would likely exclude her [SQL REDACTED] the healthy control group.
   - Compatibility score would be below 70.

Therefore, neither trial is a suitable match for this patient with a score of 70 or higher, resulting in an empty array as the output.
2024-08-08 17:02:25,215 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 3 column 1 (char 4)
2024-08-08 17:02:25,215 - app.services.anthropic_service - ERROR - Response content: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:

[]

Explanation:
Neither of the provided clinical trials are suitable matches for the patient with a compatibility score of 70 or higher. Here's why:

1. NCT04931979 (Prostate Cancer Trial):
   - This trial is specifically for male patients with prostate cancer.
   - The patient, Emily Johnson, is female and does not have prostate cancer.
   - Compatibility score would be 0.

2. NCT06207279 (Attention Rating Scale Study):
   - This trial is for patients with Major Depressive Disorder (MDD), attention deficit hyperactivity disorder (ADHD), or Chronic Insomnia Disorder.
   - The patient's medical conditions (Type 2 Diabetes, Hypertension, Asthma) do not match these criteria.
   - While the trial does include healthy subjects, the patient's existing medical conditions would likely exclude her [SQL REDACTED] the healthy control group.
   - Compatibility score would be below 70.

Therefore, neither trial is a suitable match for this patient with a score of 70 or higher, resulting in an empty array as the output.
2024-08-08 17:02:25,216 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:02:25,217 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:02:25,217 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 800, Total trials: 5175
2024-08-08 17:02:26,417 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:02:26,444 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:02:26,445 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:02:34,846 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:02:34,847 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text='After analyzing the patient profile and the provided clinical trials, I\'ve determined that none of the trials are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Here\'s why:\n\n1. NCT01939379 (Adductor Canal Nerve Block Following Total Knee Arthroplasty):\n   - This trial is for patients undergoing knee replacement surgery, which doesn\'t match Emily\'s current medical conditions.\n   - The trial status is "WITHDRAWN", making it unavailable.\n\n2. NCT03356379 (Popliteal Artery Entrapment Syndrome & TRanscutaneoUS Oxymetry):\n   - This trial is specifically for Popliteal Entrapment Syndrome, which Emily doesn\'t have.\n   - It\'s not relevant to her current medical conditions (Type 2 Diabetes, Hypertension, Asthma).\n\n3. NCT04114279 (Validation of a Totally Synthetic High Fidelity Laparoscopic Duodenal Atresia (DA) Surgical Simulator):\n   - This trial is for surgeons testing a surgical simulator, not for patients.\n   - It\'s not related to Emily\'s medical conditions.\n\nGiven that none of the trials are sufficiently compatible with Emily\'s profile, the output is an empty array:\n\n[]', type='text')]...
2024-08-08 17:02:34,847 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='After analyzing the patient profile and the provided clinical trials, I\'ve determined that none of the trials are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Here\'s why:\n\n1. NCT01939379 (Adductor Canal Nerve Block Following Total Knee Arthroplasty):\n   - This trial is for patients undergoing knee replacement surgery, which doesn\'t match Emily\'s current medical conditions.\n   - The trial status is "WITHDRAWN", making it unavailable.\n\n2. NCT03356379 (Popliteal Artery Entrapment Syndrome & TRanscutaneoUS Oxymetry):\n   - This trial is specifically for Popliteal Entrapment Syndrome, which Emily doesn\'t have.\n   - It\'s not relevant to her current medical conditions (Type 2 Diabetes, Hypertension, Asthma).\n\n3. NCT04114279 (Validation of a Totally Synthetic High Fidelity Laparoscopic Duodenal Atresia (DA) Surgical Simulator):\n   - This trial is for surgeons testing a surgical simulator, not for patients.\n   - It\'s not related to Emily\'s medical conditions.\n\nGiven that none of the trials are sufficiently compatible with Emily\'s profile, the output is an empty array:\n\n[]', type='text')]
2024-08-08 17:02:34,848 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Here's why:

1. NCT01939379 (Adductor Canal Nerve Block Following Total Knee Arthroplasty):
   - This trial is for patients undergoing knee replacement surgery, which doesn't match Emily's current medical conditions.
   - The trial status is "WITHDRAWN", making it unavailable.

2. NCT03356379 (Popliteal Artery Entrapment Syndrome & TRanscutaneoUS Oxymetry):
   - This trial is specifically for Popliteal Entrapment Syndrome, which Emily doesn't have.
   - It's not relevant to her current medical conditions (Type 2 Diabetes, Hypertension, Asthma).

3. NCT04114279 (Validation of a Totally Synthetic High Fidelity Laparoscopic Duodenal Atresia (DA) Surgical Simulator):
   - This trial is for surgeons testing a surgical simulator, not for patients.
   - It's not related to Emily's medical conditions.

Given that none of the trials are sufficiently compatible with Emily's profile, the output is an empty array:

[]
2024-08-08 17:02:34,849 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:02:34,849 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:02:34,850 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:02:34,851 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 850, Total trials: 5175
2024-08-08 17:02:36,102 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:02:36,130 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:02:36,131 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:02:43,707 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:02:43,708 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result in the requested JSON format:\n\n[]\n\nExplanation:\nNeither of the two clinical trials provided are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Here's why:\n\n1. NCT05359679 (Value Champions to Reduce Inappropriate Prescribing for People With Dementia):\n   - This trial is focused on patients with dementia who are 65 years or older.\n   - Emily is 38 years old (born in 1985) and does not have dementia listed in her medical conditions.\n   - The trial aims to reduce potentially inappropriate medications, which are not relevant to Emily's current medication list.\n\n2. NCT04527679 (Cisplatin and Gemcitabine Chemotherapy and Lenvatinib for Intrahepatic Cholangiocarcinoma):\n   - This trial is for patients with intrahepatic cholangiocarcinoma, a type of liver cancer.\n   - Emily does not have this condition listed in her medical profile.\n   - The trial requires patients to have unresectable or metastatic cancer, which Emily does not have.\n\nEmily's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications (Metformin, Lisinopril, and Albuterol Inhaler) do not align with the focus of either of these clinical trials. Therefore, no trials match with a score of 70 or higher, resulting in an empty array as the output.", type='text')]...
2024-08-08 17:02:43,709 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result in the requested JSON format:\n\n[]\n\nExplanation:\nNeither of the two clinical trials provided are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Here's why:\n\n1. NCT05359679 (Value Champions to Reduce Inappropriate Prescribing for People With Dementia):\n   - This trial is focused on patients with dementia who are 65 years or older.\n   - Emily is 38 years old (born in 1985) and does not have dementia listed in her medical conditions.\n   - The trial aims to reduce potentially inappropriate medications, which are not relevant to Emily's current medication list.\n\n2. NCT04527679 (Cisplatin and Gemcitabine Chemotherapy and Lenvatinib for Intrahepatic Cholangiocarcinoma):\n   - This trial is for patients with intrahepatic cholangiocarcinoma, a type of liver cancer.\n   - Emily does not have this condition listed in her medical profile.\n   - The trial requires patients to have unresectable or metastatic cancer, which Emily does not have.\n\nEmily's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications (Metformin, Lisinopril, and Albuterol Inhaler) do not align with the focus of either of these clinical trials. Therefore, no trials match with a score of 70 or higher, resulting in an empty array as the output.", type='text')]
2024-08-08 17:02:43,709 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result in the requested JSON format:

[]

Explanation:
Neither of the two clinical trials provided are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Here's why:

1. NCT05359679 (Value Champions to Reduce Inappropriate Prescribing for People With Dementia):
   - This trial is focused on patients with dementia who are 65 years or older.
   - Emily is 38 years old (born in 1985) and does not have dementia listed in her medical conditions.
   - The trial aims to reduce potentially inappropriate medications, which are not relevant to Emily's current medication list.

2. NCT04527679 (Cisplatin and Gemcitabine Chemotherapy and Lenvatinib for Intrahepatic Cholangiocarcinoma):
   - This trial is for patients with intrahepatic cholangiocarcinoma, a type of liver cancer.
   - Emily does not have this condition listed in her medical profile.
   - The trial requires patients to have unresectable or metastatic cancer, which Emily does not have.

Emily's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications (Metformin, Lisinopril, and Albuterol Inhaler) do not align with the focus of either of these clinical trials. Therefore, no trials match with a score of 70 or higher, resulting in an empty array as the output.
2024-08-08 17:02:43,710 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:02:43,710 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:02:43,711 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:02:43,711 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 900, Total trials: 5175
2024-08-08 17:02:44,888 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:02:44,915 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:02:44,916 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:02:51,187 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:02:51,187 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT01250379 (Breast Cancer study): Not compatible as Emily doesn't have breast cancer.\n2. NCT03678779 (Snacking study): Not compatible as it's for parents of children aged 8-12, which doesn't apply to Emily's profile.\n3. NCT03435679 (Knee Arthroplasty study): Not compatible as Emily doesn't have a periprosthetic knee infection.\n4. NCT00554879 (Dry Eye study): Not compatible as Emily doesn't have a diagnosis of dry eye syndrome.\n\nEmily's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications don't align with any of the provided clinical trials. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]...
2024-08-08 17:02:51,188 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. NCT01250379 (Breast Cancer study): Not compatible as Emily doesn't have breast cancer.\n2. NCT03678779 (Snacking study): Not compatible as it's for parents of children aged 8-12, which doesn't apply to Emily's profile.\n3. NCT03435679 (Knee Arthroplasty study): Not compatible as Emily doesn't have a periprosthetic knee infection.\n4. NCT00554879 (Dry Eye study): Not compatible as Emily doesn't have a diagnosis of dry eye syndrome.\n\nEmily's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications don't align with any of the provided clinical trials. Therefore, there are no suitable matches with a score of 70 or higher.", type='text')]
2024-08-08 17:02:51,189 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for Emily Johnson with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. NCT01250379 (Breast Cancer study): Not compatible as Emily doesn't have breast cancer.
2. NCT03678779 (Snacking study): Not compatible as it's for parents of children aged 8-12, which doesn't apply to Emily's profile.
3. NCT03435679 (Knee Arthroplasty study): Not compatible as Emily doesn't have a periprosthetic knee infection.
4. NCT00554879 (Dry Eye study): Not compatible as Emily doesn't have a diagnosis of dry eye syndrome.

Emily's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications don't align with any of the provided clinical trials. Therefore, there are no suitable matches with a score of 70 or higher.
2024-08-08 17:02:51,189 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:02:51,190 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:02:51,191 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:02:51,191 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 950, Total trials: 5175
2024-08-08 17:02:52,401 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:02:52,430 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:02:52,430 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:02:59,108 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:02:59,108 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Emily Johnson, has Type 2 Diabetes, Hypertension, and Asthma.\n2. The clinical trials provided are focused on:\n   - Hemophilia and bleeding disorders (NCT03327779)\n   - Coronary Artery Disease and Myocardial Ischemia in healthy volunteers (NCT05195879)\n   - Draining hematomas following traumatic injury (NCT00582179)\n   - Hodgkin Lymphoma in elderly patients (NCT01056679)\n\nNone of these trials align with the patient's medical conditions. Additionally, the patient's age (38 years old) doesn't match the age criteria for the trials that specify age requirements.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]...
2024-08-08 17:02:59,109 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient, Emily Johnson, has Type 2 Diabetes, Hypertension, and Asthma.\n2. The clinical trials provided are focused on:\n   - Hemophilia and bleeding disorders (NCT03327779)\n   - Coronary Artery Disease and Myocardial Ischemia in healthy volunteers (NCT05195879)\n   - Draining hematomas following traumatic injury (NCT00582179)\n   - Hodgkin Lymphoma in elderly patients (NCT01056679)\n\nNone of these trials align with the patient's medical conditions. Additionally, the patient's age (38 years old) doesn't match the age criteria for the trials that specify age requirements.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-08 17:02:59,109 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. The patient, Emily Johnson, has Type 2 Diabetes, Hypertension, and Asthma.
2. The clinical trials provided are focused on:
   - Hemophilia and bleeding disorders (NCT03327779)
   - Coronary Artery Disease and Myocardial Ischemia in healthy volunteers (NCT05195879)
   - Draining hematomas following traumatic injury (NCT00582179)
   - Hodgkin Lymphoma in elderly patients (NCT01056679)

None of these trials align with the patient's medical conditions. Additionally, the patient's age (38 years old) doesn't match the age criteria for the trials that specify age requirements.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-08 17:02:59,110 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:02:59,110 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:02:59,111 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:02:59,112 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1000, Total trials: 5175
2024-08-08 17:03:00,295 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:03:00,325 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:03:00,326 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:03:07,012 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:03:07,013 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05448079) is focused on postmenopausal women and sexual counseling, which doesn't match the patient's profile or medical conditions.\n\n2. The second trial (NCT01350479) is about MRSA infections in nursing home residents, which also doesn't align with the patient's profile or medical conditions.\n\nThe patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. Neither of the provided clinical trials addresses these specific conditions or matches her demographic profile. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 17:03:07,014 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT05448079) is focused on postmenopausal women and sexual counseling, which doesn't match the patient's profile or medical conditions.\n\n2. The second trial (NCT01350479) is about MRSA infections in nursing home residents, which also doesn't align with the patient's profile or medical conditions.\n\nThe patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. Neither of the provided clinical trials addresses these specific conditions or matches her demographic profile. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-08 17:03:07,014 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no suitable trials with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT05448079) is focused on postmenopausal women and sexual counseling, which doesn't match the patient's profile or medical conditions.

2. The second trial (NCT01350479) is about MRSA infections in nursing home residents, which also doesn't align with the patient's profile or medical conditions.

The patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. Neither of the provided clinical trials addresses these specific conditions or matches her demographic profile. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-08 17:03:07,015 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:03:07,015 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:03:07,016 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:03:07,016 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1050, Total trials: 5175
2024-08-08 17:03:08,194 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:03:08,224 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:03:08,224 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:03:17,194 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:03:17,195 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNone of the provided clinical trials have a compatibility score of 70 or higher for this patient. Here's why:\n\n1. NCT01566279 (CPCT-03 Study):\n   - This trial is for patients with solid tumors, which the patient doesn't have.\n   - It requires progressive disease and no standard treatment options, which doesn't apply to this patient.\n   - The patient's conditions (Type 2 Diabetes, Hypertension, Asthma) are not the focus of this study.\n\n2. NCT00973479 (Rheumatoid Arthritis Study):\n   - This trial is specifically for rheumatoid arthritis, which the patient doesn't have.\n   - The patient's conditions and medications don't match the requirements for this study.\n\n3. NCT02744079 (Breast Cancer Diet Study):\n   - This trial is for women with breast cancer, which the patient doesn't have.\n   - The study focuses on dietary interventions for breast cancer, which is not relevant to the patient's conditions.\n\nThe patient's profile (37-year-old female with Type 2 Diabetes, Hypertension, and Asthma) doesn't closely match any of the provided clinical trials. For a higher compatibility score, we would need trials that focus on diabetes, hypertension, or asthma management, or studies that are looking at these conditions in combination.", type='text')]...
2024-08-08 17:03:17,195 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNone of the provided clinical trials have a compatibility score of 70 or higher for this patient. Here's why:\n\n1. NCT01566279 (CPCT-03 Study):\n   - This trial is for patients with solid tumors, which the patient doesn't have.\n   - It requires progressive disease and no standard treatment options, which doesn't apply to this patient.\n   - The patient's conditions (Type 2 Diabetes, Hypertension, Asthma) are not the focus of this study.\n\n2. NCT00973479 (Rheumatoid Arthritis Study):\n   - This trial is specifically for rheumatoid arthritis, which the patient doesn't have.\n   - The patient's conditions and medications don't match the requirements for this study.\n\n3. NCT02744079 (Breast Cancer Diet Study):\n   - This trial is for women with breast cancer, which the patient doesn't have.\n   - The study focuses on dietary interventions for breast cancer, which is not relevant to the patient's conditions.\n\nThe patient's profile (37-year-old female with Type 2 Diabetes, Hypertension, and Asthma) doesn't closely match any of the provided clinical trials. For a higher compatibility score, we would need trials that focus on diabetes, hypertension, or asthma management, or studies that are looking at these conditions in combination.", type='text')]
2024-08-08 17:03:17,196 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:

[]

Explanation:
None of the provided clinical trials have a compatibility score of 70 or higher for this patient. Here's why:

1. NCT01566279 (CPCT-03 Study):
   - This trial is for patients with solid tumors, which the patient doesn't have.
   - It requires progressive disease and no standard treatment options, which doesn't apply to this patient.
   - The patient's conditions (Type 2 Diabetes, Hypertension, Asthma) are not the focus of this study.

2. NCT00973479 (Rheumatoid Arthritis Study):
   - This trial is specifically for rheumatoid arthritis, which the patient doesn't have.
   - The patient's conditions and medications don't match the requirements for this study.

3. NCT02744079 (Breast Cancer Diet Study):
   - This trial is for women with breast cancer, which the patient doesn't have.
   - The study focuses on dietary interventions for breast cancer, which is not relevant to the patient's conditions.

The patient's profile (37-year-old female with Type 2 Diabetes, Hypertension, and Asthma) doesn't closely match any of the provided clinical trials. For a higher compatibility score, we would need trials that focus on diabetes, hypertension, or asthma management, or studies that are looking at these conditions in combination.
2024-08-08 17:03:17,196 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:03:17,197 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:03:17,197 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:03:17,198 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1100, Total trials: 5175
2024-08-08 17:03:18,387 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:03:18,418 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:03:18,419 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:03:23,667 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:03:23,668 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT00578279) is for pancreatic cancer, which the patient does not have.\n2. The second trial (NCT03482479) is for various types of vasculitis, which the patient does not have.\n3. The third trial (NCT05403879) is for greater tuberosity fractures, which the patient does not have.\n\nThe patient's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) do not align with any of the provided clinical trials. Additionally, the patient's age (38 years old) and medications do not specifically match the eligibility criteria of the given trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 17:03:23,668 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n1. The first trial (NCT00578279) is for pancreatic cancer, which the patient does not have.\n2. The second trial (NCT03482479) is for various types of vasculitis, which the patient does not have.\n3. The third trial (NCT05403879) is for greater tuberosity fractures, which the patient does not have.\n\nThe patient's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) do not align with any of the provided clinical trials. Additionally, the patient's age (38 years old) and medications do not specifically match the eligibility criteria of the given trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-08 17:03:23,669 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
1. The first trial (NCT00578279) is for pancreatic cancer, which the patient does not have.
2. The second trial (NCT03482479) is for various types of vasculitis, which the patient does not have.
3. The third trial (NCT05403879) is for greater tuberosity fractures, which the patient does not have.

The patient's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) do not align with any of the provided clinical trials. Additionally, the patient's age (38 years old) and medications do not specifically match the eligibility criteria of the given trials. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-08 17:03:23,669 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:03:23,670 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:03:23,671 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:03:23,671 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1150, Total trials: 5175
2024-08-08 17:03:24,935 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:03:24,968 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:03:24,969 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:03:33,083 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:03:33,084 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Here's the explanation:\n\n1. NCT02602379 (Evaluation of NoL Index and ANI After Nociceptive Stimulation):\n   - This trial is focused on pain management during surgery, which doesn't align with the patient's current medical conditions.\n   - The trial requires patients undergoing abdominal surgery, which is not indicated in the patient's profile.\n   - The patient's medical conditions (Type 2 Diabetes, Hypertension, Asthma) are not directly relevant to this study.\n\n2. NCT00913679 (Comparison of Surgical Techniques in Hip Resurfacing Arthroplasty):\n   - This trial is specifically for patients with osteoarthritis of the hip requiring hip resurfacing arthroplasty.\n   - The patient's profile does not mention any hip-related conditions or need for hip surgery.\n   - The age range for this trial (30-60 years) does match the patient (born in 1985, so approximately 38 years old), but this alone is not enough for a high compatibility score.\n\nGiven that neither trial aligns well with the patient's medical conditions or current health status, the compatibility scores would be below 70 for both trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]...
2024-08-08 17:03:33,084 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Here's the explanation:\n\n1. NCT02602379 (Evaluation of NoL Index and ANI After Nociceptive Stimulation):\n   - This trial is focused on pain management during surgery, which doesn't align with the patient's current medical conditions.\n   - The trial requires patients undergoing abdominal surgery, which is not indicated in the patient's profile.\n   - The patient's medical conditions (Type 2 Diabetes, Hypertension, Asthma) are not directly relevant to this study.\n\n2. NCT00913679 (Comparison of Surgical Techniques in Hip Resurfacing Arthroplasty):\n   - This trial is specifically for patients with osteoarthritis of the hip requiring hip resurfacing arthroplasty.\n   - The patient's profile does not mention any hip-related conditions or need for hip surgery.\n   - The age range for this trial (30-60 years) does match the patient (born in 1985, so approximately 38 years old), but this alone is not enough for a high compatibility score.\n\nGiven that neither trial aligns well with the patient's medical conditions or current health status, the compatibility scores would be below 70 for both trials.\n\nTherefore, the output in the requested JSON format is an empty array:\n\n[]", type='text')]
2024-08-08 17:03:33,084 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and the provided clinical trials, there are no suitable matches with a compatibility score of 70 or higher. Here's the explanation:

1. NCT02602379 (Evaluation of NoL Index and ANI After Nociceptive Stimulation):
   - This trial is focused on pain management during surgery, which doesn't align with the patient's current medical conditions.
   - The trial requires patients undergoing abdominal surgery, which is not indicated in the patient's profile.
   - The patient's medical conditions (Type 2 Diabetes, Hypertension, Asthma) are not directly relevant to this study.

2. NCT00913679 (Comparison of Surgical Techniques in Hip Resurfacing Arthroplasty):
   - This trial is specifically for patients with osteoarthritis of the hip requiring hip resurfacing arthroplasty.
   - The patient's profile does not mention any hip-related conditions or need for hip surgery.
   - The age range for this trial (30-60 years) does match the patient (born in 1985, so approximately 38 years old), but this alone is not enough for a high compatibility score.

Given that neither trial aligns well with the patient's medical conditions or current health status, the compatibility scores would be below 70 for both trials.

Therefore, the output in the requested JSON format is an empty array:

[]
2024-08-08 17:03:33,085 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:03:33,085 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:03:33,086 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:03:33,086 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1200, Total trials: 5175
2024-08-08 17:03:34,270 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:03:34,295 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:03:34,296 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:03:40,240 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:03:40,240 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT02711579 (Celecoxib study): This trial is for healthy volunteers, but the patient has multiple medical conditions (Type 2 Diabetes, Hypertension, Asthma).\n\n2. NCT01174979 (Caroverin for inner ear diseases): The patient doesn't have any mentioned inner ear diseases or tinnitus.\n\n3. NCT05990179 (Newborn screening study): This study is for newborns, but the patient is an adult born in 1985.\n\nNone of these trials are compatible with the patient's profile, age, or medical conditions. Therefore, there are no matches with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 17:03:40,241 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT02711579 (Celecoxib study): This trial is for healthy volunteers, but the patient has multiple medical conditions (Type 2 Diabetes, Hypertension, Asthma).\n\n2. NCT01174979 (Caroverin for inner ear diseases): The patient doesn't have any mentioned inner ear diseases or tinnitus.\n\n3. NCT05990179 (Newborn screening study): This study is for newborns, but the patient is an adult born in 1985.\n\nNone of these trials are compatible with the patient's profile, age, or medical conditions. Therefore, there are no matches with a compatibility score of 70 or higher.", type='text')]
2024-08-08 17:03:40,241 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are suitable matches for the patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. NCT02711579 (Celecoxib study): This trial is for healthy volunteers, but the patient has multiple medical conditions (Type 2 Diabetes, Hypertension, Asthma).

2. NCT01174979 (Caroverin for inner ear diseases): The patient doesn't have any mentioned inner ear diseases or tinnitus.

3. NCT05990179 (Newborn screening study): This study is for newborns, but the patient is an adult born in 1985.

None of these trials are compatible with the patient's profile, age, or medical conditions. Therefore, there are no matches with a compatibility score of 70 or higher.
2024-08-08 17:03:40,241 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:03:40,241 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:03:40,242 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:03:40,242 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1250, Total trials: 5175
2024-08-08 17:03:41,412 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:03:41,441 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:03:41,442 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:03:48,064 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:03:48,065 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT01671579: This trial is for pediatric Crohn's disease patients. The patient is 38 years old and doesn't have Crohn's disease.\n\n2. NCT03758079: This trial is for hemodialysis patients with uremic pruritus. The patient doesn't have kidney disease or pruritus.\n\n3. NCT01182779: This trial is for patients with chordoma of the skull base. The patient doesn't have this condition.\n\nGiven that none of the trials are suitable for this patient, the output in the requested JSON format is:\n\n[]\n\nThe patient's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications (Metformin, Lisinopril, and Albuterol Inhaler) do not align with the specific conditions and criteria of the provided clinical trials.", type='text')]...
2024-08-08 17:03:48,067 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT01671579: This trial is for pediatric Crohn's disease patients. The patient is 38 years old and doesn't have Crohn's disease.\n\n2. NCT03758079: This trial is for hemodialysis patients with uremic pruritus. The patient doesn't have kidney disease or pruritus.\n\n3. NCT01182779: This trial is for patients with chordoma of the skull base. The patient doesn't have this condition.\n\nGiven that none of the trials are suitable for this patient, the output in the requested JSON format is:\n\n[]\n\nThe patient's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications (Metformin, Lisinopril, and Albuterol Inhaler) do not align with the specific conditions and criteria of the provided clinical trials.", type='text')]
2024-08-08 17:03:48,067 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Unfortunately, none of the trials match this patient's profile with a compatibility score of 70 or higher. Here's why:

1. NCT01671579: This trial is for pediatric Crohn's disease patients. The patient is 38 years old and doesn't have Crohn's disease.

2. NCT03758079: This trial is for hemodialysis patients with uremic pruritus. The patient doesn't have kidney disease or pruritus.

3. NCT01182779: This trial is for patients with chordoma of the skull base. The patient doesn't have this condition.

Given that none of the trials are suitable for this patient, the output in the requested JSON format is:

[]

The patient's medical conditions (Type 2 Diabetes, Hypertension, and Asthma) and medications (Metformin, Lisinopril, and Albuterol Inhaler) do not align with the specific conditions and criteria of the provided clinical trials.
2024-08-08 17:03:48,068 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:03:48,068 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:03:48,069 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:03:48,069 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1300, Total trials: 5175
2024-08-08 17:03:49,257 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:03:49,288 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:03:49,288 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:03:57,031 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:03:57,032 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNeither of the provided clinical trials matches the patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT01778179 (Solar Lentigines Study):\n   - The patient doesn't have any mentioned skin conditions.\n   - The study is for a specific age range (40-65), and the patient is 38 years old.\n   - The study is related to a condition not present in the patient's profile.\n\n2. NCT03456479 (Cow's Milk Protein Allergy Study):\n   - The study is for infants and children up to 2 years old, while the patient is an adult.\n   - The patient doesn't have any mentioned allergies or related conditions.\n   - The study focuses on a condition not present in the patient's profile.\n\nThe patient's profile (Emily Johnson, 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma) does not align with the specific conditions, age ranges, or requirements of either clinical trial. Therefore, no trials match with a score of 70 or higher, resulting in an empty array.", type='text')]...
2024-08-08 17:03:57,032 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNeither of the provided clinical trials matches the patient's profile with a compatibility score of 70 or higher. Here's why:\n\n1. NCT01778179 (Solar Lentigines Study):\n   - The patient doesn't have any mentioned skin conditions.\n   - The study is for a specific age range (40-65), and the patient is 38 years old.\n   - The study is related to a condition not present in the patient's profile.\n\n2. NCT03456479 (Cow's Milk Protein Allergy Study):\n   - The study is for infants and children up to 2 years old, while the patient is an adult.\n   - The patient doesn't have any mentioned allergies or related conditions.\n   - The study focuses on a condition not present in the patient's profile.\n\nThe patient's profile (Emily Johnson, 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma) does not align with the specific conditions, age ranges, or requirements of either clinical trial. Therefore, no trials match with a score of 70 or higher, resulting in an empty array.", type='text')]
2024-08-08 17:03:57,033 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I have analyzed the compatibility. Here's the result:

[]

Explanation:
Neither of the provided clinical trials matches the patient's profile with a compatibility score of 70 or higher. Here's why:

1. NCT01778179 (Solar Lentigines Study):
   - The patient doesn't have any mentioned skin conditions.
   - The study is for a specific age range (40-65), and the patient is 38 years old.
   - The study is related to a condition not present in the patient's profile.

2. NCT03456479 (Cow's Milk Protein Allergy Study):
   - The study is for infants and children up to 2 years old, while the patient is an adult.
   - The patient doesn't have any mentioned allergies or related conditions.
   - The study focuses on a condition not present in the patient's profile.

The patient's profile (Emily Johnson, 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma) does not align with the specific conditions, age ranges, or requirements of either clinical trial. Therefore, no trials match with a score of 70 or higher, resulting in an empty array.
2024-08-08 17:03:57,033 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:03:57,034 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:03:57,035 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:03:57,036 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1350, Total trials: 5175
2024-08-08 17:03:58,298 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:03:58,328 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:03:58,329 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:04:04,323 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:04:04,324 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. None of the provided clinical trials are specifically targeting these conditions. The available trials focus on:\n\n1. Non-muscle Invasive Bladder Cancer (NCT05951179)\n2. Traumatic Brain Injury and Cognitive Deficits (NCT02393079)\n3. Bipolar I Disorder (NCT02147379)\n4. Atopic Dermatitis and Food Allergy (NCT02552979)\n\nThese conditions do not align with Emily's medical profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are recommended for this patient based on the given criteria.", type='text')]...
2024-08-08 17:04:04,324 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. None of the provided clinical trials are specifically targeting these conditions. The available trials focus on:\n\n1. Non-muscle Invasive Bladder Cancer (NCT05951179)\n2. Traumatic Brain Injury and Cognitive Deficits (NCT02393079)\n3. Bipolar I Disorder (NCT02147379)\n4. Atopic Dermatitis and Food Allergy (NCT02552979)\n\nThese conditions do not align with Emily's medical profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are recommended for this patient based on the given criteria.", type='text')]
2024-08-08 17:04:04,324 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, there are no trials that match with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. None of the provided clinical trials are specifically targeting these conditions. The available trials focus on:

1. Non-muscle Invasive Bladder Cancer (NCT05951179)
2. Traumatic Brain Injury and Cognitive Deficits (NCT02393079)
3. Bipolar I Disorder (NCT02147379)
4. Atopic Dermatitis and Food Allergy (NCT02552979)

These conditions do not align with Emily's medical profile, resulting in low compatibility scores (below 70) for all trials. Therefore, no trials are recommended for this patient based on the given criteria.
2024-08-08 17:04:04,324 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:04:04,325 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:04:04,325 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:04:04,326 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1400, Total trials: 5175
2024-08-08 17:04:05,573 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:04:05,597 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:04:05,598 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:04:12,286 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:04:12,288 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma.\n2. The first trial (NCT01460979) is for ovarian or endometrial cancer, which the patient doesn't have.\n3. The second trial (NCT03924479) is for heart failure patients, which is not listed in the patient's medical conditions.\n4. The third trial (NCT05571579) is for brain tumor patients, which doesn't apply to this patient.\n5. The fourth trial (NCT05165979) is for COVID-19 patients who required hospitalization, which is not mentioned in the patient's profile.\n\nGiven these factors, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials with a compatibility score of 70 or higher for this patient based on the provided information.", type='text')]...
2024-08-08 17:04:12,288 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:\n\n1. The patient is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma.\n2. The first trial (NCT01460979) is for ovarian or endometrial cancer, which the patient doesn't have.\n3. The second trial (NCT03924479) is for heart failure patients, which is not listed in the patient's medical conditions.\n4. The third trial (NCT05571579) is for brain tumor patients, which doesn't apply to this patient.\n5. The fourth trial (NCT05165979) is for COVID-19 patients who required hospitalization, which is not mentioned in the patient's profile.\n\nGiven these factors, the output in the requested JSON format would be an empty array:\n\n[]\n\nThis indicates that there are no suitable trials with a compatibility score of 70 or higher for this patient based on the provided information.", type='text')]
2024-08-08 17:04:12,289 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I've determined that none of the trials are suitable matches for this patient with a compatibility score of 70 or higher. Here's why:

1. The patient is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma.
2. The first trial (NCT01460979) is for ovarian or endometrial cancer, which the patient doesn't have.
3. The second trial (NCT03924479) is for heart failure patients, which is not listed in the patient's medical conditions.
4. The third trial (NCT05571579) is for brain tumor patients, which doesn't apply to this patient.
5. The fourth trial (NCT05165979) is for COVID-19 patients who required hospitalization, which is not mentioned in the patient's profile.

Given these factors, the output in the requested JSON format would be an empty array:

[]

This indicates that there are no suitable trials with a compatibility score of 70 or higher for this patient based on the provided information.
2024-08-08 17:04:12,290 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:04:12,290 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:04:12,291 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:04:12,291 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1450, Total trials: 5175
2024-08-08 17:04:13,533 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:04:13,561 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:04:13,562 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:04:25,635 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:04:25,665 - app.services.anthropic_service - ERROR - Error parsing matching response: Extra data: line 15 column 1 (char 617)
2024-08-08 17:04:25,670 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:04:25,670 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:04:25,671 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1500, Total trials: 5175
2024-08-08 17:04:26,877 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:04:26,907 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:04:26,907 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:04:35,431 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:04:35,432 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are sufficiently compatible with the patient's profile to warrant a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT01081379 (Cytomegalovirus study): This trial is specifically for pregnant women with CMV infection, which doesn't match Emily's profile.\n\n2. NCT04267679 (Cannabidiol for Anxiety): While this trial is for anxiety, which is not listed in Emily's medical conditions. Additionally, Emily's current medications and conditions might interfere with the study requirements.\n\n3. NCT04367779 (Proton Beam Therapy for Cancer): This trial is for specific types of cancer (brain cancer, meningioma, sarcoma), which are not part of Emily's medical conditions.\n\nEmily's profile indicates she has Type 2 Diabetes, Hypertension, and Asthma, and is taking medications for these conditions. None of the provided clinical trials are directly related to these conditions or consider them in their eligibility criteria. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]...
2024-08-08 17:04:35,433 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are sufficiently compatible with the patient's profile to warrant a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\n\n1. NCT01081379 (Cytomegalovirus study): This trial is specifically for pregnant women with CMV infection, which doesn't match Emily's profile.\n\n2. NCT04267679 (Cannabidiol for Anxiety): While this trial is for anxiety, which is not listed in Emily's medical conditions. Additionally, Emily's current medications and conditions might interfere with the study requirements.\n\n3. NCT04367779 (Proton Beam Therapy for Cancer): This trial is for specific types of cancer (brain cancer, meningioma, sarcoma), which are not part of Emily's medical conditions.\n\nEmily's profile indicates she has Type 2 Diabetes, Hypertension, and Asthma, and is taking medications for these conditions. None of the provided clinical trials are directly related to these conditions or consider them in their eligibility criteria. Therefore, there are no suitable matches with a compatibility score of 70 or higher.", type='text')]
2024-08-08 17:04:35,433 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and the provided clinical trials, I have determined that none of the trials are sufficiently compatible with the patient's profile to warrant a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:

1. NCT01081379 (Cytomegalovirus study): This trial is specifically for pregnant women with CMV infection, which doesn't match Emily's profile.

2. NCT04267679 (Cannabidiol for Anxiety): While this trial is for anxiety, which is not listed in Emily's medical conditions. Additionally, Emily's current medications and conditions might interfere with the study requirements.

3. NCT04367779 (Proton Beam Therapy for Cancer): This trial is for specific types of cancer (brain cancer, meningioma, sarcoma), which are not part of Emily's medical conditions.

Emily's profile indicates she has Type 2 Diabetes, Hypertension, and Asthma, and is taking medications for these conditions. None of the provided clinical trials are directly related to these conditions or consider them in their eligibility criteria. Therefore, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-08 17:04:35,434 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:04:35,434 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:04:35,435 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 1
2024-08-08 17:04:35,435 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1550, Total trials: 5175
2024-08-08 17:04:36,613 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:04:36,637 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:04:36,638 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:04:45,567 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:04:45,568 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT00350779",\n        "compatibility_score": 90,\n        "reasons": [\n            "Patient has Type 2 Diabetes Mellitus, which is the main condition targeted by this trial",\n            "Patient is currently taking Metformin, which aligns with the trial\'s focus on patients using metformin therapy",\n            "Trial specifically targets patients with inadequate glycemic control, which may apply to this patient",\n            "Patient\'s age (38) and gender (female) do not exclude her from the trial",\n            "Patient is not on insulin therapy, which is an exclusion criterion for the trial"\n        ]\n    }\n]\n\nExplanation:\n1. The trial NCT00350779 is highly compatible with Emily Johnson\'s profile:\n   - It specifically targets Type 2 Diabetes Mellitus, which is one of Emily\'s medical conditions.\n   - The trial focuses on patients taking metformin, which Emily is currently using.\n   - Emily meets the inclusion criteria and doesn\'t fall under any of the stated exclusion criteria.\n\n2. The other two trials (NCT03201679 and NCT02369679) are not suitable matches:\n   - NCT03201679 focuses on hip fractures and sepsis, which are not part of Emily\'s medical profile.\n   - NCT02369679 is about upper limb lymphedema treatment, which is not relevant to Emily\'s conditions.\n\nTherefore, only one trial meets the criteria with a compatibility score of 70 or higher.', type='text')]...
2024-08-08 17:04:45,568 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='Based on the patient profile and clinical trial data provided, here\'s the matching result:\n\n[\n    {\n        "nct_id": "NCT00350779",\n        "compatibility_score": 90,\n        "reasons": [\n            "Patient has Type 2 Diabetes Mellitus, which is the main condition targeted by this trial",\n            "Patient is currently taking Metformin, which aligns with the trial\'s focus on patients using metformin therapy",\n            "Trial specifically targets patients with inadequate glycemic control, which may apply to this patient",\n            "Patient\'s age (38) and gender (female) do not exclude her from the trial",\n            "Patient is not on insulin therapy, which is an exclusion criterion for the trial"\n        ]\n    }\n]\n\nExplanation:\n1. The trial NCT00350779 is highly compatible with Emily Johnson\'s profile:\n   - It specifically targets Type 2 Diabetes Mellitus, which is one of Emily\'s medical conditions.\n   - The trial focuses on patients taking metformin, which Emily is currently using.\n   - Emily meets the inclusion criteria and doesn\'t fall under any of the stated exclusion criteria.\n\n2. The other two trials (NCT03201679 and NCT02369679) are not suitable matches:\n   - NCT03201679 focuses on hip fractures and sepsis, which are not part of Emily\'s medical profile.\n   - NCT02369679 is about upper limb lymphedema treatment, which is not relevant to Emily\'s conditions.\n\nTherefore, only one trial meets the criteria with a compatibility score of 70 or higher.', type='text')]
2024-08-08 17:04:45,569 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, here's the matching result:

[
    {
        "nct_id": "NCT00350779",
        "compatibility_score": 90,
        "reasons": [
            "Patient has Type 2 Diabetes Mellitus, which is the main condition targeted by this trial",
            "Patient is currently taking Metformin, which aligns with the trial's focus on patients using metformin therapy",
            "Trial specifically targets patients with inadequate glycemic control, which may apply to this patient",
            "Patient's age (38) and gender (female) do not exclude her [SQL REDACTED] the trial",
            "Patient is not on insulin therapy, which is an exclusion criterion for the trial"
        ]
    }
]

Explanation:
1. The trial NCT00350779 is highly compatible with Emily Johnson's profile:
   - It specifically targets Type 2 Diabetes Mellitus, which is one of Emily's medical conditions.
   - The trial focuses on patients taking metformin, which Emily is currently using.
   - Emily meets the inclusion criteria and doesn't fall under any of the stated exclusion criteria.

2. The other two trials (NCT03201679 and NCT02369679) are not suitable matches:
   - NCT03201679 focuses on hip fractures and sepsis, which are not part of Emily's medical profile.
   - NCT02369679 is about upper limb lymphedema treatment, which is not relevant to Emily's conditions.

Therefore, only one trial meets the criteria with a compatibility score of 70 or higher.
2024-08-08 17:04:45,569 - app.services.anthropic_service - INFO - Validated 1 out of 1 matches
2024-08-08 17:04:45,570 - app.services.anthropic_service - INFO - Parsed 1 matches from Anthropic response
2024-08-08 17:04:45,703 - app.services.trial_matching_service - ERROR - Error processing batch for user 66b5317dedf1eada14fb290b: 'TrialMatchingService' object has no attribute 'emit_trial_matches'
Traceback (most recent call last):
  File "C:\Users\ethan\Documents\ai_clinical_trial_screener\backend\app\services\trial_matching_service.py", line 59, in match_patient_to_trials
    await self.emit_trial_matches(str(user_id), new_matches)
AttributeError: 'TrialMatchingService' object has no attribute 'emit_trial_matches'
2024-08-08 17:04:45,706 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1600, Total trials: 5175
2024-08-08 17:04:46,894 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:04:46,926 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:04:46,927 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:04:53,146 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:04:53,146 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text='After analyzing the patient profile and clinical trial data, I have determined that there are no trials that match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. None of the provided clinical trials specifically target these conditions or have inclusion criteria that closely match her profile. The trials focus on rabies vaccination, breast cancer, mild cognitive impairment, hepatocellular carcinoma, and pediatric laryngeal microsurgery, which are not relevant to her current medical conditions. Additionally, some trials have specific age ranges or other criteria that exclude this patient. As a result, there are no suitable matches with a compatibility score of 70 or higher.', type='text')]...
2024-08-08 17:04:53,147 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text='After analyzing the patient profile and clinical trial data, I have determined that there are no trials that match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:\n\n[]\n\nExplanation:\nThe patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. None of the provided clinical trials specifically target these conditions or have inclusion criteria that closely match her profile. The trials focus on rabies vaccination, breast cancer, mild cognitive impairment, hepatocellular carcinoma, and pediatric laryngeal microsurgery, which are not relevant to her current medical conditions. Additionally, some trials have specific age ranges or other criteria that exclude this patient. As a result, there are no suitable matches with a compatibility score of 70 or higher.', type='text')]
2024-08-08 17:04:53,147 - app.services.anthropic_service - INFO - Parsing response: After analyzing the patient profile and clinical trial data, I have determined that there are no trials that match this patient with a compatibility score of 70 or higher. Therefore, the output is an empty array:

[]

Explanation:
The patient, Emily Johnson, is a 38-year-old female with Type 2 Diabetes, Hypertension, and Asthma. None of the provided clinical trials specifically target these conditions or have inclusion criteria that closely match her profile. The trials focus on rabies vaccination, breast cancer, mild cognitive impairment, hepatocellular carcinoma, and pediatric laryngeal microsurgery, which are not relevant to her current medical conditions. Additionally, some trials have specific age ranges or other criteria that exclude this patient. As a result, there are no suitable matches with a compatibility score of 70 or higher.
2024-08-08 17:04:53,148 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:04:53,148 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:04:53,148 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 2
2024-08-08 17:04:53,149 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1650, Total trials: 5175
2024-08-08 17:04:54,329 - app.services.trial_matching_service - INFO - Processing batch of 50 trials for user 66b5317dedf1eada14fb290b
2024-08-08 17:04:54,360 - app.services.anthropic_service - INFO - Sending request to Anthropic API
2024-08-08 17:04:54,361 - app.services.anthropic_service - INFO - Invoking Anthropic model
2024-08-08 17:05:03,163 - app.services.trial_matching_service - INFO - Stop signal sent for user 66b5317dedf1eada14fb290b
2024-08-08 17:05:05,025 - app.services.anthropic_service - INFO - Received response from Anthropic model
2024-08-08 17:05:05,026 - app.services.anthropic_service - INFO - Received response from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNone of the provided clinical trials have a compatibility score of 70 or higher for the given patient profile. Here's a brief explanation for each trial:\n\n1. NCT05302479 (Validating a Modified COMPASS 31questionnaire for Treatment Outcomes):\n   - This trial focuses on headaches and post-concussive symptoms, which are not present in Emily's medical conditions.\n   - Compatibility score would be below 70.\n\n2. NCT06468579 (To Evaluate the Safety, Tolerability and PK of GT20029 Gel and Solution in Healthy Subjects):\n   - This trial is for healthy subjects and focuses on acne and alopecia, which are not relevant to Emily's conditions.\n   - Emily has multiple medical conditions, making her ineligible for a healthy subject trial.\n   - Compatibility score would be below 70.\n\n3. NCT02708979 (Stress and Eating Behavior Among University Students):\n   - This trial focuses on stress and eating behavior in university students.\n   - Emily is 38 years old (born in 1985) and likely not a university student.\n   - The trial doesn't address any of Emily's specific medical conditions.\n   - Compatibility score would be below 70.\n\nNone of these trials are closely related to Emily's primary medical conditions (Type 2 Diabetes, Hypertension, and Asthma) or her current medications. Therefore, no trials meet the threshold of a 70 or higher compatibility score.", type='text')]...
2024-08-08 17:05:05,027 - app.services.anthropic_service - INFO - Received list output from Anthropic API: [TextBlock(text="Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:\n\n[]\n\nExplanation:\nNone of the provided clinical trials have a compatibility score of 70 or higher for the given patient profile. Here's a brief explanation for each trial:\n\n1. NCT05302479 (Validating a Modified COMPASS 31questionnaire for Treatment Outcomes):\n   - This trial focuses on headaches and post-concussive symptoms, which are not present in Emily's medical conditions.\n   - Compatibility score would be below 70.\n\n2. NCT06468579 (To Evaluate the Safety, Tolerability and PK of GT20029 Gel and Solution in Healthy Subjects):\n   - This trial is for healthy subjects and focuses on acne and alopecia, which are not relevant to Emily's conditions.\n   - Emily has multiple medical conditions, making her ineligible for a healthy subject trial.\n   - Compatibility score would be below 70.\n\n3. NCT02708979 (Stress and Eating Behavior Among University Students):\n   - This trial focuses on stress and eating behavior in university students.\n   - Emily is 38 years old (born in 1985) and likely not a university student.\n   - The trial doesn't address any of Emily's specific medical conditions.\n   - Compatibility score would be below 70.\n\nNone of these trials are closely related to Emily's primary medical conditions (Type 2 Diabetes, Hypertension, and Asthma) or her current medications. Therefore, no trials meet the threshold of a 70 or higher compatibility score.", type='text')]
2024-08-08 17:05:05,028 - app.services.anthropic_service - INFO - Parsing response: Based on the patient profile and clinical trial data provided, I've analyzed the compatibility. Here's the result:

[]

Explanation:
None of the provided clinical trials have a compatibility score of 70 or higher for the given patient profile. Here's a brief explanation for each trial:

1. NCT05302479 (Validating a Modified COMPASS 31questionnaire for Treatment Outcomes):
   - This trial focuses on headaches and post-concussive symptoms, which are not present in Emily's medical conditions.
   - Compatibility score would be below 70.

2. NCT06468579 (To Evaluate the Safety, Tolerability and PK of GT20029 Gel and Solution in Healthy Subjects):
   - This trial is for healthy subjects and focuses on acne and alopecia, which are not relevant to Emily's conditions.
   - Emily has multiple medical conditions, making her ineligible for a healthy subject trial.
   - Compatibility score would be below 70.

3. NCT02708979 (Stress and Eating Behavior Among University Students):
   - This trial focuses on stress and eating behavior in university students.
   - Emily is 38 years old (born in 1985) and likely not a university student.
   - The trial doesn't address any of Emily's specific medical conditions.
   - Compatibility score would be below 70.

None of these trials are closely related to Emily's primary medical conditions (Type 2 Diabetes, Hypertension, and Asthma) or her current medications. Therefore, no trials meet the threshold of a 70 or higher compatibility score.
2024-08-08 17:05:05,028 - app.services.anthropic_service - INFO - Validated 0 out of 0 matches
2024-08-08 17:05:05,029 - app.services.anthropic_service - INFO - Parsed 0 matches from Anthropic response
2024-08-08 17:05:05,029 - app.services.trial_matching_service - INFO - Processed batch. Total matches so far: 2
2024-08-08 17:05:05,030 - app.services.trial_matching_service - INFO - Moving to next batch. Skip: 1700, Total trials: 5175
2024-08-08 17:05:06,038 - app.services.trial_matching_service - INFO - Matching process completed for user 66b5317dedf1eada14fb290b. Total new matches: 2
2024-08-08 17:05:07,791 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:05:08,412 - app.database - INFO - Database connection established successfully
2024-08-08 17:05:53,753 - app.routes.patient - INFO - Fetching profile for user: 66b5317dedf1eada14fb290b
2024-08-08 17:05:53,754 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:05:54,071 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:05:54,416 - app.database - INFO - Database connection established successfully
2024-08-08 17:05:54,479 - app.routes.patient - INFO - Profile found for user: 66b5317dedf1eada14fb290b
2024-08-08 17:05:54,762 - app.database - INFO - Database connection established successfully
2024-08-08 17:05:54,828 - app.routes.patient - INFO - Fetching profile for user: 66b5317dedf1eada14fb290b
2024-08-08 17:05:54,829 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:05:55,140 - app.database - INFO - Attempting to establish database connection...
2024-08-08 17:05:55,429 - app.database - INFO - Database connection established successfully
2024-08-08 17:05:55,486 - app.routes.patient - INFO - Profile found for user: 66b5317dedf1eada14fb290b
2024-08-08 17:05:55,701 - app.database - INFO - Database connection established successfully
